"use strict";
(globalThis["webpackChunk_masknet_extension"] = globalThis["webpackChunk_masknet_extension"] || []).push([[9239],{

/***/ 94268:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TestUtils": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.kW),
/* harmony export */   "VERSION": () => (/* binding */ j),
/* harmony export */   "WalletUtils": () => (/* binding */ Cn),
/* harmony export */   "account": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.JT),
/* harmony export */   "arg": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.R9),
/* harmony export */   "args": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.WC),
/* harmony export */   "atBlockHeight": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.o9),
/* harmony export */   "atBlockId": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.$x),
/* harmony export */   "authenticate": () => (/* binding */ An),
/* harmony export */   "authorization": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.jL),
/* harmony export */   "authorizations": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.KX),
/* harmony export */   "authz": () => (/* binding */ On),
/* harmony export */   "build": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.J_),
/* harmony export */   "cadence": () => (/* reexport safe */ _onflow_util_template__WEBPACK_IMPORTED_MODULE_6__.X),
/* harmony export */   "cdc": () => (/* reexport safe */ _onflow_util_template__WEBPACK_IMPORTED_MODULE_6__.X),
/* harmony export */   "config": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.vc),
/* harmony export */   "createSignableVoucher": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.c0),
/* harmony export */   "currentUser": () => (/* binding */ Qe),
/* harmony export */   "decode": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.Jx),
/* harmony export */   "discovery": () => (/* binding */ Rn),
/* harmony export */   "display": () => (/* reexport safe */ _onflow_util_address__WEBPACK_IMPORTED_MODULE_3__.jf),
/* harmony export */   "events": () => (/* binding */ vn),
/* harmony export */   "getAccount": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.D0),
/* harmony export */   "getBlock": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.Qg),
/* harmony export */   "getBlockByHeight": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.xT),
/* harmony export */   "getBlockById": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.VX),
/* harmony export */   "getBlockHeader": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.Nx),
/* harmony export */   "getCollection": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__._N),
/* harmony export */   "getEvents": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.vw),
/* harmony export */   "getEventsAtBlockHeightRange": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.oL),
/* harmony export */   "getEventsAtBlockIds": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.aU),
/* harmony export */   "getLatestBlock": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.zH),
/* harmony export */   "getTransaction": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.fo),
/* harmony export */   "getTransactionStatus": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.Lv),
/* harmony export */   "invariant": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.kG),
/* harmony export */   "isBad": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.Pe),
/* harmony export */   "isOk": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.IY),
/* harmony export */   "latestBlock": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__._Y),
/* harmony export */   "limit": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.b9),
/* harmony export */   "logIn": () => (/* binding */ Nn),
/* harmony export */   "mutate": () => (/* binding */ ln),
/* harmony export */   "param": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.wu),
/* harmony export */   "params": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.f),
/* harmony export */   "payer": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.$C),
/* harmony export */   "ping": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.qE),
/* harmony export */   "pipe": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.zG),
/* harmony export */   "proposer": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.iB),
/* harmony export */   "query": () => (/* binding */ U),
/* harmony export */   "reauthenticate": () => (/* binding */ Dn),
/* harmony export */   "ref": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.iH),
/* harmony export */   "sansPrefix": () => (/* reexport safe */ _onflow_util_address__WEBPACK_IMPORTED_MODULE_3__.CH),
/* harmony export */   "script": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__._v),
/* harmony export */   "send": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.Jd),
/* harmony export */   "serialize": () => (/* binding */ dn),
/* harmony export */   "signUp": () => (/* binding */ Ln),
/* harmony export */   "t": () => (/* binding */ jn),
/* harmony export */   "transaction": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.PS),
/* harmony export */   "tx": () => (/* binding */ cn),
/* harmony export */   "unauthenticate": () => (/* binding */ In),
/* harmony export */   "validator": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.sC),
/* harmony export */   "verifyUserSignatures": () => (/* binding */ De),
/* harmony export */   "why": () => (/* reexport safe */ _portto_sdk__WEBPACK_IMPORTED_MODULE_0__.zq),
/* harmony export */   "withPrefix": () => (/* reexport safe */ _onflow_util_address__WEBPACK_IMPORTED_MODULE_3__.dq)
/* harmony export */ });
/* harmony import */ var _portto_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96425);
/* harmony import */ var _onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(73440);
/* harmony import */ var _onflow_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(48392);
/* harmony import */ var _onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(56688);
/* harmony import */ var _onflow_util_address__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(64864);
/* harmony import */ var _onflow_rlp__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(78659);
/* harmony import */ var _onflow_util_uid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(54615);
/* harmony import */ var _onflow_util_template__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(61805);
/* provided dependency */ var Buffer = __webpack_require__(15313)["Buffer"];
var N=function(e){try{return Promise.resolve((0,_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config */ .vc)().where(e)).then(function(n){return Object.fromEntries(Object.entries(n).map(function(n){var r=n[1];return[n[0].replace(e,""),r]}))})}catch(e){return Promise.reject(e)}},O={can:!("undefined"==typeof window),get:function(e){try{return Promise.resolve(JSON.parse(sessionStorage.getItem(e)))}catch(e){return Promise.reject(e)}},put:function(e,n){try{return Promise.resolve(sessionStorage.setItem(e,JSON.stringify(n)))}catch(e){return Promise.reject(e)}}};(0,_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config */ .vc)({"discovery.wallet.method.default":"IFRAME/RPC","fcl.storage.default":O});var j="0.0.78-alpha.8",k=function(e){return function(n){return typeof n===e}},F=function(e){return null!=e},x=k("object"),T=k("string"),_=k("function"),M=k("number");function V(n){return _(n)?n(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .arg */ .R9,_onflow_types__WEBPACK_IMPORTED_MODULE_1__):[]}var U=function(n){void 0===n&&(n={});try{return Promise.resolve(function(n){try{return (0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(F(n.cadence),"query({ cadence }) -- cadence is required"),(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(T(n.cadence),"query({ cadence }) -- cadence must be a string"),Promise.resolve(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config.get */ .vc.get("accessNode.api")).then(function(e){(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(e,'Required value for "accessNode.api" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration')})}catch(e){return Promise.reject(e)}}(n)).then(function(){return _portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .send */ .Jd([_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .script */ ._v(n.cadence),_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .args */ .WC(V(n.args||[])),n.limit&&"number"==typeof n.limit&&_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .limit */ .b9(n.limit)]).then(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .decode */ .Jx)})}catch(e){return Promise.reject(e)}};function H(){return H=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},H.apply(this,arguments)}function W(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function z(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return W(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var t=0;return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var B={f_type:"Service",f_vsn:"1.0.0"},Y={f_type:"Identity",f_vsn:"1.0.0"},J={f_type:"USER",f_vsn:"1.0.0"},K={f_type:"PollingResponse",f_vsn:"1.0.0"},q={f_type:"CompositeSignature",f_vsn:"1.0.0"};function G(e){return null==e?null:"1.0.0"===e.f_vsn?e:H({old:e},B,{type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}})}function X(e){return null==e?null:"1.0.0"===e.f_vsn?e:H({},B,{type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}})}function Z(e){return null==e?null:(null==e.method&&(e=H({},e,{type:"local-view",method:"VIEW/IFRAME"})),"1.0.0"===e.f_vsn?e:H({},B,{type:e.type||"local-view",method:e.method,endpoint:e.endpoint,data:e.data||{},params:e.params||{}}))}var $={"back-channel-rpc":X,"pre-authz":function(e){return null==e?null:"1.0.0"===e.f_vsn?e:H({},B,{type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:H({},Y,{address:(0,_onflow_util_address__WEBPACK_IMPORTED_MODULE_3__/* .withPrefix */ .dq)(e.addr),keyId:e.keyId}),params:e.params,data:e.data})},authz:function(e){return null==e?null:"1.0.0"===e.f_vsn?e:H({},B,{type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:H({},Y,{address:(0,_onflow_util_address__WEBPACK_IMPORTED_MODULE_3__/* .withPrefix */ .dq)(e.addr),keyId:e.keyId}),params:e.params,data:e.data})},authn:function(e){return null==e?null:"1.0.0"===e.f_vsn?e:H({},B,{type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:(0,_onflow_util_address__WEBPACK_IMPORTED_MODULE_3__/* .withPrefix */ .dq)(e.addr),name:e.name,icon:e.icon}})},frame:G,"open-id":function(e){return null==e?null:"1.0.0"===e.f_vsn?e:null},"user-signature":function(e){if(null==e)return null;if("1.0.0"===e.f_vsn)return e;throw new Error("Invalid user-signature service")},"local-view":Z,"account-proof":function(e){if(null==e)return null;if("1.0.0"===e.f_vsn)return e;throw new Error("Invalid account-proof service")}};function Q(e){return _onflow_rlp__WEBPACK_IMPORTED_MODULE_4__/* .encode */ .cv([e.provider.address||e.provider.name||"UNSPECIFIED",e.id]).toString("hex")}function ee(e,n){return void 0===e&&(e=[]),e.find(function(e){return e.type===n})}function ne(e){var n=new URL(e.endpoint);if(n.searchParams.append("l6n",window.location.origin),null!=e.params)for(var r=0,t=Object.entries(e.params||{});r<t.length;r++){var o=t[r];n.searchParams.append(o[0],o[1])}return n}function re(e,n){void 0===n&&(n={});var r=n.method||"POST",t="GET"===r?void 0:JSON.stringify(n.data||e.data||{});return fetch(ne(e),{method:r,headers:H({},e.headers||{},n.headers||{},{"Content-Type":"application/json"}),body:t}).then(function(e){return e.json()})}function te(e){var n,r;return null==e?null:"1.0.0"===e.f_vsn?e:H({},K,{status:null!=(n=e.status)?n:"APPROVED",reason:null!=(r=e.reason)?r:null,data:e.compositeSignature||e.data||H({},e)||{},updates:X(e.authorizationUpdates),local:G((e.local||[])[0])})}var oe=function e(n,r){void 0===r&&(r=function(){return!0});try{if((0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(n,"Missing Polling Service",{service:n}),!r())throw new Error("Externally Halted");return Promise.resolve(re(n,{method:se(n)}).then(te)).then(function(n){switch(n.status){case"APPROVED":return n.data;case"DECLINED":throw new Error("Declined: "+(n.reason||"No reason supplied."));default:return Promise.resolve(new Promise(function(e){return setTimeout(e,500)})).then(function(){return e(n.updates,r)})}})}catch(e){return Promise.reject(e)}},ie={"HTTP/GET":"GET","HTTP/POST":"POST"},se=function(e){return (0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(ie[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),ie[e.method]},ae="FCL_IFRAME";function ce(e){(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(!document.getElementById(ae),"Attempt at triggering multiple Frames",{src:e});var n=document.createElement("iframe");return n.src=e,n.id=ae,n.allow="usb *; hid *",n.frameBorder="0",n.style.cssText="\n  position:fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  height: 100vh;\n  width: 100vw;\n  display:block;\n  background:rgba(0,0,0,0.25);\n  z-index: 2147483647;\n  box-sizing: border-box;\n",document.body.append(n),[n.contentWindow,function(){document.getElementById(ae)&&document.getElementById(ae).remove()}]}var ue=null,le=null;function de(e){var n,r;return null==ue||null!=(n=ue)&&n.closed?(r=window,ue=r.open(e,"FCL_POP","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=640, height=770, top="+(r.top.outerHeight/2+r.top.screenY-385)+", left="+(r.top.outerWidth/2+r.top.screenX-320))):le!==e?(ue.location.replace(e),ue.focus()):ue.focus(),le=e,[ue,function(){ue&&!ue.closed&&ue.close(),ue=null}]}var fe=null,pe=null;function he(e){var n;return null==fe||null!=(n=fe)&&n.closed?fe=window.open(e,"_blank"):pe!==e?(fe.location.replace(e),fe.focus()):fe.focus(),pe=e,[fe,function(){fe&&!fe.closed&&fe.close(),fe=null}]}var ve,me={"VIEW/IFRAME":ce,"VIEW/POP":de,"VIEW/TAB":he},ye=function(e,n,r){try{var t={params:e.params,data:e.data,type:e.type};return Promise.resolve(N(/^service\./)).then(function(r){return Promise.resolve(N(/^app\.detail\./)).then(function(o){return Promise.resolve(re(e,{data:H({fclVersion:j,service:t,config:{services:r,app:o}},n)}).then(te)).then(function(n){if("APPROVED"===n.status)return n.data;if("DECLINED"===n.status)throw new Error("Declined: "+(n.reason||"No reason supplied."));if("REDIRECT"===n.status)return n;if("PENDING"===n.status){var r=!0;return Promise.resolve(function(e,n){void 0===n&&(n={});try{try{return Promise.resolve(me[e.method](ne(e),n))}catch(r){throw console.error("execLocal({service, opts = {}})",r,{service:e,opts:n}),r}}catch(e){return Promise.reject(e)}}(Z(n.local))).then(function(e){var t=e[1],o=function(){try{t(),r=!1}catch(e){console.error("Frame Close Error",e)}};return oe(n.updates,function(){return r}).then(function(e){return o(),e}).catch(function(e){throw console.error(e),o(),e})})}throw console.error("Auto Decline: Invalid Response",{service:e,resp:n}),new Error("Auto Decline: Invalid Response")})})})}catch(e){return Promise.reject(e)}},ge=function(e){return"string"==typeof e&&e.toLowerCase()},Ee=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]),Pe=function(e,n){return console.warn("DEPRECATION NOTICE","Received "+e+", please use "+n+" for this and future versions of FCL")},Re=function(e){var n=e.close,r=e.send,t=e.onReady,o=e.onResponse,i=e.onMessage;return function(e){try{if("object"!=typeof e.data)return;if(Ee.has(e.data.type))return;ge(e.data.type)===ge("FCL:VIEW:CLOSE")&&n(),ge(e.data.type)===ge("FCL:VIEW:READY")&&t(e,{send:r,close:n}),ge(e.data.type)===ge("FCL:VIEW:RESPONSE")&&o(e,{send:r,close:n}),i(e,{send:r,close:n}),ge(e.data.type)===ge("FCL:FRAME:READY")&&(Pe(e.data.type,"FCL:VIEW:READY"),t(e,{send:r,close:n})),ge(e.data.type)===ge("FCL:FRAME:RESPONSE")&&(Pe(e.data.type,"FCL:VIEW:RESPONSE"),o(e,{send:r,close:n})),ge(e.data.type)===ge("FCL:FRAME:CLOSE")&&(Pe(e.data.type,"FCL:VIEW:CLOSE"),n()),ge(e.data.type)===ge("FCL::CHALLENGE::RESPONSE")&&(Pe(e.data.type,"FCL:VIEW:RESPONSE"),o(e,{send:r,close:n})),ge(e.data.type)===ge("FCL::AUTHZ_READY")&&(Pe(e.data.type,"FCL:VIEW:READY"),t(e,{send:r,close:n})),ge(e.data.type)===ge("FCL::CHALLENGE::CANCEL")&&(Pe(e.data.type,"FCL:VIEW:CLOSE"),n()),ge(e.data.type)===ge("FCL::CANCEL")&&(Pe(e.data.type,"FCL:VIEW:CLOSE"),n())}catch(e){console.error("Frame Callback Error",e),n()}}},we=function(){},be=function(){},Se=function(){},Ce=function(){},Ae=function e(n){var r=n.service,t=n.msg,o=void 0===t?{}:t,i=n.opts,s=void 0===i?{}:i;try{return Promise.resolve(function(n,t){try{var i=Promise.resolve(Ie[r.method](r,o,s)).then(function(n){return"REDIRECT"===n.status?((0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(r.type===n.data.type,"Cannot shift recursive service type in execService"),r=n.data,Promise.resolve(e({service:r,msg:o,opts:s}))):n})}catch(e){return t(e)}return i&&i.then?i.then(void 0,t):i}(0,function(e){throw console.error("execService({service, msg = {}, opts = {}})",e,{service:r,msg:o,opts:s}),e}))}catch(e){return Promise.reject(e)}},Ie={"HTTP/RPC":ye,"HTTP/POST":ye,"IFRAME/RPC":function(e,n,r){return new Promise(function(t,o){var i,s=(0,_onflow_util_uid__WEBPACK_IMPORTED_MODULE_5__/* .uid */ .h)(),a=r.includeOlderJsonRpcCall;n.data=null!=(i=e.data)?i:null,function(e,n){if(void 0===n&&(n={}),null==e)return{send:we,close:we};var r=n.onClose||we;window.addEventListener("message",Re({close:s,send:a,onReady:n.onReady||we,onResponse:n.onResponse||we,onMessage:n.onMessage||we}));var t=ce(ne(e)),o=t[0],i=t[1];return{send:a,close:s};function s(){try{window.removeEventListener("message",Re),i(),r()}catch(e){console.error("Frame Close Error",e)}}function a(e){try{o.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(n){console.error("Frame Send Error",e,n)}}}(e,{onReady:function(r,t){var o=t.send;try{return Promise.resolve(function(e,n){try{var r=e()}catch(e){return n(e)}return r&&r.then?r.then(void 0,n):r}(function(){var r={params:e.params,data:e.data,type:e.type};return Promise.resolve(N(/^service\./)).then(function(t){return Promise.resolve(N(/^app\.detail\./)).then(function(i){o({fclVersion:j,type:"FCL:VIEW:READY:RESPONSE",body:n,service:r,config:{services:t,app:i}});var c={params:e.params,data:e.data,type:e.type};return Promise.resolve(N(/^service\./)).then(function(r){return Promise.resolve(N(/^app\.detail\./)).then(function(t){o({fclVersion:j,type:"FCL:FRAME:READY:RESPONSE",body:n,service:c,config:{services:r,app:t},deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),a&&o({jsonrpc:"2.0",id:s,method:"fcl:sign",params:[n,e.params],deprecated:{message:"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}})})})})})},function(e){throw e}))}catch(e){return Promise.reject(e)}},onResponse:function(e,n){var r=n.close;try{if("object"!=typeof e.data)return;var i=te(e.data);switch(i.status){case"APPROVED":t(i.data),r();break;case"DECLINED":o("Declined: "+(i.reason||"No reason supplied")),r();break;case"REDIRECT":t(i),r();break;default:o("Declined: No reason supplied"),r()}}catch(e){throw console.error("execIframeRPC onResponse error",e),e}},onMessage:function(e,n){var r=n.close;try{if("object"!=typeof e.data)return;if("2.0"!==e.data.jsonrpc)return;if(e.data.id!==s)return;var i=te(e.data.result);switch(i.status){case"APPROVED":t(i.data),r();break;case"DECLINED":o("Declined: "+(i.reason||"No reason supplied")),r();break;case"REDIRECT":t(i),r();break;default:o("Declined: No reason supplied"),r()}}catch(e){throw console.error("execIframeRPC onMessage error",e),e}},onClose:function(){o("Declined: Externally Halted")}})})},"POP/RPC":function(e,n,r){return new Promise(function(t,o){var i=(0,_onflow_util_uid__WEBPACK_IMPORTED_MODULE_5__/* .uid */ .h)(),s=r.redir,a=r.includeOlderJsonRpcCall;n.data=e.data,function(e,n){if(void 0===n&&(n={}),null==e)return{send:be,close:be};var r=n.onClose||be;window.addEventListener("message",Re({close:a,send:c,onReady:n.onReady||be,onResponse:n.onResponse||be,onMessage:n.onMessage||be}));var t=de(ne(e)),o=t[0],i=t[1],s=setInterval(function(){o&&o.closed&&a()},500);return{send:c,close:a};function a(){try{window.removeEventListener("message",Re),clearInterval(s),i(),r()}catch(e){console.error("Popup Close Error",e)}}function c(e){try{o.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(n){console.error("Popup Send Error",e,n)}}}(e,{onReady:function(r,t){var o=t.send;try{return Promise.resolve(function(e,n){try{var r=e()}catch(e){return n(e)}return r&&r.then?r.then(void 0,n):r}(function(){var r={params:e.params,data:e.data,type:e.type};return Promise.resolve(N(/^service\./)).then(function(t){return Promise.resolve(N(/^app\.detail\./)).then(function(s){o({fclVersion:j,type:"FCL:VIEW:READY:RESPONSE",body:n,service:r,config:{services:t,app:s}});var c={params:e.params,data:e.data,type:e.type};return Promise.resolve(N(/^service\./)).then(function(r){return Promise.resolve(N(/^app\.detail\./)).then(function(t){o({fclVersion:j,type:"FCL:FRAME:READY:RESPONSE",body:n,service:c,config:{services:r,app:t},deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),a&&o({jsonrpc:"2.0",id:i,method:"fcl:sign",params:[n,e.params]})})})})})},function(e){throw e}))}catch(e){return Promise.reject(e)}},onResponse:function(e,n){var r=n.close;try{if("object"!=typeof e.data)return;var i=te(e.data);switch(i.status){case"APPROVED":t(i.data),!s&&r();break;case"DECLINED":o("Declined: "+(i.reason||"No reason supplied")),r();break;case"REDIRECT":t(i),r();break;default:o("Declined: No reason supplied"),r()}}catch(e){throw console.error("execPopRPC onResponse error",e),e}},onMessage:function(e,n){var r=n.close;try{if("object"!=typeof e.data)return;if("2.0"!==e.data.jsonrpc)return;if(e.data.id!==i)return;var a=te(e.data.result);switch(a.status){case"APPROVED":t(a.data),!s&&r();break;case"DECLINED":o("Declined: "+(a.reason||"No reason supplied")),r();break;case"REDIRECT":t(a),r();break;default:o("Declined: No reason supplied"),r()}}catch(e){throw console.error("execPopRPC onMessage error",e),e}},onClose:function(){o("Declined: Externally Halted")}})})},"TAB/RPC":function(e,n,r){return new Promise(function(t,o){var i=(0,_onflow_util_uid__WEBPACK_IMPORTED_MODULE_5__/* .uid */ .h)(),s=r.redir,a=r.includeOlderJsonRpcCall;n.data=e.data,function(e,n){if(void 0===n&&(n={}),null==e)return{send:Se,close:Se};var r=n.onClose||Se;window.addEventListener("message",Re({close:a,send:c,onReady:n.onReady||Se,onResponse:n.onResponse||Se,onMessage:n.onMessage||Se}));var t=he(ne(e)),o=t[0],i=t[1],s=setInterval(function(){o&&o.closed&&a()},500);return{send:c,close:a};function a(){try{window.removeEventListener("message",Re),clearInterval(s),i(),r()}catch(e){console.error("Tab Close Error",e)}}function c(e){try{o.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(n){console.error("Tab Send Error",e,n)}}}(e,{onReady:function(r,t){var o=t.send;try{return Promise.resolve(function(e,n){try{var r=e()}catch(e){return n(e)}return r&&r.then?r.then(void 0,n):r}(function(){var r={params:e.params,data:e.data,type:e.type};return Promise.resolve(N(/^service\./)).then(function(t){return Promise.resolve(N(/^app\.detail\./)).then(function(s){o({fclVersion:j,type:"FCL:VIEW:READY:RESPONSE",body:n,service:r,config:{services:t,app:s}});var c={params:e.params,data:e.data,type:e.type};return Promise.resolve(N(/^service\./)).then(function(r){return Promise.resolve(N(/^app\.detail\./)).then(function(t){o({fclVersion:j,type:"FCL:FRAME:READY:RESPONSE",body:n,service:c,config:{services:r,app:t},deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),a&&o({jsonrpc:"2.0",id:i,method:"fcl:sign",params:[n,e.params]})})})})})},function(e){throw e}))}catch(e){return Promise.reject(e)}},onResponse:function(e,n){var r=n.close;try{if("object"!=typeof e.data)return;var i=te(e.data);switch(i.status){case"APPROVED":t(i.data),!s&&r();break;case"DECLINED":o("Declined: "+(i.reason||"No reason supplied")),r();break;case"REDIRECT":t(i),r();break;default:o("Declined: No reason supplied"),r()}}catch(e){throw console.error("execPopRPC onResponse error",e),e}},onMessage:function(e,n){var r=n.close;try{if("object"!=typeof e.data)return;if("2.0"!==e.data.jsonrpc)return;if(e.data.id!==i)return;var a=te(e.data.result);switch(a.status){case"APPROVED":t(a.data),!s&&r();break;case"DECLINED":o("Declined: "+(a.reason||"No reason supplied")),r();break;case"REDIRECT":t(a),r();break;default:o("Declined: No reason supplied"),r()}}catch(e){throw console.error("execPopRPC onMessage error",e),e}},onClose:function(){o("Declined: Externally Halted")}})})},"EXT/RPC":function(e,n,r){return new Promise(function(r,t){!function(e,n){void 0===n&&(n={});try{var r,t=function(){try{window.removeEventListener("message",Re),s()}catch(e){console.error("Extension Close Error",e)}},o=function(e){try{var n;null==(n=window[i])||n.flow.send(JSON.parse(JSON.stringify(e||{})))}catch(n){console.error("Extension Send Error",e,n)}};if(null==e)return Promise.resolve({send:Ce,close:Ce});var i=e.endpoint,s=n.onClose||Ce;window.addEventListener("message",Re({close:t,send:o,onReady:n.onReady||Ce,onResponse:n.onResponse||Ce,onMessage:n.onMessage||Ce})),Promise.resolve(null==(r=window[i])?void 0:r.flow.enable()).then(function(){return{send:o,close:t}})}catch(e){return Promise.reject(e)}}(e,{onReady:function(r,t){var o=t.send;try{return Promise.resolve(function(e,n){try{var r=e()}catch(e){return n(e)}return r&&r.then?r.then(void 0,n):r}(function(){var r={params:e.params,data:e.data,type:e.type};return Promise.resolve(N(/^service\./)).then(function(e){return Promise.resolve(N(/^app\.detail\./)).then(function(t){o({fclVersion:j,type:"FCL:VIEW:READY:RESPONSE",body:n,service:r,config:{services:e,app:t}})})})},function(e){throw e}))}catch(e){return Promise.reject(e)}},onResponse:function(e,n){var o=n.close;try{if("object"!=typeof e.data)return;var i=te(e.data);switch(i.status){case"APPROVED":r(i.data),o();break;case"DECLINED":t("Declined: "+(i.reason||"No reason supplied")),o();break;case"REDIRECT":r(i),o();break;default:t("Declined: No reason supplied"),o()}}catch(e){throw console.error("execExtRPC onResponse error",e),e}},onClose:function(){t("Declined: Externally Halted")}})})}},De=function(e,n){try{(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(Array.isArray(n),"Must include an Array of composite signatures");var t=[],o=[],i=[],s=[];return Promise.resolve(Promise.all(n.map(function(e){try{return (0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)("string"==typeof e.addr,"addr must be a string"),(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)("number"==typeof e.keyId,"keyId must be a number"),(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)("string"==typeof e.signature,"signature must be a string"),Promise.resolve(function(n,a){try{var c=Promise.resolve((0,_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .account */ .JT)(e.addr)).then(function(n){return t.push(n.keys[e.keyId].weight.toFixed(1)),o.push(n.keys[e.keyId].signAlgo),i.push(n.keys[e.keyId].hashAlgo),s.push(e.signature),n.keys[e.keyId].publicKey})}catch(e){return a(e)}return c&&c.then?c.then(void 0,a):c}(0,function(e){throw e}))}catch(e){return Promise.reject(e)}}))).then(function(n){return Promise.resolve(U({cadence:""+Le,args:function(r,a){return[r(e,a.String),r(n,a.Array([a.String])),r(t,a.Array(a.UFix64)),r(o,a.Array([a.UInt])),r(i,a.Array([a.UInt])),r(s,a.Array([a.String]))]}}))})}catch(e){return Promise.reject(e)}},Le="\n  import Crypto\n\n  pub fun getHashAlgo(_ x: Int): HashAlgorithm {\n    switch x {\n    case 1:\n        return HashAlgorithm.SHA2_256\n    case 2:\n        return HashAlgorithm.SHA2_384\n    case 3:\n        return HashAlgorithm.SHA3_256\n    case 4:\n        return HashAlgorithm.SHA3_384\n    case 5:\n        return HashAlgorithm.KMAC128_BLS_BLS12_381\n    default:\n        return HashAlgorithm.SHA3_256\n    }\n  }\n      \n  pub fun main(\n    message: String,\n    rawPublicKeys: [String],\n    weights: [UFix64],\n    signAlgos: [UInt],\n    hashAlgos: [UInt],\n    signatures: [String],\n  ): Bool {\n\n    let keyList = Crypto.KeyList()\n    \n    var i = 0\n    for rawPublicKey in rawPublicKeys {\n      keyList.add(\n        PublicKey(\n          publicKey: rawPublicKey.decodeHex(),\n          signatureAlgorithm: signAlgos[i] == 2 ? SignatureAlgorithm.ECDSA_P256 : SignatureAlgorithm.ECDSA_secp256k1 \n        ),\n        hashAlgorithm: getHashAlgo(Int(hashAlgos[i])),\n        weight: weights[i],\n      )\n      i = i + 1\n    }\n\n    let signatureSet: [Crypto.KeyListSignature] = []\n\n    var j = 0\n    for signature in signatures {\n      signatureSet.append(\n        Crypto.KeyListSignature(\n          keyIndex: j,\n          signature: signature.decodeHex()\n        )\n      )\n      j = j + 1\n    }\n      \n    let signedData = message.decodeHex()\n    \n    return keyList.verify(\n      signatureSet: signatureSet,\n      signedData: signedData\n    )\n  }\n";function Ne(e){return null==e?null:"1.0.0"===e.f_vsn?e:H({},q,{addr:(0,_onflow_util_address__WEBPACK_IMPORTED_MODULE_3__/* .sansPrefix */ .CH)(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId})}function Oe(e,n,r){if(!e.s){if(r instanceof Te){if(!r.s)return void(r.o=Oe.bind(null,e,n));1&n&&(n=r.s),r=r.v}if(r&&r.then)return void r.then(Oe.bind(null,e,n),Oe.bind(null,e,2));e.s=n,e.v=r;var t=e.o;t&&t(e)}}var je=function(e,n){try{return console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n    verifyUserSignatures is no longer exported as fcl.currentUser().verifyUserSignatures\n    and is now available as fcl.verifyUserSignatures\n    ============================\n    ","font-weight:bold;font-family:monospace;"),Promise.resolve(De(e,n))}catch(e){return Promise.reject(e)}},ke=function(e){try{return Ye(),Promise.resolve(Me({redir:!0})).then(function(n){var r=ee(n.services,"user-signature");return (0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(r,"Current user must have authorized a signing service."),Ve(function(){return Promise.resolve(Ae({service:r,msg:$e(e)})).then(function(e){return Array.isArray(e)?e.map(function(e){return Ne(e)}):[Ne(e)]})},function(e){return e})})}catch(e){return Promise.reject(e)}},Fe=function(){try{return Promise.resolve(Me()).then(function(e){return (0,_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .arg */ .R9)((0,_onflow_util_address__WEBPACK_IMPORTED_MODULE_3__/* .withPrefix */ .dq)(e.addr),_onflow_types__WEBPACK_IMPORTED_MODULE_1__.Address)})}catch(e){return Promise.reject(e)}},xe=function(e){try{return Ye(),Promise.resolve(Me({redir:!0})).then(function(n){var r=ee(n.services,"authz"),t=ee(n.services,"pre-authz");return H({},e,t?{tempId:"CURRENT_USER",resolve:function(e,n){try{return Promise.resolve(Ae({service:t,msg:n})).then(qe)}catch(e){return Promise.reject(e)}}}:{tempId:"CURRENT_USER",resolve:null,addr:(0,_onflow_util_address__WEBPACK_IMPORTED_MODULE_3__/* .sansPrefix */ .CH)(r.identity.address),keyId:r.identity.keyId,sequenceNum:null,signature:null,signingFunction:function(e){try{return Promise.resolve(Ae({service:r,msg:e,opts:{includeOlderJsonRpcCall:!0}})).then(Ne)}catch(e){return Promise.reject(e)}}})})}catch(e){return Promise.reject(e)}},Te=function(){function e(){}return e.prototype.then=function(n,r){var t=new e,o=this.s;if(o){var i=1&o?n:r;if(i){try{Oe(t,1,i(this.v))}catch(e){Oe(t,2,e)}return t}return this}return this.o=function(e){try{var o=e.v;1&e.s?Oe(t,1,n?n(o):o):r?Oe(t,1,r(o)):Oe(t,2,o)}catch(e){Oe(t,2,e)}},t},e}();function _e(e){return e instanceof Te&&1&e.s}var Me=function(e){var r=e.service,t=e.redir,o=void 0!==t&&t;try{return Promise.resolve(new Promise(function(e,t){try{return Ye(),Promise.resolve(Xe()).then(function(t){return t.loggedIn&&Je(t)?e(t):Promise.resolve(function(){try{return Promise.resolve(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config.first */ .vc.first(["discovery.wallet","challenge.handshake"])).then(function(e){return Promise.resolve(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config.first */ .vc.first(["discovery.wallet.method","discovery.wallet.method.default"])).then(function(r){return Promise.resolve(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config.get */ .vc.get("fcl.appDomainTag")).then(function(n){return{discoveryWallet:e,discoveryWalletMethod:r,appDomainTag:n}})})})}catch(e){return Promise.reject(e)}}()).then(function(t){var i=t.discoveryWallet,s=t.discoveryWalletMethod,a=t.appDomainTag;return (0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(r||i,'\n        If no service passed to "authenticate," then "discovery.wallet" must be defined in config.\n        See: "https://docs.onflow.org/fcl/reference/api/#setting-configuration-values"\n      '),Promise.resolve(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config.get */ .vc.get("fcl.warning.suppress.redir")).then(function(n){o&&!n&&console.warn("You are manually enabling a very experimental feature that is not yet standard, use at your own risk.\n         You can disable this warning by setting fcl.warning.suppress.redir to true in your config");var t=function(e,n){try{var t=Ve(function(){return Promise.resolve(Ae({service:r||{type:"authn",endpoint:i,method:s},msg:{timestamp:Date.now(),appDomainTag:a,extensions:window.fcl_extensions||[]},opts:{redir:o}})).then(function(e){return Promise.resolve(function(e){try{var n=(e=function(e){return e.addr=e.addr?(0,_onflow_util_address__WEBPACK_IMPORTED_MODULE_3__/* .withPrefix */ .dq)(e.addr):null,e.paddr=e.paddr?(0,_onflow_util_address__WEBPACK_IMPORTED_MODULE_3__/* .withPrefix */ .dq)(e.paddr):null,e}(e)).services||[];return Promise.resolve(function(e,n){try{if(null==e||null==n)return Promise.resolve([]);var r=new URL(e);return r.searchParams.append("code",n),Promise.resolve(fetch(r,{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()})).then(function(e){if(Array.isArray(e))return e;var n=[];if(Array.isArray(e.authorizations))for(var r,t=z(e.authorizations);!(r=t()).done;)n.push(H({type:"authz",keyId:e.keyId},r.value));return null!=e.provider&&n.push(H({type:"authn",id:"wallet-provider#authn"},e.provider)),n})}catch(e){return Promise.reject(e)}}(e.hks,e.code)).then(function(r){var t,o,i=(t=n,o=r,void 0===t&&(t=[]),void 0===o&&(o=[]),[].concat(t,o)).map(function(n){return function(e,n){try{return $[e.type](e,n)}catch(n){return console.error("Unrecognized FCL Service Type ["+e.type+"]",e,n),e}}(n,e)}),s=function(e,n){return n.find(function(e){return"authn"===e.type})}(0,i);return H({},J,{addr:(0,_onflow_util_address__WEBPACK_IMPORTED_MODULE_3__/* .withPrefix */ .dq)(e.addr),cid:Q(s),loggedIn:!0,services:i,expiresAt:e.expires})})}catch(e){return Promise.reject(e)}}(e)).then(function(e){(0,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .send */ .lW)(Ue,We,e)})})},function(e){console.error("Error while authenticating",e)})}catch(e){return n(!0,e)}return t&&t.then?t.then(n.bind(null,!1),n.bind(null,!0)):n(!1,t)}(0,function(n,r){return Promise.resolve(Xe()).then(function(t){if(e(t),n)throw r;return r})});if(t&&t.then)return t.then(function(){})})})})}catch(e){return Promise.reject(e)}}))}catch(e){return Promise.reject(e)}};function Ve(e,n){try{var r=e()}catch(e){return n(e)}return r&&r.then?r.then(void 0,n):r}var Ue="CURRENT_USER",He="CURRENT_USER/UPDATED",We="SET_CURRENT_USER",ze='{\n  "f_type": "User",\n  "f_vsn": "1.0.0",\n  "addr":null,\n  "cid":null,\n  "loggedIn":null,\n  "expiresAt":null,\n  "services":[]\n}',Be=((ve={})[_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .INIT */ .qg]=function(e){try{return"undefined"==typeof window&&console.warn('\n        %cFCL Warning\n        ============================\n        "currentUser" is only available in the browser.\n        For more info, please see the docs: https://docs.onflow.org/fcl/\n        ============================\n        ',"font-weight:bold;font-family:monospace;"),e.merge(JSON.parse(ze)),Promise.resolve(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config.first */ .vc.first(["fcl.storage","fcl.storage.default"])).then(function(n){var r=function(){if(n.can)return Promise.resolve(function(e){try{var n=JSON.parse(ze);return Promise.resolve(e.get(Ue)).then(function(r){return null!=r&&n.f_vsn!==r.f_vsn?(e.removeItem(Ue),n):r||n})}catch(e){return Promise.reject(e)}}(n)).then(function(n){Je(n)&&e.merge(n)})}();if(r&&r.then)return r.then(function(){})})}catch(e){return Promise.reject(e)}},ve[_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .SUBSCRIBE */ .kD]=function(e,n){e.subscribe(n.from),e.send(n.from,He,H({},e.all()))},ve[_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .UNSUBSCRIBE */ .By]=function(e,n){e.unsubscribe(n.from)},ve.SNAPSHOT=function(e,n){try{return n.reply(H({},e.all())),Promise.resolve()}catch(e){return Promise.reject(e)}},ve[We]=function(e,r,t){try{return e.merge(t),Promise.resolve(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config.first */ .vc.first(["fcl.storage","fcl.storage.default"])).then(function(n){n.can&&n.put(Ue,e.all()),e.broadcast(He,H({},e.all()))})}catch(e){return Promise.reject(e)}},ve.DEL_CURRENT_USER=function(e,r){try{return e.merge(JSON.parse(ze)),Promise.resolve(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config.first */ .vc.first(["fcl.storage","fcl.storage.default"])).then(function(n){n.can&&n.put(Ue,e.all()),e.broadcast(He,H({},e.all()))})}catch(e){return Promise.reject(e)}},ve),Ye=function(){return (0,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .spawn */ .Cs)(Be,Ue)};function Je(e){return null==e.expiresAt||0===e.expiresAt||e.expiresAt>Date.now()}function Ke(){Ye(),(0,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .send */ .lW)(Ue,"DEL_CURRENT_USER")}function qe(e){var n=function(e){return{f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:(e||{}).proposer,payer:(e||{}).payer||[],authorization:(e||{}).authorization||[]}}(e),r=[];null!=n.proposer&&r.push(["PROPOSER",n.proposer]);for(var t,o=z(n.payer||[]);!(t=o()).done;)r.push(["PAYER",t.value]);for(var i,s=z(n.authorization||[]);!(i=s()).done;)r.push(["AUTHORIZER",i.value]);return r.map(function(e){var n=e[0],r=e[1];return{tempId:[r.identity.address,r.identity.keyId].join("|"),addr:r.identity.address,keyId:r.identity.keyId,signingFunction:function(e){return Ae({service:r,msg:e})},role:{proposer:"PROPOSER"===n,payer:"PAYER"===n,authorizer:"AUTHORIZER"===n}}})}function Ge(e){Ye();var n="@EXIT",r=(0,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .spawn */ .Cs)(function(r){try{var t;return r.send(Ue,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .SUBSCRIBE */ .kD),Promise.resolve(function(e,n,r){for(var t;;){var o=e();if(_e(o)&&(o=o.v),!o)return i;if(o.then){t=0;break}var i=r();if(i&&i.then){if(!_e(i)){t=1;break}i=i.s}}var s=new Te,a=Oe.bind(null,s,2);return(0===t?o.then(u):1===t?i.then(c):(void 0).then(function(){(o=e())?o.then?o.then(u).then(void 0,a):u(o):Oe(s,1,i)})).then(void 0,a),s;function c(n){i=n;do{if(!(o=e())||_e(o)&&!o.v)return void Oe(s,1,i);if(o.then)return void o.then(u).then(void 0,a);_e(i=r())&&(i=i.v)}while(!i||!i.then);i.then(c).then(void 0,a)}function u(e){e?(i=r())&&i.then?i.then(c).then(void 0,a):c(i):Oe(s,1,i)}}(function(){return!t&&1},0,function(){return Promise.resolve(r.receive()).then(function(o){if(o.tag===n)return r.send(Ue,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .UNSUBSCRIBE */ .By),void(t=1);e(o.data)})}))}catch(e){return Promise.reject(e)}});return function(){return (0,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .send */ .lW)(r,n)}}function Xe(){return Ye(),(0,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .send */ .lW)(Ue,"SNAPSHOT",null,{expectReply:!0,timeout:0})}var Ze,$e=function(e){return (0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),{message:e}},Qe=function(){return{authenticate:Me,unauthenticate:Ke,authorization:xe,signUserMessage:ke,verifyUserSignatures:je,subscribe:Ge,snapshot:Xe,resolveArgument:Fe}};Qe.authenticate=Me,Qe.unauthenticate=Ke,Qe.authorization=xe,Qe.signUserMessage=ke,Qe.verifyUserSignatures=je,Qe.subscribe=Ge,Qe.snapshot=Xe,Qe.resolveArgument=Fe;var en=function(e){try{return Promise.resolve((0,_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .send */ .Jd)([(0,_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .getTransactionStatus */ .Lv)(e)]).then(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .decode */ .Jx))}catch(e){return Promise.reject(e)}},nn=function(e){return e.status>=4},rn=function(e){return e.status>=3},tn=function(e){return e.status>=2},on=((Ze={})[_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .INIT */ .qg]=function(e){try{return Promise.resolve(en(e.self())).then(function(n){nn(n)||setTimeout(function(){return e.sendSelf("POLL")},2500),e.merge(n)})}catch(e){return Promise.reject(e)}},Ze[_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .SUBSCRIBE */ .kD]=function(e,n){e.subscribe(n.from),e.send(n.from,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .UPDATED */ .SH,e.all())},Ze[_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .UNSUBSCRIBE */ .By]=function(e,n){e.unsubscribe(n.from)},Ze[_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .SNAPSHOT */ .kT]=function(e,n){try{return n.reply(e.all()),Promise.resolve()}catch(e){return Promise.reject(e)}},Ze.POLL=function(e){try{return Promise.resolve(en(e.self())).then(function(n){var r,t;nn(n)||setTimeout(function(){return e.sendSelf("POLL")},2500),r=e.all(),t=n,JSON.stringify(r)!==JSON.stringify(t)&&e.broadcast(_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .UPDATED */ .SH,n),e.merge(n)})}catch(e){return Promise.reject(e)}},Ze),sn=function(e){if("object"==typeof e&&(e=e.transactionId),null==e)throw new Error("transactionId required");return e},an=function(e){return (0,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .spawn */ .Cs)(on,sn(e))};function cn(e){function n(n){return (0,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .subscriber */ .qP)(sn(e),an,n)}function r(e){return function(r){void 0===r&&(r={});var t=r.suppress||!1;return new Promise(function(r,o){var i=n(function(n){n.statusCode&&!t?(o(n.errorMessage),i()):e(n)&&(r(n),i())})})}}return{snapshot:function(){return (0,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .snapshoter */ .L6)(e,an)},subscribe:n,onceFinalized:r(tn),onceExecuted:r(rn),onceSealed:r(nn)}}cn.isUnknown=function(e){return e.status>=0},cn.isPending=function(e){return e.status>=1},cn.isFinalized=tn,cn.isExecuted=rn,cn.isSealed=nn,cn.isExpired=function(e){return 5===e.status};var un,ln=function(n){void 0===n&&(n={});try{return Promise.resolve(function(r,t){try{var o=Promise.resolve(function(n){try{return (0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(F(n),"mutate(opts) -- opts is required"),(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(x(n),"mutate(opts) -- opts must be an object"),(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(F(n.cadence),"mutate({ cadence }) -- cadence is required"),(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(T(n.cadence),"mutate({ cadence }) -- cadence must be a string"),Promise.resolve(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config.get */ .vc.get("accessNode.api")).then(function(e){(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(e,'Required value for "accessNode.api" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration')})}catch(e){return Promise.reject(e)}}(n)).then(function(){return Promise.resolve(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config */ .vc().get("fcl.authz",Qe().authorization)).then(function(r){return _portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .send */ .Jd([_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .transaction */ .PS(n.cadence),_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .args */ .WC(V(n.args||[])),n.limit&&M(n.limit)&&_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .limit */ .b9(n.limit),_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .proposer */ .iB(n.proposer||n.authz||r),_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .payer */ .$C(n.payer||n.authz||r),_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .authorizations */ .KX(n.authorizations||[n.authz||r])]).then(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .decode */ .Jx)})})}catch(e){return t(e)}return o&&o.then?o.then(void 0,t):o}(0,function(e){throw e}))}catch(e){return Promise.reject(e)}},dn=function(e,r){void 0===e&&(e=[]),void 0===r&&(r={});try{return Promise.resolve(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config.first */ .vc.first(["sdk.resolve"],r.resolve||_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .resolve */ .DB)).then(function(n){function r(){return Promise.resolve(n(e)).then(function(e){return JSON.stringify((0,_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .createSignableVoucher */ .c0)(e),null,2)})}var t=function(){if(Array.isArray(e))return Promise.resolve((0,_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .pipe */ .zG)((0,_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .interaction */ .Tl)(),e)).then(function(n){e=n})}();return t&&t.then?t.then(r):r()})}catch(e){return Promise.reject(e)}},fn=function(e){try{var r=setTimeout;return Promise.resolve((0,_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config */ .vc)().get("fcl.eventPollRate",1e4)).then(function(n){return r(function(){return e.sendSelf("TICK")},n)})}catch(e){return Promise.reject(e)}},pn=((un={}).TICK=function(e){try{if(!e.hasSubs())return Promise.resolve();var n=e.get("hwm"),r=function(){if(null==n){var r=e.put;return Promise.resolve((0,_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .latestBlock */ ._Y)()).then(function(n){r.call(e,"hwm",n);var t=e.put;return Promise.resolve(fn(e)).then(function(n){t.call(e,"tick",n)})})}return Promise.resolve((0,_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .latestBlock */ ._Y)()).then(function(r){return e.put("hwm",r),Promise.resolve((0,_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .send */ .Jd)([(0,_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .getEvents */ .vw)(e.self(),n.height,r.height-1)]).then(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .decode */ .Jx)).then(function(n){for(var r,t=z(n);!(r=t()).done;)e.broadcast("UPDATED",r.value.data);var o=e.put;return Promise.resolve(fn(e)).then(function(n){o.call(e,"tick",n)})})})}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},un[_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .SUBSCRIBE */ .kD]=function(e,n){try{var r=function(){e.subscribe(n.from)},t=function(){if(!e.hasSubs()){var n=e.put;return Promise.resolve(fn(e)).then(function(r){n.call(e,"tick",r)})}}();return Promise.resolve(t&&t.then?t.then(r):r())}catch(e){return Promise.reject(e)}},un[_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .UNSUBSCRIBE */ .By]=function(e,n){e.unsubscribe(n.from),e.hasSubs()||(clearTimeout(e.get("tick")),e.delete("tick"),e.delete("hwm"))},un),hn=function(e){return (0,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .spawn */ .Cs)(pn,e)};function vn(e){return{subscribe:function(n){return (0,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .subscriber */ .qP)(e,hn,n)}}}var mn=function(e){void 0===e&&(e=[]);try{return Promise.resolve(_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .config.get */ .vc.get("discovery.authn.endpoint")).then(function(n){(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(Boolean(n),'"discovery.authn.endpoint" in config must be defined.');var r=new URL(n);return fetch(r,{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(n){return[].concat(e,n)})})}catch(e){return Promise.reject(e)}};function yn(e){void 0===e&&(e=[]);var n=window.fcl_extensions||[];return[].concat(n,e)}var gn,En=((gn={})[_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .INIT */ .qg]=function(e){try{return"undefined"==typeof window&&console.warn('\n      %cFCL Warning\n      ============================\n      "fcl.discovery" is only available in the browser.\n      For more info, please see the docs: https://docs.onflow.org/fcl/\n      ============================\n      ',"font-weight:bold;font-family:monospace;"),Promise.resolve((n={type:"authn"},r=n.type,function(){var e=arguments;return function(n){return[].slice.call(e).reduce(function(e,n){return e.then(n)},Promise.resolve(n))}}(mn,yn,function(e){return function(e,n){return void 0===e&&(e=[]),e.filter(function(e){return e.type===n})}(e,r)})([]))).then(function(n){e.put("results",n)})}catch(e){return Promise.reject(e)}var n,r},gn[_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .SUBSCRIBE */ .kD]=function(e,n){e.subscribe(n.from),e.send(n.from,"UPDATED",H({},e.all()))},gn[_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .UNSUBSCRIBE */ .By]=function(e,n){return e.unsubscribe(n.from)},gn.SNAPSHOT=function(e,n){try{return Promise.resolve(n.reply(H({},e.all())))}catch(e){return Promise.reject(e)}},gn),Pn=function(){return (0,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .spawn */ .Cs)(En,"authn")},Rn={authn:{subscribe:function(e){return (0,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .subscriber */ .qP)("authn",Pn,e)},snapshot:function(){return (0,_onflow_util_actor__WEBPACK_IMPORTED_MODULE_2__/* .snapshoter */ .L6)("authn",Pn)}}},wn=function(e,n){void 0===n&&(n=function(){});var r=function(r){var t=r.data;"object"==typeof t&&null!=typeof t&&t.type===e&&n(function(e){var n;return e.deprecated&&console.warn("DEPRECATION NOTICE",e.deprecated.message),null==e||null==(n=e.body)||delete n.interaction,e}(t))};return window.addEventListener("message",r),function(){return window.removeEventListener("message",r)}},bn=function(e,n){void 0===n&&(n={}),window.location!==window.parent.location?window.parent.postMessage(H({},n,{type:e}),"*"):window.opener.postMessage(H({},n,{type:e}),"*")},Sn=function(e,n){return Buffer.from(e.padEnd(2*n,0),"hex")},Cn={__proto__:null,sendMsgToFCL:bn,ready:function(e,n){wn("FCL:VIEW:READY:RESPONSE",e),bn("FCL:VIEW:READY")},close:function(){bn("FCL:VIEW:CLOSE")},approve:function(e){bn("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"APPROVED",reason:null,data:e})},decline:function(e){bn("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"DECLINED",reason:e,data:null})},redirect:function(e){bn("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"REDIRECT",reason:null,data:e})},onMessageFromFCL:wn,encodeMessageFromSignable:_portto_sdk__WEBPACK_IMPORTED_MODULE_0__/* .encodeMessageFromSignable */ .Oq,CompositeSignature:function(e,n,r){this.f_type=q.f_type,this.f_vsn=q.f_vsn,this.addr=(0,_onflow_util_address__WEBPACK_IMPORTED_MODULE_3__/* .withPrefix */ .dq)(e),this.keyId=Number(n),this.signature=r},encodeMessageForProvableAuthnSigning:function(e,n,r){void 0===r&&(r=""),(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(e,"Encode Message From Provable Authn Error: address must be defined"),(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(n,"Encode Message From Provable Authn Error: timestamp must be defined");var t=Sn(Buffer.from("FLOW-V0.0-user").toString("hex"),32).toString("hex"),o=Sn(Buffer.from(r).toString("hex"),32).toString("hex");return t+(r?(0,_onflow_rlp__WEBPACK_IMPORTED_MODULE_4__/* .encode */ .cv)([o,(0,_onflow_util_address__WEBPACK_IMPORTED_MODULE_3__/* .withPrefix */ .dq)(e),n]).toString("hex"):(0,_onflow_rlp__WEBPACK_IMPORTED_MODULE_4__/* .encode */ .cv)([(0,_onflow_util_address__WEBPACK_IMPORTED_MODULE_3__/* .withPrefix */ .dq)(e),n]).toString("hex"))},encodeMessageForProvableAuthnVerifying:function(e,n,r){void 0===r&&(r=""),(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(e,"Encode Message From Provable Authn Error: address must be defined"),(0,_onflow_util_invariant__WEBPACK_IMPORTED_MODULE_7__/* .invariant */ .k)(n,"Encode Message From Provable Authn Error: timestamp must be defined");var t,o=r?(t=Buffer.from(r).toString("hex"),Buffer.from(t.padEnd(64,0),"hex")).toString("hex"):null;return r?(0,_onflow_rlp__WEBPACK_IMPORTED_MODULE_4__/* .encode */ .cv)([o,(0,_onflow_util_address__WEBPACK_IMPORTED_MODULE_3__/* .withPrefix */ .dq)(e),n]).toString("hex"):(0,_onflow_rlp__WEBPACK_IMPORTED_MODULE_4__/* .encode */ .cv)([(0,_onflow_util_address__WEBPACK_IMPORTED_MODULE_3__/* .withPrefix */ .dq)(e),n]).toString("hex")},injectExtService:function(e){"authn"===e.type&&null!=e.endpoint?(Array.isArray(window.fcl_extensions)||(window.fcl_extensions=[]),window.fcl_extensions.push(e)):console.warn("Authn service is required")}},An=function(e){return void 0===e&&(e={}),Qe().authenticate(e)},In=function(){return Qe().unauthenticate()},Dn=function(e){return void 0===e&&(e={}),Qe().unauthenticate(),Qe().authenticate(e)},Ln=function(e){return void 0===e&&(e={}),Qe().authenticate(e)},Nn=function(e){return void 0===e&&(e={}),Qe().authenticate(e)},On=Qe().authorization,jn=_onflow_types__WEBPACK_IMPORTED_MODULE_1__;
//# sourceMappingURL=fcl.module.js.map


/***/ })

}]);