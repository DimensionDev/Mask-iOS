"use strict";
(globalThis["webpackChunk_masknet_extension"] = globalThis["webpackChunk_masknet_extension"] || []).push([[1597],{

/***/ 97986:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "G": () => (/* binding */ NFTRedPacketIcon)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(35667);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50498);


const NFTRedPacketIcon = (0,_utils__WEBPACK_IMPORTED_MODULE_1__/* .createIcon */ .I)('NFTRedPacketIcon', /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("g", {
    children: [
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M4.51712 6.19485C4.51712 6.19485 3.72407 3.91086 12.638 3.91086C21.5519 3.91086 20.7588 6.19485 20.7588 6.19485V7.17823H4.51712V6.19485Z",
            fill: "#DB1919"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 15.0001H17.1377V16.5001H18.6377V15.0001Z",
            fill: "#291E20"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M17.1377 15.0001H15.6377V16.5001H17.1377V15.0001Z",
            fill: "#1A1115"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M15.6377 15.0001H14.1377V16.5001H15.6377V15.0001Z",
            fill: "#1B1417"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M14.1377 15.0001H12.6377V16.5001H14.1377V15.0001Z",
            fill: "#1D1018"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M12.6377 15.0001H11.1377V16.5001H12.6377V15.0001Z",
            fill: "#131117"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M11.1377 15.0001H9.6377V16.5001H11.1377V15.0001Z",
            fill: "#1B1419"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M9.6377 15.0001H8.1377V16.5001H9.6377V15.0001Z",
            fill: "#2D2529"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 13.5001H17.1377V15.0001H18.6377V13.5001Z",
            fill: "#1F1114"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M17.1377 13.5001H15.6377V15.0001H17.1377V13.5001Z",
            fill: "#0F0407"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M15.6377 13.5001H14.1377V15.0001H15.6377V13.5001Z",
            fill: "#130408"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M14.1377 13.5001H12.6377V15.0001H14.1377V13.5001Z",
            fill: "#12060B"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M12.6377 13.5001H11.1377V15.0001H12.6377V13.5001Z",
            fill: "#562311"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M11.1377 13.5001H9.6377V15.0001H11.1377V13.5001Z",
            fill: "#512111"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M9.6377 13.5001H8.1377V15.0001H9.6377V13.5001Z",
            fill: "#211618"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 12.0001H17.1377V13.5001H18.6377V12.0001Z",
            fill: "#171112"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M17.1377 12.0001H15.6377V13.5001H17.1377V12.0001Z",
            fill: "#1A0A0B"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M15.6377 12.0001H14.1377V13.5001H15.6377V12.0001Z",
            fill: "#270D04"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M14.1377 12.0001H12.6377V13.5001H14.1377V12.0001Z",
            fill: "#E97800"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M12.6377 12.0001H11.1377V13.5001H12.6377V12.0001Z",
            fill: "#ED8900"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M11.1377 12.0001H9.6377V13.5001H11.1377V12.0001Z",
            fill: "#5B3311"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M9.6377 12.0001H8.1377V13.5001H9.6377V12.0001Z",
            fill: "#21171D"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 10.5001H17.1377V12.0001H18.6377V10.5001Z",
            fill: "#1D1614"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M17.1377 10.5001H15.6377V12.0001H17.1377V10.5001Z",
            fill: "#150706"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M15.6377 10.5001H14.1377V12.0001H15.6377V10.5001Z",
            fill: "#030106"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M14.1377 10.5001H12.6377V12.0001H14.1377V10.5001Z",
            fill: "#0D0808"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M12.6377 10.5001H11.1377V12.0001H12.6377V10.5001Z",
            fill: "#462B10"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M11.1377 10.5001H9.6377V12.0001H11.1377V10.5001Z",
            fill: "#5C310C"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M9.6377 10.5001H8.1377V12.0001H9.6377V10.5001Z",
            fill: "#1C1118"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 9.00009H17.1377V10.5001H18.6377V9.00009Z",
            fill: "#2C1B19"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M17.1377 9.00009H15.6377V10.5001H17.1377V9.00009Z",
            fill: "#1A0908"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M15.6377 9.00009H14.1377V10.5001H15.6377V9.00009Z",
            fill: "#0E0503"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M14.1377 9.00009H12.6377V10.5001H14.1377V9.00009Z",
            fill: "#0A060A"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M12.6377 9.00009H11.1377V10.5001H12.6377V9.00009Z",
            fill: "#000105"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M11.1377 9.00009H9.6377V10.5001H11.1377V9.00009Z",
            fill: "#10070C"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M9.6377 9.00009H8.1377V10.5001H9.6377V9.00009Z",
            fill: "#4F361D"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 7.50009H17.1377V9.00009H18.6377V7.50009Z",
            fill: "#592613"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M17.1377 7.50009H15.6377V9.00009H17.1377V7.50009Z",
            fill: "#190C0B"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M15.6377 7.50009H14.1377V9.00009H15.6377V7.50009Z",
            fill: "#7E4B08"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M14.1377 7.50009H12.6377V9.00009H14.1377V7.50009Z",
            fill: "#E39B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M12.6377 7.50009H11.1377V9.00009H12.6377V7.50009Z",
            fill: "#5D320C"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M11.1377 7.50009H9.6377V9.00009H11.1377V7.50009Z",
            fill: "#22110E"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M9.6377 7.50009H8.1377V9.00009H9.6377V7.50009Z",
            fill: "#6A2C1E"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 6.00009H17.1377V7.50009H18.6377V6.00009Z",
            fill: "#4F3A11"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M17.1377 6.00009H15.6377V7.50009H17.1377V6.00009Z",
            fill: "#2F270E"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M15.6377 6.00009H14.1377V7.50009H15.6377V6.00009Z",
            fill: "#904400"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M14.1377 6.00009H12.6377V7.50009H14.1377V6.00009Z",
            fill: "#341206"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M12.6377 6.00009H11.1377V7.50009H12.6377V6.00009Z",
            fill: "#140E0F"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M11.1377 6.00009H9.6377V7.50009H11.1377V6.00009Z",
            fill: "#4D401E"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M9.6377 6.00009H8.1377V7.50009H9.6377V6.00009Z",
            fill: "#3B3524"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 4.50009H17.1377V6.00009H18.6377V4.50009Z",
            fill: "#625617"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M17.1377 4.50009H15.6377V6.00009H17.1377V4.50009Z",
            fill: "#333417"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M15.6377 4.50009H14.1377V6.00009H15.6377V4.50009Z",
            fill: "#41160C"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M14.1377 4.50009H12.6377V6.00009H14.1377V4.50009Z",
            fill: "#D47100"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M12.6377 4.50009H11.1377V6.00009H12.6377V4.50009Z",
            fill: "#33190B"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M11.1377 4.50009H9.6377V6.00009H11.1377V4.50009Z",
            fill: "#21200E"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M9.6377 4.50009H8.1377V6.00009H9.6377V4.50009Z",
            fill: "#3B3B23"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 3.00009H17.1377V4.50009H18.6377V3.00009Z",
            fill: "#C29F09"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M17.1377 3.00009H15.6377V4.50009H17.1377V3.00009Z",
            fill: "#83711D"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M15.6377 3.00009H14.1377V4.50009H15.6377V3.00009Z",
            fill: "#461400"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M14.1377 3.00009H12.6377V4.50009H14.1377V3.00009Z",
            fill: "#D17C00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M12.6377 3.00009H11.1377V4.50009H12.6377V3.00009Z",
            fill: "#8A5D1B"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M11.1377 3.00009H9.6377V4.50009H11.1377V3.00009Z",
            fill: "#B6972C"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M9.6377 3.00009H8.1377V4.50009H9.6377V3.00009Z",
            fill: "#7C6729"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 1.50009H17.1377V3.00009H18.6377V1.50009Z",
            fill: "#BD980B"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M17.1377 1.50009H15.6377V3.00009H17.1377V1.50009Z",
            fill: "#E2B92B"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M15.6377 1.50009H14.1377V3.00009H15.6377V1.50009Z",
            fill: "#020000"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M14.1377 1.50009H12.6377V3.00009H14.1377V1.50009Z",
            fill: "#D68900"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M12.6377 1.50009H11.1377V3.00009H12.6377V1.50009Z",
            fill: "#B38825"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M11.1377 1.50009H9.6377V3.00009H11.1377V1.50009Z",
            fill: "#F4C32E"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M9.6377 1.50009H8.1377V3.00009H9.6377V1.50009Z",
            fill: "#C29F36"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 9.15527e-05H17.1377V1.50009H18.6377V9.15527e-05Z",
            fill: "#8D8239"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M17.1377 9.15527e-05H15.6377V1.50009H17.1377V9.15527e-05Z",
            fill: "#8F732B"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M15.6377 9.15527e-05H14.1377V1.50009H15.6377V9.15527e-05Z",
            fill: "#AA9530"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M14.1377 9.15527e-05H12.6377V1.50009H14.1377V9.15527e-05Z",
            fill: "#8F8533"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M12.6377 9.15527e-05H11.1377V1.50009H12.6377V9.15527e-05Z",
            fill: "#887527"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M11.1377 9.15527e-05H9.6377V1.50009H11.1377V9.15527e-05Z",
            fill: "#8F792B"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M9.6377 9.15527e-05H8.1377V1.50009H9.6377V9.15527e-05Z",
            fill: "#93813A"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M8.1377 9.15527e-05H6.6377V1.50009H8.1377V9.15527e-05Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M8.1377 1.50009H6.6377V3.00009H8.1377V1.50009Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M8.1377 3.00009H6.6377V4.50009H8.1377V3.00009Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M8.1377 4.50009H6.6377V6.00009H8.1377V4.50009Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M8.1377 6.00009H6.6377V7.50009H8.1377V6.00009Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M8.1377 7.50009H6.6377V9.00009H8.1377V7.50009Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M8.1377 9.00009H6.6377V10.5001H8.1377V9.00009Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M8.1377 10.5001H6.6377V12.0001H8.1377V10.5001Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M8.1377 12.0001H6.6377V13.5001H8.1377V12.0001Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M8.1377 13.5001H6.6377V15.0001H8.1377V13.5001Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M8.1377 15.0001H6.6377V16.5001H8.1377V15.0001Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M9.6377 15.0001H8.1377V16.5001H9.6377V15.0001Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M11.1377 15.0001H9.6377V16.5001H11.1377V15.0001Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M12.6377 15.0001H11.1377V16.5001H12.6377V15.0001Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M14.1377 15.0001H12.6377V16.5001H14.1377V15.0001Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M15.6377 15.0001H14.1377V16.5001H15.6377V15.0001Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M17.1377 15.0001H15.6377V16.5001H17.1377V15.0001Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 15.0001H17.1377V16.5001H18.6377V15.0001Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 13.5001H17.1377V15.0001H18.6377V13.5001Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 12.0001H17.1377V13.5001H18.6377V12.0001Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 10.5001H17.1377V12.0001H18.6377V10.5001Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 9.00009H17.1377V10.5001H18.6377V9.00009Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 7.50009H17.1377V9.00009H18.6377V7.50009Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 6.00009H17.1377V7.50009H18.6377V6.00009Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 4.50009H17.1377V6.00009H18.6377V4.50009Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 3.00009H17.1377V4.50009H18.6377V3.00009Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 1.50009H17.1377V3.00009H18.6377V1.50009Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M18.6377 9.15527e-05H17.1377V1.50009H18.6377V9.15527e-05Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M17.1377 9.15527e-05H15.6377V1.50009H17.1377V9.15527e-05Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M15.6377 9.15527e-05H14.1377V1.50009H15.6377V9.15527e-05Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M14.1377 9.15527e-05H12.6377V1.50009H14.1377V9.15527e-05Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M12.6377 9.15527e-05H11.1377V1.50009H12.6377V9.15527e-05Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M11.1377 9.15527e-05H9.6377V1.50009H11.1377V9.15527e-05Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M9.6377 9.15527e-05H8.1377V1.50009H9.6377V9.15527e-05Z",
            fill: "#CA9B00"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M4.51758 6.2583C4.51758 6.2583 7.53117 7.16238 12.6226 7.16238C17.714 7.16238 20.7593 6.2583 20.7593 6.2583V21.5C20.7593 22.0523 20.3116 22.5 19.7593 22.5H5.51758C4.96529 22.5 4.51758 22.0523 4.51758 21.5V6.2583Z",
            fill: "#F93737"
        })
    ]
}), '0 0 24 24');


/***/ }),

/***/ 42829:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "t": () => (/* binding */ RedPacketIcon)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(35667);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50498);


const RedPacketIcon = (0,_utils__WEBPACK_IMPORTED_MODULE_1__/* .createIcon */ .I)('RedPacketIcon', /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("g", {
    children: [
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M3.765 5.161s-.661-1.903 6.767-1.903c7.428 0 6.767 1.903 6.767 1.903v.82H3.765v-.82z",
            fill: "#DB1919"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("circle", {
            cx: "13.389",
            cy: "4.498",
            r: "1.96",
            fill: "#FFBC5A",
            stroke: "#F5B250",
            strokeWidth: ".2"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M14.515 4.062v.621h-1.96a.85.85 0 00.83.658.853.853 0 00.766-.472h.364v.522a.225.225 0 01-.226.224h-1.804a.225.225 0 01-.226-.224V4.062h2.256zm-.58.807a.665.665 0 01-1.098 0h1.097zm-1.03-.658a.35.35 0 00-.348.298h.193a.163.163 0 01.31 0h.192a.35.35 0 00-.347-.298zm.965 0a.35.35 0 00-.348.298h.193a.163.163 0 01.31 0h.192a.35.35 0 00-.347-.298zm.42-.832c.124 0 .225.1.225.223v.274H12.26v-.274c0-.123.101-.223.226-.223h1.805z",
            fill: "#fff"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M9.484 4.498a1.96 1.96 0 11-3.92 0 1.96 1.96 0 013.92 0z",
            fill: "#FFBC5A",
            stroke: "#F5B250",
            strokeWidth: ".2"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M8.65 4.062v.621H6.69a.85.85 0 00.83.658.853.853 0 00.766-.472h.364v.522a.225.225 0 01-.226.224H6.62a.225.225 0 01-.226-.224V4.062H8.65zm-.58.807a.665.665 0 01-1.098 0h1.097zm-1.03-.658a.35.35 0 00-.348.298h.192a.163.163 0 01.31 0h.193a.35.35 0 00-.348-.298zm.964 0a.35.35 0 00-.347.298h.192a.163.163 0 01.31 0h.193a.35.35 0 00-.348-.298zm.42-.832c.125 0 .226.1.226.223v.274H6.394v-.274c0-.123.101-.223.226-.223h1.804z",
            fill: "#fff"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M13.168 3.986a2.636 2.636 0 11-5.272 0 2.636 2.636 0 015.272 0z",
            fill: "#FFBC5A",
            stroke: "#F5B250",
            strokeWidth: ".2"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M12.03 3.407v.825H9.426c.113.5.565.874 1.104.874.446 0 .831-.255 1.016-.627h.484v.693a.298.298 0 01-.3.297H9.333a.298.298 0 01-.3-.297V3.407h2.997zm-.771 1.072a.883.883 0 01-.73.382.883.883 0 01-.728-.382h1.457zM9.89 3.605a.465.465 0 00-.461.396h.255a.216.216 0 01.412 0h.255a.465.465 0 00-.461-.396zm1.282 0a.465.465 0 00-.462.396h.256a.216.216 0 01.206-.148c.096 0 .177.062.206.148h.255a.465.465 0 00-.461-.396zM11.73 2.5c.166 0 .3.133.3.297v.363H9.034v-.363c0-.164.134-.297.3-.297h2.396z",
            fill: "#fff"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M3.765 5.215s2.511.753 6.754.753c4.243 0 6.78-.753 6.78-.753V17.75a1 1 0 01-1 1H4.765a1 1 0 01-1-1V5.215z",
            fill: "#F93737"
        })
    ]
}), '0 0 20 20');


/***/ }),

/***/ 79163:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Qc": () => (/* binding */ RedPacketMetadataReader),
  "st": () => (/* binding */ RedPacketNftMetadataReader),
  "vP": () => (/* binding */ renderWithRedPacketMetadata),
  "Ay": () => (/* binding */ renderWithRedPacketNftMetadata)
});

// EXTERNAL MODULE: ../typed-message/dom/index.ts + 14 modules
var dom = __webpack_require__(30003);
// EXTERNAL MODULE: ./src/plugins/RedPacket/constants.ts
var constants = __webpack_require__(70176);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/schema.json
const schema_namespaceObject = JSON.parse('{"type":"object","additionalProperties":true,"properties":{"contract_address":{"type":"string","title":"contract_address"},"rpid":{"type":"string","title":"rpid"},"txid":{"type":"string","title":"txid"},"password":{"type":"string","title":"password"},"shares":{"type":"number","title":"shares"},"sender":{"type":"object","additionalProperties":true,"properties":{"address":{"type":"string","title":"address"},"name":{"type":"string","title":"name"},"message":{"type":"string","title":"message"}},"required":["address","message","name"],"title":"sender"},"is_random":{"type":"boolean","title":"is_random"},"total":{"type":"string","title":"total"},"creation_time":{"type":"number","title":"creation_time"},"duration":{"type":"number","title":"duration"},"network":{"type":"string","title":"network"},"token":{"type":"object","additionalProperties":true,"properties":{"address":{"description":"token address","type":"string","title":"address"},"name":{"description":"token name","type":"string","title":"name"},"decimals":{"description":"token decimal","type":"number","title":"decimals"},"symbol":{"description":"token symbol","type":"string","title":"symbol"}},"required":["address"],"title":"token"}},"required":["contract_address","creation_time","duration","is_random","password","rpid","sender","shares","total"]}');
;// CONCATENATED MODULE: ./src/plugins/RedPacket/schema-nft.json
const schema_nft_namespaceObject = JSON.parse('{"type":"object","additionalProperties":true,"properties":{"id":{"type":"string","title":"id"},"txid":{"type":"string","title":"txid"},"duration":{"type":"number","title":"duration"},"message":{"type":"string","title":"message"},"senderName":{"type":"string","title":"senderName"},"contractName":{"type":"string","title":"contractName"},"contractAddress":{"type":"string","title":"contractAddress"},"privateKey":{"type":"string","title":"privateKey"},"chainId":{"type":"number","title":"chainId"},"contractTokenURI":{"type":"string","title":"contractTokenURI"}},"required":["id","duration","message","senderName","contractName","contractAddress","privateKey","chainId","contractTokenURI"]}');
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/helpers.ts




const RedPacketMetadataReader = (0,dom/* createTypedMessageMetadataReader */.Bi)(constants/* RedPacketMetaKey */.Vr, schema_namespaceObject);
const renderWithRedPacketMetadata = (0,dom/* createRenderWithMetadata */.mC)(RedPacketMetadataReader);
const RedPacketNftMetadataReader = (0,dom/* createTypedMessageMetadataReader */.Bi)(constants/* RedPacketNftMetaKey */.HA, schema_nft_namespaceObject);
const renderWithRedPacketNftMetadata = (0,dom/* createRenderWithMetadata */.mC)(RedPacketNftMetadataReader);


/***/ }),

/***/ 41597:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ SNSAdaptor)
});

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(35667);
// EXTERNAL MODULE: ../plugin-infra/src/entry-content-script.ts
var entry_content_script = __webpack_require__(20778);
// EXTERNAL MODULE: ../web3-shared/evm/utils/resolver.ts
var resolver = __webpack_require__(94861);
// EXTERNAL MODULE: ../web3-shared/evm/types/index.ts
var types = __webpack_require__(72499);
// EXTERNAL MODULE: ./src/plugins/RedPacket/base.ts + 7 modules
var base = __webpack_require__(66511);
// EXTERNAL MODULE: ./src/plugins/RedPacket/constants.ts
var constants = __webpack_require__(70176);
// EXTERNAL MODULE: ./src/plugins/RedPacket/SNSAdaptor/helpers.ts + 2 modules
var helpers = __webpack_require__(79163);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/index.js
var react = __webpack_require__(58757);
// EXTERNAL MODULE: ../plugin-infra/src/entry-web3.ts + 1 modules
var entry_web3 = __webpack_require__(50719);
// EXTERNAL MODULE: ../shared/src/index.ts + 2 modules
var src = __webpack_require__(77818);
// EXTERNAL MODULE: ../shared-base-ui/src/index.ts
var shared_base_ui_src = __webpack_require__(80226);
// EXTERNAL MODULE: ../theme/src/entry.ts
var entry = __webpack_require__(31939);
// EXTERNAL MODULE: ../web3-shared/base/src/index.ts + 1 modules
var base_src = __webpack_require__(67938);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/DialogContent/DialogContent.js + 1 modules
var DialogContent = __webpack_require__(46715);
// EXTERNAL MODULE: ../../node_modules/.pnpm/web3-utils@1.7.3/node_modules/web3-utils/lib/index.js
var lib = __webpack_require__(11627);
var lib_default = /*#__PURE__*/__webpack_require__.n(lib);
// EXTERNAL MODULE: ./src/components/DataSource/useActivatedUI.ts
var useActivatedUI = __webpack_require__(23397);
// EXTERNAL MODULE: ./src/components/shared/AbstractTab.tsx
var AbstractTab = __webpack_require__(30318);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-i18next@11.16.9_nlaekqjbpikw4agfyzvj2iejnm/node_modules/react-i18next/dist/es/Trans.js
var Trans = __webpack_require__(62266);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-i18next@11.16.9_nlaekqjbpikw4agfyzvj2iejnm/node_modules/react-i18next/dist/es/useTranslation.js
var useTranslation = __webpack_require__(43133);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/locales/i18n_generated.js
/* eslint-disable */


const bind = (i18nKey) => (props) => (0,react.createElement)(Trans/* Trans */.c, { i18nKey, ns: "com.maskbook.red_packet", ...props })
function useI18N() {
    const { t } = (0,useTranslation/* useTranslation */.$)("com.maskbook.red_packet")
    return (0,react.useMemo)(
        function proxyBasedHooks() {
    return new Proxy({ __proto__: null }, {
        get(target, key) {
            if (target[key])
                return target[key];
            return (target[key] = t.bind(null, key));
        },
    });
},
        [t],
    )
}
const Translate = function proxyBasedTrans() {
    return new Proxy({ __proto__: null }, {
        get(target, key) {
            if (target[key])
                return target[key];
            return (target[key] = bind(key));
        },
    });
}()
;// CONCATENATED MODULE: ./src/plugins/RedPacket/locales/index.ts
// This file is auto generated. DO NOT EDIT
// Run `npx gulp sync-languages` to regenerate.
// Default fallback language in a family of languages are chosen by the alphabet order
// To overwrite this, please overwrite packages/scripts/src/locale-kit-next/index.ts


// EXTERNAL MODULE: ./src/plugins/Wallet/messages.ts
var messages = __webpack_require__(91788);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/types.ts
var RedPacketStatus;
(function(RedPacketStatus) {
    RedPacketStatus["claimed"] = "claimed";
    RedPacketStatus["expired"] = "expired";
    RedPacketStatus["empty"] = "empty";
    RedPacketStatus["refunded"] = "refunded";
})(RedPacketStatus || (RedPacketStatus = {}));
var NFTSelectOption;
(function(NFTSelectOption) {
    NFTSelectOption["All"] = "All";
    NFTSelectOption["Partial"] = "Partial";
})(NFTSelectOption || (NFTSelectOption = {}));
var DialogTabs;
(function(DialogTabs) {
    DialogTabs[DialogTabs["create"] = 0] = "create";
    DialogTabs[DialogTabs["past"] = 1] = "past";
})(DialogTabs || (DialogTabs = {}));
var RpTypeTabs;
(function(RpTypeTabs) {
    RpTypeTabs[RpTypeTabs["ERC20"] = 0] = "ERC20";
    RpTypeTabs[RpTypeTabs["ERC721"] = 1] = "ERC721";
})(RpTypeTabs || (RpTypeTabs = {}));

// EXTERNAL MODULE: ../../node_modules/.pnpm/bignumber.js@9.0.2/node_modules/bignumber.js/bignumber.js
var bignumber = __webpack_require__(42263);
var bignumber_default = /*#__PURE__*/__webpack_require__.n(bignumber);
// EXTERNAL MODULE: ../../node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js
var classnames = __webpack_require__(83849);
var classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);
// EXTERNAL MODULE: ../web3-shared/evm/constants/constants.ts + 12 modules
var constants_constants = __webpack_require__(47104);
// EXTERNAL MODULE: ../web3-shared/evm/utils/address.ts
var address = __webpack_require__(2596);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Grid/Grid.js + 2 modules
var Grid = __webpack_require__(69427);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Typography/Typography.js + 1 modules
var Typography = __webpack_require__(21784);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Link/Link.js + 1 modules
var Link = __webpack_require__(28257);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Paper/Paper.js
var Paper = __webpack_require__(7666);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.8.0_ar3vczqpton7uep5462l6mtgi4/node_modules/@mui/icons-material/Launch.js
var Launch = __webpack_require__(32841);
// EXTERNAL MODULE: ./src/extension/options-page/DashboardComponents/ActionButton.tsx
var ActionButton = __webpack_require__(72288);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.4.0/node_modules/react-use/esm/useAsyncFn.js
var useAsyncFn = __webpack_require__(32588);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/omit.js + 3 modules
var omit = __webpack_require__(96596);
// EXTERNAL MODULE: ../web3-shared/evm/utils/contract.ts
var contract = __webpack_require__(28114);
;// CONCATENATED MODULE: ../web3-shared/evm/utils/events.ts

function decodeEvents(web3, abis, receipt) {
    // the topic0 for identifying which abi to be used for decoding the event
    const listOfTopic0 = abis.map((abi)=>(0,lib.keccak256)(`${abi.name}(${abi.inputs?.map((x)=>x.type
        ).join()})`)
    );
    // decode events
    const events = receipt.logs.map((log)=>{
        const idx = listOfTopic0.indexOf(log.topics[0]);
        if (idx === -1) return;
        const abi = abis[idx];
        const inputs = abi?.inputs ?? [];
        return {
            // more: https://web3js.readthedocs.io/en/v1.2.11/web3-eth-abi.html?highlight=decodeLog#decodelog
            returnValues: web3.eth.abi.decodeLog(inputs, log.data, abi.anonymous ? log.topics : log.topics.slice(1)),
            raw: {
                data: log.data,
                topics: log.topics
            },
            event: abi.name,
            signature: listOfTopic0[idx],
            ...log
        };
    });
    return events.reduce((accumulate, event)=>{
        if (event) accumulate[event.event] = event;
        return accumulate;
    }, {});
}

// EXTERNAL MODULE: ../plugin-infra/src/entry-web3-evm.ts + 32 modules
var entry_web3_evm = __webpack_require__(94806);
;// CONCATENATED MODULE: ../web3-contracts/abis/HappyRedPacketV1.json
const HappyRedPacketV1_namespaceObject = JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"},{"indexed":false,"internalType":"address","name":"claimer","type":"address"},{"indexed":false,"internalType":"uint256","name":"claimed_value","type":"uint256"},{"indexed":false,"internalType":"address","name":"token_address","type":"address"}],"name":"ClaimSuccess","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"total","type":"uint256"},{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"},{"indexed":false,"internalType":"address","name":"creator","type":"address"},{"indexed":false,"internalType":"uint256","name":"creation_time","type":"uint256"},{"indexed":false,"internalType":"address","name":"token_address","type":"address"}],"name":"CreationSuccess","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"},{"indexed":false,"internalType":"address","name":"token_address","type":"address"},{"indexed":false,"internalType":"uint256","name":"remaining_balance","type":"uint256"}],"name":"RefundSuccess","type":"event"},{"inputs":[{"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"check_availability","outputs":[{"internalType":"address","name":"token_address","type":"address"},{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"total","type":"uint256"},{"internalType":"uint256","name":"claimed","type":"uint256"},{"internalType":"bool","name":"expired","type":"bool"},{"internalType":"bool","name":"ifclaimed","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"check_claimed_list","outputs":[{"internalType":"address[]","name":"claimer_addrs","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"id","type":"bytes32"},{"internalType":"string","name":"password","type":"string"},{"internalType":"address","name":"_recipient","type":"address"},{"internalType":"bytes32","name":"validation","type":"bytes32"}],"name":"claim","outputs":[{"internalType":"uint256","name":"claimed","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"contract_creator","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_hash","type":"bytes32"},{"internalType":"uint8","name":"_number","type":"uint8"},{"internalType":"bool","name":"_ifrandom","type":"bool"},{"internalType":"uint256","name":"_duration","type":"uint256"},{"internalType":"bytes32","name":"_seed","type":"bytes32"},{"internalType":"string","name":"_message","type":"string"},{"internalType":"string","name":"_name","type":"string"},{"internalType":"uint256","name":"_token_type","type":"uint256"},{"internalType":"address","name":"_token_addr","type":"address"},{"internalType":"uint256","name":"_total_tokens","type":"uint256"}],"name":"create_red_packet","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"refund","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"a","type":"address"}],"name":"toBytes","outputs":[{"internalType":"bytes","name":"b","type":"bytes"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"uint256","name":"token_type","type":"uint256"},{"internalType":"address","name":"token_address","type":"address"},{"internalType":"address","name":"sender_address","type":"address"},{"internalType":"address","name":"recipient_address","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer_token","outputs":[],"stateMutability":"payable","type":"function"}]');
;// CONCATENATED MODULE: ../web3-contracts/abis/HappyRedPacketV2.json
const HappyRedPacketV2_namespaceObject = JSON.parse('[{"inputs":[{"internalType":"bytes32","name":"id","type":"bytes32"},{"internalType":"string","name":"password","type":"string"},{"internalType":"address payable","name":"recipient","type":"address"},{"internalType":"bytes32","name":"validation","type":"bytes32"}],"name":"claim","outputs":[{"internalType":"uint256","name":"claimed","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_hash","type":"bytes32"},{"internalType":"uint256","name":"_number","type":"uint256"},{"internalType":"bool","name":"_ifrandom","type":"bool"},{"internalType":"uint256","name":"_duration","type":"uint256"},{"internalType":"bytes32","name":"_seed","type":"bytes32"},{"internalType":"string","name":"_message","type":"string"},{"internalType":"string","name":"_name","type":"string"},{"internalType":"uint256","name":"_token_type","type":"uint256"},{"internalType":"address","name":"_token_addr","type":"address"},{"internalType":"uint256","name":"_total_tokens","type":"uint256"}],"name":"create_red_packet","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"},{"indexed":false,"internalType":"address","name":"claimer","type":"address"},{"indexed":false,"internalType":"uint256","name":"claimed_value","type":"uint256"},{"indexed":false,"internalType":"address","name":"token_address","type":"address"}],"name":"ClaimSuccess","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"total","type":"uint256"},{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"},{"indexed":false,"internalType":"string","name":"name","type":"string"},{"indexed":false,"internalType":"string","name":"message","type":"string"},{"indexed":false,"internalType":"address","name":"creator","type":"address"},{"indexed":false,"internalType":"uint256","name":"creation_time","type":"uint256"},{"indexed":false,"internalType":"address","name":"token_address","type":"address"}],"name":"CreationSuccess","type":"event"},{"inputs":[{"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"refund","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"},{"indexed":false,"internalType":"address","name":"token_address","type":"address"},{"indexed":false,"internalType":"uint256","name":"remaining_balance","type":"uint256"}],"name":"RefundSuccess","type":"event"},{"inputs":[{"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"check_availability","outputs":[{"internalType":"address","name":"token_address","type":"address"},{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"total","type":"uint256"},{"internalType":"uint256","name":"claimed","type":"uint256"},{"internalType":"bool","name":"expired","type":"bool"},{"internalType":"uint256","name":"claimed_amount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"contract_creator","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]');
;// CONCATENATED MODULE: ../web3-contracts/abis/HappyRedPacketV3.json
const HappyRedPacketV3_namespaceObject = JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"},{"indexed":false,"internalType":"address","name":"claimer","type":"address"},{"indexed":false,"internalType":"uint256","name":"claimed_value","type":"uint256"},{"indexed":false,"internalType":"address","name":"token_address","type":"address"}],"name":"ClaimSuccess","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"total","type":"uint256"},{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"},{"indexed":false,"internalType":"string","name":"name","type":"string"},{"indexed":false,"internalType":"string","name":"message","type":"string"},{"indexed":false,"internalType":"address","name":"creator","type":"address"},{"indexed":false,"internalType":"uint256","name":"creation_time","type":"uint256"},{"indexed":false,"internalType":"address","name":"token_address","type":"address"},{"indexed":false,"internalType":"uint256","name":"number","type":"uint256"},{"indexed":false,"internalType":"bool","name":"ifrandom","type":"bool"},{"indexed":false,"internalType":"uint256","name":"duration","type":"uint256"}],"name":"CreationSuccess","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bytes32","name":"id","type":"bytes32"},{"indexed":false,"internalType":"address","name":"token_address","type":"address"},{"indexed":false,"internalType":"uint256","name":"remaining_balance","type":"uint256"}],"name":"RefundSuccess","type":"event"},{"inputs":[{"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"check_availability","outputs":[{"internalType":"address","name":"token_address","type":"address"},{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"total","type":"uint256"},{"internalType":"uint256","name":"claimed","type":"uint256"},{"internalType":"bool","name":"expired","type":"bool"},{"internalType":"uint256","name":"claimed_amount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"id","type":"bytes32"},{"internalType":"string","name":"password","type":"string"},{"internalType":"address payable","name":"recipient","type":"address"},{"internalType":"bytes32","name":"validation","type":"bytes32"}],"name":"claim","outputs":[{"internalType":"uint256","name":"claimed","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"contract_creator","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_hash","type":"bytes32"},{"internalType":"uint256","name":"_number","type":"uint256"},{"internalType":"bool","name":"_ifrandom","type":"bool"},{"internalType":"uint256","name":"_duration","type":"uint256"},{"internalType":"bytes32","name":"_seed","type":"bytes32"},{"internalType":"string","name":"_message","type":"string"},{"internalType":"string","name":"_name","type":"string"},{"internalType":"uint256","name":"_token_type","type":"uint256"},{"internalType":"address","name":"_token_addr","type":"address"},{"internalType":"uint256","name":"_total_tokens","type":"uint256"}],"name":"create_red_packet","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"refund","outputs":[],"stateMutability":"nonpayable","type":"function"}]');
// EXTERNAL MODULE: ../web3-contracts/abis/HappyRedPacketV4.json
var HappyRedPacketV4 = __webpack_require__(5261);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/hooks/useRedPacketContract.ts






function useRedPacketContract(chainId, version) {
    const { HAPPY_RED_PACKET_ADDRESS_V1: addressV1 , HAPPY_RED_PACKET_ADDRESS_V2: addressV2 , HAPPY_RED_PACKET_ADDRESS_V3: addressV3 , HAPPY_RED_PACKET_ADDRESS_V4: addressV4 ,  } = (0,constants_constants/* useRedPacketConstants */.AA)(chainId);
    const v1 = (0,entry_web3_evm/* useContract */.cq)(chainId, addressV1, HappyRedPacketV1_namespaceObject);
    const v2 = (0,entry_web3_evm/* useContract */.cq)(chainId, addressV2, HappyRedPacketV2_namespaceObject);
    const v3 = (0,entry_web3_evm/* useContract */.cq)(chainId, addressV3, HappyRedPacketV3_namespaceObject);
    const v4 = (0,entry_web3_evm/* useContract */.cq)(chainId, addressV4, HappyRedPacketV4);
    const versions = [
        v1,
        v2,
        v3,
        v4
    ];
    return versions[version - 1];
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/hooks/useCreateCallback.tsx








function checkParams(paramsObj) {
    if ((0,base_src/* isLessThan */.FI)(paramsObj.total, paramsObj.shares)) {
        throw new Error('At least [number of lucky drops] tokens to your lucky drop.');
    }
    if (paramsObj.shares <= 0) {
        throw new Error('At least 1 person should be able to claim the lucky drop.');
    }
    return true;
}
function useCreateParams(redPacketSettings, version, publicKey) {
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const { NATIVE_TOKEN_ADDRESS  } = (0,constants_constants/* useTokenConstants */.kd)(chainId);
    const redPacketContract = useRedPacketContract(chainId, version);
    return (0,react.useCallback)(async ()=>{
        if (!redPacketSettings || !redPacketContract) return null;
        const { duration , isRandom , message , name , shares , total , token  } = redPacketSettings;
        const seed = Math.random().toString();
        const tokenType = token.schema === types/* SchemaType.Native */.XQ.Native ? 0 : 1;
        const tokenAddress = token.schema === types/* SchemaType.Native */.XQ.Native ? NATIVE_TOKEN_ADDRESS : token.address;
        if (!tokenAddress) {
            return null;
        }
        const paramsObj = {
            publicKey,
            shares,
            isRandom,
            duration,
            seed: lib_default().sha3(seed),
            message,
            name,
            tokenType,
            tokenAddress,
            total,
            token
        };
        try {
            checkParams(paramsObj);
        } catch  {
            return null;
        }
        const params = Object.values((0,omit/* default */.Z)(paramsObj, [
            'token'
        ]));
        let gasError = null;
        const value = (0,base_src/* toFixed */.FH)(paramsObj.token?.schema === types/* SchemaType.Native */.XQ.Native ? total : 0);
        const gas = await redPacketContract.methods.create_red_packet(...params).estimateGas({
            from: account,
            value
        }).catch((error)=>{
            gasError = error;
        });
        return {
            gas: gas,
            params,
            paramsObj,
            gasError
        };
    }, [
        redPacketSettings,
        account,
        redPacketContract
    ]);
}
function useCreateCallback(redPacketSettings, version, publicKey) {
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const redPacketContract = useRedPacketContract(chainId, version);
    const getCreateParams = useCreateParams(redPacketSettings, version, publicKey);
    const connection = (0,entry_web3/* useWeb3Connection */.Tv)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const web3 = (0,entry_web3/* useWeb3 */.$6)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    return (0,useAsyncFn/* default */.Z)(async ()=>{
        const { token  } = redPacketSettings;
        const createParams = await getCreateParams();
        if (!token || !redPacketContract || !createParams) return;
        const { gas , params , paramsObj , gasError  } = createParams;
        if (gasError) {
            return;
        }
        try {
            checkParams(paramsObj);
        } catch (error) {
            return;
        }
        // estimate gas and compose transaction
        const value = (0,base_src/* toFixed */.FH)(token.schema === types/* SchemaType.Native */.XQ.Native ? paramsObj.total : 0);
        const config = {
            from: account,
            value,
            gas
        };
        const tx = await (0,contract/* encodeContractTransaction */.Wp)(redPacketContract, redPacketContract.methods.create_red_packet(...params), config);
        const hash = await connection.sendTransaction(tx);
        const receipt = await connection.getTransactionReceipt(hash);
        if (receipt) {
            const events = decodeEvents(web3, redPacketContract.options.jsonInterface, receipt);
            return {
                hash,
                receipt,
                events
            };
        }
        return {
            hash,
            receipt
        };
    }, [
        account,
        connection,
        redPacketContract,
        redPacketSettings,
        chainId,
        getCreateParams
    ]);
}

// EXTERNAL MODULE: ./src/plugins/RedPacket/messages.ts
var RedPacket_messages = __webpack_require__(93131);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedPacketConfirmDialog.tsx















const useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        link: {
            display: 'flex',
            marginLeft: theme.spacing(0.5)
        },
        grid: {
            paddingTop: theme.spacing(2),
            paddingBottom: theme.spacing(2)
        },
        gridWrapper: {
            paddingLeft: theme.spacing(3),
            paddingRight: theme.spacing(3)
        },
        hit: {
            fontSize: 14,
            fontWeight: 300,
            borderRadius: 8,
            backgroundColor: theme.palette.background.default,
            color: theme.palette.text.primary,
            padding: theme.spacing(1.2),
            marginBottom: theme.spacing(1)
        },
        token: {
            display: 'flex',
            justifyContent: 'flex-end',
            alignItems: 'center'
        },
        data: {
            textAlign: 'right',
            color: theme.palette.text.primary
        },
        label: {
            textAlign: 'left',
            color: theme.palette.text.secondary
        },
        button: {
            padding: theme.spacing(2)
        },
        gasEstimation: {
            display: 'flex',
            justifyContent: 'flex-end',
            alignItems: 'center',
            cursor: 'pointer',
            '& > p': {
                marginRight: 5,
                color: theme.palette.mode === 'light' ? '#7B8192' : '#6F767C'
            }
        },
        ellipsis: {
            textOverflow: 'ellipsis',
            overflow: 'hidden'
        }
    })
);
function RedPacketConfirmDialog(props) {
    const t = useI18N();
    const { onBack , settings , onCreated , onClose  } = props;
    const { classes  } = useStyles();
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    (0,react.useEffect)(()=>{
        if (settings?.token?.chainId !== chainId) onClose();
    }, [
        chainId,
        onClose
    ]);
    // #region blocking
    // password should remain the same rather than change each time when createState change,
    //  otherwise password in database would be different from creating red-packet.
    const contract_version = 4;
    const web3 = (0,entry_web3/* useWeb3 */.$6)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const networkType = (0,entry_web3/* useNetworkType */.bL)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const { address: publicKey , privateKey  } = (0,react.useMemo)(()=>web3?.eth.accounts.create() ?? {
            address: '',
            privateKey: ''
        }
    , [
        web3
    ]);
    const [{ loading: isCreating  }, createCallback] = useCreateCallback(settings, contract_version, publicKey);
    const openShareTxDialog = (0,src/* useOpenShareTxDialog */.z)();
    const createRedpacket = (0,react.useCallback)(async ()=>{
        const result = await createCallback();
        const { hash , receipt , events  } = result ?? {};
        if (typeof hash !== 'string') return;
        if (typeof receipt?.transactionHash !== 'string') return;
        await openShareTxDialog({
            hash: receipt.transactionHash
        });
        // the settings is not available
        if (!settings?.token) return;
        const CreationSuccess = events?.CreationSuccess.returnValues ?? {};
        payload.current.sender = {
            address: account,
            name: settings.name,
            message: settings.message
        };
        payload.current.is_random = settings.isRandom;
        payload.current.shares = settings.shares;
        payload.current.password = privateKey;
        payload.current.rpid = CreationSuccess.id;
        payload.current.total = CreationSuccess.total;
        payload.current.duration = settings.duration;
        payload.current.creation_time = Number.parseInt(CreationSuccess.creation_time, 10) * 1000;
        payload.current.token = settings.token;
        const record = {
            id: receipt.transactionHash,
            from: '',
            password: privateKey,
            contract_version
        };
        RedPacket_messages/* RedPacketRPC.discoverRedPacket */.T.discoverRedPacket(record, chainId);
        // output the redpacket as JSON payload
        onCreated(payload.current);
    }, [
        createCallback,
        settings,
        openShareTxDialog,
        onCreated
    ]);
    // #endregion
    // assemble JSON payload
    const payload = (0,react.useRef)({
        network: resolver/* chainResolver.chainName */.VU.chainName(chainId)
    });
    const { HAPPY_RED_PACKET_ADDRESS_V4  } = (0,constants_constants/* useRedPacketConstants */.AA)(chainId);
    (0,react.useEffect)(()=>{
        const contractAddress = HAPPY_RED_PACKET_ADDRESS_V4;
        if (!contractAddress) {
            onClose();
            return;
        }
        payload.current.contract_address = contractAddress;
        payload.current.contract_version = contract_version;
        payload.current.network = resolver/* chainResolver.chainName */.VU.chainName(chainId);
    }, [
        chainId,
        networkType,
        contract_version
    ]);
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(Grid/* default */.ZP, {
        container: true,
        spacing: 2,
        className: classnames_default()(classes.grid, classes.gridWrapper),
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                item: true,
                xs: 12,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    variant: "h4",
                    color: "textPrimary",
                    align: "center",
                    className: classes.ellipsis,
                    children: settings?.message
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                item: true,
                xs: 6,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    variant: "body1",
                    color: "textSecondary",
                    children: t.token()
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                item: true,
                xs: 6,
                children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                    variant: "body1",
                    color: "textPrimary",
                    align: "right",
                    className: classes.token,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                            children: settings?.token?.symbol
                        }),
                        (0,address/* isNativeTokenAddress */.qw)(settings?.token) ? null : /*#__PURE__*/ (0,jsx_runtime.jsx)(Link/* default */.Z, {
                            color: "textPrimary",
                            className: classes.link,
                            href: resolver/* explorerResolver.fungibleTokenLink */.Nb.fungibleTokenLink(chainId, settings?.token?.address ?? ''),
                            target: "_blank",
                            rel: "noopener noreferrer",
                            onClick: stop,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Launch/* default */.Z, {
                                fontSize: "small"
                            })
                        })
                    ]
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                item: true,
                xs: 6,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    variant: "body1",
                    color: "textSecondary",
                    children: t.split_mode()
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                item: true,
                xs: 6,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    variant: "body1",
                    color: "textPrimary",
                    align: "right",
                    children: settings?.isRandom ? t.random() : t.average()
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                item: true,
                xs: 6,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    variant: "body1",
                    color: "textSecondary",
                    children: t.shares()
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                item: true,
                xs: 6,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    variant: "body1",
                    color: "textPrimary",
                    align: "right",
                    children: settings?.shares
                })
            }),
            settings?.isRandom ? null : /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                        item: true,
                        xs: 6,
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            variant: "body1",
                            color: "textSecondary",
                            children: t.amount_per_share()
                        })
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                        item: true,
                        xs: 6,
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            variant: "body1",
                            color: "textPrimary",
                            align: "right",
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* FormattedBalance */.BV, {
                                value: new (bignumber_default())(settings?.total ?? 0).div(settings?.shares ?? 1),
                                decimals: settings?.token?.decimals,
                                symbol: settings?.token?.symbol,
                                formatter: base_src/* formatBalance */.az
                            })
                        })
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                item: true,
                xs: 6,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    variant: "body1",
                    color: "textSecondary",
                    children: t.total_amount()
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                item: true,
                xs: 6,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    variant: "body1",
                    color: "textPrimary",
                    align: "right",
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* FormattedBalance */.BV, {
                        value: settings?.total,
                        decimals: settings?.token?.decimals,
                        symbol: settings?.token?.symbol,
                        formatter: base_src/* formatBalance */.az
                    })
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                item: true,
                xs: 12,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Paper/* default */.Z, {
                    className: classes.hit,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                        variant: "body1",
                        align: "center",
                        style: {
                            fontSize: 14,
                            lineHeight: '20px'
                        },
                        children: t.hint()
                    })
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                item: true,
                xs: 6,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                    disabled: isCreating,
                    variant: "contained",
                    size: "large",
                    fullWidth: true,
                    onClick: onBack,
                    children: t.back()
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                item: true,
                xs: 6,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                    loading: isCreating,
                    variant: "contained",
                    size: "large",
                    fullWidth: true,
                    onClick: createRedpacket,
                    children: t.send_symbol({
                        amount: (0,base_src/* formatBalance */.az)(settings?.total, settings?.token?.decimals ?? 0),
                        symbol: settings?.token?.symbol ?? '-'
                    })
                })
            })
        ]
    });
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/FormControl/FormControl.js + 1 modules
var FormControl = __webpack_require__(56030);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/InputLabel/InputLabel.js + 1 modules
var InputLabel = __webpack_require__(90242);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Select/Select.js + 3 modules
var Select = __webpack_require__(40608);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/MenuItem/MenuItem.js + 1 modules
var MenuItem = __webpack_require__(11087);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/TextField/TextField.js + 2 modules
var TextField = __webpack_require__(48591);
// EXTERNAL MODULE: ./src/utils/index.ts + 4 modules
var utils = __webpack_require__(93455);
// EXTERNAL MODULE: ./src/web3/UI/EthereumERC20TokenApprovedBoundary.tsx
var EthereumERC20TokenApprovedBoundary = __webpack_require__(19963);
// EXTERNAL MODULE: ./src/web3/UI/WalletConnectedBoundary.tsx
var WalletConnectedBoundary = __webpack_require__(59345);
// EXTERNAL MODULE: ./src/web3/UI/TokenAmountPanel.tsx + 1 modules
var TokenAmountPanel = __webpack_require__(49524);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedPacketERC20Form.tsx


















// seconds of 1 day
const duration = 60 * 60 * 24;
const RedPacketERC20Form_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        field: {
            display: 'flex',
            margin: theme.spacing(1, 0)
        },
        line: {
            display: 'flex',
            margin: theme.spacing(1)
        },
        input: {
            flex: 1,
            padding: theme.spacing(0.5)
        },
        tip: {
            fontSize: 12,
            color: theme.palette.text.secondary
        },
        button: {
            marginTop: theme.spacing(1.5)
        },
        selectShrinkLabel: {
            top: 6,
            backgroundColor: theme.palette.background.paper,
            paddingLeft: 2,
            paddingRight: 7,
            transform: 'translate(17px, -10px) scale(0.75) !important'
        },
        inputShrinkLabel: {
            transform: 'translate(17px, -3px) scale(0.75) !important'
        },
        label: {
            textAlign: 'left',
            color: theme.palette.text.secondary
        },
        gasEstimation: {
            display: 'flex',
            justifyContent: 'flex-end',
            alignItems: 'center',
            cursor: 'pointer',
            '& > p': {
                marginRight: 5,
                color: theme.palette.mode === 'light' ? '#7B8192' : '#6F767C'
            }
        }
    })
);
function RedPacketERC20Form(props) {
    const t = useI18N();
    const { t: tr  } = (0,utils/* useI18N */.M1)();
    const classes = (0,entry/* useStylesExtends */.Bc)(RedPacketERC20Form_useStyles(), props);
    const { onChange , onNext , origin  } = props;
    // context
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const { HAPPY_RED_PACKET_ADDRESS_V4  } = (0,constants_constants/* useRedPacketConstants */.AA)(chainId);
    // #region select token
    const { value: nativeTokenDetailed  } = (0,entry_web3/* useFungibleToken */.cf)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM, undefined, {
        chainId
    });
    const [token = nativeTokenDetailed, setToken] = (0,react.useState)(origin?.token);
    const pickToken = (0,src/* usePickToken */.yQ)();
    const onSelectTokenChipClick = (0,react.useCallback)(async ()=>{
        const picked = await pickToken({
            disableNativeToken: false,
            selectedTokens: token ? [
                token.address
            ] : [],
            chainId
        });
        if (picked) setToken(picked);
    }, [
        pickToken,
        token?.address,
        chainId
    ]);
    // #endregion
    // #region packet settings
    const [isRandom, setRandom] = (0,react.useState)(origin?.isRandom ? 1 : 0);
    const [message, setMessage] = (0,react.useState)(origin?.message || t.best_wishes());
    const currentIdentity = (0,useActivatedUI/* useCurrentIdentity */.Ud)();
    const { value: linkedPersona  } = (0,useActivatedUI/* useCurrentLinkedPersona */.Ol)();
    const senderName = (currentIdentity?.identifier.userId ?? linkedPersona?.nickname) ?? 'Unknown User';
    // shares
    const [shares, setShares] = (0,react.useState)(origin?.shares || constants/* RED_PACKET_DEFAULT_SHARES */.sX);
    const onShareChange = (0,react.useCallback)((ev)=>{
        const shares_ = ev.currentTarget.value.replace(/[,.]/g, '');
        if (shares_ === '') setShares('');
        else if (/^[1-9]+\d*$/.test(shares_)) {
            const parsed = Number.parseInt(shares_, 10);
            if (parsed >= constants/* RED_PACKET_MIN_SHARES */.Ih && parsed <= constants/* RED_PACKET_MAX_SHARES */.DY) setShares(Number.parseInt(shares_, 10));
        }
    }, [
        constants/* RED_PACKET_MIN_SHARES */.Ih,
        constants/* RED_PACKET_MAX_SHARES */.DY
    ]);
    // amount
    const [rawAmount, setRawAmount] = (0,react.useState)(origin?.isRandom ? (0,base_src/* formatBalance */.az)(origin?.total, origin.token?.decimals ?? 0) : (0,base_src/* formatBalance */.az)(new (bignumber_default())(origin?.total ?? '0').div(origin?.shares ?? 1), origin?.token?.decimals ?? 0));
    const amount = (0,base_src/* rightShift */.pu)(rawAmount || '0', token?.decimals);
    const totalAmount = (0,react.useMemo)(()=>(0,base_src/* multipliedBy */.$q)(amount, isRandom ? 1 : shares ?? '0')
    , [
        amount,
        shares
    ]);
    const isDivisible = !totalAmount.dividedBy(shares).isLessThan(1);
    (0,react.useEffect)(()=>{
        setToken(nativeTokenDetailed);
    }, [
        chainId,
        nativeTokenDetailed
    ]);
    (0,react.useEffect)(()=>{
        setRawAmount('0');
    }, [
        token
    ]);
    // balance
    const { value: tokenBalance = '0' , loading: loadingTokenBalance  } = (0,entry_web3/* useFungibleTokenBalance */.V4)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM, token?.address ?? '', {
        chainId
    });
    // #endregion
    const validationMessage = (0,react.useMemo)(()=>{
        if (!token) return t.select_a_token();
        if (!account) return tr('plugin_wallet_connect_a_wallet');
        if ((0,base_src/* isZero */.Fr)(shares || '0')) return 'Enter shares';
        if ((0,base_src/* isGreaterThan */.T1)(shares || '0', 255)) return 'At most 255 recipients';
        if ((0,base_src/* isZero */.Fr)(amount)) return tr('plugin_dhedge_enter_an_amount');
        if ((0,base_src/* isGreaterThan */.T1)(totalAmount, tokenBalance)) return tr('plugin_gitcoin_insufficient_balance', {
            symbol: token.symbol
        });
        if (!isDivisible) return t.indivisible({
            symbol: token.symbol,
            amount: (0,base_src/* formatBalance */.az)(1, token.decimals)
        });
        return '';
    }, [
        account,
        amount,
        totalAmount,
        shares,
        token,
        tokenBalance,
        t,
        tr
    ]);
    const creatingParams = (0,react.useMemo)(()=>({
            duration,
            isRandom: Boolean(isRandom),
            name: senderName,
            message: message || t.best_wishes(),
            shares: shares || 0,
            token: token ? (0,omit/* default */.Z)(token, [
                'logoURI'
            ]) : undefined,
            total: totalAmount.toFixed()
        })
    , [
        isRandom,
        senderName,
        message,
        t,
        shares,
        token,
        totalAmount
    ]);
    const onClick = (0,react.useCallback)(()=>{
        onChange(creatingParams);
        onNext();
    }, [
        creatingParams,
        onChange,
        onNext
    ]);
    const selectRef = (0,react.useRef)(null);
    if (!token) return null;
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                className: classes.field,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)(FormControl/* default */.Z, {
                        className: classes.input,
                        variant: "outlined",
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(InputLabel/* default */.Z, {
                                className: classes.selectShrinkLabel,
                                children: t.split_mode()
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsxs)(Select/* default */.Z, {
                                ref: selectRef,
                                value: isRandom ? 1 : 0,
                                onChange: (e)=>{
                                    // foolproof, reset amount since the meaning of amount changed:
                                    // 'total amount' <=> 'amount per share'
                                    setRawAmount('0');
                                    setRandom(e.target.value);
                                },
                                MenuProps: {
                                    anchorOrigin: {
                                        vertical: 'bottom',
                                        horizontal: 'center'
                                    },
                                    container: selectRef.current,
                                    anchorEl: selectRef.current
                                },
                                children: [
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)(MenuItem/* default */.Z, {
                                        value: 0,
                                        children: t.average()
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)(MenuItem/* default */.Z, {
                                        value: 1,
                                        children: t.random()
                                    })
                                ]
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(TextField/* default */.Z, {
                        className: classes.input,
                        InputProps: {
                            inputProps: {
                                autoComplete: 'off',
                                autoCorrect: 'off',
                                inputMode: 'decimal',
                                placeholder: '0',
                                pattern: '^[0-9]$',
                                spellCheck: false
                            }
                        },
                        InputLabelProps: {
                            shrink: true,
                            classes: {
                                shrink: classes.inputShrinkLabel
                            }
                        },
                        label: t.shares(),
                        value: shares,
                        onChange: onShareChange
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                className: classes.field,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TokenAmountPanel/* TokenAmountPanel */.x, {
                    classes: {
                        root: classes.input
                    },
                    label: isRandom ? 'Total Amount' : t.amount_per_share(),
                    amount: rawAmount,
                    balance: tokenBalance,
                    token: token,
                    maxAmountShares: isRandom || shares === '' ? 1 : shares,
                    onAmountChange: setRawAmount,
                    SelectTokenChip: {
                        loading: loadingTokenBalance,
                        ChipProps: {
                            onClick: onSelectTokenChipClick
                        }
                    }
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                className: classes.field,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TextField/* default */.Z, {
                    className: classes.input,
                    onChange: (e)=>setMessage(e.target.value)
                    ,
                    InputLabelProps: {
                        shrink: true,
                        classes: {
                            shrink: classes.inputShrinkLabel
                        }
                    },
                    inputProps: {
                        placeholder: t.best_wishes()
                    },
                    label: t.attached_message(),
                    value: message
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(WalletConnectedBoundary/* WalletConnectedBoundary */.T, {
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(EthereumERC20TokenApprovedBoundary/* EthereumERC20TokenApprovedBoundary */.L, {
                    amount: totalAmount.toFixed(),
                    token: token?.schema === types/* SchemaType.ERC20 */.XQ.ERC20 ? token : undefined,
                    spender: HAPPY_RED_PACKET_ADDRESS_V4,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                        variant: "contained",
                        size: "large",
                        className: classes.button,
                        fullWidth: true,
                        disabled: !!validationMessage,
                        onClick: onClick,
                        children: validationMessage || t.next()
                    })
                })
            })
        ]
    });
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Box/Box.js
var Box = __webpack_require__(96436);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/CircularProgress/CircularProgress.js + 1 modules
var CircularProgress = __webpack_require__(69314);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/List/List.js + 1 modules
var List = __webpack_require__(73518);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/ListItem/ListItem.js + 2 modules
var ListItem = __webpack_require__(82138);
// EXTERNAL MODULE: ../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/v4.js + 2 modules
var v4 = __webpack_require__(32513);
// EXTERNAL MODULE: ../../node_modules/.pnpm/wallet.ts@1.0.1/node_modules/wallet.ts/dist/index.js
var dist = __webpack_require__(99674);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.8.0_ar3vczqpton7uep5462l6mtgi4/node_modules/@mui/icons-material/ExpandMore.js
var ExpandMore = __webpack_require__(96209);
;// CONCATENATED MODULE: ./src/web3/UI/ERC721ContractSelectPanel.tsx












const ERC721ContractSelectPanel_useStyles = (0,entry/* makeStyles */.ZL)()((theme, props)=>{
    return {
        root: {
            height: 52,
            border: `1px solid ${theme.palette.mode === 'light' ? '#EBEEF0' : '#2F3336'}`,
            borderRadius: 12,
            padding: theme.spacing(0.8, 1.2, 1),
            display: 'flex',
            justifyContent: 'space-between',
            flexDirection: 'column'
        },
        balance: {},
        title: {},
        wrapper: {
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            width: '100%'
        },
        icon: {
            height: 24,
            width: 24,
            borderRadius: 500
        },
        tokenWrapper: {
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'space-between'
        },
        nftName: {
            marginLeft: theme.spacing(props.hasIcon ? 1 : 0),
            fontWeight: 300,
            pointerEvents: 'none',
            fontSize: 16,
            whiteSpace: 'nowrap',
            overflow: 'hidden',
            textOverflow: 'ellipsis'
        },
        expandIcon: {
            color: theme.palette.text.primary
        },
        pointer: {
            cursor: 'pointer'
        }
    };
});
function ERC721ContractSelectPanel(props) {
    const { onContractChange , onBalanceChange , contract , label , chainId =types/* ChainId.Mainnet */.a_.Mainnet , balance  } = props;
    const { t  } = (0,utils/* useI18N */.M1)();
    const { classes  } = ERC721ContractSelectPanel_useStyles({
        hasIcon: Boolean(contract?.logoURL)
    });
    // #region select contract
    const [id] = (0,react.useState)(v4/* default */.Z);
    const { setDialog: setNftContractDialog  } = (0,shared_base_ui_src/* useRemoteControlledDialog */.F$)(messages/* WalletMessages.events.selectNftContractDialogUpdated */.R.events.selectNftContractDialogUpdated, (0,react.useCallback)((ev)=>{
        if (ev.open || !ev.contract || ev.uuid !== id) return;
        onContractChange(ev.contract);
        onBalanceChange(Number.parseInt(ev.balance ?? '0', 10));
    }, [
        id,
        onContractChange,
        onBalanceChange
    ]));
    const openDialog = (0,react.useCallback)(()=>{
        setNftContractDialog({
            open: true,
            chainId,
            uuid: id
        });
    }, [
        setNftContractDialog,
        v4/* default */.Z,
        chainId
    ]);
    // #endregion
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
        className: classes.root,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                className: classes.wrapper,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                        className: classes.title,
                        color: "textSecondary",
                        variant: "body2",
                        component: "span",
                        children: label ?? t('select_an_nft')
                    }),
                    !contract?.address || !dist.EthereumAddress.isValid(contract.address) ? null : /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                        className: classes.title,
                        color: "textSecondary",
                        variant: "body2",
                        component: "span",
                        children: [
                            t('wallet_balance'),
                            ": ",
                            balance ? balance : '0'
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                className: classnames_default()(classes.wrapper, classes.pointer),
                onClick: openDialog,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                        className: classes.tokenWrapper,
                        children: [
                            contract?.logoURL ? /*#__PURE__*/ (0,jsx_runtime.jsx)("img", {
                                className: classes.icon,
                                src: contract?.logoURL
                            }) : null,
                            contract?.name ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                className: classes.nftName,
                                color: "textPrimary",
                                children: contract?.name
                            }) : null
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(ExpandMore/* default */.Z, {
                        className: classes.expandIcon
                    })
                ]
            })
        ]
    });
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.8.0_ar3vczqpton7uep5462l6mtgi4/node_modules/@mui/icons-material/OpenInNew.js
var OpenInNew = __webpack_require__(62361);
;// CONCATENATED MODULE: ./src/web3/UI/EthereumERC721TokenApprovedBoundary.tsx










const EthereumERC721TokenApprovedBoundary_useStyles = (0,entry/* makeStyles */.ZL)()(()=>({
        snackBarText: {
            fontSize: 14
        },
        snackBarLink: {
            color: 'white'
        },
        openIcon: {
            display: 'flex',
            width: 18,
            height: 18,
            marginLeft: 2
        },
        snackBar: {
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            transform: 'translateY(1px)'
        }
    })
);
function EthereumERC721TokenApprovedBoundary(props) {
    const { owner , contractDetailed , operator , children , validationMessage: _validationMessage  } = props;
    const { t  } = (0,utils/* useI18N */.M1)();
    const classes = (0,entry/* useStylesExtends */.Bc)(EthereumERC721TokenApprovedBoundary_useStyles(), props);
    const { value , loading , retry  } = (0,entry_web3_evm/* useERC721ContractIsApproveForAll */.tK)(contractDetailed?.address, owner, operator);
    const [approveState, approveCallback] = (0,entry_web3_evm/* useERC721ContractSetApproveForAllCallback */.a0)(contractDetailed?.address, operator, true);
    const { showSnackbar  } = (0,entry/* useCustomSnackbar */.Ii)();
    const approve = (0,react.useCallback)(async ()=>{
        const hash = await approveCallback();
        if (typeof hash !== 'string') {
            showSnackbar(approveState.error?.message);
            return;
        }
        showSnackbar(/*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
            className: classes.snackBar,
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    className: classes.snackBarText,
                    children: t('plugin_wallet_approve_all_nft_successfully', {
                        symbol: contractDetailed?.symbol
                    })
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(Link/* default */.Z, {
                    href: resolver/* explorerResolver.transactionLink */.Nb.transactionLink(contractDetailed.chainId, hash),
                    target: "_blank",
                    rel: "noopener noreferrer",
                    className: classes.snackBarLink,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(OpenInNew/* default */.Z, {
                        className: classes.openIcon
                    })
                })
            ]
        }), {
            variant: 'success',
            anchorOrigin: {
                horizontal: 'right',
                vertical: 'top'
            }
        });
        retry();
    }, [
        showSnackbar,
        approveState,
        retry,
        contractDetailed
    ]);
    const validationMessage = (0,react.useMemo)(()=>{
        if (!contractDetailed?.address || !dist.EthereumAddress.isValid(contractDetailed?.address)) return t('plugin_wallet_select_a_nft_contract');
        if (!owner || !dist.EthereumAddress.isValid(owner)) return t('plugin_wallet_select_a_nft_owner');
        if (!operator || !dist.EthereumAddress.isValid(operator)) return t('plugin_wallet_select_a_nft_operator');
        if (_validationMessage) return _validationMessage;
        return '';
    }, [
        contractDetailed,
        owner,
        operator,
        _validationMessage
    ]);
    if (approveState.loading) {
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
            className: classes.approveButton,
            variant: "contained",
            size: "large",
            fullWidth: true,
            loading: true,
            disabled: true,
            ...props.ActionButtonProps,
            children: t('plugin_wallet_nft_approving_all', {
                symbol: contractDetailed?.symbol ? contractDetailed.symbol.toLowerCase() === 'unknown' ? 'All' : contractDetailed?.symbol : 'All'
            })
        });
    } else if (validationMessage) {
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
            className: classes.approveButton,
            variant: "contained",
            size: "large",
            fullWidth: true,
            disabled: true,
            ...props.ActionButtonProps,
            children: validationMessage
        });
    } else if (loading) {
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
            className: classes.approveButton,
            variant: "contained",
            size: "large",
            fullWidth: true,
            loading: true,
            disabled: true,
            ...props.ActionButtonProps
        });
    } else if (value === false) {
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
            className: classes.approveButton,
            variant: "contained",
            size: "large",
            fullWidth: true,
            onClick: approve,
            ...props.ActionButtonProps,
            children: t('plugin_wallet_approve_all_nft', {
                symbol: contractDetailed?.symbol ? contractDetailed?.symbol.toLowerCase() === 'unknown' ? 'All' : contractDetailed?.symbol : 'All'
            })
        });
    } else if (value === undefined) {
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
            className: classes.approveButton,
            variant: "contained",
            size: "large",
            fullWidth: true,
            onClick: retry,
            ...props.ActionButtonProps,
            children: t('plugin_wallet_fail_to_load_nft_contract')
        });
    }
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
        children: children
    });
}

// EXTERNAL MODULE: ../web3-shared/evm/utils/formatter.ts
var formatter = __webpack_require__(5326);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.8.0_ar3vczqpton7uep5462l6mtgi4/node_modules/@mui/icons-material/Check.js
var Check = __webpack_require__(28937);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.8.0_ar3vczqpton7uep5462l6mtgi4/node_modules/@mui/icons-material/Close.js
var Close = __webpack_require__(7708);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.8.0_ar3vczqpton7uep5462l6mtgi4/node_modules/@mui/icons-material/AddCircleOutline.js
var AddCircleOutline = __webpack_require__(56601);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/InputBase/InputBase.js
var InputBase = __webpack_require__(52125);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedpacketMessagePanel.tsx





const RedpacketMessagePanel_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    return {
        root: {
            height: 52,
            border: `1px solid ${theme.palette.mode === 'light' ? '#EBEEF0' : '#2F3336'}`,
            borderRadius: 12,
            padding: theme.spacing(0.8, 1.2, 1),
            display: 'flex',
            justifyContent: 'space-between',
            flexDirection: 'column',
            width: '100%'
        },
        title: {},
        wrapper: {
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            width: '100%'
        },
        input: {
            flex: 1,
            padding: theme.spacing(0.5)
        },
        inputShrinkLabel: {
            transform: 'translate(17px, -3px) scale(0.75) !important'
        }
    };
});
function RedpacketMessagePanel(props) {
    const { onChange , message  } = props;
    const { classes  } = RedpacketMessagePanel_useStyles();
    const t = useI18N();
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
        className: classes.root,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                className: classes.wrapper,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    className: classes.title,
                    color: "textSecondary",
                    variant: "body2",
                    component: "span",
                    children: t.message_label()
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                className: classnames_default()(classes.wrapper),
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(InputBase/* default */.ZP, {
                    className: classes.input,
                    onChange: (e)=>onChange(e.target.value)
                    ,
                    inputProps: {
                        placeholder: t.best_wishes()
                    },
                    value: message
                })
            })
        ]
    });
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Button/Button.js
var Button = __webpack_require__(85792);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.8.0_ar3vczqpton7uep5462l6mtgi4/node_modules/@mui/icons-material/QuestionMark.js
var QuestionMark = __webpack_require__(66652);
// EXTERNAL MODULE: ../icons/general/Search.tsx
var Search = __webpack_require__(68488);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.4.0/node_modules/react-use/esm/useUpdate.js
var useUpdate = __webpack_require__(31217);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/findLastIndex.js
var findLastIndex = __webpack_require__(86049);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/SelectNftTokenDialog.tsx

















const SelectNftTokenDialog_useStyles = (0,entry/* makeStyles */.ZL)()((theme, props)=>({
        dialogContent: {
            minHeight: 380
        },
        dialogContentFixedHeight: {
            height: 610
        },
        tokenBox: {
            background: theme.palette.background.default,
            width: 530,
            minHeight: 270,
            borderRadius: 12,
            margin: '16px auto',
            padding: 10
        },
        ownerTokenBox: {
            background: theme.palette.background.default,
            width: '96%',
            height: 480,
            borderRadius: 12,
            margin: '14px auto',
            padding: 10
        },
        ownerList: {
            display: 'grid',
            gridTemplateColumns: 'repeat(4, 1fr)',
            gap: '16px 0',
            width: 528,
            height: 188,
            overflowY: 'auto',
            borderRadius: 12,
            marginTop: theme.spacing(1.5),
            marginBottom: theme.spacing(1.5),
            padding: theme.spacing(1, 1.5, 1, 1)
        },
        noResultBox: {
            width: 540,
            height: 180,
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            marginTop: 16
        },
        search: {
            width: 405,
            padding: 5,
            border: '1px solid #EBEEF0',
            borderRadius: 6,
            display: 'flex',
            alignItems: 'center'
        },
        iconButton: {
            color: '#7B8192',
            padding: theme.spacing(0.5)
        },
        searchButton: {
            borderRadius: 6,
            width: 100
        },
        searchWrapper: {
            display: 'flex',
            justifyContent: 'space-between',
            padding: 0
        },
        searchWrapperSingle: {
            display: 'flex',
            justifyContent: 'space-between',
            padding: 0
        },
        textField: {
            width: 394
        },
        wrapper: {
            position: 'relative',
            display: 'flex',
            flexDirection: 'column',
            borderRadius: 8,
            padding: 0,
            marginBottom: theme.spacing(2.5),
            background: theme.palette.background.paper,
            width: 120,
            height: 180,
            minHeight: 153,
            overflow: 'hidden'
        },
        iframe: {
            minHeight: 147
        },
        nftNameWrapper: {
            width: '100%',
            background: theme.palette.mode === 'light' ? 'none' : '#2F3336',
            borderBottomRightRadius: 8,
            borderBottomLeftRadius: 8
        },
        nftImg: {
            margin: '0 auto',
            height: 160,
            width: 'auto',
            minWidth: 120
        },
        nftName: {
            marginLeft: 8,
            minHeight: 30
        },
        nftWrapper: {
            justifyContent: 'center'
        },
        confirmButton: {
            width: '100%',
            backgroundColor: theme.palette.mode === 'dark' ? '#fff' : '#000',
            color: theme.palette.mode === 'dark' ? '#000' : '#fff'
        },
        tokenSelector: {
            display: 'grid',
            gridTemplateColumns: 'repeat(4, 1fr)',
            gap: 16,
            width: '100%',
            height: 388,
            overflowY: 'auto',
            borderRadius: 12,
            marginTop: theme.spacing(1.5),
            marginBottom: theme.spacing(1.5),
            padding: theme.spacing(1, 1.5, 1, 1),
            boxSizing: 'border-box',
            '&::-webkit-scrollbar': {
                display: 'none'
            }
        },
        selectWrapper: {
            position: 'relative',
            display: 'flex',
            flexDirection: 'column',
            borderRadius: 8,
            padding: 0,
            marginBottom: theme.spacing(2.5),
            background: theme.palette.background.paper,
            width: 120,
            height: 180,
            overflow: 'hidden'
        },
        hide: {
            display: 'none !important'
        },
        loadingWrapper: {
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            backgroundColor: 'transparent'
        },
        selectWrapperNftNameWrapper: {
            width: '100%',
            background: theme.palette.background.paper,
            borderBottomRightRadius: 8,
            borderBottomLeftRadius: 8,
            overflow: 'hidden'
        },
        selectWrapperNftName: {
            marginLeft: 8,
            minHeight: 35,
            whiteSpace: 'nowrap',
            textOverflow: 'ellipsis',
            overflow: 'hidden'
        },
        checkbox: {
            position: 'absolute',
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            cursor: 'pointer',
            top: 8,
            right: 6,
            width: 17,
            height: 17,
            borderRadius: 6,
            border: '2px solid #6E748E',
            backgroundColor: 'white'
        },
        checked: {
            borderColor: '#1C68F3 !important'
        },
        checkIcon: {
            width: 15,
            height: 15,
            color: '#1C68F3'
        },
        loadingFailImage: {
            minHeight: '0 !important',
            maxWidth: 'none',
            transform: 'translateY(10px)',
            width: 64,
            height: 64
        },
        selectedTokenAmount: {
            color: props.isSelectSharesExceed ? '#FF5F5F' : '#1C68F3'
        },
        totalAmount: {
            paddingLeft: 1
        },
        selectAmountBox: {
            display: 'flex',
            flexDirection: 'row-reverse',
            alignItems: 'center'
        },
        questionMarkIcon: {
            padding: 2,
            width: 12,
            border: `1px solid ${theme.palette.mode === 'light' ? '#0F1419' : '#D9D9D9'}`,
            borderRadius: 999,
            transform: 'translateY(-1px)',
            height: 12,
            marginLeft: 5,
            cursor: 'pointer'
        },
        selectBar: {
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'space-between',
            marginTop: 12,
            padding: '0 8px'
        },
        selectAll: {
            display: 'flex',
            alignItems: 'center',
            fontSize: 14
        },
        selectAllCheckBox: {
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            cursor: 'pointer',
            width: 17,
            height: 17,
            borderRadius: 6,
            marginRight: 5,
            border: '2px solid #6E748E',
            backgroundColor: 'white'
        },
        selectAllCheckBoxText: {
            pointerEvents: 'none'
        },
        selectSharesExceed: {
            color: '#FF5F5F'
        },
        selectSharesExceedBox: {
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'space-between',
            margin: '14px 4px'
        },
        arrow: {
            color: theme.palette.mode === 'dark' ? '#fff' : '#111418',
            transform: 'translateX(260px) !important'
        },
        tooltip: {
            transform: 'translateX(20px) !important',
            padding: '10px 20px',
            width: 256,
            backgroundColor: theme.palette.mode === 'dark' ? '#fff' : '#111418'
        },
        tooltipText: {
            color: theme.palette.mode === 'dark' ? '#000' : '#fff'
        },
        tokenId: {
            color: '#1D9BF0'
        },
        nonExistedTokenBox: {
            height: 388,
            width: '100%',
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center'
        },
        assetImgWrapper: {
            maxHeight: 155
        }
    })
);
function SelectNftTokenDialog(props) {
    const { open , contract , existTokenDetailedList , tokenDetailedOwnerList , setExistTokenDetailedList , onClose , loadingOwnerList ,  } = props;
    const { t: tr  } = (0,utils/* useI18N */.M1)();
    const t1 = useI18N();
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const [tokenDetailed, setTokenDetailed] = (0,react.useState)();
    const [searched, setSearched] = (0,react.useState)(false);
    const [tokenDetailedSelectedList, setTokenDetailedSelectedList] = (0,react.useState)(existTokenDetailedList);
    const [loadingToken, setLoadingToken] = (0,react.useState)(false);
    const [tokenId, setTokenId] = (0,react.useState)('');
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const connection = (0,entry_web3/* useWeb3Connection */.Tv)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const [tokenIdListInput, setTokenIdListInput] = (0,react.useState)('');
    const [tokenIdFilterList, setTokenIdFilterList] = (0,react.useState)([]);
    const [nonExistedTokenIdList, setNonExistedTokenIdList] = (0,react.useState)([]);
    const isSelectSharesExceed = (tokenDetailedOwnerList.length === 0 ? constants/* NFT_RED_PACKET_MAX_SHARES */.I0 - 1 : constants/* NFT_RED_PACKET_MAX_SHARES */.I0) < tokenDetailedSelectedList.length;
    const { classes  } = SelectNftTokenDialog_useStyles({
        isSelectSharesExceed
    });
    const [selectAll, setSelectAll] = (0,react.useState)(false);
    const selectAllHandler = (0,react.useCallback)(()=>{
        setTokenDetailedSelectedList(selectAll ? [] : tokenDetailedOwnerList);
        setSelectAll(!selectAll);
    }, [
        selectAll,
        tokenDetailedOwnerList
    ]);
    (0,react.useEffect)(()=>{
        setTokenDetailed(undefined);
        setTokenId('');
        setTokenDetailedSelectedList(existTokenDetailedList);
        setSearched(false);
    }, [
        contract
    ]);
    (0,react.useEffect)(()=>{
        setTokenIdFilterList([]);
        setNonExistedTokenIdList([]);
    }, [
        tokenIdListInput
    ]);
    const update = (0,useUpdate/* default */.Z)();
    (0,react.useEffect)(update, [
        tokenDetailedOwnerList
    ]);
    const selectToken = (0,react.useCallback)((token, findToken, shiftKey, index)=>{
        if (!shiftKey || tokenIdFilterList.length > 0) {
            if (findToken) {
                setTokenDetailedSelectedList(tokenDetailedSelectedList.filter((v)=>v.tokenId !== findToken.tokenId
                ));
            } else {
                setTokenDetailedSelectedList(tokenDetailedSelectedList.concat({
                    ...token,
                    index
                }));
            }
        } else {
            const tokenDetailedSelectedListSorted = tokenDetailedSelectedList.sort((a, b)=>(b.index ?? 0) - (a.index ?? 0)
            );
            if (findToken) {
                const unselectedTokenIdList = [];
                let nextToken = findToken;
                while(nextToken){
                    unselectedTokenIdList.push(nextToken.tokenId);
                    const nextTokenIndex = (nextToken?.index ?? 0) + 1;
                    nextToken = tokenDetailedSelectedListSorted.find((v)=>(v.index ?? 0) === nextTokenIndex
                    );
                }
                setTokenDetailedSelectedList(tokenDetailedSelectedList.filter((v)=>!unselectedTokenIdList.includes(v.tokenId)
                ));
            } else {
                const lastSelectedToken = tokenDetailedSelectedListSorted.filter((v)=>(v?.index ?? 0) < index
                )[0];
                const lastSelectedTokenIndex = (0,findLastIndex/* default */.Z)(tokenDetailedOwnerList, (v, i)=>v.tokenId === lastSelectedToken?.tokenId && i < index
                );
                setTokenDetailedSelectedList(tokenDetailedSelectedList.concat(tokenDetailedOwnerList.slice(lastSelectedTokenIndex + 1, index + 1)));
            }
        }
    }, [
        tokenDetailedSelectedList,
        setTokenDetailedSelectedList,
        tokenIdFilterList
    ]);
    // #region fetch token detail
    const onSearch = (0,react.useCallback)(async ()=>{
        setLoadingToken(true);
        const _tokenDetailed = await connection?.getNonFungibleToken(contract?.address ?? '', tokenId, types/* SchemaType.ERC721 */.XQ.ERC721, {
            account,
            chainId
        });
        setTokenDetailed(_tokenDetailed?.ownerId ? {
            ..._tokenDetailed,
            index: 0
        } : undefined);
        setSearched(true);
        setLoadingToken(false);
    }, [
        connection,
        contract,
        tokenId,
        chainId,
        account
    ]);
    (0,react.useEffect)(()=>{
        setTokenDetailed(undefined);
        setSearched(false);
    }, [
        tokenId
    ]);
    (0,react.useEffect)(()=>{
        if (tokenDetailedOwnerList.length > 0) setTokenDetailed(undefined);
    }, [
        tokenDetailedOwnerList.length
    ]);
    const isOwner = (0,base_src/* isSameAddress */.Wr)(account, tokenDetailed?.ownerId) || tokenDetailedSelectedList.length > 0;
    const isAdded = existTokenDetailedList.map((t)=>t.tokenId
    ).includes(tokenDetailed?.tokenId ?? '');
    // #endregion
    const onFilter = (0,react.useCallback)(()=>{
        if (!/^(\s?(\d+)?\s?,?)+$/.test(tokenIdListInput)) return;
        const list = tokenIdListInput.split(',').map((v)=>Number(v).toString()
        );
        setTokenIdFilterList(list);
        setNonExistedTokenIdList(list.filter((v)=>!tokenDetailedOwnerList.map((t)=>t.tokenId
            ).includes(v)
        ));
    }, [
        tokenIdListInput
    ]);
    const onSubmit = (0,react.useCallback)(()=>{
        setExistTokenDetailedList(tokenDetailed ? [
            tokenDetailed,
            ...existTokenDetailedList
        ] : tokenDetailedSelectedList);
        onClose();
    }, [
        tokenDetailed,
        tokenDetailedSelectedList,
        setExistTokenDetailedList,
        onClose
    ]);
    const NonExistedTokenList = ()=>/*#__PURE__*/ (0,jsx_runtime.jsx)(Translate.nft_non_existed_tip, {
            components: {
                tokenIdList: /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                    children: nonExistedTokenIdList.map((id, i)=>/*#__PURE__*/ (0,jsx_runtime.jsxs)("span", {
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsxs)("span", {
                                    className: classes.tokenId,
                                    children: [
                                        " #",
                                        id
                                    ]
                                }),
                                i < nonExistedTokenIdList.length - 1 ? ', ' : ' '
                            ]
                        }, i)
                    )
                })
            }
        })
    ;
    const maxSharesOptions = {
        amount: constants/* NFT_RED_PACKET_MAX_SHARES.toString */.I0.toString()
    };
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* InjectedDialog */.Fl, {
        open: open,
        onClose: onClose,
        title: t1.nft_select_collection(),
        maxWidth: "xs",
        children: tokenDetailedOwnerList.length === 0 ? /*#__PURE__*/ (0,jsx_runtime.jsxs)(DialogContent/* default */.Z, {
            className: classes.dialogContent,
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                    className: classes.tokenBox,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                            className: classes.searchWrapperSingle,
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Paper/* default */.Z, {
                                    className: classes.search,
                                    elevation: 0,
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Search/* SearchIcon */.W, {
                                            className: classes.iconButton
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(InputBase/* default */.ZP, {
                                            value: tokenId,
                                            placeholder: "Input Token ID",
                                            className: classes.textField,
                                            onChange: (e)=>setTokenId(e.target.value)
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                                    disabled: !tokenId,
                                    className: classes.searchButton,
                                    variant: "contained",
                                    onClick: onSearch,
                                    children: t1.search()
                                })
                            ]
                        }),
                        loadingToken || !tokenDetailed || !contract ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Box/* default */.Z, {
                            className: classes.noResultBox,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                children: loadingToken ? t1.loading_token() : searched ? t1.search_no_result() : null
                            })
                        }) : /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                            className: classnames_default()(classes.wrapper, classes.nftWrapper),
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* NFTCardStyledAssetPlayer */.yC, {
                                    contractAddress: contract.address,
                                    chainId: contract.chainId,
                                    url: tokenDetailed.metadata?.mediaURL || tokenDetailed.metadata?.imageURL,
                                    tokenId: tokenId,
                                    classes: {
                                        loadingFailImage: classes.loadingFailImage,
                                        iframe: classes.iframe,
                                        imgWrapper: classes.assetImgWrapper
                                    }
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                                    className: classes.selectWrapperNftNameWrapper,
                                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                        className: classes.selectWrapperNftName,
                                        color: "textSecondary",
                                        children: tokenDetailed.contract?.name
                                    })
                                })
                            ]
                        })
                    ]
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                    className: classes.selectSharesExceedBox,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.selectSharesExceed,
                            children: isSelectSharesExceed ? t1.nft_max_shares_tip(maxSharesOptions) : null
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                            className: classes.selectAmountBox,
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(entry/* ShadowRootTooltip */.p_, {
                                    title: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                        className: classes.tooltipText,
                                        children: tokenDetailedSelectedList.length > constants/* NFT_RED_PACKET_MAX_SHARES */.I0 ? t1.nft_max_shares_tip(maxSharesOptions) : t1.nft_max_shares(maxSharesOptions)
                                    }),
                                    placement: "top-end",
                                    classes: {
                                        tooltip: classes.tooltip,
                                        arrow: classes.arrow
                                    },
                                    arrow: true,
                                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(QuestionMark/* default */.Z, {
                                        className: classes.questionMarkIcon
                                    })
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                                            className: classes.selectedTokenAmount,
                                            children: tokenDetailedSelectedList.length
                                        }),
                                        ' ',
                                        "NFTs"
                                    ]
                                })
                            ]
                        })
                    ]
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                    disabled: loadingToken || !tokenDetailed || !isOwner || isAdded || isSelectSharesExceed,
                    className: classes.confirmButton,
                    variant: "contained",
                    onClick: onSubmit,
                    children: tokenDetailed && !isOwner ? t1.nft_invalid_owner() : isAdded ? t1.nft_already_added() : tr('confirm')
                })
            ]
        }) : /*#__PURE__*/ (0,jsx_runtime.jsxs)(DialogContent/* default */.Z, {
            className: classnames_default()(classes.dialogContent, classes.dialogContentFixedHeight),
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                    className: classes.ownerTokenBox,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                            className: classes.searchWrapper,
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Paper/* default */.Z, {
                                    className: classes.search,
                                    elevation: 0,
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Search/* SearchIcon */.W, {
                                            className: classes.iconButton
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(InputBase/* default */.ZP, {
                                            value: tokenDetailedOwnerList.length === 0 ? tokenId : tokenIdListInput,
                                            placeholder: "Token ID separated by comma, e.g. 1224, 7873, 8948",
                                            className: classes.textField,
                                            onChange: (e)=>tokenDetailedOwnerList.length === 0 ? setTokenId(e.target.value) : setTokenIdListInput(e.target.value)
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                                    disabled: tokenDetailedOwnerList.length === 0 ? !tokenId : !tokenIdListInput,
                                    className: classes.searchButton,
                                    variant: "contained",
                                    onClick: tokenDetailedOwnerList.length === 0 ? onSearch : onFilter,
                                    children: t1.search()
                                })
                            ]
                        }),
                        (loadingToken || !tokenDetailed) && searched ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Box/* default */.Z, {
                            className: classes.noResultBox,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                children: loadingToken ? t1.loading_token() : t1.search_no_result()
                            })
                        }) : tokenDetailed?.contract?.name ? /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                            className: classnames_default()(classes.wrapper, classes.nftWrapper),
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsx)("img", {
                                    className: classes.nftImg,
                                    src: tokenDetailed?.metadata?.mediaURL
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                                    className: classes.nftNameWrapper,
                                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                        className: classes.nftName,
                                        color: "textSecondary",
                                        children: tokenDetailed?.contract.name
                                    })
                                })
                            ]
                        }) : /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
                            children: [
                                tokenIdFilterList.length === 0 ? /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                                    className: classes.selectBar,
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                                            className: classes.selectAll,
                                            children: [
                                                /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                                                    className: classnames_default()(classes.selectAllCheckBox, selectAll ? classes.checked : ''),
                                                    onClick: selectAllHandler,
                                                    children: selectAll ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Check/* default */.Z, {
                                                        className: classes.checkIcon
                                                    }) : null
                                                }),
                                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                                    className: classnames_default()(classes.selectAllCheckBoxText),
                                                    children: tr('select_all')
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Translate.nft_shift_select_tip, {
                                                components: {
                                                    text: /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                                                        style: {
                                                            color: '#1C68F3'
                                                        }
                                                    })
                                                },
                                                values: {
                                                    text: 'Shift'
                                                }
                                            })
                                        })
                                    ]
                                }) : null,
                                nonExistedTokenIdList.length > 0 && nonExistedTokenIdList.length === tokenIdFilterList.length ? /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                                    className: classes.nonExistedTokenBox,
                                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                        color: "textPrimary",
                                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(NonExistedTokenList, {})
                                    })
                                }) : /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                                    className: classes.tokenSelector,
                                    children: [
                                        tokenDetailedOwnerList.map((token, i)=>{
                                            const findToken = tokenDetailedSelectedList.find((t)=>t.tokenId === token.tokenId
                                            );
                                            return tokenIdFilterList.length > 0 && !tokenIdFilterList.includes(token.tokenId) ? null : /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                                                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTCard, {
                                                    findToken: findToken,
                                                    renderOrder: i,
                                                    token: token,
                                                    tokenIdFilterList: tokenIdFilterList,
                                                    selectToken: selectToken,
                                                    isSelectSharesExceed: isSelectSharesExceed
                                                })
                                            }, i);
                                        }),
                                        loadingOwnerList ? /*#__PURE__*/ (0,jsx_runtime.jsx)(ListItem/* default */.ZP, {
                                            className: classnames_default()(classes.selectWrapper, classes.loadingWrapper),
                                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(CircularProgress/* default */.Z, {
                                                size: 25
                                            })
                                        }) : null
                                    ]
                                })
                            ]
                        })
                    ]
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                    className: classes.selectSharesExceedBox,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                    color: "textPrimary",
                                    children: nonExistedTokenIdList.length > 0 && nonExistedTokenIdList.length !== tokenIdFilterList.length ? /*#__PURE__*/ (0,jsx_runtime.jsx)(NonExistedTokenList, {}) : null
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                    className: classes.selectSharesExceed,
                                    children: isSelectSharesExceed ? t1.nft_max_shares_tip(maxSharesOptions) : null
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                            className: classes.selectAmountBox,
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(entry/* ShadowRootTooltip */.p_, {
                                    title: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                        className: classes.tooltipText,
                                        children: tokenDetailedSelectedList.length > constants/* NFT_RED_PACKET_MAX_SHARES */.I0 ? t1.nft_max_shares_tip(maxSharesOptions) : t1.nft_max_shares(maxSharesOptions)
                                    }),
                                    placement: "top-end",
                                    classes: {
                                        tooltip: classes.tooltip,
                                        arrow: classes.arrow
                                    },
                                    arrow: true,
                                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(QuestionMark/* default */.Z, {
                                        className: classes.questionMarkIcon
                                    })
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                                            className: classes.selectedTokenAmount,
                                            children: tokenDetailedSelectedList.length + ' '
                                        }),
                                        "/",
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                                            className: classes.totalAmount,
                                            children: tokenDetailedOwnerList.length
                                        })
                                    ]
                                })
                            ]
                        })
                    ]
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                    disabled: loadingToken || !tokenDetailed && tokenDetailedSelectedList.length === 0 || !isOwner || isAdded || isSelectSharesExceed,
                    className: classes.confirmButton,
                    variant: "contained",
                    onClick: onSubmit,
                    children: tokenDetailed && !isOwner ? t1.nft_invalid_owner() : isAdded ? t1.nft_already_added() : tr('confirm')
                })
            ]
        })
    });
}
function NFTCard(props) {
    const { findToken , token , tokenIdFilterList , isSelectSharesExceed , renderOrder , selectToken  } = props;
    const { classes  } = SelectNftTokenDialog_useStyles({
        isSelectSharesExceed
    });
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(ListItem/* default */.ZP, {
        className: classes.selectWrapper,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* NFTCardStyledAssetPlayer */.yC, {
                url: token.metadata?.mediaURL || token.metadata?.imageURL,
                contractAddress: token.contract?.address,
                tokenId: token.tokenId,
                renderOrder: renderOrder,
                chainId: token.contract?.chainId,
                classes: {
                    loadingFailImage: classes.loadingFailImage,
                    iframe: classes.iframe,
                    imgWrapper: classes.assetImgWrapper
                }
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                className: classes.selectWrapperNftNameWrapper,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    className: classes.selectWrapperNftName,
                    color: "textSecondary",
                    children: (0,formatter/* formatTokenId */.Xy)(token.tokenId, 2)
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                className: classnames_default()(classes.checkbox, findToken ? classes.checked : ''),
                onClick: (event)=>selectToken(token, findToken, event.shiftKey, token.index)
                ,
                children: findToken ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Check/* default */.Z, {
                    className: classes.checkIcon
                }) : null
            })
        ]
    });
}

;// CONCATENATED MODULE: ../web3-contracts/abis/NftRedPacket.json
const NftRedPacket_namespaceObject = JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"id","type":"bytes32"},{"indexed":true,"internalType":"address","name":"claimer","type":"address"},{"indexed":false,"internalType":"uint256","name":"claimed_token_id","type":"uint256"},{"indexed":false,"internalType":"address","name":"token_address","type":"address"}],"name":"ClaimSuccess","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"total_tokens","type":"uint256"},{"indexed":true,"internalType":"bytes32","name":"id","type":"bytes32"},{"indexed":false,"internalType":"string","name":"name","type":"string"},{"indexed":false,"internalType":"string","name":"message","type":"string"},{"indexed":true,"internalType":"address","name":"creator","type":"address"},{"indexed":false,"internalType":"uint256","name":"creation_time","type":"uint256"},{"indexed":false,"internalType":"address","name":"token_address","type":"address"},{"indexed":false,"internalType":"uint256","name":"packet_number","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"duration","type":"uint256"},{"indexed":false,"internalType":"uint256[]","name":"token_ids","type":"uint256[]"}],"name":"CreationSuccess","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"id","type":"bytes32"},{"indexed":true,"internalType":"address","name":"token_address","type":"address"},{"indexed":false,"internalType":"uint16","name":"remaining_balance","type":"uint16"},{"indexed":false,"internalType":"uint256[]","name":"remaining_token_ids","type":"uint256[]"},{"indexed":false,"internalType":"uint256","name":"bit_status","type":"uint256"}],"name":"RefundSuccess","type":"event"},{"inputs":[{"internalType":"bytes32","name":"pkt_id","type":"bytes32"}],"name":"check_availability","outputs":[{"internalType":"address","name":"token_address","type":"address"},{"internalType":"uint16","name":"balance","type":"uint16"},{"internalType":"uint256","name":"total_pkts","type":"uint256"},{"internalType":"bool","name":"expired","type":"bool"},{"internalType":"uint256","name":"claimed_id","type":"uint256"},{"internalType":"uint256","name":"bit_status","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"check_claimed_id","outputs":[{"internalType":"uint256","name":"claimed_token_id","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"check_erc721_remain_ids","outputs":[{"internalType":"uint256","name":"bit_status","type":"uint256"},{"internalType":"uint256[]","name":"erc721_token_ids","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256[]","name":"erc721_token_id_list","type":"uint256[]"},{"internalType":"address","name":"token_addr","type":"address"}],"name":"check_ownership","outputs":[{"internalType":"bool","name":"is_your_token","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"pkt_id","type":"bytes32"},{"internalType":"bytes","name":"signedMsg","type":"bytes"},{"internalType":"address payable","name":"recipient","type":"address"}],"name":"claim","outputs":[{"internalType":"uint256","name":"claimed","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_public_key","type":"address"},{"internalType":"uint64","name":"_duration","type":"uint64"},{"internalType":"bytes32","name":"_seed","type":"bytes32"},{"internalType":"string","name":"_message","type":"string"},{"internalType":"string","name":"_name","type":"string"},{"internalType":"address","name":"_token_addr","type":"address"},{"internalType":"uint256[]","name":"_erc721_token_ids","type":"uint256[]"}],"name":"create_red_packet","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"id","type":"bytes32"}],"name":"refund","outputs":[],"stateMutability":"nonpayable","type":"function"}]');
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/hooks/useNftRedPacketContract.ts



function useNftRedPacketContract(chainId) {
    const { RED_PACKET_NFT_ADDRESS  } = (0,constants_constants/* useNftRedPacketConstants */.uq)(chainId);
    return (0,entry_web3_evm/* useContract */.cq)(chainId, RED_PACKET_NFT_ADDRESS, NftRedPacket_namespaceObject);
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/hooks/useCreateNftRedpacketCallback.ts








function useCreateNftRedpacketCallback(duration, message, name, contractAddress, tokenIdList) {
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const [createState, setCreateState] = (0,entry_web3_evm/* useTransactionState */.pl)();
    const nftRedPacketContract = useNftRedPacketContract(chainId);
    const createCallback = (0,react.useCallback)(async (publicKey)=>{
        if (!nftRedPacketContract) {
            setCreateState({
                type: types/* TransactionStateType.UNKNOWN */.n$.UNKNOWN
            });
            return;
        }
        if (!contractAddress || !dist.EthereumAddress.isValid(contractAddress)) {
            setCreateState?.({
                type: types/* TransactionStateType.FAILED */.n$.FAILED,
                error: new Error('NFT contract is invalid')
            });
            return;
        }
        if (tokenIdList.length === 0) {
            setCreateState?.({
                type: types/* TransactionStateType.FAILED */.n$.FAILED,
                error: new Error('Require to send one nft token at least')
            });
            return;
        }
        setCreateState({
            type: types/* TransactionStateType.WAIT_FOR_CONFIRMING */.n$.WAIT_FOR_CONFIRMING
        });
        const checkParams = [
            tokenIdList,
            contractAddress
        ];
        const isOwner = await nftRedPacketContract.methods.check_ownership(...checkParams).call({
            from: account
        });
        if (!isOwner) {
            setCreateState?.({
                type: types/* TransactionStateType.FAILED */.n$.FAILED,
                error: new Error('Invalid ownership')
            });
            return;
        }
        const params = [
            publicKey,
            duration,
            lib_default().sha3(Math.random().toString()),
            message,
            name,
            contractAddress,
            tokenIdList, 
        ];
        const config = {
            from: account,
            gas: await nftRedPacketContract.methods.create_red_packet(...params).estimateGas({
                from: account
            }).catch((error)=>{
                setCreateState({
                    type: types/* TransactionStateType.FAILED */.n$.FAILED,
                    error
                });
                throw error;
            }),
            chainId
        };
        return new Promise(async (resolve, reject)=>{
            nftRedPacketContract.methods.create_red_packet(...params).send(config)// Note: DO NOT remove this event listener since it relates to password saving.
            .on(types/* TransactionEventType.TRANSACTION_HASH */.iE.TRANSACTION_HASH, (hash)=>{
                setCreateState({
                    type: types/* TransactionStateType.HASH */.n$.HASH,
                    hash
                });
            }).on(types/* TransactionEventType.RECEIPT */.iE.RECEIPT, (receipt)=>{
                setCreateState({
                    type: types/* TransactionStateType.CONFIRMED */.n$.CONFIRMED,
                    no: 0,
                    receipt
                });
                resolve();
            }).on(types/* TransactionEventType.CONFIRMATION */.iE.CONFIRMATION, (no, receipt)=>{
                setCreateState({
                    type: types/* TransactionStateType.CONFIRMED */.n$.CONFIRMED,
                    no,
                    receipt
                });
                resolve();
            }).on(types/* TransactionEventType.ERROR */.iE.ERROR, (error)=>{
                setCreateState({
                    type: types/* TransactionStateType.FAILED */.n$.FAILED,
                    error
                });
                reject(error);
            });
        });
    }, [
        duration,
        message,
        name,
        contractAddress,
        tokenIdList,
        nftRedPacketContract,
        setCreateState,
        account,
        chainId
    ]);
    const resetCallback = (0,react.useCallback)(()=>{
        setCreateState({
            type: types/* TransactionStateType.UNKNOWN */.n$.UNKNOWN
        });
    }, []);
    return [
        createState,
        createCallback,
        resetCallback
    ];
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.4.0/node_modules/react-use/esm/useAsync.js
var useAsync = __webpack_require__(70981);
// EXTERNAL MODULE: ./src/extension/service.ts
var service = __webpack_require__(78778);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedpacketNftConfirmDialog.tsx























const RedpacketNftConfirmDialog_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        root: {
            fontSize: 16
        },
        link: {
            display: 'flex',
            marginLeft: theme.spacing(0.5)
        },
        account: {
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'flex-end'
        },
        message: {
            borderLeft: '2px solid red',
            paddingLeft: theme.spacing(0.5)
        },
        text: {
            fontSize: 16
        },
        bold: {
            fontWeight: 500
        },
        tokenWrapper: {
            float: 'right',
            display: 'flex',
            alignItems: 'center'
        },
        icon: {
            marginRight: 8,
            height: 24,
            width: 24
        },
        tokenSelector: {
            display: 'grid',
            gridTemplateColumns: 'repeat(4, 1fr)',
            gap: 16,
            width: '100%',
            height: 420,
            overflowY: 'auto',
            background: theme.palette.background.default,
            borderRadius: 12,
            marginTop: theme.spacing(1.5),
            marginBottom: theme.spacing(1.5),
            padding: theme.spacing(1.5, 1.5, 1, 1.5),
            boxSizing: 'border-box'
        },
        tokenSelectorWrapper: {
            position: 'relative',
            display: 'flex',
            flexDirection: 'column',
            borderRadius: 6,
            padding: 0,
            marginBottom: theme.spacing(2.5),
            background: theme.palette.mode === 'light' ? '#fff' : '#2F3336',
            width: 120,
            height: 180,
            overflow: 'hidden'
        },
        nftImg: {
            maxWidth: '100%'
        },
        nftNameWrapper: {
            width: '100%',
            background: theme.palette.background.paper,
            borderBottomRightRadius: 8,
            borderBottomLeftRadius: 8,
            paddingTop: 2,
            paddingBottom: 1
        },
        nftName: {
            minHeight: 30,
            marginLeft: 8,
            whiteSpace: 'nowrap',
            overflow: 'hidden',
            textOverflow: 'ellipsis'
        },
        buttonWrapper: {
            marginTop: 0
        },
        button: {
            minHeight: 36,
            height: 36
        },
        cancelButton: {},
        sendButton: {},
        snackBarText: {
            fontSize: 14
        },
        snackBarLink: {
            color: 'white'
        },
        openIcon: {
            display: 'flex',
            width: 18,
            height: 18,
            marginLeft: 2
        },
        snackBar: {
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            transform: 'translateY(1px)'
        },
        loadingFailImage: {
            minHeight: '0 !important',
            maxWidth: 'none',
            transform: 'translateY(10px)',
            width: 64,
            height: 64
        },
        iframe: {
            minHeight: 147
        },
        ellipsis: {
            overflow: 'hidden',
            textOverflow: 'ellipsis',
            whiteSpace: 'nowrap'
        }
    })
);
function RedpacketNftConfirmDialog(props) {
    const { classes  } = RedpacketNftConfirmDialog_useStyles();
    const { open , onBack , onClose , message , contract , tokenList  } = props;
    const wallet = (0,entry_web3/* useWallet */.Os)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const web3 = (0,entry_web3/* useWeb3 */.$6)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const { attachMetadata  } = (0,entry_content_script/* useCompositionContext */.Cp)();
    const { t: i18n  } = (0,utils/* useI18N */.M1)();
    const t = useI18N();
    const { address: publicKey , privateKey  } = (0,react.useMemo)(()=>web3?.eth.accounts.create() ?? {
            address: '',
            privateKey: ''
        }
    , [
        web3
    ]);
    const duration = 60 * 60 * 24;
    const currentIdentity = (0,useActivatedUI/* useCurrentIdentity */.Ud)();
    const { value: linkedPersona  } = (0,useAsync/* default */.Z)(async ()=>{
        if (!currentIdentity?.linkedPersona) return;
        return service/* default.Identity.queryPersona */.ZP.Identity.queryPersona(currentIdentity.linkedPersona);
    }, [
        currentIdentity?.linkedPersona
    ]);
    const lastRecognized = (0,useActivatedUI/* useLastRecognizedIdentity */.FB)();
    const senderName = ((lastRecognized.identifier?.userId ?? currentIdentity?.identifier.userId) ?? linkedPersona?.nickname) ?? 'Unknown User';
    const tokenIdList = tokenList.map((value)=>value.tokenId
    );
    const [createState, createCallback, resetCallback] = useCreateNftRedpacketCallback(duration, message, senderName, contract.address, tokenIdList);
    const { closeDialog: closeApplicationBoardDialog  } = (0,shared_base_ui_src/* useRemoteControlledDialog */.F$)(messages/* WalletMessages.events.ApplicationDialogUpdated */.R.events.ApplicationDialogUpdated);
    const isSending = [
        types/* TransactionStateType.WAIT_FOR_CONFIRMING */.n$.WAIT_FOR_CONFIRMING,
        types/* TransactionStateType.HASH */.n$.HASH
    ].includes(createState.type);
    const onSendTx = (0,react.useCallback)(()=>createCallback(publicKey)
    , [
        publicKey
    ]);
    const [txid, setTxid] = (0,react.useState)('');
    const onSendPost = (0,react.useCallback)((id)=>{
        attachMetadata(constants/* RedPacketNftMetaKey */.HA, {
            id,
            txid,
            duration,
            message,
            senderName,
            contractName: contract.name,
            contractAddress: contract.address,
            contractTokenURI: contract.logoURL ?? '',
            contractVersion: 1,
            privateKey,
            chainId: contract.chainId
        });
        closeApplicationBoardDialog();
    }, [
        duration,
        message,
        senderName,
        contract,
        privateKey,
        txid
    ]);
    (0,react.useEffect)(()=>{
        if (createState.type === types/* TransactionStateType.HASH */.n$.HASH && createState.hash) {
            setTxid(createState.hash);
            RedPacket_messages/* RedPacketRPC.addRedPacketNft */.T.addRedPacketNft({
                id: createState.hash,
                password: privateKey,
                contract_version: 1
            });
        }
        if (![
            types/* TransactionStateType.CONFIRMED */.n$.CONFIRMED,
            types/* TransactionStateType.FAILED */.n$.FAILED
        ].includes(createState.type)) {
            return;
        }
        if (createState.type === types/* TransactionStateType.CONFIRMED */.n$.CONFIRMED && createState.no === 0) {
            const { receipt  } = createState;
            const { id  } = receipt.events?.CreationSuccess.returnValues ?? {};
            onSendPost(id);
            onClose();
        }
        resetCallback();
    }, [
        createState,
        onSendPost
    ]);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* InjectedDialog */.Fl, {
        open: open,
        onClose: onBack,
        title: i18n('confirm'),
        maxWidth: "xs",
        children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(DialogContent/* default */.Z, {
            className: classes.root,
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Grid/* default */.ZP, {
                    container: true,
                    spacing: 2,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                            item: true,
                            xs: 6,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                color: "textPrimary",
                                variant: "body1",
                                className: classes.text,
                                children: t.nft_account_name()
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                            item: true,
                            xs: 6,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                                color: "textPrimary",
                                variant: "body1",
                                align: "right",
                                className: classnames_default()(classes.account, classes.bold, classes.text),
                                children: [
                                    (0,formatter/* formatEthereumAddress */.j8)(account, 4),
                                    (0,address/* isNativeTokenAddress */.qw)(wallet?.address) ? null : /*#__PURE__*/ (0,jsx_runtime.jsx)(Link/* default */.Z, {
                                        color: "textPrimary",
                                        className: classes.link,
                                        href: resolver/* explorerResolver.addressLink */.Nb.addressLink(chainId, account),
                                        target: "_blank",
                                        rel: "noopener noreferrer",
                                        onClick: stop,
                                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Launch/* default */.Z, {
                                            fontSize: "small"
                                        })
                                    })
                                ]
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                            item: true,
                            xs: 6,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                variant: "body1",
                                color: "textPrimary",
                                className: classnames_default()(classes.text),
                                children: t.nft_attached_message()
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                            item: true,
                            xs: 6,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                variant: "body1",
                                color: "textPrimary",
                                align: "right",
                                className: classnames_default()(classes.text, classes.bold, classes.ellipsis),
                                children: message
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                            item: true,
                            xs: 6,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                variant: "body1",
                                color: "textPrimary",
                                className: classnames_default()(classes.text),
                                children: t.collections()
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                            item: true,
                            xs: 6,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                                className: classes.tokenWrapper,
                                children: [
                                    contract.iconURL ? /*#__PURE__*/ (0,jsx_runtime.jsx)("img", {
                                        className: classes.icon,
                                        src: contract.iconURL
                                    }) : null,
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                        variant: "body1",
                                        color: "textPrimary",
                                        align: "right",
                                        className: classnames_default()(classes.text, classes.bold),
                                        children: contract.name
                                    })
                                ]
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                            item: true,
                            xs: 12,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(List/* default */.Z, {
                                className: classes.tokenSelector,
                                children: tokenList.map((value, i)=>/*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(RedpacketNftConfirmDialog_NFTCard, {
                                            token: value,
                                            renderOrder: i
                                        })
                                    }, i)
                                )
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                            item: true,
                            xs: 6,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                color: "textPrimary",
                                variant: "body1",
                                className: classnames_default()(classes.text),
                                children: t.nft_total_amount()
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                            item: true,
                            xs: 6,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                color: "textPrimary",
                                align: "right",
                                className: classnames_default()(classes.text, classes.bold),
                                children: tokenList.length
                            })
                        })
                    ]
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Grid/* default */.ZP, {
                    container: true,
                    spacing: 2,
                    className: classes.buttonWrapper,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                            item: true,
                            xs: 6,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                                className: classnames_default()(classes.button, classes.cancelButton),
                                fullWidth: true,
                                onClick: onBack,
                                size: "large",
                                variant: "contained",
                                children: i18n('cancel')
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Grid/* default */.ZP, {
                            item: true,
                            xs: 6,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(WalletConnectedBoundary/* WalletConnectedBoundary */.T, {
                                classes: {
                                    connectWallet: classnames_default()(classes.button, classes.sendButton),
                                    unlockMetaMask: classnames_default()(classes.button, classes.sendButton)
                                },
                                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                                    variant: "contained",
                                    size: "large",
                                    loading: isSending,
                                    disabled: isSending,
                                    onClick: onSendTx,
                                    className: classnames_default()(classes.button, classes.sendButton),
                                    fullWidth: true,
                                    children: t.send_symbol({
                                        amount: tokenList.length.toString(),
                                        symbol: tokenList.length > 1 ? 'NFTs' : 'NFT'
                                    })
                                })
                            })
                        })
                    ]
                })
            ]
        })
    });
}
function RedpacketNftConfirmDialog_NFTCard(props) {
    const { token , renderOrder  } = props;
    const { classes  } = RedpacketNftConfirmDialog_useStyles();
    const [name, setName] = (0,react.useState)((0,formatter/* formatTokenId */.Xy)(token.tokenId, 2));
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(ListItem/* default */.ZP, {
        className: classnames_default()(classes.tokenSelectorWrapper),
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* NFTCardStyledAssetPlayer */.yC, {
                contractAddress: token.contract?.address,
                chainId: token.contract?.chainId,
                tokenId: token.tokenId,
                renderOrder: renderOrder,
                setERC721TokenName: setName,
                classes: {
                    loadingFailImage: classes.loadingFailImage,
                    iframe: classes.iframe
                }
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                className: classes.nftNameWrapper,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    className: classes.nftName,
                    color: "textSecondary",
                    children: name
                })
            })
        ]
    });
}

// EXTERNAL MODULE: ../shared-base/src/index.ts + 2 modules
var shared_base_src = __webpack_require__(44451);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedPacketERC721Form.tsx
























const RedPacketERC721Form_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    return {
        root: {
            display: 'flex',
            alignItems: 'stretch',
            flexDirection: 'column'
        },
        line: {
            display: 'flex',
            margin: theme.spacing(1, 0, 2, 0)
        },
        nftNameWrapper: {
            width: '100%',
            background: theme.palette.background.paper,
            borderBottomRightRadius: 8,
            borderBottomLeftRadius: 8,
            paddingTop: 2,
            paddingBottom: 1
        },
        nftName: {
            minHeight: 30,
            marginLeft: 8,
            whiteSpace: 'nowrap',
            overflow: 'hidden',
            textOverflow: 'ellipsis'
        },
        inputShrinkLabel: {
            transform: 'translate(17px, -3px) scale(0.75) !important'
        },
        input: {
            flex: 1,
            padding: theme.spacing(0.5)
        },
        tip: {
            fontSize: 17,
            marginBottom: theme.spacing(2)
        },
        nftImg: {
            maxWidth: '100%'
        },
        tokenSelector: {
            display: 'grid',
            gridTemplateColumns: 'repeat(4, 1fr)',
            gap: 16,
            width: '100%',
            overflowY: 'auto',
            height: 200,
            background: theme.palette.background.default,
            borderRadius: 12,
            padding: theme.spacing(1.5, 1.5, 1, 1),
            boxSizing: 'border-box'
        },
        tokenSelectorWrapper: {
            position: 'relative',
            display: 'flex',
            flexDirection: 'column',
            borderRadius: 8,
            padding: 0,
            marginBottom: theme.spacing(2.5),
            background: theme.palette.background.paper,
            width: 120,
            height: 180,
            overflow: 'hidden'
        },
        tokenSelectorParent: {
            background: theme.palette.background.default,
            borderRadius: 12,
            paddingBottom: 5,
            marginTop: theme.spacing(1.5),
            marginBottom: theme.spacing(1.5)
        },
        addWrapper: {
            cursor: 'pointer',
            alignItems: 'center',
            background: `${theme.palette.background.default} !important`,
            justifyContent: 'center',
            border: `1px solid ${theme.palette.divider}`
        },
        addIcon: {
            color: '#AFC3E1'
        },
        closeIconWrapperBack: {
            position: 'absolute',
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            top: 5,
            right: 5,
            width: 18,
            height: 18,
            background: 'rgba(255, 255, 255, 0.8)',
            borderRadius: 500,
            overflow: 'hidden'
        },
        closeIconWrapper: {
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            width: 18,
            height: 18,
            background: 'rgba(255, 95, 95, 0.3)'
        },
        closeIcon: {
            width: 14,
            height: 14,
            cursor: 'pointer',
            color: 'rgba(255, 95, 95, 1)'
        },
        loadingFailImage: {
            minHeight: '0 !important',
            maxWidth: 'none',
            transform: 'translateY(10px)',
            width: 64,
            height: 64
        },
        selectWrapper: {
            display: 'flex',
            alignItems: 'center',
            margin: '16px 0 8px 0'
        },
        option: {
            display: 'flex',
            alignItems: 'center',
            cursor: 'pointer'
        },
        optionLeft: {
            marginRight: '16px'
        },
        checkIcon: {
            width: 15,
            height: 15,
            color: '#fff'
        },
        checkIconWrapper: {
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            cursor: 'pointer',
            width: 17,
            height: 17,
            borderRadius: 999,
            marginRight: 5,
            border: '1px solid #6E748E',
            backgroundColor: 'white'
        },
        checked: {
            borderColor: '#1D9BF0 !important',
            background: '#1D9BF0 !important'
        },
        approveAllTip: {
            color: '#FF5F5F',
            margin: '16px 4px 24px 4px'
        },
        unapprovedTip: {
            color: theme.palette.grey[500]
        },
        disabledSelector: {
            opacity: 0.5,
            pointerEvents: 'none'
        },
        loadingOwnerList: {
            margin: '24px auto 16px'
        },
        iframe: {
            minHeight: 147
        },
        assetImgWrapper: {
            maxHeight: 155
        }
    };
});
function RedPacketERC721Form(props) {
    const t1 = useI18N();
    const { onClose , setERC721DialogHeight  } = props;
    const { classes  } = RedPacketERC721Form_useStyles();
    const [open, setOpen] = (0,react.useState)(false);
    const [balance, setBalance] = (0,react.useState)(0);
    const [selectOption, setSelectOption] = (0,react.useState)(undefined);
    const [openConfirmDialog, setOpenConfirmDialog] = (0,react.useState)(false);
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const [contract, setContract] = (0,react.useState)();
    const [manualSelectedTokenDetailedList, setExistTokenDetailedList] = (0,react.useState)(shared_base_src/* EMPTY_LIST */.rP);
    const [onceAllSelectedTokenDetailedList, setAllTokenDetailedList] = (0,react.useState)(shared_base_src/* EMPTY_LIST */.rP);
    const tokenDetailedList = selectOption === NFTSelectOption.Partial ? manualSelectedTokenDetailedList : onceAllSelectedTokenDetailedList;
    const [message, setMessage] = (0,react.useState)('Best Wishes!');
    const { asyncRetry: { loading: loadingOwnerList  } , tokenDetailedOwnerList: _tokenDetailedOwnerList = [] , clearTokenDetailedOwnerList ,  } = (0,entry_web3_evm/* useNonFungibleOwnerTokens */.Ge)(contract?.address ?? '', account, chainId, balance);
    const tokenDetailedOwnerList = _tokenDetailedOwnerList.map((v, index)=>({
            ...v,
            index
        })
    );
    const removeToken = (0,react.useCallback)((token)=>{
        (selectOption === NFTSelectOption.Partial ? setExistTokenDetailedList : setAllTokenDetailedList)((list)=>list.filter((t)=>t.tokenId !== token.tokenId
            )
        );
        setSelectOption(NFTSelectOption.Partial);
    }, [
        selectOption,
        setSelectOption,
        setExistTokenDetailedList,
        setAllTokenDetailedList
    ]);
    const maxSelectShares = Math.min(constants/* NFT_RED_PACKET_MAX_SHARES */.I0, tokenDetailedOwnerList.length);
    const clearToken = (0,react.useCallback)(()=>{
        setExistTokenDetailedList([]);
        clearTokenDetailedOwnerList();
        setOpenConfirmDialog(false);
    }, [
        clearTokenDetailedOwnerList
    ]);
    const clearContract = (0,react.useCallback)(()=>{
        setContract(undefined);
    }, []);
    (0,react.useEffect)(()=>{
        if (loadingOwnerList) {
            setSelectOption(undefined);
        } else if (!selectOption) {
            setSelectOption(NFTSelectOption.Partial);
        }
    }, [
        tokenDetailedOwnerList,
        selectOption,
        loadingOwnerList
    ]);
    (0,react.useEffect)(()=>{
        clearToken();
        setOpen(false);
    }, [
        contract,
        account
    ]);
    (0,react.useEffect)(()=>{
        setOpen(false);
        clearContract();
    }, [
        chainId
    ]);
    const { RED_PACKET_NFT_ADDRESS  } = (0,constants_constants/* useNftRedPacketConstants */.uq)();
    const validationMessage = (0,react.useMemo)(()=>{
        if (!balance) return t1.erc721_insufficient_balance();
        if (tokenDetailedList.length === 0) return t1.select_a_token();
        return '';
    }, [
        tokenDetailedList.length,
        balance,
        t1
    ]);
    setERC721DialogHeight?.(balance > 0 ? 690 : 350);
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                className: classes.root,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(ERC721ContractSelectPanel, {
                        contract: contract,
                        onContractChange: setContract,
                        balance: balance,
                        onBalanceChange: setBalance
                    }),
                    contract && balance ? loadingOwnerList ? /*#__PURE__*/ (0,jsx_runtime.jsx)(CircularProgress/* default */.Z, {
                        size: 24,
                        className: classes.loadingOwnerList
                    }) : /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                        className: classes.selectWrapper,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                                className: classnames_default()(classes.optionLeft, classes.option, tokenDetailedOwnerList.length === 0 ? classes.disabledSelector : null),
                                onClick: ()=>{
                                    setSelectOption(NFTSelectOption.All);
                                    setAllTokenDetailedList(tokenDetailedOwnerList.slice(0, maxSelectShares));
                                },
                                children: [
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                                        className: classnames_default()(classes.checkIconWrapper, selectOption === NFTSelectOption.All ? classes.checked : ''),
                                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Check/* default */.Z, {
                                            className: classes.checkIcon
                                        })
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                        color: "textPrimary",
                                        children: tokenDetailedOwnerList.length === 0 ? 'All' : t1.nft_select_all_option({
                                            total: Math.min(constants/* NFT_RED_PACKET_MAX_SHARES */.I0, tokenDetailedOwnerList.length).toString()
                                        })
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                                className: classes.option,
                                onClick: ()=>setSelectOption(NFTSelectOption.Partial)
                                ,
                                children: [
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                                        className: classnames_default()(classes.checkIconWrapper, selectOption === NFTSelectOption.Partial ? classes.checked : ''),
                                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Check/* default */.Z, {
                                            className: classes.checkIcon
                                        })
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                        color: "textPrimary",
                                        children: t1.nft_select_partially_option()
                                    })
                                ]
                            })
                        ]
                    }) : null,
                    contract && balance && !loadingOwnerList ? /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                        className: classes.tokenSelectorParent,
                        children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(List/* default */.Z, {
                            className: classes.tokenSelector,
                            children: [
                                tokenDetailedList.map((value, i)=>/*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(RedPacketERC721Form_NFTCard, {
                                            token: value,
                                            removeToken: removeToken,
                                            renderOrder: i
                                        })
                                    }, i)
                                ),
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(ListItem/* default */.ZP, {
                                    onClick: ()=>setOpen(true)
                                    ,
                                    className: classnames_default()(classes.tokenSelectorWrapper, classes.addWrapper),
                                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(AddCircleOutline/* default */.Z, {
                                        className: classes.addIcon,
                                        onClick: ()=>void 0
                                    })
                                })
                            ]
                        })
                    }) : null,
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                        className: classes.line,
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(RedpacketMessagePanel, {
                            onChange: (val)=>setMessage(val)
                            ,
                            message: message
                        })
                    }),
                    contract && balance && !loadingOwnerList ? /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                className: classes.unapprovedTip,
                                children: t1.nft_unapproved_tip()
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                className: classes.approveAllTip,
                                children: t1.nft_approve_all_tip()
                            })
                        ]
                    }) : null,
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(WalletConnectedBoundary/* WalletConnectedBoundary */.T, {
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(EthereumERC721TokenApprovedBoundary, {
                            validationMessage: validationMessage,
                            owner: account,
                            contractDetailed: contract,
                            operator: RED_PACKET_NFT_ADDRESS,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                                variant: "contained",
                                size: "large",
                                disabled: !!validationMessage,
                                fullWidth: true,
                                onClick: ()=>setOpenConfirmDialog(true)
                                ,
                                children: t1.next()
                            })
                        })
                    })
                ]
            }),
            open ? /*#__PURE__*/ (0,jsx_runtime.jsx)(SelectNftTokenDialog, {
                open: open,
                onClose: ()=>setOpen(false)
                ,
                contract: contract,
                existTokenDetailedList: tokenDetailedList,
                setExistTokenDetailedList: setExistTokenDetailedList,
                tokenDetailedOwnerList: tokenDetailedOwnerList,
                loadingOwnerList: loadingOwnerList
            }) : null,
            openConfirmDialog && contract ? /*#__PURE__*/ (0,jsx_runtime.jsx)(RedpacketNftConfirmDialog, {
                message: message,
                contract: contract,
                open: openConfirmDialog,
                tokenList: tokenDetailedList,
                onBack: ()=>setOpenConfirmDialog(false)
                ,
                onClose: onClose
            }) : null
        ]
    });
}
function RedPacketERC721Form_NFTCard(props) {
    const { token , removeToken , renderOrder  } = props;
    const { classes  } = RedPacketERC721Form_useStyles();
    const [name, setName] = (0,react.useState)((0,formatter/* formatTokenId */.Xy)(token.tokenId, 2));
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(ListItem/* default */.ZP, {
        className: classnames_default()(classes.tokenSelectorWrapper),
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* NFTCardStyledAssetPlayer */.yC, {
                contractAddress: token.contract?.address,
                chainId: token.chainId,
                url: token.metadata?.mediaURL || token.metadata?.imageURL,
                tokenId: token.tokenId,
                renderOrder: renderOrder,
                setERC721TokenName: setName,
                classes: {
                    loadingFailImage: classes.loadingFailImage,
                    iframe: classes.iframe,
                    imgWrapper: classes.assetImgWrapper
                }
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                className: classes.nftNameWrapper,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    className: classes.nftName,
                    color: "textSecondary",
                    children: name
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                className: classes.closeIconWrapperBack,
                onClick: ()=>removeToken(token)
                ,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                    className: classes.closeIconWrapper,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Close/* default */.Z, {
                        className: classes.closeIcon
                    })
                })
            })
        ]
    });
}

// EXTERNAL MODULE: ./src/social-network/index.ts
var social_network = __webpack_require__(82192);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/IconURL.ts
const IconURLs = {
    presentDai: new URL(/* asset import */ __webpack_require__(58794), __webpack_require__.b).toString(),
    presentDefault: new URL(/* asset import */ __webpack_require__(74094), __webpack_require__.b).toString(),
    presentOkb: new URL(/* asset import */ __webpack_require__(72251), __webpack_require__.b).toString(),
    erc20Token: new URL(/* asset import */ __webpack_require__(39590), __webpack_require__.b).toString(),
    erc721Token: new URL(/* asset import */ __webpack_require__(91984), __webpack_require__.b).toString()
};

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedPacketCreateNew.tsx












const RedPacketCreateNew_useStyles = (0,entry/* makeStyles */.ZL)()((theme, { snsId  })=>({
        tab: {
            height: 36,
            minHeight: 36,
            fontWeight: 300
        },
        tabs: {
            height: 36,
            minHeight: 36,
            margin: `0 ${snsId === shared_base_src/* EnhanceableSite.Minds */.Jk.Minds ? '12px' : 'auto'}`,
            borderRadius: 4,
            backgroundColor: theme.palette.background.default,
            '& .Mui-selected': {
                color: theme.palette.primary.contrastText,
                backgroundColor: theme.palette.primary.main
            }
        },
        indicator: {
            display: 'none'
        },
        tabPanel: {
            marginTop: theme.spacing(3)
        },
        img: {
            width: 20,
            marginRight: 4
        },
        labelWrapper: {
            display: 'flex'
        },
        tabWrapper: {
            padding: theme.spacing(0, 2, 2, 2)
        }
    })
);
function RedPacketCreateNew(props) {
    const { origin , onNext , onChange , onClose , state , setERC721DialogHeight  } = props;
    const t = useI18N();
    const { classes  } = RedPacketCreateNew_useStyles({
        snsId: social_network/* activatedSocialNetworkUI.networkIdentifier */.LM.networkIdentifier
    });
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const tabProps = {
        tabs: [
            {
                label: /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                    className: classes.labelWrapper,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)("img", {
                            className: classes.img,
                            src: IconURLs.erc20Token
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                            children: t.erc20_tab_title()
                        })
                    ]
                }),
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(RedPacketERC20Form, {
                    origin: origin,
                    onClose: onClose,
                    onNext: onNext,
                    onChange: onChange
                }),
                sx: {
                    p: 0
                }
            },
            {
                label: /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                    className: classes.labelWrapper,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)("img", {
                            className: classes.img,
                            src: IconURLs.erc721Token
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                            children: t.erc721_tab_title()
                        })
                    ]
                }),
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(RedPacketERC721Form, {
                    onClose: onClose,
                    setERC721DialogHeight: setERC721DialogHeight
                }),
                sx: {
                    p: 0
                },
                disabled: ![
                    types/* ChainId.Mainnet */.a_.Mainnet,
                    types/* ChainId.Matic */.a_.Matic,
                    types/* ChainId.BSC */.a_.BSC,
                    types/* ChainId.Conflux */.a_.Conflux
                ].includes(chainId)
            }, 
        ],
        state,
        classes
    };
    return /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
        className: classes.tabWrapper,
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(AbstractTab/* default */.Z, {
            ...tabProps
        })
    });
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/@ethersproject+abi@5.4.0/node_modules/@ethersproject/abi/lib.esm/interface.js
var lib_esm_interface = __webpack_require__(58528);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/useMediaQuery/useMediaQuery.js
var useMediaQuery = __webpack_require__(52775);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Popper/Popper.js
var Popper = __webpack_require__(17877);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/pick.js + 1 modules
var pick = __webpack_require__(46428);
// EXTERNAL MODULE: ../../node_modules/.pnpm/date-fns@2.28.0/node_modules/date-fns/esm/intervalToDuration/index.js + 7 modules
var intervalToDuration = __webpack_require__(64893);
// EXTERNAL MODULE: ../../node_modules/.pnpm/date-fns@2.28.0/node_modules/date-fns/esm/nextDay/index.js + 1 modules
var nextDay = __webpack_require__(16162);
;// CONCATENATED MODULE: ./src/plugins/ITO/assets/formatDate.ts

const dateTimeFormat = (date, includeTime = true)=>new Intl.DateTimeFormat(shared_base_src/* i18NextInstance.language */.BV.language, {
        year: 'numeric',
        month: 'numeric',
        day: 'numeric',
        ...includeTime && {
            hour: 'numeric',
            minute: 'numeric'
        },
        hour12: false
    }).format(date)
;

// EXTERNAL MODULE: ./src/plugins/ITO/SNSAdaptor/StyledLinearProgress.tsx
var StyledLinearProgress = __webpack_require__(16334);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/compact.js
var compact = __webpack_require__(27862);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.4.0/node_modules/react-use/esm/useAsyncRetry.js
var useAsyncRetry = __webpack_require__(58500);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/hooks/useAvailability.ts




function useAvailability(id, contract_address, version, options) {
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM, options?.account);
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM, options?.chainId);
    const redPacketContract = useRedPacketContract(chainId, version);
    const connection = (0,entry_web3/* useWeb3Connection */.Tv)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM, {
        chainId
    });
    return (0,useAsyncRetry/* default */.Z)(async ()=>{
        if (!id || !connection || !contract_address || !redPacketContract) return null;
        return redPacketContract.methods.check_availability(id).call({
            // check availability is ok w/o account
            from: account
        });
    }, [
        id,
        account,
        chainId,
        connection,
        contract_address,
        version
    ]);
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/hooks/useAvailabilityComputed.ts






/**
 * Fetch the red packet info from the chain
 * @param payload
 */ function useAvailabilityComputed(account, payload) {
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const parsedChainId = (payload.token?.chainId ?? resolver/* networkResolver.networkChainId */.LJ.networkChainId(payload.network ?? '')) ?? types/* ChainId.Mainnet */.a_.Mainnet;
    const asyncResult = useAvailability(payload.rpid, payload.contract_address, payload.contract_version, {
        account,
        chainId: parsedChainId
    });
    const result = asyncResult;
    const availability = result.value;
    if (!availability) return {
        ...asyncResult,
        payload,
        computed: {
            canClaim: false,
            canRefund: false,
            listOfStatus: []
        }
    };
    const isEmpty = availability.balance === '0';
    const isExpired = availability.expired;
    const isClaimed = availability.claimed_amount !== '0';
    const isRefunded = isEmpty && availability.claimed < availability.total;
    const isCreator = (0,base_src/* isSameAddress */.Wr)(payload?.sender.address ?? '', account);
    const isPasswordValid = Boolean(payload.password && payload.password !== 'PASSWORD INVALID');
    return {
        ...asyncResult,
        computed: {
            canFetch: parsedChainId === chainId,
            canClaim: !isExpired && !isEmpty && !isClaimed && parsedChainId === chainId && isPasswordValid,
            canRefund: isExpired && !isEmpty && isCreator && parsedChainId === chainId,
            canSend: !isEmpty && !isExpired && !isRefunded && isCreator && parsedChainId === chainId,
            isPasswordValid,
            listOfStatus: (0,compact/* default */.Z)([
                isClaimed ? RedPacketStatus.claimed : undefined,
                isEmpty ? RedPacketStatus.empty : undefined,
                isRefunded ? RedPacketStatus.refunded : undefined,
                isExpired ? RedPacketStatus.expired : undefined, 
            ])
        }
    };
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/hooks/useRefundCallback.ts






function useRefundCallback(version, from, id) {
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const [isRefunded, setIsRefunded] = (0,react.useState)(false);
    const redPacketContract = useRedPacketContract(chainId, version);
    const connection = (0,entry_web3/* useWeb3Connection */.Tv)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const [state, refundCallback] = (0,useAsyncFn/* default */.Z)(async ()=>{
        if (!redPacketContract || !id) return;
        setIsRefunded(false);
        const config = {
            from
        };
        const tx = await (0,contract/* encodeContractTransaction */.Wp)(redPacketContract, redPacketContract.methods.refund(id), config);
        const hash = await connection.sendTransaction(tx);
        setIsRefunded(true);
        return hash;
    }, [
        id,
        redPacketContract,
        from,
        connection
    ]);
    return [
        state,
        isRefunded,
        refundCallback
    ];
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedPacketInHistoryList.tsx
























const interFace = new lib_esm_interface/* Interface */.vU(HappyRedPacketV4);
const RedPacketInHistoryList_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    const smallQuery = `@media (max-width: ${theme.breakpoints.values.sm}px)`;
    return {
        primary: {
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'space-between'
        },
        secondary: {
            fontSize: 12
        },
        message: {
            whiteSpace: 'nowrap',
            overflow: 'hidden',
            textOverflow: 'ellipsis',
            [smallQuery]: {
                whiteSpace: 'normal'
            }
        },
        strong: {
            overflow: 'hidden',
            textOverflow: 'ellipsis'
        },
        span: {
            maxWidth: 350,
            display: 'inline-flex'
        },
        time: {
            fontSize: 12,
            color: theme.palette.text.secondary
        },
        root: {
            borderRadius: 10,
            border: `solid 1px ${theme.palette.divider}`,
            marginBottom: theme.spacing(1.5),
            position: 'static !important',
            height: 'auto !important',
            padding: theme.spacing(2),
            [smallQuery]: {
                padding: theme.spacing(2, 1.5)
            }
        },
        box: {
            display: 'flex',
            width: '100%'
        },
        content: {
            transform: 'translateY(-4px)',
            width: '100%',
            paddingLeft: theme.spacing(2),
            [smallQuery]: {
                paddingLeft: theme.spacing(1.5),
                width: 'auto'
            }
        },
        section: {
            display: 'flex',
            width: '100%',
            justifyContent: 'space-between',
            alignItems: 'center',
            marginBottom: theme.spacing(2),
            [smallQuery]: {
                flexWrap: 'wrap'
            }
        },
        div: {
            maxWidth: 350
        },
        icon: {
            width: 27,
            height: 27
        },
        title: {
            fontWeight: 500,
            fontSize: 16
        },
        info: {
            fontSize: 14,
            color: theme.palette.mode === 'light' ? '#5B7083' : '#c3cbd2',
            [smallQuery]: {
                fontSize: 13
            }
        },
        actionButton: {
            height: 26,
            background: theme.palette.mode === 'light' ? '#000' : '#fff',
            color: theme.palette.mode === 'light' ? '#fff' : '#000',
            minHeight: 'auto',
            [smallQuery]: {
                marginTop: theme.spacing(1)
            },
            '&:hover': {
                background: theme.palette.mode === 'light' ? '#000' : '#fff',
                color: theme.palette.mode === 'light' ? '#fff' : '#000',
                opacity: 0.8
            }
        },
        footer: {
            width: '100%',
            display: 'flex',
            flexWrap: 'wrap',
            justifyContent: 'space-between',
            marginTop: theme.spacing(2)
        },
        footerInfo: {
            fontSize: 15,
            color: theme.palette.mode === 'light' ? '#5B7083' : '#c3cbd2',
            '& strong': {
                color: theme.palette.text.primary
            }
        },
        popper: {
            overflow: 'visible',
            backgroundColor: theme.palette.mode === 'light' ? 'rgba(15, 20, 25, 1)' : '#fff',
            transform: 'translate(134px, 66px)',
            borderRadius: 8,
            width: 328,
            padding: 10
        },
        arrow: {
            position: 'absolute',
            top: -12,
            right: 40,
            width: 0,
            height: 0,
            borderLeft: '6px solid transparent',
            borderRight: '6px solid transparent',
            borderBottom: `6px solid ${theme.palette.mode === 'light' ? 'rgba(15, 20, 25, 1)' : '#fff'}`,
            transform: 'translateY(6px)'
        },
        popperText: {
            cursor: 'default',
            color: theme.palette.mode === 'light' ? '#fff' : 'rgba(15, 20, 25, 1)',
            fontSize: 12
        },
        disabledButton: {
            color: theme.palette.mode === 'light' ? 'rgba(0, 0, 0, 0.26)' : 'rgba(255, 255, 255, 0.3)',
            boxShadow: 'none',
            backgroundColor: theme.palette.mode === 'light' ? 'rgba(0, 0, 0, 0.12)' : 'rgba(255, 255, 255, 0.12)',
            cursor: 'default',
            '&:hover': {
                backgroundColor: theme.palette.mode === 'light' ? 'rgba(0, 0, 0, 0.12)' : 'rgba(255, 255, 255, 0.12)',
                color: theme.palette.mode === 'light' ? 'rgba(0, 0, 0, 0.26)' : 'rgba(255, 255, 255, 0.3)'
            }
        },
        fullWidthBox: {
            width: '100%'
        }
    };
});
function RedPacketInHistoryList(props) {
    const { history , onSelect  } = props;
    const i18n = (0,utils/* useI18N */.M1)();
    const t = useI18N();
    const { classes  } = RedPacketInHistoryList_useStyles();
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const connection = (0,entry_web3/* useWeb3Connection */.Tv)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const { HAPPY_RED_PACKET_ADDRESS_V4  } = (0,constants_constants/* useRedPacketConstants */.AA)(chainId);
    const isSmall = (0,useMediaQuery/* default */.Z)((theme)=>theme.breakpoints.down('sm')
    );
    const { value: receipt  } = (0,useAsync/* default */.Z)(async ()=>{
        const result = await connection.getTransactionReceipt(history.txid);
        if (!result) return null;
        const log1 = result.logs.find((log)=>(0,base_src/* isSameAddress */.Wr)(log.address, HAPPY_RED_PACKET_ADDRESS_V4)
        );
        if (!log1) return null;
        const eventParams = interFace.decodeEventLog('CreationSuccess', log1.data, log1.topics);
        return {
            rpid: eventParams.id,
            creation_time: eventParams.creation_time.toNumber() * 1000
        };
    }, [
        connection,
        history,
        HAPPY_RED_PACKET_ADDRESS_V4
    ]);
    const rpid = receipt?.rpid ?? '';
    const creation_time = receipt?.creation_time ?? 0;
    const { value: availability , computed: { canRefund , canSend , listOfStatus , isPasswordValid  } , retry: revalidateAvailability ,  } = useAvailabilityComputed(account, {
        ...history,
        rpid,
        creation_time
    });
    const claimerNumber = availability ? Number(availability.claimed) : 0;
    const total_remaining = availability?.balance;
    const [{ loading: isRefunding  }, refunded, refundCallback] = useRefundCallback(history.contract_version, account, rpid);
    const tokenAddress = history.token?.address ?? history.token_address;
    const { value: tokenDetailed  } = (0,entry_web3/* useFungibleToken */.cf)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM, tokenAddress ?? '');
    const historyToken = {
        ...(0,pick/* default */.Z)(tokenDetailed ?? history.token, [
            'decimals',
            'symbol'
        ]),
        address: tokenAddress
    };
    const onSendOrRefund = (0,react.useCallback)(async ()=>{
        if (canRefund) {
            await refundCallback();
            revalidateAvailability();
        }
        if (canSend) onSelect(removeUselessSendParams({
            ...history,
            token: historyToken
        }));
    }, [
        onSelect,
        refundCallback,
        canRefund,
        canSend,
        history,
        historyToken
    ]);
    // #region password lost tips
    const [anchorEl, setAnchorEl] = (0,react.useState)(null);
    const openPopper = Boolean(anchorEl);
    // #endregion
    // #region refund time
    const refundDuration = canSend && !isPasswordValid ? (0,intervalToDuration/* default */.Z)({
        start: Date.now(),
        end: (0,nextDay/* default */.Z)(creation_time, 1)
    }) : null;
    const formatRefundDuration = `${refundDuration?.hours}h ${refundDuration?.minutes}m`;
    // #endregion
    return !rpid ? null : /*#__PURE__*/ (0,jsx_runtime.jsx)(ListItem/* default */.ZP, {
        className: classes.root,
        children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
            className: classes.box,
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* TokenIcon */.T1, {
                    classes: {
                        icon: classes.icon
                    },
                    address: historyToken?.address ?? '',
                    name: historyToken?.name,
                    logoURL: historyToken?.logoURL
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                    className: classes.content,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsxs)("section", {
                            className: classes.section,
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                                    className: classes.div,
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                                            className: classes.fullWidthBox,
                                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                                variant: "body1",
                                                className: classnames_default()(classes.title, classes.message),
                                                children: history.sender.message === '' ? t.best_wishes() : history.sender.message
                                            })
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                            variant: "body1",
                                            className: classnames_default()(classes.info, classes.message),
                                            children: t.history_duration({
                                                startTime: dateTimeFormat(new Date(creation_time)),
                                                endTime: dateTimeFormat(new Date(creation_time + history.duration), false)
                                            })
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                            variant: "body1",
                                            className: classnames_default()(classes.info, classes.message),
                                            children: t.history_total_amount({
                                                amount: (0,base_src/* formatBalance */.az)(history.total, historyToken?.decimals, 6),
                                                symbol: historyToken?.symbol
                                            })
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                            variant: "body1",
                                            className: classnames_default()(classes.info, classes.message),
                                            children: t.history_split_mode({
                                                mode: history.is_random ? t.random() : t.average()
                                            })
                                        })
                                    ]
                                }),
                                canRefund || canSend || listOfStatus.includes(RedPacketStatus.empty) || refunded ? /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                                            loading: isRefunding,
                                            fullWidth: isSmall,
                                            onClick: canSend && !isPasswordValid ? ()=>undefined
                                             : onSendOrRefund,
                                            onMouseEnter: (event)=>{
                                                canSend && !isPasswordValid ? setAnchorEl(event.currentTarget) : undefined;
                                            },
                                            onMouseLeave: ()=>{
                                                canSend && !isPasswordValid ? setAnchorEl(null) : undefined;
                                            },
                                            disabled: listOfStatus.includes(RedPacketStatus.empty) || refunded || isRefunding,
                                            className: classnames_default()(classes.actionButton, canSend && !isPasswordValid ? classes.disabledButton : ''),
                                            variant: "contained",
                                            size: "large",
                                            children: canSend ? t.send() : refunded ? t.refunding() : listOfStatus.includes(RedPacketStatus.empty) ? t.empty() : t.refund()
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime.jsxs)(Popper/* default */.Z, {
                                            className: classes.popper,
                                            id: "popper",
                                            open: openPopper,
                                            anchorEl: anchorEl,
                                            transition: true,
                                            disablePortal: true,
                                            children: [
                                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                                    className: classes.popperText,
                                                    children: t.data_broken({
                                                        duration: formatRefundDuration
                                                    })
                                                }),
                                                /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                                                    className: classes.arrow
                                                })
                                            ]
                                        })
                                    ]
                                }) : null
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(StyledLinearProgress/* StyledLinearProgress */.B, {
                            variant: "determinate",
                            value: 100 * (1 - Number(total_remaining) / Number(history.total))
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsxs)("section", {
                            className: classes.footer,
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                    variant: "body1",
                                    className: classes.footerInfo,
                                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Translate.history_claimed, {
                                        components: {
                                            strong: /*#__PURE__*/ (0,jsx_runtime.jsx)("strong", {})
                                        },
                                        values: {
                                            claimedShares: String(claimerNumber),
                                            shares: String(history.shares)
                                        }
                                    })
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                    variant: "body1",
                                    className: classes.footerInfo,
                                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Translate.history_total_claimed_amount, {
                                        components: {
                                            strong: /*#__PURE__*/ (0,jsx_runtime.jsx)("strong", {
                                                className: classes.strong
                                            }),
                                            span: /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                                                className: classes.span
                                            })
                                        },
                                        values: {
                                            amount: (0,base_src/* formatBalance */.az)(history.total, historyToken?.decimals, 6),
                                            claimedAmount: (0,base_src/* formatBalance */.az)(new (bignumber_default())(history.total).minus(total_remaining ?? 0), historyToken?.decimals, 6),
                                            symbol: historyToken?.symbol
                                        }
                                    })
                                })
                            ]
                        })
                    ]
                })
            ]
        })
    });
}
function removeUselessSendParams(payload) {
    return {
        ...(0,omit/* default */.Z)(payload, [
            'block_number',
            'claimers'
        ]),
        token: (0,omit/* default */.Z)(payload.token, [
            'logoURI'
        ])
    };
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/urlcat@2.0.4/node_modules/urlcat/dist/index.js
var urlcat_dist = __webpack_require__(19802);
var urlcat_dist_default = /*#__PURE__*/__webpack_require__.n(urlcat_dist);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/head.js
var head = __webpack_require__(29730);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/utils/chain.ts






const chain_interFace = new lib_esm_interface/* Interface */.vU(HappyRedPacketV4);
async function getRedPacketHistory(chainId, startBlock, endBlock, senderAddress, connection) {
    const { EXPLORER_API , API_KEYS =[]  } = (0,constants_constants/* getExplorerConstants */.i1)(chainId);
    const { HAPPY_RED_PACKET_ADDRESS_V4  } = (0,constants_constants/* getRedPacketConstants */.GV)(chainId);
    if (!EXPLORER_API || !HAPPY_RED_PACKET_ADDRESS_V4 || !startBlock) return [];
    // #region
    // 1. Filter out `create_red_packet` transactions,
    // 2. Retrieve payload major data from its decoded input param.
    const response = await fetch(urlcat_dist_default()(EXPLORER_API, {
        apikey: (0,head/* default */.Z)(API_KEYS),
        action: 'txlist',
        module: 'account',
        sort: 'desc',
        startBlock,
        endBlock,
        address: HAPPY_RED_PACKET_ADDRESS_V4
    }));
    if (!response.ok) return [];
    const { result  } = await response.json();
    if (!result.length) return [];
    const payloadList = result.flatMap((txType)=>{
        if (!(0,base_src/* isSameAddress */.Wr)(txType.from, senderAddress)) return [];
        try {
            const decodedInputParam = chain_interFace.decodeFunctionData('create_red_packet', txType.input);
            const redpacketPayload = {
                contract_address: txType.to,
                txid: txType.hash,
                shares: decodedInputParam._number.toNumber(),
                is_random: decodedInputParam._ifrandom,
                total: decodedInputParam._total_tokens.toString(),
                duration: decodedInputParam._duration.toNumber() * 1000,
                block_number: Number(txType.blockNumber),
                contract_version: 4,
                network: resolver/* chainResolver.chainNetworkType */.VU.chainNetworkType(chainId),
                token_address: decodedInputParam._token_addr,
                sender: {
                    address: senderAddress,
                    name: decodedInputParam._name,
                    message: decodedInputParam._message
                },
                // #region Retrieve at RedPacketInHistoryList component
                rpid: '',
                creation_time: 0,
                total_remaining: '',
                claimers: [],
                // #endregion
                // #region Retrieve from database
                password: ''
            };
            return redpacketPayload;
        } catch  {
            return [];
        }
    });
    // #endregion
    return payloadList;
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/hooks/useRedPacketHistory.ts







function useRedPacketHistory(address, chainId) {
    const connection = (0,entry_web3/* useWeb3Connection */.Tv)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM, {
        chainId
    });
    return (0,useAsyncRetry/* default */.Z)(async ()=>{
        if (!connection) return shared_base_src/* EMPTY_LIST */.rP;
        const blockNumber = await connection.getBlockNumber();
        return useRedPacketHistory_getRedPacketHistory(address, chainId, blockNumber, connection);
    }, [
        address,
        chainId,
        connection
    ]);
}
async function useRedPacketHistory_getRedPacketHistory(address, chainId, endBlock, connection) {
    const { HAPPY_RED_PACKET_ADDRESS_V4_BLOCK_HEIGHT  } = (0,constants_constants/* getRedPacketConstants */.GV)(chainId);
    const redpacketsFromChain = await getRedPacketHistory(chainId, HAPPY_RED_PACKET_ADDRESS_V4_BLOCK_HEIGHT, endBlock, address, connection);
    // #region Inject password from database
    return RedPacket_messages/* RedPacketRPC.getRedPacketHistoryFromDatabase */.T.getRedPacketHistoryFromDatabase(redpacketsFromChain);
// #endregion
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedPacketHistoryList.tsx








const RedPacketHistoryList_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    const smallQuery = `@media (max-width: ${theme.breakpoints.values.sm}px)`;
    return {
        root: {
            display: 'flex',
            padding: '0 12px',
            boxSizing: 'border-box',
            height: '100%',
            flexDirection: 'column',
            margin: '0 auto',
            overflow: 'auto',
            [smallQuery]: {
                padding: 0
            },
            '&::-webkit-scrollbar': {
                display: 'none'
            }
        },
        placeholder: {
            textAlign: 'center'
        }
    };
});
function RedPacketHistoryList(props) {
    const { onSelect  } = props;
    const { t  } = (0,utils/* useI18N */.M1)();
    const { classes  } = RedPacketHistoryList_useStyles();
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const { value: histories , loading  } = useRedPacketHistory(account, chainId);
    if (loading) {
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
            className: classes.placeholder,
            color: "textSecondary",
            children: t('loading')
        });
    }
    return /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
        className: classes.root,
        children: !histories || histories.length === 0 ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
            className: classes.placeholder,
            color: "textSecondary",
            children: t('no_data')
        }) : /*#__PURE__*/ (0,jsx_runtime.jsx)(List/* default */.Z, {
            children: histories.map((history, i)=>/*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(RedPacketInHistoryList, {
                        history: history,
                        onSelect: onSelect
                    })
                }, i)
            )
        })
    });
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/hooks/useNftRedPacketHistory.ts


function useNftRedPacketHistory(address, chainId) {
    const [allHistories, setAllHistories] = (0,react.useState)([]);
    const pageRef = (0,react.useRef)(1);
    const [loading, setLoading] = (0,react.useState)(false);
    const getHistories = (0,react.useCallback)(async ()=>{
        const histories = await RedPacket_messages/* RedPacketRPC.getNftRedPacketHistory */.T.getNftRedPacketHistory(address, chainId, pageRef.current);
        setLoading(false);
        if (histories.length) {
            pageRef.current += 1;
        }
        setAllHistories((oldList)=>[
                ...oldList,
                ...histories
            ]
        );
    }, [
        address,
        chainId
    ]);
    (0,react.useEffect)(()=>{
        setLoading(true);
        pageRef.current = 1;
        setAllHistories([]);
        getHistories();
    }, [
        address,
        chainId
    ]);
    return {
        histories: allHistories,
        fetchMore: getHistories,
        loading
    };
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/fill.js + 2 modules
var fill = __webpack_require__(76457);
// EXTERNAL MODULE: ../plugins/Wallet/src/index.ts
var Wallet_src = __webpack_require__(10503);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/hooks/useAvailabilityNftRedPacket.ts



function useAvailabilityNftRedPacket(id, from, chainId) {
    const nftRedPacketContract = useNftRedPacketContract(chainId);
    return (0,useAsyncRetry/* default */.Z)(async ()=>{
        if (!id || !nftRedPacketContract) return null;
        const availability = await nftRedPacketContract.methods.check_availability(id).call({
            // check availability is ok w/o account
            from
        });
        const result = await nftRedPacketContract.methods.check_erc721_remain_ids(id).call({
            // check availability is ok w/o account
            from
        });
        const isClaimed = availability.claimed_id !== '0';
        const totalAmount = result.erc721_token_ids.length;
        const bits = new (bignumber_default())(result.bit_status).toString(2).split('');
        const claimedAmount = bits.filter((bit)=>bit === '1'
        ).length;
        const isClaimedAll = totalAmount === claimedAmount;
        const isCompleted = isClaimedAll && !isClaimed;
        const isEnd = isCompleted || availability.expired;
        const bitStatusList = bits.reverse().map((bit)=>bit === '1'
        );
        return {
            isClaimed,
            totalAmount,
            claimedAmount,
            remaining: totalAmount - claimedAmount,
            isClaimedAll,
            isCompleted,
            isEnd,
            bitStatusList,
            ...availability
        };
    }, [
        id,
        from,
        nftRedPacketContract
    ]);
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/hooks/useNftAvailabilityComputed.ts







/**
 * Fetch the red packet info from the chain
 * @param payload
 */ function useNftAvailabilityComputed(account, payload) {
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const asyncResult = useAvailabilityNftRedPacket(payload?.rpid, account);
    const result = asyncResult;
    const availability = result.value;
    return (0,react.useMemo)(()=>{
        if (!availability) {
            return {
                ...asyncResult,
                payload,
                computed: {
                    canClaim: false,
                    listOfStatus: []
                }
            };
        }
        const isEmpty = availability.remaining === 0;
        const isExpired = availability.expired;
        const isClaimed = availability.isClaimed;
        const isCreator = (0,base_src/* isSameAddress */.Wr)(payload?.sender.address ?? '', account);
        const parsedChainId = resolver/* chainResolver.chainId */.VU.chainId(payload.network ?? '') ?? types/* ChainId.Mainnet */.a_.Mainnet;
        const isSameChain = parsedChainId === chainId;
        const isPasswordValid = !!payload.password && payload.password !== 'PASSWORD INVALID';
        const isClaimable = !isExpired && !isEmpty && !isClaimed && isSameChain;
        const isSendable = !isEmpty && !isExpired && isCreator && isSameChain;
        return {
            ...asyncResult,
            computed: {
                canFetch: isSameChain,
                canClaim: isClaimable && isPasswordValid,
                canSend: isSendable,
                isPasswordValid,
                listOfStatus: (0,compact/* default */.Z)([
                    isClaimed ? RedPacketStatus.claimed : undefined,
                    isEmpty ? RedPacketStatus.empty : undefined,
                    isExpired ? RedPacketStatus.expired : undefined, 
                ])
            }
        };
    }, [
        asyncResult,
        availability,
        chainId
    ]);
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/NftList.tsx








const NftList_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    const smallQuery = `@media (max-width: ${theme.breakpoints.values.sm}px)`;
    return {
        list: {
            display: 'grid',
            gridTemplateColumns: '1fr 1fr 1fr',
            gridGap: theme.spacing(1),
            [smallQuery]: {
                gridTemplateColumns: '1fr 1fr',
                gridGap: 0,
                padding: 0
            }
        },
        listItem: {
            padding: theme.spacing(1)
        },
        nft: {
            position: 'relative',
            display: 'flex',
            width: 120,
            height: 185,
            flexDirection: 'column',
            backgroundColor: theme.palette.background.paper,
            margin: '0 auto',
            borderRadius: 8,
            overflow: 'hidden',
            boxShadow: '0 8px 20px rgba(0, 0, 0, 0.04)',
            [smallQuery]: {
                width: 90,
                height: 140
            }
        },
        loading: {
            boxShadow: 'none'
        },
        claimedBadge: {
            position: 'absolute',
            left: 0,
            right: 0,
            top: 36,
            margin: 'auto',
            height: 70,
            width: 70,
            borderRadius: '100%',
            backgroundColor: 'rgba(255, 95, 95, 0.4)',
            color: '#fff',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontSize: 12,
            pointerEvents: 'none',
            [smallQuery]: {
                height: 60,
                width: 60
            }
        },
        media: {
            width: 120,
            height: 160,
            objectFit: 'cover',
            [smallQuery]: {
                width: 90,
                height: 120
            }
        },
        name: {
            fontSize: 12,
            height: 18,
            textOverflow: 'ellipsis',
            textAlign: 'center',
            overflow: 'hidden',
            whiteSpace: 'nowrap',
            padding: '2px 2px 6px',
            color: entry/* MaskColorVar.textSecondary */.ZN.textSecondary
        },
        loadingFailImage: {
            minHeight: '0 !important',
            maxWidth: 'none',
            transform: 'translateY(-10px)',
            width: 64,
            height: 64
        }
    };
});
const NftItem = ({ contract , tokenId , className , claimed , renderOrder , ...rest })=>{
    const { t  } = (0,utils/* useI18N */.M1)();
    const { classes  } = NftList_useStyles();
    const [name, setName] = (0,react.useState)((0,formatter/* formatTokenId */.Xy)(tokenId, 2));
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
        className: classnames_default()(className, classes.nft),
        ...rest,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* NFTCardStyledAssetPlayer */.yC, {
                classes: {
                    loadingFailImage: classes.loadingFailImage
                },
                tokenId: tokenId,
                renderOrder: renderOrder,
                contractAddress: contract.address,
                chainId: contract.chainId,
                setERC721TokenName: setName
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                className: classes.name,
                children: name
            }),
            claimed && /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                className: classes.claimedBadge,
                children: t('plugin_red_packet_claimed')
            })
        ]
    });
};
const NftList = ({ contract , statusList , tokenIds , className , ...rest })=>{
    const { classes  } = NftList_useStyles();
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(List/* default */.Z, {
        className: classnames_default()(className, classes.list),
        ...rest,
        children: tokenIds.map((tokenId, index)=>/*#__PURE__*/ (0,jsx_runtime.jsx)(ListItem/* default */.ZP, {
                className: classes.listItem,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(NftItem, {
                    contract: contract,
                    claimed: statusList[index],
                    tokenId: tokenId,
                    renderOrder: index
                })
            }, tokenId)
        )
    });
};

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/NftRedPacketHistoryItem.tsx

















const NftRedPacketHistoryItem_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    const smallQuery = `@media (max-width: ${theme.breakpoints.values.sm}px)`;
    return {
        root: {
            borderRadius: 10,
            border: `solid 1px ${theme.palette.divider}`,
            marginBottom: theme.spacing(1.5),
            position: 'static !important',
            height: 'auto !important',
            padding: theme.spacing(2),
            backgroundColor: theme.palette.background.default,
            [smallQuery]: {
                padding: theme.spacing(2, 1.5)
            }
        },
        primary: {
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'space-between'
        },
        secondary: {
            fontSize: 12
        },
        message: {
            whiteSpace: 'nowrap',
            overflow: 'hidden',
            textOverflow: 'ellipsis',
            [smallQuery]: {
                whiteSpace: 'normal'
            }
        },
        strong: {
            overflow: 'hidden',
            textOverflow: 'ellipsis'
        },
        span: {
            maxWidth: 350,
            display: 'inline-flex'
        },
        time: {
            fontSize: 12,
            color: theme.palette.text.secondary
        },
        box: {
            display: 'flex',
            width: '100%'
        },
        content: {
            transform: 'translateY(-4px)',
            width: '100%',
            paddingLeft: theme.spacing(1)
        },
        section: {
            display: 'flex',
            width: '100%',
            justifyContent: 'space-between',
            alignItems: 'center',
            marginBottom: theme.spacing(2),
            [smallQuery]: {
                marginBottom: 0
            }
        },
        icon: {
            width: 27,
            height: 27
        },
        title: {
            whiteSpace: 'break-spaces',
            fontWeight: 500,
            fontSize: 16
        },
        info: {
            fontSize: 14,
            color: theme.palette.mode === 'light' ? '#5B7083' : '#c3cbd2',
            [smallQuery]: {
                fontSize: 13
            }
        },
        nftList: {
            width: 390,
            [smallQuery]: {
                width: '100%'
            }
        },
        actionButton: {
            height: 26,
            minHeight: 'auto',
            position: 'relative'
        },
        footer: {
            width: '100%',
            display: 'flex',
            flexWrap: 'wrap',
            justifyContent: 'space-between',
            marginTop: theme.spacing(2),
            [smallQuery]: {
                marginTop: theme.spacing(1)
            }
        },
        footerInfo: {
            fontSize: 15,
            color: theme.palette.mode === 'light' ? '#5B7083' : '#c3cbd2',
            '& strong': {
                color: theme.palette.text.primary
            }
        },
        disabledButton: {
            color: theme.palette.mode === 'light' ? 'rgba(0, 0, 0, 0.26)' : 'rgba(255, 255, 255, 0.3)',
            boxShadow: 'none',
            backgroundColor: theme.palette.mode === 'light' ? 'rgba(0, 0, 0, 0.12)' : 'rgba(255, 255, 255, 0.12)',
            cursor: 'default',
            '&:hover': {
                backgroundColor: theme.palette.mode === 'light' ? 'rgba(0, 0, 0, 0.12)' : 'rgba(255, 255, 255, 0.12)',
                color: theme.palette.mode === 'light' ? 'rgba(0, 0, 0, 0.26)' : 'rgba(255, 255, 255, 0.3)'
            }
        },
        ellipsis: {
            overflow: 'hidden',
            textOverflow: 'ellipsis',
            whiteSpace: 'nowrap',
            maxWidth: 360
        }
    };
});
const NftRedPacketHistoryItem = /*#__PURE__*/ (0,react.memo)(({ history , onSend , onShowPopover , onHidePopover  })=>{
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const t = useI18N();
    const { classes  } = NftRedPacketHistoryItem_useStyles();
    const { computed: { canSend , isPasswordValid  } ,  } = useNftAvailabilityComputed(account, history.payload);
    const { value: contractDetailed  } = (0,entry_web3/* useNonFungibleTokenContract */.LN)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM, history.token_contract.address, undefined, {
        account
    });
    const { closeDialog: closeApplicationBoardDialog  } = (0,shared_base_ui_src/* useRemoteControlledDialog */.F$)(Wallet_src/* WalletMessages.events.ApplicationDialogUpdated */.R$.events.ApplicationDialogUpdated);
    const handleSend = (0,react.useCallback)(()=>{
        if (!(canSend && contractDetailed && isPasswordValid)) return;
        onSend(history, contractDetailed);
        closeApplicationBoardDialog();
    }, [
        onSend,
        closeApplicationBoardDialog,
        canSend,
        history,
        contractDetailed,
        isPasswordValid
    ]);
    const { value: redpacketStatus  } = useAvailabilityNftRedPacket(history.rpid, account);
    const bitStatusList = redpacketStatus ? redpacketStatus.bitStatusList : (0,fill/* default */.Z)(Array(history.token_ids.length), false);
    const handleMouseEnter = (event)=>{
        if (canSend && !isPasswordValid) {
            handleShowPopover(event.currentTarget);
        }
    };
    const handleShowPopover = (anchor)=>{
        onShowPopover(anchor, t.nft_data_broken());
    };
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(ListItem/* default */.ZP, {
        className: classes.root,
        children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
            className: classes.box,
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* TokenIcon */.T1, {
                    classes: {
                        icon: classes.icon
                    },
                    address: contractDetailed?.address ?? '',
                    name: contractDetailed?.name ?? '-',
                    logoURL: contractDetailed?.iconURL ?? new URL(/* asset import */ __webpack_require__(33265), __webpack_require__.b).toString()
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                    className: classes.content,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsxs)("section", {
                            className: classes.section,
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                            variant: "body1",
                                            className: classnames_default()(classes.title, classes.message, classes.ellipsis),
                                            children: history.message === '' ? t.best_wishes() : history.message
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                            variant: "body1",
                                            className: classnames_default()(classes.info, classes.message),
                                            children: t.history_duration({
                                                startTime: dateTimeFormat(new Date(history.creation_time)),
                                                endTime: dateTimeFormat(new Date(history.creation_time + history.duration), false)
                                            })
                                        })
                                    ]
                                }),
                                canSend ? /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                                    onMouseEnter: handleMouseEnter,
                                    onMouseLeave: onHidePopover,
                                    onClick: handleSend,
                                    className: classnames_default()(classes.actionButton, isPasswordValid ? '' : classes.disabledButton),
                                    variant: "contained",
                                    size: "large",
                                    children: t.send()
                                }) : null
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)("section", {
                            className: classes.nftList,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(NftList, {
                                contract: contractDetailed ?? history.token_contract,
                                statusList: bitStatusList,
                                tokenIds: history.token_ids
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)("section", {
                            className: classes.footer,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                variant: "body1",
                                className: classes.footerInfo,
                                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Translate.history_claimed, {
                                    components: {
                                        strong: /*#__PURE__*/ (0,jsx_runtime.jsx)("strong", {})
                                    },
                                    values: {
                                        claimedShares: history.claimers.length.toString(),
                                        shares: history.shares.toString()
                                    }
                                })
                            })
                        })
                    ]
                })
            ]
        })
    });
});

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/NftRedPacketHistoryList.tsx













const NftRedPacketHistoryList_useStyles = (0,entry/* makeStyles */.ZL)()((theme, _, refs)=>{
    const smallQuery = `@media (max-width: ${theme.breakpoints.values.sm}px)`;
    return {
        root: {
            display: 'flex',
            width: 568,
            padding: '0 12px',
            boxSizing: 'border-box',
            height: '100%',
            flexDirection: 'column',
            margin: '0 auto',
            overflow: 'auto',
            [smallQuery]: {
                width: '100%',
                padding: 0
            },
            '&::-webkit-scrollbar': {
                display: 'none'
            }
        },
        placeholder: {
            height: '100%',
            display: 'flex',
            width: 360,
            margin: '0 auto',
            justifyContent: 'center',
            alignItems: 'center',
            textAlign: 'center'
        },
        popper: {
            overflow: 'visible',
            padding: 6
        },
        popperContent: {
            position: 'relative',
            overflow: 'visible',
            backgroundColor: theme.palette.mode === 'light' ? 'rgba(15, 20, 25, 1)' : '#fff',
            borderRadius: 8,
            padding: 10
        },
        arrow: {
            position: 'absolute',
            bottom: 0,
            right: 74,
            width: 0,
            height: 0,
            borderLeft: '6px solid transparent',
            borderRight: '6px solid transparent',
            borderTop: `6px solid ${theme.palette.mode === 'light' ? 'rgba(15, 20, 25, 1)' : '#fff'}`,
            transform: 'translate(-50%, 6px)',
            [`&.${refs.atBottom}`]: {
                bottom: 'auto',
                top: 0,
                transform: 'translate(-50%, -6px) rotate(180deg)'
            }
        },
        atBottom: {},
        popperText: {
            cursor: 'default',
            color: theme.palette.mode === 'light' ? '#fff' : 'rgba(15, 20, 25, 1)',
            fontSize: 12
        }
    };
});
function NftRedPacketHistoryList({ onSend  }) {
    const { classes  } = NftRedPacketHistoryList_useStyles();
    const { t: tr  } = (0,utils/* useI18N */.M1)();
    const t = useI18N();
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const { histories , fetchMore , loading  } = useNftRedPacketHistory(account, chainId);
    const containerRef = (0,react.useRef)(null);
    const [popperText, setPopperText] = (0,react.useState)('');
    const [anchorEl, setAnchorEl] = (0,react.useState)(null);
    (0,shared_base_ui_src/* useScrollBottomEvent */.S8)(containerRef, fetchMore);
    const handleShowPopover = (anchor, text)=>{
        setAnchorEl(anchor);
        setPopperText(text);
    };
    const handleHidePopover = ()=>{
        setAnchorEl(null);
    };
    if (chainId === types/* ChainId.BSC */.a_.BSC) {
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
            className: classes.placeholder,
            color: "textSecondary",
            children: t.chain_not_supported({
                chain: 'Binance Smart Chain'
            })
        });
    }
    if (loading) {
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
            className: classes.placeholder,
            color: "textSecondary",
            children: tr('loading')
        });
    }
    if (!histories?.length) {
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
            className: classes.placeholder,
            color: "textSecondary",
            children: t.nft_no_history()
        });
    }
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                ref: containerRef,
                className: classes.root,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(List/* default */.Z, {
                    children: histories.map((history)=>/*#__PURE__*/ (0,jsx_runtime.jsx)(NftRedPacketHistoryItem, {
                            history: history,
                            onSend: onSend,
                            onShowPopover: handleShowPopover,
                            onHidePopover: handleHidePopover
                        }, history.rpid)
                    )
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Popper/* default */.Z, {
                className: classes.popper,
                id: "data-damaged",
                open: !!anchorEl,
                placement: "top",
                anchorEl: anchorEl,
                disablePortal: true,
                children: ({ placement  })=>{
                    return /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                        className: classes.popperContent,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                className: classes.popperText,
                                children: popperText
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                                className: classnames_default()(classes.arrow, placement === 'bottom' ? classes.atBottom : '')
                            })
                        ]
                    });
                }
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedPacketPast.tsx














var RedPacketPast_RpTypeTabs;
(function(RpTypeTabs) {
    RpTypeTabs[RpTypeTabs["ERC20"] = 0] = "ERC20";
    RpTypeTabs[RpTypeTabs["ERC721"] = 1] = "ERC721";
})(RedPacketPast_RpTypeTabs || (RedPacketPast_RpTypeTabs = {}));
const RedPacketPast_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        tab: {
            height: 36,
            minHeight: 36,
            fontWeight: 300
        },
        tabs: {
            height: 36,
            minHeight: 36,
            margin: '0 auto',
            borderRadius: 4,
            backgroundColor: theme.palette.background.default,
            '& .Mui-selected': {
                color: theme.palette.primary.contrastText,
                backgroundColor: theme.palette.primary.main
            }
        },
        indicator: {
            display: 'none'
        },
        tabPanel: {
            marginTop: theme.spacing(3)
        },
        img: {
            width: 20,
            marginRight: 4
        },
        labelWrapper: {
            display: 'flex'
        },
        tabWrapper: {
            padding: theme.spacing(0, 2, 0, 2)
        }
    })
);
function RedPacketPast({ onSelect , onClose  }) {
    const t = useI18N();
    const { classes  } = RedPacketPast_useStyles();
    const state = (0,react.useState)(RedPacketPast_RpTypeTabs.ERC20);
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const currentIdentity = (0,useActivatedUI/* useCurrentIdentity */.Ud)();
    const { value: linkedPersona  } = (0,useActivatedUI/* useCurrentLinkedPersona */.Ol)();
    const senderName = (currentIdentity?.identifier.userId ?? linkedPersona?.nickname) ?? 'Unknown User';
    const { attachMetadata  } = (0,entry_content_script/* useCompositionContext */.Cp)();
    const handleSendNftRedpacket = (0,react.useCallback)((history, contractDetailed)=>{
        const { rpid , txid , duration , message , payload  } = history;
        attachMetadata(constants/* RedPacketNftMetaKey */.HA, {
            id: rpid,
            txid,
            duration,
            message,
            senderName,
            contractName: contractDetailed.name,
            contractAddress: contractDetailed.address,
            contractTokenURI: contractDetailed.logoURL ?? '',
            privateKey: payload.password,
            chainId: history.chain_id
        });
        onClose?.();
    }, [
        senderName,
        onClose
    ]);
    const tabProps = {
        tabs: [
            {
                label: /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                    className: classes.labelWrapper,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)("img", {
                            className: classes.img,
                            src: IconURLs.erc20Token
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                            children: t.erc20_tab_title()
                        })
                    ]
                }),
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(RedPacketHistoryList, {
                    onSelect: onSelect
                }),
                sx: {
                    p: 0
                }
            },
            {
                label: /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                    className: classes.labelWrapper,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)("img", {
                            className: classes.img,
                            src: IconURLs.erc721Token
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                            children: t.erc721_tab_title()
                        })
                    ]
                }),
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(NftRedPacketHistoryList, {
                    onSend: handleSendNftRedpacket
                }),
                sx: {
                    p: 0
                },
                disabled: ![
                    types/* ChainId.Mainnet */.a_.Mainnet,
                    types/* ChainId.Matic */.a_.Matic
                ].includes(chainId)
            }, 
        ],
        state,
        classes
    };
    return /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
        className: classes.tabWrapper,
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(AbstractTab/* default */.Z, {
            height: 512,
            ...tabProps
        })
    });
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedPacketDialog.tsx



















const RedPacketDialog_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        content: {
            position: 'relative',
            paddingTop: 50
        },
        tabs: {
            borderBottom: `1px solid ${theme.palette.divider}`
        },
        dialogContent: {
            padding: 0
        },
        tabPaper: {
            position: 'sticky',
            top: 0,
            zIndex: 5000
        },
        indicator: {
            display: 'none'
        },
        tab: {
            maxWidth: 120
        },
        focusTab: {
            borderBottom: `2px solid ${theme.palette.primary.main}`
        },
        flexContainer: {
            justifyContent: 'space-around'
        }
    })
);
var CreateRedPacketPageStep;
(function(CreateRedPacketPageStep) {
    CreateRedPacketPageStep["NewRedPacketPage"] = 'new';
    CreateRedPacketPageStep["ConfirmPage"] = 'confirm';
})(CreateRedPacketPageStep || (CreateRedPacketPageStep = {}));
function RedPacketDialog(props) {
    const t = useI18N();
    const { classes  } = RedPacketDialog_useStyles();
    const { attachMetadata , dropMetadata  } = (0,entry_content_script/* useCompositionContext */.Cp)();
    const state = (0,react.useState)(DialogTabs.create);
    const connection = (0,entry_web3/* useWeb3Connection */.Tv)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const [settings, setSettings] = (0,react.useState)();
    const onClose = (0,react.useCallback)(()=>{
        setStep(CreateRedPacketPageStep.NewRedPacketPage);
        setSettings(undefined);
        const [, setValue] = state;
        setValue(DialogTabs.create);
        props.onClose();
    }, [
        props,
        state
    ]);
    const currentIdentity = (0,useActivatedUI/* useCurrentIdentity */.Ud)();
    const lastRecognized = (0,useActivatedUI/* useLastRecognizedIdentity */.FB)();
    const { value: linkedPersona  } = (0,useActivatedUI/* useCurrentLinkedPersona */.Ol)();
    const senderName = (lastRecognized.identifier?.userId ?? currentIdentity?.identifier.userId) ?? linkedPersona?.nickname;
    const { closeDialog: closeApplicationBoardDialog  } = (0,shared_base_ui_src/* useRemoteControlledDialog */.F$)(messages/* WalletMessages.events.ApplicationDialogUpdated */.R.events.ApplicationDialogUpdated);
    const onCreateOrSelect = (0,react.useCallback)(async (payload)=>{
        if (payload.password === '') {
            if (payload.contract_version === 1) {
                alert('Unable to share a lucky drop without a password. But you can still withdraw the lucky drop.');
                payload.password = prompt('Please enter the password of the lucky drop:', '') ?? '';
            } else if (payload.contract_version > 1 && payload.contract_version < 4) {
                // just sign out the password if it is lost.
                if (!connection) return;
                payload.password = await connection.signMessage(lib_default().sha3(payload.sender.message) ?? '', 'personalSign', {
                    account
                });
                payload.password = payload.password.slice(2);
            }
        }
        if (payload) {
            senderName && (payload.sender.name = senderName);
            attachMetadata(constants/* RedPacketMetaKey */.Vr, payload);
        } else dropMetadata(constants/* RedPacketMetaKey */.Vr);
        onClose();
        closeApplicationBoardDialog();
    }, [
        onClose,
        chainId,
        senderName,
        connection
    ]);
    const [step, setStep] = (0,react.useState)(CreateRedPacketPageStep.NewRedPacketPage);
    const onBack = (0,react.useCallback)(()=>{
        if (step === CreateRedPacketPageStep.ConfirmPage) setStep(CreateRedPacketPageStep.NewRedPacketPage);
    }, [
        step
    ]);
    const onNext = (0,react.useCallback)(()=>{
        if (step === CreateRedPacketPageStep.NewRedPacketPage) setStep(CreateRedPacketPageStep.ConfirmPage);
    }, [
        step
    ]);
    const onChange = (0,react.useCallback)((val)=>{
        setSettings(val);
    }, []);
    const tokenState = (0,react.useState)(RpTypeTabs.ERC20);
    // nft dialog height depends on the detailed step
    const [ERC721DialogHeight, setERC721DialogHeight] = (0,react.useState)(350);
    const dialogContentHeight = state[0] === DialogTabs.past ? 600 : tokenState[0] === RpTypeTabs.ERC20 ? 350 : ERC721DialogHeight;
    const tabProps = {
        tabs: [
            {
                label: t.create_new(),
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(RedPacketCreateNew, {
                    origin: settings,
                    onNext: onNext,
                    state: tokenState,
                    onClose: onClose,
                    onChange: onChange,
                    setERC721DialogHeight: (height)=>setERC721DialogHeight(height)
                }),
                sx: {
                    p: 0
                }
            },
            {
                label: t.select_existing(),
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(RedPacketPast, {
                    onSelect: onCreateOrSelect,
                    onClose: onClose
                }),
                sx: {
                    p: 0
                }
            }, 
        ],
        state,
        classes: {
            focusTab: classes.focusTab,
            tabPaper: classes.tabPaper,
            tab: classes.tab,
            flexContainer: classes.flexContainer,
            indicator: classes.indicator,
            tabs: classes.tabs
        }
    };
    const handleCreated = (0,react.useCallback)((payload)=>{
        onCreateOrSelect(payload);
        setSettings(undefined);
    }, [
        onCreateOrSelect
    ]);
    const isCreateStep = step === CreateRedPacketPageStep.NewRedPacketPage;
    const title = isCreateStep ? t.display_name() : t.details();
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* InjectedDialog */.Fl, {
        isOpenFromApplicationBoard: props.isOpenFromApplicationBoard,
        open: props.open,
        title: title,
        onClose: isCreateStep ? onClose : ()=>setStep(CreateRedPacketPageStep.NewRedPacketPage)
        ,
        isOnBack: step !== CreateRedPacketPageStep.NewRedPacketPage,
        disableTitleBorder: true,
        children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(DialogContent/* default */.Z, {
            className: classes.dialogContent,
            children: [
                step === CreateRedPacketPageStep.NewRedPacketPage ? /*#__PURE__*/ (0,jsx_runtime.jsx)(AbstractTab/* default */.Z, {
                    height: dialogContentHeight,
                    ...tabProps
                }) : null,
                step === CreateRedPacketPageStep.ConfirmPage ? /*#__PURE__*/ (0,jsx_runtime.jsx)(RedPacketConfirmDialog, {
                    onClose: onClose,
                    onBack: onBack,
                    onCreated: handleCreated,
                    settings: settings
                }) : null
            ]
        })
    });
};

// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Card/Card.js + 1 modules
var Card = __webpack_require__(84026);
// EXTERNAL MODULE: ./src/components/DataSource/usePostInfo.ts
var usePostInfo = __webpack_require__(442);
// EXTERNAL MODULE: ./src/social-network-adaptor/facebook.com/base.ts
var facebook_com_base = __webpack_require__(5492);
// EXTERNAL MODULE: ./src/social-network-adaptor/twitter.com/base.ts
var twitter_com_base = __webpack_require__(72005);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/hooks/useClaimCallback.ts






function useClaimCallback(version, from, id, password) {
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const redPacketContract = useRedPacketContract(chainId, version);
    const connection = (0,entry_web3/* useWeb3Connection */.Tv)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    return (0,useAsyncFn/* default */.Z)(async ()=>{
        if (!redPacketContract || !id || !password) return;
        const config = {
            from
        };
        // note: despite the method params type of V1 and V2 is the same,
        // but it is more understandable to declare respectively
        const tx = version === 4 ? await (0,contract/* encodeContractTransaction */.Wp)(redPacketContract, redPacketContract.methods.claim(id, password, from), config) : await (0,contract/* encodeContractTransaction */.Wp)(redPacketContract, redPacketContract.methods.claim(id, password, from, lib_default().sha3(from)), config);
        return connection.sendTransaction(tx);
    }, [
        id,
        password,
        from,
        redPacketContract,
        chainId,
        version,
        connection
    ]);
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/styles/useTheme.js
var useTheme = __webpack_require__(76618);
// EXTERNAL MODULE: ../icons/plugins/connect.tsx
var connect = __webpack_require__(47061);
// EXTERNAL MODULE: ../icons/plugins/shared.tsx
var shared = __webpack_require__(28908);
// EXTERNAL MODULE: ./src/web3/UI/ChainBoundary.tsx
var ChainBoundary = __webpack_require__(73495);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedPacket/useStyles.ts


const useStyles_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    const spinningAnimationKeyFrames = entry/* keyframes */.F4`
to {
  transform: rotate(360deg)
}`;
    return {
        root: {
            borderRadius: theme.spacing(1),
            padding: theme.spacing(3),
            background: '#DB0632',
            position: 'relative',
            display: 'flex',
            color: theme.palette.common.white,
            flexDirection: 'column',
            justifyContent: 'space-between',
            height: 335,
            boxSizing: 'border-box',
            backgroundImage: `url(${new URL(/* asset import */ __webpack_require__(10737), __webpack_require__.b)})`,
            backgroundSize: 'contain',
            [`@media (max-width: ${theme.breakpoints.values.sm}px)`]: {
                padding: theme.spacing(1, 1.5),
                height: 202
            },
            width: '100%'
        },
        header: {
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'flex-start'
        },
        content: {
            display: 'flex',
            flex: 1,
            flexDirection: 'column',
            alignItems: 'flex-start',
            justifyContent: 'space-between'
        },
        bottomContent: {
            width: '100%',
            display: 'flex',
            justifyContent: 'space-between',
            flexWrap: 'wrap'
        },
        footer: {
            width: '100%',
            display: 'flex',
            gap: theme.spacing(2),
            justifyContent: 'center',
            '& button': {
                flexBasis: 'auto'
            },
            [`@media (max-width: ${theme.breakpoints.values.sm}px)`]: {
                flexDirection: 'column',
                gap: theme.spacing(1)
            }
        },
        myStatus: {
            fontSize: 14,
            color: '#FAD85A',
            fontWeight: 'bold',
            [`@media (max-width: ${theme.breakpoints.values.sm}px)`]: {
                fontSize: 14,
                left: 12,
                bottom: 8
            }
        },
        from: {
            fontSize: '14px',
            color: '#FFFFFF',
            fontWeight: 'bold',
            [`@media (max-width: ${theme.breakpoints.values.sm}px)`]: {
                fontSize: 14,
                right: 12,
                bottom: 8
            }
        },
        label: {
            borderRadius: theme.spacing(1),
            padding: theme.spacing(0.2, 1),
            background: 'rgba(0, 0, 0, 0.2)',
            textTransform: 'capitalize',
            position: 'absolute',
            right: 12,
            top: 8
        },
        words: {
            color: '#FAD85A',
            fontSize: 20,
            whiteSpace: 'pre',
            textOverflow: 'ellipsis',
            overflow: 'hidden',
            width: '85%',
            minWidth: 300,
            [`@media (max-width: ${theme.breakpoints.values.sm}px)`]: {
                fontSize: 14
            }
        },
        button: {
            color: theme.palette.common.white
        },
        spinning: {
            display: 'flex',
            animation: `${spinningAnimationKeyFrames} 2s infinite linear`
        },
        packet: {
            top: 40,
            right: -10,
            width: 90,
            height: 90,
            position: 'absolute',
            backgroundAttachment: 'local',
            backgroundPosition: 'center',
            backgroundSize: 'contain',
            backgroundRepeat: 'no-repeat',
            backgroundImage: `url(${IconURLs.presentDefault})`
        },
        dai: {
            backgroundImage: `url(${IconURLs.presentDai})`
        },
        okb: {
            backgroundImage: `url(${IconURLs.presentOkb})`
        },
        text: {
            padding: theme.spacing(0.5, 2),
            height: '100%',
            display: 'flex',
            flexDirection: 'column',
            justifyContent: 'space-between',
            boxSizing: 'border-box'
        },
        dimmer: {
            backgroundColor: 'rgba(0, 0, 0, 0.6)'
        },
        cursor: {
            cursor: 'pointer'
        },
        loader: {
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            position: 'absolute',
            left: 0,
            right: 0,
            top: 0,
            bottom: 0
        },
        icon: {
            fontSize: 45
        },
        metamaskContent: {
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'space-around'
        },
        connectWallet: {
            marginTop: 16
        },
        fullWidthBox: {
            width: '100%'
        },
        loadingText: {
            textAlign: 'center',
            fontSize: 24,
            marginTop: 210
        },
        walletButton: {
            backgroundColor: theme.palette.maskColor?.dark,
            color: 'white',
            fontSize: 14,
            fontWeight: 700,
            width: '100%',
            '&:hover': {
                backgroundColor: theme.palette.maskColor?.dark
            }
        }
    };
});

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedPacket/OperationFooter.tsx














function OperationFooter({ chainId , canClaim , canRefund , isClaiming , isRefunding , onShare , onClaimOrRefund  }) {
    const { classes  } = useStyles_useStyles();
    const { t: tr  } = (0,utils/* useI18N */.M1)();
    const t = useI18N();
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const chainIdValid = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const theme = (0,useTheme/* default */.Z)();
    // #region remote controlled select provider dialog
    const { openDialog: openSelectProviderDialog  } = (0,shared_base_ui_src/* useRemoteControlledDialog */.F$)(Wallet_src/* WalletMessages.events.selectProviderDialogUpdated */.R$.events.selectProviderDialogUpdated);
    // #endregion
    const ObtainButton = ()=>{
        if (!canClaim && !canRefund) return null;
        if (!account) {
            return /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                variant: "contained",
                fullWidth: true,
                onClick: openSelectProviderDialog,
                children: tr('plugin_wallet_connect_a_wallet')
            });
        }
        if (!chainIdValid) {
            return /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                disabled: true,
                variant: "contained",
                fullWidth: true,
                children: tr('plugin_wallet_invalid_network')
            });
        }
        const isLoading = isClaiming || isRefunding;
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
            sx: {
                backgroundColor: theme.palette.maskColor?.dark,
                width: '100%',
                color: 'white',
                '&:hover': {
                    backgroundColor: theme.palette.maskColor?.dark
                }
            },
            fullWidth: true,
            loading: isLoading,
            disabled: isLoading,
            variant: "contained",
            onClick: onClaimOrRefund,
            children: canClaim ? isClaiming ? t.claiming() : t.claim() : isRefunding ? t.refunding() : t.refund()
        });
    };
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(Box/* default */.Z, {
        style: {
            flex: 1,
            padding: 12
        },
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(ChainBoundary/* ChainBoundary */.s, {
            expectedPluginID: base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM,
            expectedChainId: chainId ?? types/* ChainId.Mainnet */.a_.Mainnet,
            renderInTimeline: true,
            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(WalletConnectedBoundary/* WalletConnectedBoundary */.T, {
                hideRiskWarningConfirmed: true,
                startIcon: /*#__PURE__*/ (0,jsx_runtime.jsx)(connect/* PluginWalletConnectIcon */.Q, {
                    style: {
                        fontSize: 18
                    }
                }),
                renderInTimeline: true,
                classes: {
                    connectWallet: classes.connectWallet
                },
                children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                    className: classes.footer,
                    children: [
                        canRefund ? null : /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                            sx: {
                                backgroundColor: theme.palette.maskColor?.dark,
                                color: theme.palette.maskColor?.white,
                                '&:hover': {
                                    backgroundColor: theme.palette.maskColor?.dark
                                },
                                padding: 1.125
                            },
                            fullWidth: true,
                            startIcon: /*#__PURE__*/ (0,jsx_runtime.jsx)(shared/* SharedIcon */.r, {
                                style: {
                                    fontSize: 18
                                }
                            }),
                            variant: "contained",
                            onClick: onShare,
                            children: tr('share')
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(ObtainButton, {})
                    ]
                })
            })
        })
    });
}

// EXTERNAL MODULE: ./shared/native-rpc/index.ts + 1 modules
var native_rpc = __webpack_require__(76536);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedPacket/index.tsx





















function RedPacket(props) {
    const { payload  } = props;
    const t = useI18N();
    const { t: tr  } = (0,utils/* useI18N */.M1)();
    const { classes  } = useStyles_useStyles();
    // context
    const web3 = (0,entry_web3/* useWeb3 */.$6)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const networkType = (0,entry_web3/* useNetworkType */.bL)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    // #region token detailed
    const { value: availability , computed: availabilityComputed , retry: revalidateAvailability ,  } = useAvailabilityComputed(account ?? payload.contract_address, payload);
    const token = payload.token;
    // #endregion
    const { canFetch , canClaim , canRefund , listOfStatus  } = availabilityComputed;
    // #region remote controlled transaction dialog
    const postLink = (0,usePostInfo/* usePostLink */.V)();
    const [{ loading: isClaiming , value: claimTxHash  }, claimCallback] = useClaimCallback(payload.contract_version, account, payload.rpid, payload.contract_version > 3 ? web3?.eth.accounts.sign(account, payload.password).signature : payload.password);
    const shareText = (0,react.useMemo)(()=>{
        const isOnTwitter = (0,twitter_com_base/* isTwitter */.L)(social_network/* activatedSocialNetworkUI */.LM);
        const isOnFacebook = (0,facebook_com_base/* isFacebook */.D)(social_network/* activatedSocialNetworkUI */.LM);
        const shareTextOption = {
            sender: payload.sender.name,
            payload: postLink.toString(),
            network: resolver/* networkResolver.networkName */.LJ.networkName(networkType) ?? 'Mainnet',
            account: (0,twitter_com_base/* isTwitter */.L)(social_network/* activatedSocialNetworkUI */.LM) ? tr('twitter_account') : tr('facebook_account')
        };
        if (listOfStatus.includes(RedPacketStatus.claimed) || claimTxHash) {
            return isOnTwitter || isOnFacebook ? t.share_message_official_account(shareTextOption) : t.share_message_not_twitter(shareTextOption);
        }
        return isOnTwitter || isOnFacebook ? t.share_unclaimed_message_official_account(shareTextOption) : t.share_unclaimed_message_not_twitter(shareTextOption);
    }, [
        payload,
        postLink,
        networkType,
        claimTxHash,
        listOfStatus,
        social_network/* activatedSocialNetworkUI */.LM,
        t,
        tr
    ]);
    const [{ loading: isRefunding  }, isRefunded, refundCallback] = useRefundCallback(payload.contract_version, account, payload.rpid);
    const openShareTxDialog = (0,src/* useOpenShareTxDialog */.z)();
    const onClaimOrRefundOnNative = (0,react.useCallback)(async ()=>{
        if (!availability) return;
        await native_rpc/* nativeAPI */.Nz?.api.claimOrRefundRedpacket({
            redpacketPayload: payload,
            availability: {
                token_address: availability.token_address,
                balance: availability.balance,
                total: availability.total,
                claimed: availability.claimed,
                expired: availability.expired,
                claimed_amount: availability.claimed_amount
            },
            postLink: postLink.toString()
        });
    }, [
        availability,
        JSON.stringify(payload),
        postLink
    ]);
    const onClaimOrRefund = (0,react.useCallback)(async ()=>{
        let hash;
        if (canClaim) {
            hash = await claimCallback();
        } else if (canRefund) {
            hash = await refundCallback();
        }
        revalidateAvailability();
        if (typeof hash !== 'string') return;
        openShareTxDialog({
            hash,
            onShare () {
                social_network/* activatedSocialNetworkUI.utils.share */.LM.utils.share?.(shareText);
            }
        });
    }, [
        canClaim,
        canRefund,
        claimCallback,
        isRefunded,
        openShareTxDialog
    ]);
    const myStatus = (0,react.useMemo)(()=>{
        if (!availability) return '';
        if (token && listOfStatus.includes(RedPacketStatus.claimed)) return t.description_claimed(availability.claimed_amount ? {
            amount: (0,base_src/* formatBalance */.az)(availability.claimed_amount, token.decimals, 8),
            symbol: token.symbol
        } : {
            amount: '-',
            symbol: '-'
        });
        return '';
    }, [
        listOfStatus,
        t,
        token
    ]);
    const subtitle = (0,react.useMemo)(()=>{
        if (!availability || !token) return;
        if (listOfStatus.includes(RedPacketStatus.expired) && canRefund) return t.description_refund({
            balance: (0,base_src/* formatBalance */.az)(availability.balance, token.decimals),
            symbol: token.symbol ?? '-'
        });
        if (listOfStatus.includes(RedPacketStatus.refunded)) return t.description_refunded();
        if (listOfStatus.includes(RedPacketStatus.expired)) return t.description_expired();
        if (listOfStatus.includes(RedPacketStatus.empty)) return t.description_empty();
        if (!payload.password) return t.description_broken();
        return t.description_failover({
            total: (0,base_src/* formatBalance */.az)(payload.total, token.decimals),
            symbol: token.symbol ?? '-',
            shares: payload.shares.toString() ?? '-'
        });
    }, [
        availability,
        canRefund,
        token,
        t,
        payload,
        listOfStatus
    ]);
    const handleShare = (0,react.useCallback)(()=>{
        if (!shareText || !social_network/* activatedSocialNetworkUI.utils.share */.LM.utils.share) return;
        social_network/* activatedSocialNetworkUI.utils.share */.LM.utils.share(shareText);
    }, [
        shareText
    ]);
    // the red packet can fetch without account
    if (!availability || !token) return /*#__PURE__*/ (0,jsx_runtime.jsx)(Card/* default */.Z, {
        className: classes.root,
        component: "article",
        elevation: 0,
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
            className: classes.loadingText,
            variant: "body2",
            children: tr('loading')
        })
    });
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)(Card/* default */.Z, {
                className: classnames_default()(classes.root),
                component: "article",
                elevation: 0,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                        className: classes.header,
                        children: canFetch && listOfStatus.length ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.label,
                            variant: "body2",
                            children: resolveRedPacketStatus(listOfStatus)
                        }) : null
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                        className: classnames_default()(classes.content),
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                                className: classes.fullWidthBox,
                                children: [
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                        className: classes.words,
                                        variant: "h6",
                                        children: payload.sender.message
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                        variant: "body2",
                                        children: subtitle
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                                className: classes.bottomContent,
                                children: [
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                        className: classes.myStatus,
                                        variant: "body1",
                                        children: myStatus
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                        className: classes.from,
                                        variant: "body1",
                                        children: t.from({
                                            name: payload.sender.name ?? '-'
                                        })
                                    })
                                ]
                            })
                        ]
                    })
                ]
            }),
            listOfStatus.includes(RedPacketStatus.empty) ? null : /*#__PURE__*/ (0,jsx_runtime.jsx)(OperationFooter, {
                chainId: (payload.token?.chainId ?? resolver/* chainResolver.chainId */.VU.chainId(payload.network ?? '')) ?? types/* ChainId.Mainnet */.a_.Mainnet,
                canClaim: canClaim,
                canRefund: canRefund,
                isClaiming: isClaiming,
                isRefunding: isRefunding,
                onShare: handleShare,
                onClaimOrRefund: native_rpc/* hasNativeAPI */._ ? onClaimOrRefundOnNative : onClaimOrRefund
            })
        ]
    });
}
function resolveRedPacketStatus(listOfStatus) {
    if (listOfStatus.includes(RedPacketStatus.claimed)) return 'Claimed';
    if (listOfStatus.includes(RedPacketStatus.refunded)) return 'Refunded';
    if (listOfStatus.includes(RedPacketStatus.expired)) return 'Expired';
    if (listOfStatus.includes(RedPacketStatus.empty)) return 'Empty';
    return '';
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedPacketInPost.tsx








function RedPacketInPost(props) {
    const { payload  } = props;
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    // #region discover red packet
    const postIdentifier = entry_content_script/* usePostInfoDetails.identifier */.H9.identifier();
    const fromUrl = postIdentifier ? social_network/* activatedSocialNetworkUI.utils.getPostURL */.LM.utils.getPostURL?.(postIdentifier)?.toString() : undefined;
    (0,react.useEffect)(()=>{
        if (!fromUrl) return;
        if (!payload.txid && payload.contract_version !== 1) return;
        const record = {
            id: payload.contract_version === 1 ? payload.rpid : payload.txid,
            from: fromUrl,
            password: payload.password,
            contract_version: payload.contract_version
        };
        RedPacket_messages/* RedPacketRPC.discoverRedPacket */.T.discoverRedPacket(record, chainId);
    }, [
        fromUrl,
        chainId
    ]);
    // #endregion
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(RedPacket, {
        payload: payload
    });
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Skeleton/Skeleton.js + 2 modules
var Skeleton = __webpack_require__(51129);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/CardHeader/CardHeader.js + 1 modules
var CardHeader = __webpack_require__(70186);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/CardMedia/CardMedia.js + 1 modules
var CardMedia = __webpack_require__(86361);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/CardContent/CardContent.js + 1 modules
var CardContent = __webpack_require__(60647);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/hooks/useClaimNftRedpacketCallback.ts





const EXTRA_GAS_PER_NFT = 335;
function useClaimNftRedpacketCallback(id, totalAmount, signedMsg) {
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const nftRedPacketContract = useNftRedPacketContract(chainId);
    const connection = (0,entry_web3/* useWeb3Connection */.Tv)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    return (0,useAsyncFn/* default */.Z)(async ()=>{
        if (!nftRedPacketContract || !id || !signedMsg || !account || !totalAmount) {
            return;
        }
        const params = [
            id,
            signedMsg,
            account
        ];
        const config = {
            from: account,
            gas: await nftRedPacketContract.methods.claim(...params).estimateGas({
                from: account
            }).catch((error)=>{
                throw error;
            }) + EXTRA_GAS_PER_NFT * totalAmount,
            chainId
        };
        const tx = await (0,contract/* encodeContractTransaction */.Wp)(nftRedPacketContract, nftRedPacketContract.methods.claim(...params), config);
        return connection.sendTransaction(tx);
    }, [
        id,
        connection,
        signedMsg,
        account,
        chainId,
        totalAmount
    ]);
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedPacketNft.tsx























const RedPacketNft_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        root: {
            position: 'relative',
            width: '100%'
        },
        actions: {
            paddingTop: theme.spacing(2),
            display: 'flex',
            justifyContent: 'center'
        },
        card: {
            display: 'flex',
            flexDirection: 'column',
            borderRadius: theme.spacing(1),
            padding: theme.spacing(1),
            background: '#DB0632',
            position: 'relative',
            color: theme.palette.common.white,
            boxSizing: 'border-box',
            backgroundImage: `url(${new URL(/* asset import */ __webpack_require__(20317), __webpack_require__.b)})`,
            backgroundSize: 'cover',
            backgroundRepeat: 'no-repeat'
        },
        loadingCard: {
            width: '100%',
            height: 360,
            justifyContent: 'center',
            alignItems: 'center'
        },
        loadingCardImg: {
            width: 200
        },
        title: {
            textAlign: 'left'
        },
        image: {
            display: 'flex',
            alignItems: 'center',
            width: '100%',
            height: 160,
            backgroundSize: 'contain',
            textAlign: 'center',
            justifyContent: 'center'
        },
        remain: {
            marginLeft: 28,
            paddingTop: 40,
            color: '#FAD85A',
            width: '100%'
        },
        claim: {
            textAlign: 'center',
            marginTop: theme.spacing(1)
        },
        button: {
            backgroundColor: theme.palette.maskColor?.dark,
            color: 'white',
            '&:hover': {
                backgroundColor: theme.palette.maskColor?.dark
            },
            margin: '0 !important'
        },
        footer: {
            display: 'flex',
            justifyContent: 'space-between !important',
            paddingLeft: theme.spacing(2),
            paddingRight: theme.spacing(2),
            paddingBottom: theme.spacing(1)
        },
        link: {
            display: 'flex',
            width: 120,
            cursor: 'pointer',
            '&>:first-child': {
                marginRight: theme.spacing(1)
            }
        },
        buttonWrapper: {
            marginTop: 0,
            display: 'flex'
        },
        loadingBox: {
            borderRadius: theme.spacing(1),
            padding: theme.spacing(2),
            background: '#DB0632',
            position: 'relative',
            display: 'flex',
            color: theme.palette.common.white,
            flexDirection: 'column',
            height: 360,
            boxSizing: 'border-box'
        },
        tokenWrapper: {
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center',
            maxHeight: 180
        },
        tokenImg: {
            width: '100%',
            borderRadius: 6
        },
        claimedText: {
            fontSize: 18,
            fontWeight: 500
        },
        coverCard: {
            position: 'absolute',
            backgroundColor: 'rgba(0, 0, 0, 0.5)',
            top: 0,
            borderRadius: 6,
            width: '100%',
            height: '100%'
        },
        hide: {
            opacity: 0
        },
        dim: {
            opacity: 0.5
        },
        whiteText: {
            color: 'white'
        },
        dimWhiteText: {
            color: '#e3e3e3'
        },
        badge: {
            width: 76,
            height: 27,
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            position: 'absolute',
            top: 20,
            right: 20,
            backgroundColor: 'rgba(21, 24, 27, 0.5)',
            borderRadius: 6
        },
        badgeText: {
            fontSize: 12
        },
        snackBarText: {
            fontSize: 14
        },
        snackBarLink: {
            color: 'white'
        },
        openIcon: {
            display: 'flex',
            width: 18,
            height: 18,
            marginLeft: 2
        },
        snackBar: {
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            transform: 'translateY(1px)'
        },
        loadingTokenImg: {
            opacity: 0.4
        },
        tokenImgSpinner: {
            position: 'absolute',
            opacity: 0.4,
            top: 65,
            left: 40,
            width: 30,
            height: 30
        },
        loadingText: {
            textAlign: 'center',
            fontSize: 24
        },
        loadingWrapper: {
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center'
        },
        errorCard: {
            height: 360,
            justifyContent: 'center',
            alignItems: 'center'
        },
        errImage: {
            width: 220
        },
        errorButton: {
            borderColor: 'white',
            minHeight: 30,
            width: 100,
            marginTop: 16,
            '&:hover': {
                borderColor: 'white'
            }
        },
        ellipsis: {
            whiteSpace: 'nowrap',
            textOverflow: 'ellipsis',
            overflow: 'hidden',
            maxWidth: 400,
            fontSize: '1.5rem'
        },
        assetPlayerIframe: {
            marginBottom: 16,
            height: '160px !important'
        },
        imgWrapper: {
            maxWidth: 180,
            marginBottom: 10
        },
        assetPlayerVideoIframe: {
            minWidth: 'fit-content'
        },
        loadingFailImage: {
            height: 160,
            width: 120
        }
    })
);
function RedPacketNft({ payload  }) {
    const { t: i18n  } = (0,utils/* useI18N */.M1)();
    const t = useI18N();
    const { classes  } = RedPacketNft_useStyles();
    const web3 = (0,entry_web3/* useWeb3 */.$6)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const { value: availability , loading , retry: retryAvailability , error: availabilityError ,  } = useAvailabilityNftRedPacket(payload.id, account, payload.chainId);
    const [{ loading: isClaiming  }, claimCallback] = useClaimNftRedpacketCallback(payload.id, availability?.totalAmount, web3?.eth.accounts.sign(account, payload.privateKey).signature ?? '');
    const claim = (0,react.useCallback)(async ()=>{
        const hash = await claimCallback();
        if (typeof hash === 'string') {
            retryAvailability();
        }
    }, [
        claimCallback,
        retryAvailability
    ]);
    const openAddressLinkOnExplorer = (0,react.useCallback)(()=>{
        (0,shared_base_ui_src/* openWindow */.xw)(resolver/* explorerResolver.addressLink */.Nb.addressLink(payload.chainId, payload.contractAddress));
    }, [
        payload
    ]);
    const [sourceType, setSourceType] = (0,react.useState)('');
    (0,react.useEffect)(()=>{
        retryAvailability();
    }, [
        account
    ]);
    const rpNftImg = new URL(/* asset import */ __webpack_require__(84183), __webpack_require__.b).toString();
    // #region on share
    const postLink = (0,usePostInfo/* usePostLink */.V)();
    const networkType = (0,entry_web3/* useNetworkType */.bL)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const shareText = (0,react.useMemo)(()=>{
        const isOnTwitter = (0,twitter_com_base/* isTwitter */.L)(social_network/* activatedSocialNetworkUI */.LM);
        const isOnFacebook = (0,facebook_com_base/* isFacebook */.D)(social_network/* activatedSocialNetworkUI */.LM);
        const options = {
            sender: payload.senderName,
            payload: postLink.toString(),
            network: resolver/* networkResolver.networkName */.LJ.networkName(networkType) || '',
            account_promote: t.account_promote({
                context: isOnTwitter ? 'twitter' : isOnFacebook ? 'facebook' : 'default'
            })
        };
        if (availability?.isClaimed) {
            return t.nft_share_claimed_message(options);
        }
        return t.nft_share_foreshow_message(options);
    }, [
        availability?.isClaimed,
        t
    ]);
    const onShare = (0,react.useCallback)(()=>{
        if (shareText) social_network/* activatedSocialNetworkUI.utils.share */.LM.utils.share?.(shareText);
    }, [
        shareText
    ]);
    // #endregion
    if (availabilityError) return /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
        className: classes.root,
        children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(Card/* default */.Z, {
            className: classnames_default()(classes.card, classes.errorCard),
            component: "article",
            elevation: 0,
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsx)("img", {
                    className: classes.errImage,
                    src: rpNftImg
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    className: classes.whiteText,
                    variant: "h5",
                    children: i18n('loading_failed')
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                    onClick: retryAvailability,
                    className: classnames_default()(classes.errorButton, classes.whiteText),
                    variant: "outlined",
                    children: i18n('try_again')
                })
            ]
        })
    });
    if (!availability || loading) return /*#__PURE__*/ (0,jsx_runtime.jsxs)(Card/* default */.Z, {
        className: classes.loadingBox,
        component: "article",
        elevation: 0,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Skeleton/* default */.Z, {
                animation: "wave",
                variant: "rectangular",
                width: "30%",
                height: 18,
                style: {
                    marginTop: 16
                }
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Skeleton/* default */.Z, {
                animation: "wave",
                variant: "rectangular",
                width: "40%",
                height: 18,
                style: {
                    marginTop: 24
                }
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Skeleton/* default */.Z, {
                animation: "wave",
                variant: "rectangular",
                width: "70%",
                height: 18,
                style: {
                    marginTop: 24
                }
            })
        ]
    });
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
        className: classes.root,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)(Card/* default */.Z, {
                className: classes.card,
                component: "article",
                elevation: 0,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(CardHeader/* default */.Z, {
                        className: classnames_default()(classes.title, availability.isEnd ? classes.hide : '', classes.whiteText),
                        title: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.ellipsis,
                            children: payload.message
                        }),
                        subheader: /*#__PURE__*/ (0,jsx_runtime.jsxs)("span", {
                            className: classnames_default()(classes.link, classes.whiteText),
                            onClick: openAddressLinkOnExplorer,
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                    variant: "body2",
                                    children: payload.contractName
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Launch/* default */.Z, {
                                    fontSize: "small",
                                    className: classes.dimWhiteText
                                })
                            ]
                        })
                    }),
                    availability.isClaimed ? /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                        className: classes.tokenWrapper,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* NFTCardStyledAssetPlayer */.yC, {
                                chainId: payload.chainId,
                                contractAddress: payload.contractAddress,
                                tokenId: availability.claimed_id,
                                setSourceType: setSourceType,
                                classes: {
                                    iframe: classnames_default()(classes.assetPlayerIframe, sourceType === 'video' ? classes.assetPlayerVideoIframe : ''),
                                    imgWrapper: classes.imgWrapper,
                                    loadingFailImage: classes.loadingFailImage
                                },
                                fallbackImage: new URL(/* asset import */ __webpack_require__(59068), __webpack_require__.b)
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                                className: classes.claimedText,
                                children: [
                                    "You got 1 ",
                                    payload.contractName
                                ]
                            })
                        ]
                    }) : /*#__PURE__*/ (0,jsx_runtime.jsx)(CardMedia/* default */.Z, {
                        className: classes.image,
                        component: "div",
                        image: rpNftImg,
                        children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                            className: classes.remain,
                            children: [
                                availability.claimedAmount,
                                "/",
                                availability.totalAmount,
                                " ",
                                i18n('collectibles_name')
                            ]
                        })
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(CardContent/* default */.Z, {
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            variant: "body1",
                            className: classes.whiteText,
                            children: t.nft_tip()
                        })
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                        className: classes.footer,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Link/* default */.Z, {
                                href: "https://mask.io/",
                                target: "_blank",
                                rel: "noopener noreferrer",
                                className: classes.whiteText,
                                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                    variant: "body1",
                                    children: "Mask.io"
                                })
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                                variant: "body1",
                                children: [
                                    "From: @",
                                    payload.senderName
                                ]
                            })
                        ]
                    })
                ]
            }),
            availability.isEnd ? /*#__PURE__*/ (0,jsx_runtime.jsxs)(Card/* default */.Z, {
                className: classes.coverCard,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(CardHeader/* default */.Z, {
                        className: classnames_default()(classes.title, classes.dim, classes.dimWhiteText),
                        title: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.ellipsis,
                            children: payload.message
                        }),
                        subheader: /*#__PURE__*/ (0,jsx_runtime.jsxs)("span", {
                            className: classnames_default()(classes.link, classes.dimWhiteText),
                            onClick: openAddressLinkOnExplorer,
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                    variant: "body2",
                                    children: payload.contractName
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Launch/* default */.Z, {
                                    fontSize: "small",
                                    className: classes.dimWhiteText
                                })
                            ]
                        })
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                        className: classnames_default()(classes.badge, classes.whiteText),
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            variant: "body2",
                            className: classes.badgeText,
                            children: availability.expired ? t.expired() : t.completed()
                        })
                    })
                ]
            }) : availability.isClaimedAll || availability.isCompleted ? null : /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                className: classes.buttonWrapper,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Box/* default */.Z, {
                        sx: {
                            flex: 1,
                            padding: 1.5
                        },
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                            startIcon: /*#__PURE__*/ (0,jsx_runtime.jsx)(shared/* SharedIcon */.r, {
                                style: {
                                    fontSize: 18
                                }
                            }),
                            className: classes.button,
                            fullWidth: true,
                            onClick: onShare,
                            variant: "contained",
                            children: i18n('share')
                        })
                    }),
                    availability.isClaimed ? null : /*#__PURE__*/ (0,jsx_runtime.jsx)(Box/* default */.Z, {
                        sx: {
                            flex: 1,
                            padding: 1.5
                        },
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(ChainBoundary/* ChainBoundary */.s, {
                            expectedPluginID: base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM,
                            expectedChainId: payload.chainId,
                            renderInTimeline: true,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(WalletConnectedBoundary/* WalletConnectedBoundary */.T, {
                                startIcon: /*#__PURE__*/ (0,jsx_runtime.jsx)(connect/* PluginWalletConnectIcon */.Q, {
                                    style: {
                                        fontSize: 18
                                    }
                                }),
                                classes: {
                                    connectWallet: classes.button,
                                    unlockMetaMask: classes.button,
                                    gasFeeButton: classes.button
                                },
                                renderInTimeline: true,
                                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                                    variant: "contained",
                                    loading: isClaiming,
                                    disabled: isClaiming,
                                    onClick: claim,
                                    className: classes.button,
                                    fullWidth: true,
                                    children: isClaiming ? t.claiming() : t.claim()
                                })
                            })
                        })
                    })
                ]
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/RedPacketNftInPost.tsx




function RedPacketNftInPost({ payload  }) {
    (0,react.useEffect)(()=>{
        RedPacket_messages/* RedPacketRPC.updateRedPacketNft */.T.updateRedPacketNft({
            id: payload.txid,
            type: 'red-packet-nft',
            password: payload.privateKey,
            contract_version: payload.contractVersion
        });
    }, [
        payload
    ]);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(RedPacketNft, {
        payload: payload
    });
}

// EXTERNAL MODULE: ../icons/general/NFTRedPacket.tsx
var NFTRedPacket = __webpack_require__(97986);
// EXTERNAL MODULE: ../icons/general/RedPacket.tsx
var general_RedPacket = __webpack_require__(42829);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/index.tsx















function Render(props) {
    (0,entry_content_script/* usePluginWrapper */.fI)(true, {
        name: props.name
    });
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
        children: props.children
    });
}
const containerStyle = {
    display: 'flex',
    alignItems: 'center'
};
const badgeSvgIconSize = {
    width: 16,
    height: 16
};
const sns = {
    ...base/* base */.u,
    init (signal) {},
    DecryptedInspector (props) {
        if ((0,helpers/* RedPacketMetadataReader */.Qc)(props.message.meta).ok) return /*#__PURE__*/ (0,jsx_runtime.jsx)(Render, {
            name: "Lucky Drop",
            children: (0,helpers/* renderWithRedPacketMetadata */.vP)(props.message.meta, (r)=>/*#__PURE__*/ (0,jsx_runtime.jsx)(RedPacketInPost, {
                    payload: r
                })
            )
        });
        if ((0,helpers/* RedPacketNftMetadataReader */.st)(props.message.meta).ok) return /*#__PURE__*/ (0,jsx_runtime.jsx)(Render, {
            name: "NFT Lucky Drop",
            children: (0,helpers/* renderWithRedPacketNftMetadata */.Ay)(props.message.meta, (r)=>/*#__PURE__*/ (0,jsx_runtime.jsx)(RedPacketNftInPost, {
                    payload: r
                })
            )
        });
        return null;
    },
    CompositionDialogMetadataBadgeRender: new Map([
        [
            constants/* RedPacketMetaKey */.Vr,
            (_payload)=>{
                return {
                    text: /*#__PURE__*/ (0,jsx_runtime.jsx)(ERC20RedpacketBadge, {
                        payload: _payload
                    })
                };
            }, 
        ],
        [
            constants/* RedPacketNftMetaKey */.HA,
            (_payload)=>{
                const payload = _payload;
                return {
                    text: /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                        style: containerStyle,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTRedPacket/* NFTRedPacketIcon */.G, {
                                style: badgeSvgIconSize
                            }),
                            payload.message ? payload.message : 'An NFT Lucky Drop'
                        ]
                    })
                };
            }, 
        ], 
    ]),
    CompositionDialogEntry: {
        dialog: RedPacketDialog,
        label: /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsx)(general_RedPacket/* RedPacketIcon */.t, {
                    style: badgeSvgIconSize
                }),
                "Lucky Drop"
            ]
        })
    },
    ApplicationEntries: [
        (()=>{
            const icon = /*#__PURE__*/ (0,jsx_runtime.jsx)(general_RedPacket/* RedPacketIcon */.t, {});
            const name = /*#__PURE__*/ (0,jsx_runtime.jsx)(Trans/* Trans */.c, {
                ns: entry_content_script/* PluginId.RedPacket */.je.RedPacket,
                i18nKey: "name"
            });
            const recommendFeature = {
                description: /*#__PURE__*/ (0,jsx_runtime.jsx)(Trans/* Trans */.c, {
                    ns: entry_content_script/* PluginId.RedPacket */.je.RedPacket,
                    i18nKey: "recommend_feature_description"
                }),
                backgroundGradient: 'linear-gradient(180.54deg, #FF9A9E 0.71%, #FECFEF 98.79%, #FECFEF 99.78%)'
            };
            return {
                ApplicationEntryID: base/* base.ID */.u.ID,
                RenderEntryComponent (EntryComponentProps) {
                    const clickHandler = ()=>shared_base_src/* CrossIsolationMessages.events.requestComposition.sendToLocal */.WF.events.requestComposition.sendToLocal({
                            reason: 'timeline',
                            open: true,
                            options: {
                                startupPlugin: base/* base.ID */.u.ID,
                                isOpenFromApplicationBoard: true
                            }
                        })
                    ;
                    return /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* ApplicationEntry */.Tv, {
                        title: name,
                        recommendFeature: recommendFeature,
                        ...EntryComponentProps,
                        icon: icon,
                        onClick: EntryComponentProps.onClick ? ()=>EntryComponentProps.onClick?.(clickHandler)
                         : clickHandler
                    });
                },
                appBoardSortingDefaultPriority: 1,
                marketListSortingPriority: 1,
                icon,
                description: /*#__PURE__*/ (0,jsx_runtime.jsx)(Trans/* Trans */.c, {
                    ns: entry_content_script/* PluginId.RedPacket */.je.RedPacket,
                    i18nKey: "description"
                }),
                name,
                tutorialLink: 'https://realmasknetwork.notion.site/0a71fd421aae4563bd07caa3e2129e5b',
                category: 'dapp',
                recommendFeature
            };
        })(), 
    ],
    wrapperProps: {
        icon: /*#__PURE__*/ (0,jsx_runtime.jsx)(general_RedPacket/* RedPacketIcon */.t, {
            style: {
                width: 24,
                height: 24,
                filter: 'drop-shadow(0px 6px 12px rgba(240, 51, 51, 0.2))'
            }
        }),
        backgroundGradient: 'linear-gradient(180deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.8) 100%), linear-gradient(90deg, rgba(28, 104, 243, 0.2) 0%, rgba(249, 55, 55, 0.2) 100%), #FFFFFF'
    }
};
function ERC20RedpacketBadge(props) {
    const { payload  } = props;
    const { value: fetchedToken  } = (0,entry_web3/* useFungibleToken */.cf)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM, payload.token?.address ?? payload.token?.address);
    const chainId = resolver/* networkResolver.networkChainId */.LJ.networkChainId(payload.network ?? '') ?? types/* ChainId.Mainnet */.a_.Mainnet;
    const nativeCurrency = resolver/* chainResolver.nativeCurrency */.VU.nativeCurrency(chainId);
    const tokenDetailed = payload.token?.schema === types/* SchemaType.Native */.XQ.Native ? nativeCurrency : payload.token ?? fetchedToken;
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
        style: containerStyle,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(general_RedPacket/* RedPacketIcon */.t, {
                style: badgeSvgIconSize
            }),
            " A Lucky Drop with",
            ' ',
            (0,base_src/* formatBalance */.az)(payload.total, tokenDetailed?.decimals ?? 0),
            " $",
            (tokenDetailed?.symbol ?? tokenDetailed?.name) ?? 'Token',
            " from ",
            payload.sender.name
        ]
    });
}
/* harmony default export */ const SNSAdaptor = (sns);


/***/ }),

/***/ 93131:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "T": () => (/* binding */ RedPacketRPC)
/* harmony export */ });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(70176);
/* harmony import */ var _masknet_plugin_infra__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(70226);


if (false) {}
const RedPacketMessage = (0,_masknet_plugin_infra__WEBPACK_IMPORTED_MODULE_1__/* .createPluginMessage */ .I4)(_constants__WEBPACK_IMPORTED_MODULE_0__/* .RedPacketPluginID */ .jY);
const RedPacketRPC = (0,_masknet_plugin_infra__WEBPACK_IMPORTED_MODULE_1__/* .createPluginRPC */ .V8)(_constants__WEBPACK_IMPORTED_MODULE_0__/* .RedPacketPluginID */ .jY, ()=>Promise.all(/* import() */[__webpack_require__.e(2698), __webpack_require__.e(9519)]).then(__webpack_require__.bind(__webpack_require__, 29519))
, RedPacketMessage.rpc);


/***/ }),

/***/ 10737:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/7f380c93e442babc12dc.png";

/***/ }),

/***/ 20317:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/deb30db7dbae8361bbaa.png";

/***/ }),

/***/ 39590:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/6852c4bfca203f76f5b5.png";

/***/ }),

/***/ 91984:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/d2d363c3ee56c9636fd7.png";

/***/ }),

/***/ 59068:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/5fe616ea9a76e241efbc.png";

/***/ }),

/***/ 58794:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/bee70e3f0a13f13d3bec.png";

/***/ }),

/***/ 74094:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/583131766579a5f647eb.png";

/***/ }),

/***/ 72251:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/aac3b75eedbc4c4fd187.png";

/***/ }),

/***/ 84183:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/5edbd804428d4d29d64f.png";

/***/ }),

/***/ 33265:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/b68c952c4aa8ca96564a.png";

/***/ })

}]);