"use strict";
(globalThis["webpackChunk_masknet_extension"] = globalThis["webpackChunk_masknet_extension"] || []).push([[5689],{

/***/ 44215:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "T": () => (/* binding */ CopyIcon)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(71999);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(15679);


const CopyIcon = (0,_utils__WEBPACK_IMPORTED_MODULE_1__/* .createIcon */ .I)('copy', /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("g", {
    children: [
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M16.115 8h-6.23C9.12 8 8.5 8.62 8.5 9.385v6.23C8.5 16.38 9.12 17 9.885 17h6.23c.765 0 1.385-.62 1.385-1.385v-6.23C17.5 8.62 16.88 8 16.115 8z",
            fill: "none",
            strokeWidth: "1.25",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            d: "M5.577 12h-.692A1.385 1.385 0 013.5 10.615v-6.23A1.385 1.385 0 014.885 3h6.23A1.385 1.385 0 0112.5 4.385v.692",
            fill: "none",
            strokeWidth: "1.25",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        })
    ]
}), '0 0 20 20');


/***/ }),

/***/ 41622:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "p": () => (/* binding */ DeleteIcon)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(71999);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(15679);


const DeleteIcon = (0,_utils__WEBPACK_IMPORTED_MODULE_1__/* .createIcon */ .I)('DeleteIcon', /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("g", {
    fill: "none",
    children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
        d: "M2 4h12M5.333 4V2.667a1.333 1.333 0 011.334-1.334h2.666a1.334 1.334 0 011.334 1.334V4m2 0v9.333a1.334 1.334 0 01-1.334 1.334H4.667a1.333 1.333 0 01-1.334-1.334V4h9.334zM6.667 7.333v4M9.333 7.333v4",
        strokeWidth: "1.25",
        strokeLinecap: "round",
        strokeLinejoin: "round"
    })
}), '0 0 16 16');


/***/ }),

/***/ 59489:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "s": () => (/* binding */ MasksIcon)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(71999);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(15679);


const MasksIcon = (0,_utils__WEBPACK_IMPORTED_MODULE_1__/* .createIcon */ .I)('MasksIcon', /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("g", {
    children: [
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("rect", {
            x: "3.594",
            y: "13.04",
            width: "1.5",
            height: "7.5",
            rx: ".75",
            transform: "rotate(-30 3.594 13.04)",
            fill: "#1C68F3"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M13.635 12.944c-.97.31-2.018.146-2.97-.445a.434.434 0 00-.37-.045.446.446 0 00-.282.263c-.427 1.021-1.196 1.765-2.166 2.075-1.55.495-3.312-.245-4.392-1.843a5.502 5.502 0 01-.684-1.409 6.763 6.763 0 01-.187-.744l-.165-.934.774.546a.574.574 0 00.505.084c.046-.015.09-.04.132-.063l.196-.215.013-.025.025-.048a4.253 4.253 0 012.259-1.718 4.244 4.244 0 012.687.037 4.244 4.244 0 012.168-1.587 4.274 4.274 0 012.837.091l.049.025c.036.02.082.035.128.051l.012.006c.1.03.211.024.322-.011a.56.56 0 00.363-.36l.305-.89.406.856c.117.238.203.475.28.715.161.507.246 1.03.258 1.544.065 1.923-.952 3.55-2.503 4.044zm-5.973-.585c-.129.042-.264.065-.402.078-.758.049-1.462-.47-1.786-.752.233-.258.698-.711 1.28-.897.138-.044.264-.064.402-.078.758-.048 1.462.47 1.786.752-.242.261-.707.715-1.28.897zm3.164-1.498c.34.075.991.172 1.563-.01.139-.045.262-.104.373-.17.637-.397.92-1.23 1.02-1.648-.339-.075-.99-.172-1.563.01a1.802 1.802 0 00-.373.17c-.636.397-.92 1.23-1.02 1.648z",
            fill: "url(#paint0_linear)"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("g", {
            filter: "url(#filter0_b)",
            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
                fillRule: "evenodd",
                clipRule: "evenodd",
                d: "M14.03 8.621l.162-.27 7.659 2.527-.033.314a9.007 9.007 0 01-.434 2.04c-.531 1.594-1.443 2.96-2.56 3.85-.835.662-1.736 1.01-2.593 1.01-.336 0-.661-.044-.976-.153-1.128-.38-1.963-1.377-2.343-2.82-.369-1.378-.282-3.016.25-4.61.217-.673.51-1.302.867-1.888zm.976 4.48c.163.076.336.109.532.109.173 0 .368-.033.575-.087.221-.074.4-.166.477-.207.026-.013.04-.02.043-.02l.217-.13-.12-.229c-.01-.032-.357-.694-1.04-.998-.684-.303-1.41-.108-1.443-.097l-.25.065.055.25c.003.002.01.025.02.063.028.093.082.278.175.479.195.39.455.672.759.803zm3.374 1.15c.086.022.173.033.27.033.261 0 .543-.076.814-.217.282-.141.467-.304.478-.315l.195-.173-.152-.206c-.022-.033-.488-.63-1.215-.792-.673-.15-1.299.117-1.414.166-.01.004-.015.007-.018.007l-.228.109.098.239c0 .01.098.249.282.498.26.348.564.575.89.651z",
                fill: "#1C68F3",
                fillOpacity: ".1"
            })
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("defs", {
            children: [
                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("linearGradient", {
                    id: "paint0_linear",
                    x1: "2.598",
                    y1: "10.871",
                    x2: "15.806",
                    y2: "6.618",
                    gradientUnits: "userSpaceOnUse",
                    children: [
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("stop", {
                            stopColor: "#1C68F3"
                        }),
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("stop", {
                            offset: "1",
                            stopColor: "#6CB8FF"
                        })
                    ]
                }),
                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("filter", {
                    id: "filter0_b",
                    x: "8.688",
                    y: "4.35",
                    width: "17.163",
                    height: "17.741",
                    filterUnits: "userSpaceOnUse",
                    colorInterpolationFilters: "sRGB",
                    children: [
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("feFlood", {
                            floodOpacity: "0",
                            result: "BackgroundImageFix"
                        }),
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("feGaussianBlur", {
                            in: "BackgroundImage",
                            stdDeviation: "2"
                        }),
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("feComposite", {
                            in2: "SourceAlpha",
                            operator: "in",
                            result: "effect1_backgroundBlur"
                        }),
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("feBlend", {
                            in: "SourceGraphic",
                            in2: "effect1_backgroundBlur",
                            result: "shape"
                        })
                    ]
                })
            ]
        })
    ]
}), '0 0 24 24');


/***/ }),

/***/ 30246:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "_": () => (/* binding */ hasNativeAPI),
  "Nz": () => (/* binding */ nativeAPI)
});

// UNUSED EXPORTS: sharedNativeAPI

// EXTERNAL MODULE: ../../node_modules/.pnpm/async-call-rpc@6.0.2/node_modules/async-call-rpc/out/full.mjs
var full = __webpack_require__(19245);
;// CONCATENATED MODULE: ./shared/native-rpc/iOS.channel.ts
// cspell:disable-next-line
const key = 'maskbookjsonrpc';
class iOSWebkitChannel {
    on(cb) {
        this.listener.add(cb);
        return ()=>void this.listener.delete(cb)
        ;
    }
    send(data) {
        globalThis.webkit.messageHandlers[key].postMessage(data);
    }
    constructor(){
        this.listener = new Set();
        document.addEventListener(key, (e)=>{
            const detail = e.detail;
            for (const f of this.listener){
                try {
                    f(detail);
                } catch  {}
            }
        });
    }
}

;// CONCATENATED MODULE: ./shared/native-rpc/index.ts



// This module won't be used in Web. Let it not effecting HMR.
if (false) {}
const hasNativeAPI = "app" === 'app';
let nativeAPI = undefined;
let sharedNativeAPI = (/* unused pure expression or super */ null && (undefined));
if (true) {
    const options = {
        key: 'native',
        parameterStructures: 'by-name'
    };
    if (true) {
        const api = sharedNativeAPI = (0,full/* AsyncCall */.LE)(/**
             * Typescript will not add the file to the project dependency tree
             * but webpack will do constant folding
             */ // @ts-ignore
        // eslint-disable-next-line no-useless-concat
        Promise.all(/* import() */[__webpack_require__.e(5449), __webpack_require__.e(8699)]).then(__webpack_require__.bind(__webpack_require__, 98699)).then((x)=>x.MaskNetworkAPI
        ), {
            ...options,
            channel: new iOSWebkitChannel()
        });
        nativeAPI = {
            type: 'iOS',
            api
        };
    } else {}
}


/***/ }),

/***/ 26843:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EP": () => (/* binding */ useNextIDConnectStatus),
/* harmony export */   "OB": () => (/* binding */ useNextIDBoundByPlatform),
/* harmony export */   "s2": () => (/* binding */ NextIDVerificationStatus)
/* harmony export */ });
/* unused harmony export usePersonaBoundPlatform */
/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(64452);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86248);
/* harmony import */ var _social_network__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3747);
/* harmony import */ var _usePersonaConnectStatus__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57309);
/* harmony import */ var _settings_settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(80917);
/* harmony import */ var json_stable_stringify__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(92304);
/* harmony import */ var json_stable_stringify__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(json_stable_stringify__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _InjectedComponents_SetupGuide_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(19369);
/* harmony import */ var _useActivatedUI__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(68043);
/* harmony import */ var _masknet_shared_base_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(53242);
/* harmony import */ var _masknet_web3_providers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(92820);
/* harmony import */ var _extension_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(5027);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(6955);












const usePersonaBoundPlatform = (personaPublicKey)=>{
    return useAsyncRetry(()=>{
        return NextIDProof.queryExistedBindingByPersona(personaPublicKey);
    }, [
        personaPublicKey
    ]);
};
let isOpenedVerifyDialog = false;
let isOpenedFromButton = false;
const verifyPersona = (personaIdentifier, username)=>async ()=>{
        if (!personaIdentifier) return;
        _settings_settings__WEBPACK_IMPORTED_MODULE_3__/* .currentSetupGuideStatus */ .AI[_social_network__WEBPACK_IMPORTED_MODULE_1__/* .activatedSocialNetworkUI.networkIdentifier */ .LM.networkIdentifier].value = json_stable_stringify__WEBPACK_IMPORTED_MODULE_4___default()({
            status: _InjectedComponents_SetupGuide_types__WEBPACK_IMPORTED_MODULE_5__/* .SetupGuideStep.VerifyOnNextID */ .s.VerifyOnNextID,
            persona: personaIdentifier.toText(),
            username
        });
    }
;
const useNextIDBoundByPlatform = (platform, identity)=>{
    const res = (0,react_use__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(()=>{
        return _masknet_web3_providers__WEBPACK_IMPORTED_MODULE_8__/* .NextIDProof.queryExistedBindingByPlatform */ .q7.queryExistedBindingByPlatform(platform, identity);
    }, [
        platform,
        identity
    ]);
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>_utils__WEBPACK_IMPORTED_MODULE_10__/* .MaskMessages.events.ownProofChanged.on */ .ql.events.ownProofChanged.on(res.retry)
    , [
        res.retry
    ]);
    return res;
};
var NextIDVerificationStatus;
(function(NextIDVerificationStatus) {
    NextIDVerificationStatus["WaitingLocalConnect"] = 'need-local-connect';
    NextIDVerificationStatus["WaitingVerify"] = 'waiting-verify';
    NextIDVerificationStatus["Verified"] = "Verified";
    NextIDVerificationStatus["HideVerifyDialog"] = 'hide-verify-dialog';
    NextIDVerificationStatus["Other"] = "Other";
})(NextIDVerificationStatus || (NextIDVerificationStatus = {}));
function useNextIDConnectStatus() {
    const ui = _social_network__WEBPACK_IMPORTED_MODULE_1__/* .activatedSocialNetworkUI */ .LM;
    const [enableNextID] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(ui.configuration.nextIDConfig?.enable);
    const personaConnectStatus = (0,_usePersonaConnectStatus__WEBPACK_IMPORTED_MODULE_2__/* .usePersonaConnectStatus */ .x)();
    const lastStateRef = _settings_settings__WEBPACK_IMPORTED_MODULE_3__/* .currentSetupGuideStatus */ .AI[ui.networkIdentifier];
    const lastState_ = (0,_masknet_shared_base_ui__WEBPACK_IMPORTED_MODULE_7__/* .useValueRef */ .E)(lastStateRef);
    const lastState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{
        try {
            return JSON.parse(lastState_);
        } catch  {
            return {};
        }
    }, [
        lastState_
    ]);
    const lastRecognized = (0,_useActivatedUI__WEBPACK_IMPORTED_MODULE_6__/* .useLastRecognizedIdentity */ .FB)();
    const [username] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(lastState.username || (lastRecognized.identifier.isUnknown ? '' : lastRecognized.identifier.userId));
    const { value: VerificationStatus = NextIDVerificationStatus.Other , retry  } = (0,react_use__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(async ()=>{
        // Whether in connect to {platform} process
        if (lastState.status === _InjectedComponents_SetupGuide_types__WEBPACK_IMPORTED_MODULE_5__/* .SetupGuideStep.FindUsername */ .s.FindUsername) return NextIDVerificationStatus.WaitingLocalConnect;
        // Whether it has been opened in a lifecycle
        if (isOpenedVerifyDialog && !isOpenedFromButton) return NextIDVerificationStatus.HideVerifyDialog;
        // Whether current platform support next id
        if (!enableNextID || !username || !personaConnectStatus.connected) return NextIDVerificationStatus.WaitingLocalConnect;
        const { currentConnectedPersona  } = personaConnectStatus;
        const currentPersonaIdentity = await _extension_service__WEBPACK_IMPORTED_MODULE_9__/* ["default"].Settings.getCurrentPersonaIdentifier */ .ZP.Settings.getCurrentPersonaIdentifier();
        if (currentPersonaIdentity?.toText() !== currentConnectedPersona?.identifier.toText()) return NextIDVerificationStatus.WaitingLocalConnect;
        if (!currentConnectedPersona?.publicHexKey) return NextIDVerificationStatus.WaitingLocalConnect;
        // Whether used 'Don't show me again
        if (_settings_settings__WEBPACK_IMPORTED_MODULE_3__/* .dismissVerifyNextID */ .gG[ui.networkIdentifier].value[`${username}_${currentConnectedPersona.identifier.toText()}`] && !isOpenedFromButton) return NextIDVerificationStatus.HideVerifyDialog;
        // Whether verified in next id server
        const platform = ui.configuration.nextIDConfig?.platform;
        if (!platform) return NextIDVerificationStatus.Other;
        const isBound = await _masknet_web3_providers__WEBPACK_IMPORTED_MODULE_8__/* .NextIDProof.queryIsBound */ .q7.queryIsBound(currentConnectedPersona.publicHexKey, platform, username);
        if (isBound) return NextIDVerificationStatus.Verified;
        if (isOpenedFromButton) {
            verifyPersona(personaConnectStatus.currentConnectedPersona?.identifier)();
        }
        isOpenedVerifyDialog = true;
        isOpenedFromButton = false;
        return NextIDVerificationStatus.WaitingVerify;
    }, [
        username,
        enableNextID,
        isOpenedVerifyDialog,
        _settings_settings__WEBPACK_IMPORTED_MODULE_3__/* .currentPersonaIdentifier.value */ .cn.value
    ]);
    return {
        isVerified: VerificationStatus === NextIDVerificationStatus.Verified,
        status: VerificationStatus,
        reset: ()=>{
            isOpenedVerifyDialog = false;
            isOpenedFromButton = true;
            retry();
        },
        action: VerificationStatus === NextIDVerificationStatus.WaitingVerify ? verifyPersona(personaConnectStatus.currentConnectedPersona?.identifier, lastState.username) : null
    };
}


/***/ }),

/***/ 35689:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ SNSAdaptor)
});

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.0.0/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(71999);
// EXTERNAL MODULE: ../shared-base/src/index.ts + 1 modules
var src = __webpack_require__(78144);
// EXTERNAL MODULE: ./shared/index.ts
var shared = __webpack_require__(62481);
// EXTERNAL MODULE: ./src/plugins/NextID/base.ts + 7 modules
var base = __webpack_require__(75611);
// EXTERNAL MODULE: ../theme/src/entry.ts
var entry = __webpack_require__(30232);
// EXTERNAL MODULE: ../web3-providers/src/index.ts
var web3_providers_src = __webpack_require__(92820);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Button/Button.js
var Button = __webpack_require__(37731);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Stack/Stack.js
var Stack = __webpack_require__(867);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Skeleton/Skeleton.js + 2 modules
var Skeleton = __webpack_require__(35555);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Box/Box.js
var Box = __webpack_require__(85139);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Typography/Typography.js + 1 modules
var Typography = __webpack_require__(37253);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.0.0/node_modules/react/index.js
var react = __webpack_require__(86248);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useAsyncRetry.js
var useAsyncRetry = __webpack_require__(64452);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useAsync.js
var useAsync = __webpack_require__(73570);
// EXTERNAL MODULE: ./src/components/DataSource/useActivatedUI.ts
var useActivatedUI = __webpack_require__(68043);
// EXTERNAL MODULE: ./src/components/DataSource/useNextID.ts
var useNextID = __webpack_require__(26843);
// EXTERNAL MODULE: ./src/components/DataSource/usePersonaConnectStatus.ts
var usePersonaConnectStatus = __webpack_require__(57309);
// EXTERNAL MODULE: ./src/extension/service.ts
var service = __webpack_require__(5027);
// EXTERNAL MODULE: ./src/social-network/index.ts
var social_network = __webpack_require__(3747);
// EXTERNAL MODULE: ./src/plugins/NextID/constants.ts
var constants = __webpack_require__(6736);
// EXTERNAL MODULE: ./src/plugins/NextID/locales/index.ts + 1 modules
var locales = __webpack_require__(13573);
// EXTERNAL MODULE: ../web3-shared/evm/utils/address.ts
var utils_address = __webpack_require__(2239);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/DialogContent/DialogContent.js + 1 modules
var DialogContent = __webpack_require__(33347);
// EXTERNAL MODULE: ../icons/general/Masks.tsx
var Masks = __webpack_require__(59489);
// EXTERNAL MODULE: ./src/components/shared/WalletStatusBox.tsx
var WalletStatusBox = __webpack_require__(51257);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+lab@5.0.0-alpha.77_594218741661fc54915c073d63b4aa87/node_modules/@mui/lab/LoadingButton/LoadingButton.js + 1 modules
var LoadingButton = __webpack_require__(61098);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.6.1_15f9e73798f83ff073fea11061a4a4f7/node_modules/@mui/icons-material/Done.js
var Done = __webpack_require__(73377);
// EXTERNAL MODULE: ../shared/src/index.ts
var shared_src = __webpack_require__(2666);
// EXTERNAL MODULE: ../plugin-infra/src/entry-web3.ts
var entry_web3 = __webpack_require__(67071);
;// CONCATENATED MODULE: ./src/plugins/NextID/components/BindPanelUI.tsx












const useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        persona: {
            padding: theme.spacing(1.7),
            marginBottom: theme.spacing(2),
            backgroundColor: theme.palette.background.default,
            borderRadius: 8,
            alignItems: 'center'
        },
        iconContainer: {
            display: 'flex',
            alignItems: 'center',
            marginRight: '4px',
            width: 48,
            height: 48
        },
        name: {
            display: 'flex',
            alignItems: 'center',
            fontSize: 14,
            color: theme.palette.text.primary,
            fontWeight: 500
        },
        identifier: {
            fontSize: 12,
            color: theme.palette.text.primary,
            display: 'flex',
            alignItems: 'center',
            wordBreak: 'break-all'
        },
        subTitle: {
            fontSize: 18,
            lineHeight: '24px',
            fontWeight: 600,
            color: theme.palette.text.primary
        },
        deneText: {
            color: '#60DFAB'
        },
        done: {
            background: '#60DFAB !important',
            color: `${entry/* MaskColorVar.white */.ZN.white} !important`,
            opacity: '1 !important'
        },
        loadingIcon: {
            position: 'relative',
            right: -6
        },
        error: {
            marginTop: '14px',
            color: (0,entry/* getMaskColor */.nb)(theme).redMain,
            paddingLeft: theme.spacing(0.5),
            borderLeft: `solid 2px ${(0,entry/* getMaskColor */.nb)(theme).redMain}`
        }
    })
);
const SUPPORTED_PLUGINS = [
    entry_web3/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM
];
const BindPanelUI = /*#__PURE__*/ (0,react.memo)(({ onPersonaSign , onWalletSign , currentPersona , signature , isBound , title , onClose , open , isCurrentAccount  })=>{
    const t = (0,locales/* useI18N */.M)();
    const { classes  } = useStyles();
    const pluginId = (0,entry_web3/* useCurrentWeb3NetworkPluginID */.$f)();
    const isSupported = SUPPORTED_PLUGINS.includes(pluginId);
    const isWalletSigned = !!signature.wallet.value;
    const isPersonaSigned = !!signature.persona.value;
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_src/* InjectedDialog */.Fl, {
        open: open,
        title: title,
        onClose: onClose,
        children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(DialogContent/* default */.Z, {
            style: {
                padding: '24px'
            },
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsxs)(Stack/* default */.Z, {
                            alignItems: "center",
                            direction: "row",
                            justifyContent: "space-between",
                            mb: 1.25,
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                    className: classes.subTitle,
                                    children: t.wallet()
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                            variant: "body2",
                                            className: isWalletSigned ? classes.deneText : '',
                                            component: "span",
                                            children: "1"
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                                            variant: "body2",
                                            component: "span",
                                            children: [
                                                ' ',
                                                "/ 2",
                                                ' '
                                            ]
                                        })
                                    ]
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(WalletStatusBox/* WalletStatusBox */.C, {}),
                        isBound && /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.error,
                            children: t.bind_wallet_bound_error()
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Box/* default */.Z, {
                            mt: 3,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(LoadingButton/* default */.Z, {
                                fullWidth: true,
                                classes: {
                                    loadingIndicatorEnd: classes.loadingIcon
                                },
                                loadingPosition: "end",
                                disabled: !isCurrentAccount || isBound || !!isWalletSigned || !isSupported,
                                className: isWalletSigned ? classes.done : '',
                                loading: signature.wallet.loading,
                                variant: "contained",
                                onClick: onWalletSign,
                                endIcon: isWalletSigned ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Done/* default */.Z, {
                                    sx: {
                                        color: entry/* MaskColorVar.white */.ZN.white
                                    }
                                }) : null,
                                loadingIndicator: /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_src/* LoadingAnimation */.p6, {}),
                                children: isWalletSigned ? t.done() : t.wallet_sign()
                            })
                        })
                    ]
                }),
                !isSupported && /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    className: classes.error,
                    children: t.unsupported_network()
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                    mt: 3,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsxs)(Stack/* default */.Z, {
                            alignItems: "center",
                            direction: "row",
                            justifyContent: "space-between",
                            mb: 1.25,
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                    className: classes.subTitle,
                                    children: t.persona()
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                            variant: "body2",
                                            className: isPersonaSigned ? classes.deneText : '',
                                            component: "span",
                                            children: "2"
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                                            component: "span",
                                            variant: "body2",
                                            children: [
                                                ' ',
                                                "/ 2",
                                                ' '
                                            ]
                                        })
                                    ]
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsxs)(Stack/* default */.Z, {
                            direction: "row",
                            className: classes.persona,
                            mb: 3,
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                                    className: classes.iconContainer,
                                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Masks/* MasksIcon */.s, {
                                        style: {
                                            fontSize: '48px'
                                        }
                                    })
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                            className: classes.name,
                                            children: currentPersona?.nickname
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                            className: classes.identifier,
                                            children: (0,src/* formatPersonaFingerprint */.Nb)(currentPersona?.identifier.compressedPoint ?? '', 10)
                                        })
                                    ]
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Box/* default */.Z, {
                            mt: 3,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(LoadingButton/* default */.Z, {
                                fullWidth: true,
                                disabled: isBound || !!isPersonaSigned || !isSupported,
                                classes: {
                                    loadingIndicatorEnd: classes.loadingIcon
                                },
                                loadingPosition: "end",
                                className: isPersonaSigned ? classes.done : '',
                                loading: signature.persona.loading,
                                variant: "contained",
                                onClick: onPersonaSign,
                                endIcon: isPersonaSigned ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Done/* default */.Z, {
                                    sx: {
                                        color: entry/* MaskColorVar.white */.ZN.white
                                    }
                                }) : null,
                                loadingIndicator: /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_src/* LoadingAnimation */.p6, {}),
                                children: isPersonaSigned ? t.done() : t.persona_sign()
                            })
                        })
                    ]
                })
            ]
        })
    });
});

// EXTERNAL MODULE: ../../node_modules/.pnpm/@dimensiondev+kit@0.0.0-20220228054820-f2378be/node_modules/@dimensiondev/kit/esm/index.js + 1 modules
var esm = __webpack_require__(28807);
;// CONCATENATED MODULE: ./src/plugins/NextID/hooks/useBindPayload.ts



const useBindPayload = (action, address, currentIdentifier)=>{
    return (0,useAsyncRetry/* default */.Z)(()=>{
        if (!address) return Promise.resolve(undefined);
        if (!currentIdentifier || !address) return Promise.resolve(undefined);
        return web3_providers_src/* NextIDProof.createPersonaPayload */.q7.createPersonaPayload(currentIdentifier, action, address, src/* NextIDPlatform.Ethereum */.Vd.Ethereum);
    }, [
        currentIdentifier,
        address
    ]);
};

// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useAsyncFn.js
var useAsyncFn = __webpack_require__(30688);
;// CONCATENATED MODULE: ./src/plugins/NextID/hooks/usePersonaSign.ts


function usePersonaSign(message, currentIdentifier) {
    return (0,useAsyncFn/* default */.Z)(async ()=>{
        if (!message || !currentIdentifier) return;
        try {
            const result = await service/* default.Identity.signWithPersona */.ZP.Identity.signWithPersona({
                method: 'eth',
                message: message,
                identifier: currentIdentifier.toText()
            });
            return result;
        } catch  {
            return;
        }
    }, [
        message,
        currentIdentifier
    ]);
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useUpdateEffect.js + 1 modules
var useUpdateEffect = __webpack_require__(93618);
;// CONCATENATED MODULE: ./src/plugins/NextID/hooks/useWalletSign.ts




const useWalletSign = (message, address)=>{
    const t = (0,locales/* useI18N */.M)();
    const { showSnackbar  } = (0,entry/* useCustomSnackbar */.Ii)();
    const [state, fn] = (0,useAsyncFn/* default */.Z)(async (changed)=>{
        if (changed) return undefined;
        if (!address || !message) return;
        try {
            showSnackbar(t.notify_wallet_sign(), {
                processing: true,
                message: t.notify_wallet_sign_confirm()
            });
            const result = await service/* default.Ethereum.personalSign */.ZP.Ethereum.personalSign(message, address);
            return result;
        } catch  {
            showSnackbar(t.notify_wallet_sign(), {
                variant: 'error',
                message: t.notify_wallet_sign_cancel()
            });
            return;
        }
    }, [
        address,
        message,
        address
    ]);
    (0,useUpdateEffect/* default */.Z)(()=>{
        fn(true);
    }, [
        address
    ]);
    return [
        state,
        ()=>fn(false)
    ];
};

;// CONCATENATED MODULE: ./src/plugins/NextID/components/BindDialog.tsx















const BindDialog = /*#__PURE__*/ (0,react.memo)(({ open , onClose , persona , onBound , bounds  })=>{
    const account = (0,entry_web3/* useAccount */.mA)();
    const t = (0,locales/* useI18N */.M)();
    const { showSnackbar  } = (0,entry/* useCustomSnackbar */.Ii)();
    const currentIdentifier = persona.identifier;
    const isBound = !!bounds.find((x)=>(0,utils_address/* isSameAddress */.Wr)(x.identity, account)
    );
    const { value: message  } = useBindPayload(src/* NextIDAction.Create */.BU.Create, account, persona.publicHexKey);
    const [personaSignState, handlePersonaSign] = usePersonaSign(message?.signPayload, currentIdentifier);
    const [walletSignState, handleWalletSign] = useWalletSign(message?.signPayload, account);
    (0,useAsyncRetry/* default */.Z)(async ()=>{
        if (!personaSignState.value || !walletSignState.value || isBound || !message || !persona.publicHexKey) return;
        try {
            await web3_providers_src/* NextIDProof.bindProof */.q7.bindProof(message.uuid, persona.publicHexKey, src/* NextIDAction.Create */.BU.Create, src/* NextIDPlatform.Ethereum */.Vd.Ethereum, account, message.createdAt, {
                walletSignature: walletSignState.value,
                signature: personaSignState.value.signature.signature
            });
            showSnackbar(t.notify_wallet_sign_request_title(), {
                variant: 'success',
                message: t.notify_wallet_sign_request_success()
            });
            shared/* MaskMessages.events.ownProofChanged.sendToAll */.ql.events.ownProofChanged.sendToAll();
            await (0,esm/* delay */.gw)(2000);
            onBound();
            onClose();
        } catch  {
            showSnackbar(t.notify_wallet_sign_request_title(), {
                variant: 'error',
                message: t.notify_wallet_sign_request_failed()
            });
        }
    }, [
        walletSignState.value,
        personaSignState.value,
        isBound
    ]);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(BindPanelUI, {
        title: t.verify_wallet_dialog_title(),
        onClose: onClose,
        open: open,
        currentPersona: persona,
        onPersonaSign: handlePersonaSign,
        onWalletSign: handleWalletSign,
        isCurrentAccount: true,
        signature: {
            persona: {
                value: personaSignState.value?.signature.signature,
                loading: personaSignState.loading
            },
            wallet: walletSignState
        },
        isBound: isBound
    });
});

// EXTERNAL MODULE: ../web3-shared/evm/types/index.ts
var types = __webpack_require__(65506);
// EXTERNAL MODULE: ../web3-shared/evm/utils/formatter.ts
var formatter = __webpack_require__(66394);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Link/Link.js + 1 modules
var Link = __webpack_require__(93775);
// EXTERNAL MODULE: ../icons/general/Delete.tsx
var Delete = __webpack_require__(41622);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/styles/useTheme.js
var useTheme = __webpack_require__(927);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Tooltip/Tooltip.js + 1 modules
var Tooltip = __webpack_require__(26405);
// EXTERNAL MODULE: ../icons/general/Copy.tsx
var Copy = __webpack_require__(44215);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useCopyToClipboard.js + 1 modules
var useCopyToClipboard = __webpack_require__(90869);
;// CONCATENATED MODULE: ./src/plugins/NextID/components/CopyIconButton/index.tsx







const CopyIconButton = /*#__PURE__*/ (0,react.memo)(({ text , ...props })=>{
    const t = (0,locales/* useI18N */.M)();
    const theme = (0,useTheme/* default */.Z)();
    const [, copyToClipboard] = (0,useCopyToClipboard/* default */.Z)();
    const [open, setOpen] = (0,react.useState)(false);
    const onCopy = (0,shared_src/* useSnackbarCallback */.iD)({
        executor: async ()=>copyToClipboard(text)
        ,
        deps: [],
        successText: t.copy_success_of_wallet_address()
    });
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(Tooltip/* default */.Z, {
        title: /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
            style: {
                color: theme.palette.text.primary
            },
            children: t.copied()
        }),
        open: open,
        onMouseLeave: ()=>setOpen(false)
        ,
        disableFocusListener: true,
        disableTouchListener: true,
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Copy/* CopyIcon */.T, {
            onClick: onCopy,
            className: props.className
        })
    });
});

// EXTERNAL MODULE: ../../node_modules/.pnpm/react-feather@2.0.9_react@18.0.0/node_modules/react-feather/dist/icons/external-link.js
var external_link = __webpack_require__(78216);
// EXTERNAL MODULE: ../icons/general/LinkOut.tsx
var LinkOut = __webpack_require__(43265);
// EXTERNAL MODULE: ../icons/utils/index.tsx
var utils = __webpack_require__(15679);
;// CONCATENATED MODULE: ../icons/general/Drop2.tsx


const Drop2Icon = (0,utils/* createIcon */.I)('Drop2Icon', /*#__PURE__*/ (0,jsx_runtime.jsx)("g", {
    children: /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
        d: "M11.4343 15.4343L6.36568 10.3657C5.86171 9.86171 6.21864 9 6.93136 9H17.0686C17.7813 9 18.1383 9.86171 17.6343 10.3657L12.5657 15.4343C12.2533 15.7467 11.7467 15.7467 11.4343 15.4343Z",
        fill: "currentColor"
    })
}), '0 0 20 24');

// EXTERNAL MODULE: ../icons/general/Success.tsx
var Success = __webpack_require__(3328);
// EXTERNAL MODULE: ../plugin-infra/src/entry-dom.ts + 1 modules
var entry_dom = __webpack_require__(3267);
// EXTERNAL MODULE: ../shared-base-ui/src/index.ts
var shared_base_ui_src = __webpack_require__(53242);
// EXTERNAL MODULE: ../web3-shared/evm/hooks/useERC721TokenDetailed.ts
var useERC721TokenDetailed = __webpack_require__(53465);
// EXTERNAL MODULE: ../web3-shared/evm/hooks/useChainId.ts
var useChainId = __webpack_require__(31174);
// EXTERNAL MODULE: ../web3-shared/evm/hooks/useAccount.ts
var useAccount = __webpack_require__(10372);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useBoolean.js
var useBoolean = __webpack_require__(68256);
// EXTERNAL MODULE: ./shared/native-rpc/index.ts + 1 modules
var native_rpc = __webpack_require__(30246);
// EXTERNAL MODULE: ./src/components/shared/NetworkTab.tsx
var NetworkTab = __webpack_require__(91956);
// EXTERNAL MODULE: ./src/plugins/Wallet/messages.ts
var messages = __webpack_require__(84797);
// EXTERNAL MODULE: ../../node_modules/.pnpm/unstated-next@1.1.0/node_modules/unstated-next/dist/unstated-next.mjs
var unstated_next = __webpack_require__(44737);
;// CONCATENATED MODULE: ./src/plugins/NextID/contexts/TargetChainIdContext.ts



function useTargetChainId() {
    const chainId = (0,useChainId/* useChainId */.xx)();
    const [targetChainId, setTargetChainId] = (0,react.useState)(chainId);
    (0,react.useEffect)(()=>{
        setTargetChainId(chainId);
    }, [
        chainId
    ]);
    return {
        targetChainId,
        setTargetChainId
    };
}
const TargetChainIdContext = (0,unstated_next/* createContainer */.f)(useTargetChainId);

;// CONCATENATED MODULE: ./src/plugins/NextID/contexts/RootContext.tsx


const RootContext = ({ children  })=>{
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(TargetChainIdContext.Provider, {
        children: children
    });
};

// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/noop.js
var noop = __webpack_require__(21122);
;// CONCATENATED MODULE: ./src/plugins/NextID/types/tip.ts
var TipType;
(function(TipType) {
    TipType["Token"] = 'token';
    TipType["NFT"] = 'nft';
})(TipType || (TipType = {}));

;// CONCATENATED MODULE: ./src/plugins/NextID/types/index.ts


;// CONCATENATED MODULE: ./src/plugins/NextID/contexts/Tip/TipContext.ts




const TipContext = (0,react.createContext)({
    recipient: '',
    recipientSnsId: '',
    setRecipient: noop/* default */.Z,
    tipType: TipType.NFT,
    setTipType: noop/* default */.Z,
    recipients: [],
    token: null,
    setToken: noop/* default */.Z,
    amount: '',
    setAmount: noop/* default */.Z,
    erc721TokenId: null,
    setErc721TokenId: noop/* default */.Z,
    erc721Contract: null,
    erc721Address: '',
    setErc721Address: noop/* default */.Z,
    sendTip: noop/* default */.Z,
    isSending: false,
    sendState: {
        type: types/* TransactionStateType.UNKNOWN */.n$.UNKNOWN
    },
    storedTokens: [],
    reset: noop/* default */.Z
});

// EXTERNAL MODULE: ../web3-shared/evm/hooks/useNativeTokenDetailed.ts
var useNativeTokenDetailed = __webpack_require__(38443);
// EXTERNAL MODULE: ../web3-shared/evm/hooks/useERC721ContractDetailed.ts
var useERC721ContractDetailed = __webpack_require__(75569);
// EXTERNAL MODULE: ../../node_modules/.pnpm/use-subscription@1.6.0_react@18.0.0/node_modules/use-subscription/index.js
var use_subscription = __webpack_require__(66040);
;// CONCATENATED MODULE: ./src/plugins/NextID/storage/index.ts


const storageDefaultValue = {
    publicKey: null,
    addedTokens: []
};
let storage = null;
function setupStorage(_) {
    storage = _;
}
function getStorage() {
    return storage.storage;
}
function getTokens() {
    return storage.storage.addedTokens.value;
}
function storeToken(token) {
    const tokens = [
        token,
        ...getTokens()
    ];
    storage.storage.addedTokens.setValue(tokens);
}
function deleteToken(address, tokenId) {
    const tokens = getTokens();
    remove(tokens, (t)=>t.tokenId === tokenId && isSameAddress(t.contract?.address, address)
    );
    storage.storage.addedTokens.setValue(tokens);
}

// EXTERNAL MODULE: ../web3-shared/evm/hooks/useTokenTransferCallback.ts + 3 modules
var useTokenTransferCallback = __webpack_require__(19136);
// EXTERNAL MODULE: ../web3-shared/evm/hooks/useERC721TokenDetailedCallback.ts
var useERC721TokenDetailedCallback = __webpack_require__(98477);
;// CONCATENATED MODULE: ./src/plugins/NextID/contexts/Tip/useNftTip.ts



function useNftTip(recipient, tokenId, contractAddress) {
    const [transferState, transferCallback] = (0,useTokenTransferCallback/* useTokenTransferCallback */.z)(types/* EthereumTokenType.ERC721 */.Dr.ERC721, contractAddress || '');
    const { value: contractDetailed  } = (0,useERC721ContractDetailed/* useERC721ContractDetailed */.P)(contractAddress);
    const [, setTokenId, erc721TokenDetailedCallback] = (0,useERC721TokenDetailedCallback/* useERC721TokenDetailedCallback */._)(contractDetailed);
    (0,react.useEffect)(()=>{
        if (tokenId) {
            setTokenId(tokenId);
        }
    }, [
        tokenId
    ]);
    const sendTip = (0,react.useCallback)(async ()=>{
        if (!tokenId || !contractAddress) return;
        await transferCallback(tokenId, recipient);
        const tokenDetailed = await erc721TokenDetailedCallback();
        if (tokenDetailed) {
            await messages/* WalletRPC.removeToken */.V.removeToken(tokenDetailed);
        }
    }, [
        tokenId,
        contractAddress,
        erc721TokenDetailedCallback,
        recipient,
        transferCallback
    ]);
    return [
        transferState,
        sendTip
    ];
}

// EXTERNAL MODULE: ../web3-shared/base/src/index.ts + 7 modules
var base_src = __webpack_require__(89260);
// EXTERNAL MODULE: ../web3-shared/evm/constants/constants.ts + 27 modules
var constants_constants = __webpack_require__(26223);
;// CONCATENATED MODULE: ./src/plugins/NextID/contexts/Tip/useTokenTip.ts



function useTokenTip(recipient, token, amount) {
    const { NATIVE_TOKEN_ADDRESS  } = (0,constants_constants/* useTokenConstants */.kd)();
    const isNativeToken = (0,utils_address/* isSameAddress */.Wr)(token?.address, NATIVE_TOKEN_ADDRESS);
    const assetType = isNativeToken ? types/* EthereumTokenType.Native */.Dr.Native : types/* EthereumTokenType.ERC20 */.Dr.ERC20;
    const [transferState, transferCallback] = (0,useTokenTransferCallback/* useTokenTransferCallback */.z)(assetType, token?.address || '');
    const sendTip = (0,react.useCallback)(async ()=>{
        const transferAmount = (0,base_src/* rightShift */.pu)(amount || '0', token?.decimals || 0).toFixed();
        await transferCallback(transferAmount, recipient);
    }, [
        amount,
        token,
        recipient,
        transferCallback
    ]);
    return [
        transferState,
        sendTip
    ];
}

;// CONCATENATED MODULE: ./src/plugins/NextID/contexts/Tip/TipTaskProvider.tsx










const TipTaskProvider = ({ children , task  })=>{
    const [recipient, setRecipient] = (0,react.useState)('');
    const [tipType, setTipType] = (0,react.useState)(TipType.Token);
    const [amount, setAmount] = (0,react.useState)('');
    const { targetChainId  } = TargetChainIdContext.useContainer();
    const chainId = (0,useChainId/* useChainId */.xx)();
    const [erc721Address, setErc721Address] = (0,react.useState)('');
    const { value: nativeTokenDetailed = null  } = (0,useNativeTokenDetailed/* useNativeTokenDetailed */.J)(targetChainId);
    const [token, setToken] = (0,react.useState)(nativeTokenDetailed);
    const [erc721TokenId, setErc721TokenId] = (0,react.useState)(null);
    const storedTokens = (0,use_subscription.useSubscription)(getStorage().addedTokens.subscription);
    const { value: erc721Contract  } = (0,useERC721ContractDetailed/* useERC721ContractDetailed */.P)(erc721Address);
    (0,react.useEffect)(()=>{
        setTipType(TipType.Token);
    }, [
        targetChainId
    ]);
    (0,react.useEffect)(()=>{
        setRecipient(task.to || '');
    }, [
        task.to
    ]);
    (0,react.useEffect)(()=>{
        if (recipient || task.addresses.length === 0) return;
        setRecipient(task.addresses[0]);
    }, [
        recipient,
        task.addresses
    ]);
    (0,react.useEffect)(()=>{
        if (!nativeTokenDetailed) return;
        setToken(nativeTokenDetailed);
    }, [
        nativeTokenDetailed
    ]);
    const tokenTipTuple = useTokenTip(recipient, token, amount);
    const nftTipTuple = useNftTip(recipient, erc721TokenId, erc721Address);
    const sendTipTuple = tipType === TipType.Token ? tokenTipTuple : nftTipTuple;
    const sendState = sendTipTuple[0];
    const sendTip = sendTipTuple[1];
    const contextValue = (0,react.useMemo)(()=>{
        const isSending = [
            types/* TransactionStateType.WAIT_FOR_CONFIRMING */.n$.WAIT_FOR_CONFIRMING,
            types/* TransactionStateType.HASH */.n$.HASH,
            types/* TransactionStateType.RECEIPT */.n$.RECEIPT, 
        ].includes(sendState.type);
        const reset = ()=>{
            setAmount('');
            setErc721TokenId(null);
            setErc721Address('');
        };
        return {
            recipient,
            recipientSnsId: task.recipientSnsId || '',
            setRecipient,
            recipients: task.addresses,
            tipType,
            setTipType,
            token,
            setToken,
            amount,
            setAmount,
            erc721TokenId,
            setErc721TokenId,
            erc721Contract: erc721Contract || null,
            erc721Address,
            setErc721Address,
            sendTip,
            isSending,
            sendState,
            storedTokens: storedTokens.filter((t)=>t.contract?.chainId === chainId
            ),
            reset
        };
    }, [
        chainId,
        recipient,
        task.recipientSnsId,
        task.addresses,
        tipType,
        amount,
        erc721TokenId,
        erc721Contract,
        erc721Address,
        token,
        sendTip,
        sendState,
        storedTokens, 
    ]);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(TipContext.Provider, {
        value: contextValue,
        children: children
    });
};
function useTip() {
    return (0,react.useContext)(TipContext);
}

// EXTERNAL MODULE: ../web3-shared/evm/hooks/useFungibleTokenBalance.ts
var useFungibleTokenBalance = __webpack_require__(52813);
;// CONCATENATED MODULE: ./src/plugins/NextID/contexts/Tip/useTipValidate.ts






function useTipValidate() {
    const { tipType , amount , token , erc721TokenId , erc721Address  } = (0,react.useContext)(TipContext);
    const { value: balance = '0'  } = (0,useFungibleTokenBalance/* useFungibleTokenBalance */.V)(token?.type || types/* EthereumTokenType.Native */.Dr.Native, token?.address);
    const t = (0,locales/* useI18N */.M)();
    const result = (0,react.useMemo)(()=>{
        if (tipType === TipType.Token) {
            if (!amount || (0,base_src/* isLessThanOrEqualTo */.PW)(amount, 0)) return [
                false
            ];
            if ((0,base_src/* isGreaterThan */.T1)((0,base_src/* rightShift */.pu)(amount, token?.decimals), balance)) return [
                false,
                t.token_insufficient_balance()
            ];
        } else {
            if (!erc721TokenId || !erc721Address) return [
                false
            ];
        }
        return [
            true
        ];
    }, [
        tipType,
        amount,
        token?.decimals,
        balance,
        erc721TokenId,
        erc721Address,
        t
    ]);
    return result;
}

;// CONCATENATED MODULE: ./src/plugins/NextID/contexts/Tip/index.ts




;// CONCATENATED MODULE: ./src/plugins/NextID/contexts/index.ts




// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/DialogActions/DialogActions.js + 1 modules
var DialogActions = __webpack_require__(38175);
;// CONCATENATED MODULE: ./src/plugins/NextID/components/ConfirmModal.tsx




const ConfirmModal_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        confirmDialog: {
            width: 480,
            backgroundImage: 'none'
        },
        content: {
            display: 'flex',
            flexDirection: 'column',
            justifyContent: 'center',
            justifyItems: 'center',
            padding: theme.spacing(3),
            boxSizing: 'border-box',
            color: theme.palette.text.primary,
            textAlign: 'center',
            fontSize: 18
        },
        icon: {
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center'
        },
        actions: {
            padding: theme.spacing(0, 3, 3)
        }
    })
);
const ConfirmModal = ({ className , message , icon , confirmText , onConfirm , ...rest })=>{
    const { classes  } = ConfirmModal_useStyles();
    confirmText = confirmText || 'Confirm';
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(shared_src/* InjectedDialog */.Fl, {
        classes: {
            paper: classes.confirmDialog
        },
        BackdropProps: {
            style: {
                opacity: 0
            }
        },
        ...rest,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)(DialogContent/* default */.Z, {
                className: classes.content,
                children: [
                    icon ? /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                        className: classes.icon,
                        children: icon
                    }) : null,
                    typeof message === 'string' ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                        children: message
                    }) : message
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(DialogActions/* default */.Z, {
                className: classes.actions,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                    fullWidth: true,
                    onClick: onConfirm,
                    children: confirmText
                })
            })
        ]
    });
};

// EXTERNAL MODULE: ../web3-shared/evm/contracts/useERC721TokenContract.ts
var useERC721TokenContract = __webpack_require__(85010);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/FormControl/FormControl.js + 1 modules
var FormControl = __webpack_require__(3379);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/TextField/TextField.js + 2 modules
var TextField = __webpack_require__(7284);
// EXTERNAL MODULE: ../../node_modules/.pnpm/wallet.ts@1.0.1/node_modules/wallet.ts/dist/index.js
var dist = __webpack_require__(99674);
;// CONCATENATED MODULE: ./src/plugins/NextID/components/Tip/AddDialog.tsx











const AddDialog_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        addButton: {
            marginLeft: 'auto'
        },
        chain: {
            display: 'flex'
        },
        row: {
            marginTop: theme.spacing(1.5)
        },
        chainName: {
            marginLeft: theme.spacing(1)
        },
        error: {
            display: 'flex',
            height: 16,
            alignItems: 'center',
            color: theme.palette.error.main,
            '&::before': {
                backgroundColor: theme.palette.error.main,
                content: '""',
                width: 2,
                height: 16,
                marginRight: theme.spacing(0.5)
            }
        }
    })
);
const AddDialog = ({ onAdd , onClose , ...rest })=>{
    const { classes  } = AddDialog_useStyles();
    const chainId = (0,useChainId/* useChainId */.xx)();
    const account = (0,useAccount/* useAccount */.m)();
    const [contractAddress, setContractAddress] = (0,react.useState)('');
    const [tokenId, setTokenId] = (0,react.useState)('');
    const t = (0,locales/* useI18N */.M)();
    const allNetworks = (0,entry_web3/* useNetworkDescriptors */.px)();
    const network = (0,react.useMemo)(()=>allNetworks.find((n)=>n.chainId === chainId
        )
    , [
        allNetworks,
        chainId
    ]);
    const erc721TokenContract = (0,useERC721TokenContract/* useERC721TokenContract */.n)(contractAddress);
    const [, checkOwner] = (0,useAsyncFn/* default */.Z)(async ()=>{
        if (!erc721TokenContract || !account) return false;
        const ownerAddress = await erc721TokenContract.methods.ownerOf(tokenId).call();
        return (0,utils_address/* isSameAddress */.Wr)(ownerAddress, account);
    }, [
        erc721TokenContract,
        tokenId,
        account
    ]);
    const [message, setMessage] = (0,react.useState)('');
    const reset = (0,react.useCallback)(()=>{
        setMessage('');
        setContractAddress('');
        setTokenId('');
    }, []);
    (0,react.useEffect)(()=>{
        setMessage('');
    }, [
        tokenId,
        contractAddress
    ]);
    const [state, handleAdd] = (0,useAsyncFn/* default */.Z)(async ()=>{
        if (!erc721TokenContract || !dist.EthereumAddress.isValid(contractAddress)) {
            setMessage(t.tip_add_collectibles_error());
            return;
        }
        const hasOwnership = await checkOwner();
        if (!hasOwnership) {
            setMessage(t.tip_add_collectibles_error());
            return;
        }
        const erc721ContractDetailed = await (0,useERC721ContractDetailed/* getERC721ContractDetailed */.q)(erc721TokenContract, contractAddress, chainId);
        const erc721TokenDetailed = await (0,useERC721TokenDetailed/* getERC721TokenDetailed */.Cf)(erc721ContractDetailed, erc721TokenContract, tokenId, chainId);
        if (!erc721TokenDetailed) {
            setMessage(t.tip_add_collectibles_error());
            return;
        }
        await messages/* WalletRPC.addToken */.V.addToken(erc721TokenDetailed);
        onAdd?.(erc721TokenDetailed);
        reset();
    }, [
        onAdd,
        t,
        contractAddress,
        tokenId
    ]);
    const handleClose = (0,react.useCallback)(()=>{
        onClose?.();
        reset();
    }, [
        onClose
    ]);
    const addButton = (0,react.useMemo)(()=>{
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
            disabled: !contractAddress || !tokenId || state.loading,
            className: classes.addButton,
            onClick: handleAdd,
            children: state.loading ? t.tip_adding() : t.tip_add()
        });
    }, [
        t,
        handleAdd,
        state.loading
    ]);
    if (!network) return null;
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_src/* InjectedDialog */.Fl, {
        title: t.tip_add_collectibles(),
        titleTail: addButton,
        onClose: handleClose,
        ...rest,
        children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(DialogContent/* default */.Z, {
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                    className: classes.chain,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_src/* ImageIcon */.XB, {
                            size: 24,
                            icon: network.icon || ''
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.chainName,
                            children: network.name
                        })
                    ]
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(FormControl/* default */.Z, {
                    fullWidth: true,
                    className: classes.row,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TextField/* default */.Z, {
                        fullWidth: true,
                        value: contractAddress,
                        onChange: (e)=>setContractAddress(e.currentTarget.value)
                        ,
                        placeholder: t.tip_add_collectibles_contract_address()
                    })
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(FormControl/* default */.Z, {
                    fullWidth: true,
                    className: classes.row,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TextField/* default */.Z, {
                        fullWidth: true,
                        value: tokenId,
                        onChange: (e)=>setTokenId(e.currentTarget.value)
                        ,
                        placeholder: t.tip_add_collectibles_token_id()
                    })
                }),
                message ? /*#__PURE__*/ (0,jsx_runtime.jsx)(FormControl/* default */.Z, {
                    fullWidth: true,
                    className: classes.row,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                        className: classes.error,
                        children: message
                    })
                }) : null
            ]
        })
    });
};

// EXTERNAL MODULE: ../plugins/Wallet/src/index.ts + 1 modules
var Wallet_src = __webpack_require__(19841);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Select/Select.js + 3 modules
var Select = __webpack_require__(75879);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/MenuItem/MenuItem.js + 1 modules
var MenuItem = __webpack_require__(24294);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/RadioGroup/RadioGroup.js
var RadioGroup = __webpack_require__(25557);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/FormControlLabel/FormControlLabel.js
var FormControlLabel = __webpack_require__(82651);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Radio/Radio.js + 4 modules
var Radio = __webpack_require__(20750);
// EXTERNAL MODULE: ../../node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js
var classnames = __webpack_require__(83849);
var classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);
// EXTERNAL MODULE: ./src/extension/options-page/DashboardComponents/ActionButton.tsx
var ActionButton = __webpack_require__(83463);
// EXTERNAL MODULE: ./src/web3/UI/EthereumChainBoundary.tsx + 1 modules
var EthereumChainBoundary = __webpack_require__(38587);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/CircularProgress/CircularProgress.js + 1 modules
var CircularProgress = __webpack_require__(98354);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/uniqWith.js
var uniqWith = __webpack_require__(6986);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useTimeoutFn.js
var useTimeoutFn = __webpack_require__(5710);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Checkbox/Checkbox.js + 4 modules
var Checkbox = __webpack_require__(41197);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/List/List.js + 1 modules
var List = __webpack_require__(20476);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/ListItem/ListItem.js + 2 modules
var ListItem = __webpack_require__(16451);
;// CONCATENATED MODULE: ./src/plugins/NextID/components/Tip/NFTSection/NFTList.tsx









const NFTList_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        checkbox: {
            position: 'absolute',
            right: 0,
            top: 0
        },
        list: {
            gridGap: 13,
            display: 'grid',
            gridTemplateColumns: 'repeat(5, 1fr)'
        },
        nftItem: {
            position: 'relative',
            cursor: 'pointer',
            background: theme.palette.mode === 'light' ? '#EDEFEF' : '#2F3336',
            display: 'flex',
            overflow: 'hidden',
            padding: 0,
            flexDirection: 'column',
            borderRadius: 12,
            height: 100,
            userSelect: 'none',
            width: 100,
            justifyContent: 'center'
        },
        disabled: {
            opacity: 0.5,
            cursor: 'not-allowed'
        },
        selected: {
            position: 'relative',
            '&::after': {
                position: 'absolute',
                border: `2px solid ${theme.palette.primary.main}`,
                content: '""',
                left: 0,
                top: 0,
                pointerEvents: 'none',
                boxSizing: 'border-box',
                width: '100%',
                height: '100%',
                borderRadius: 12
            }
        },
        unselected: {
            opacity: 0.5
        },
        loadingFailImage: {
            width: 64,
            height: 64
        },
        assetPlayerIframe: {
            height: 100,
            width: 100
        },
        imgWrapper: {
            height: '100px !important',
            width: '100px !important',
            img: {
                height: '100%',
                width: '100%'
            }
        },
        tooltip: {
            marginBottom: `${theme.spacing(0.5)} !important`
        }
    })
);
const NFTItem = ({ token  })=>{
    const { classes  } = NFTList_useStyles();
    const chainId = (0,useChainId/* useChainId */.xx)();
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_src/* NFTCardStyledAssetPlayer */.yC, {
        chainId: chainId,
        contractAddress: token.contract?.address,
        url: token.info?.imageURL ?? token.metadata?.assetURL,
        tokenId: token.tokenId,
        classes: {
            loadingFailImage: classes.loadingFailImage,
            iframe: classes.assetPlayerIframe,
            imgWrapper: classes.imgWrapper
        }
    });
};
const includes = (pairs, pair)=>{
    return !!pairs.find(([address, tokenId])=>(0,utils_address/* isSameAddress */.Wr)(address, pair[0]) && tokenId === pair[1]
    );
};
const NFTList = ({ selectedPairs , tokens , onChange , limit =1 , className  })=>{
    const { classes  } = NFTList_useStyles();
    const isRadio = limit === 1;
    const reachedLimit = selectedPairs.length >= limit;
    const toggleItem = (0,react.useCallback)((currentId, contractAddress)=>{
        onChange?.(currentId, contractAddress);
    }, [
        onChange,
        isRadio,
        reachedLimit
    ]);
    const SelectComponent = isRadio ? Radio/* default */.Z : Checkbox/* default */.Z;
    const { Utils  } = (0,entry_web3/* useWeb3State */.dM)();
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(List/* default */.Z, {
        className: classnames_default()(classes.list, className),
        children: tokens.map((token)=>{
            const selected = includes(selectedPairs, [
                token.contract?.address,
                token.tokenId
            ]);
            const disabled = !isRadio && reachedLimit && !selected;
            const link = Utils?.resolveNonFungibleTokenLink && token.contract ? Utils.resolveNonFungibleTokenLink(token.contract?.chainId, token.contract?.address, token.tokenId) : undefined;
            return /*#__PURE__*/ (0,jsx_runtime.jsx)(entry/* ShadowRootTooltip */.p_, {
                classes: {
                    tooltip: classes.tooltip
                },
                title: `${token.contract?.name} ${(0,formatter/* formatNFT_TokenId */.uu)(token.tokenId, 2)}`,
                placement: "top",
                arrow: true,
                children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(ListItem/* default */.ZP, {
                    className: classnames_default()(classes.nftItem, {
                        [classes.disabled]: disabled,
                        [classes.selected]: selected,
                        [classes.unselected]: selectedPairs.length > 0 && !selected
                    }),
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Link/* default */.Z, {
                            target: link ? '_blank' : 'self',
                            rel: "noreferrer noopener",
                            href: link,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTItem, {
                                token: token
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(SelectComponent, {
                            size: "small",
                            onChange: noop/* default */.Z,
                            disabled: disabled,
                            onClick: ()=>{
                                if (disabled || !token.contract?.address) return;
                                if (selected) {
                                    toggleItem(null, '');
                                } else {
                                    toggleItem(token.tokenId, token.contract.address);
                                }
                            },
                            className: classes.checkbox,
                            checked: selected
                        })
                    ]
                }, token.tokenId)
            }, token.tokenId);
        })
    });
};

;// CONCATENATED MODULE: ./src/plugins/NextID/components/Tip/NFTSection/index.tsx















const NFTSection_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        root: {
            display: 'flex',
            flexDirection: 'column',
            overflow: 'auto',
            height: 282
        },
        selectSection: {
            display: 'flex',
            flexDirection: 'column',
            overflow: 'auto'
        },
        statusBox: {
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center',
            justifyContent: 'center',
            height: 282
        },
        loadingText: {
            marginTop: theme.spacing(1)
        },
        list: {
            flexGrow: 1,
            maxHeight: 400,
            overflow: 'auto',
            borderRadius: 4
        },
        errorMessage: {
            marginTop: theme.spacing(3),
            fontSize: 12,
            color: theme.palette.error.main,
            marginBottom: theme.spacing(3)
        }
    })
);
const NFTSection = ({ className , onAddToken , onEmpty , ...rest })=>{
    const { erc721Address , erc721TokenId , setErc721TokenId , setErc721Address  } = useTip();
    const { classes  } = NFTSection_useStyles();
    const t = (0,locales/* useI18N */.M)();
    const account = (0,useAccount/* useAccount */.m)();
    const selectedPairs = (0,react.useMemo)(()=>erc721Address && erc721TokenId ? [
            [
                erc721Address,
                erc721TokenId
            ]
        ] : []
    , [
        erc721TokenId,
        erc721TokenId
    ]);
    const { Asset  } = (0,entry_web3/* useWeb3State */.dM)();
    const networkDescriptor = (0,entry_web3/* useNetworkDescriptor */.Vw)();
    // Cannot get the loading status of fetching via websocket
    // loading status of `useAsyncRetry` is not the real status
    const [guessLoading, setGuessLoading] = (0,react.useState)(true);
    (0,useTimeoutFn/* default */.Z)(()=>{
        setGuessLoading(false);
    }, 10000);
    const [{ value ={
        data: src/* EMPTY_LIST */.rP
    } , loading  }, fetchTokens] = (0,useAsyncFn/* default */.Z)(async ()=>{
        const result = await Asset?.getNonFungibleAssets?.(account, {
            page: 0
        }, undefined, networkDescriptor);
        return result;
    }, [
        account,
        Asset?.getNonFungibleAssets,
        networkDescriptor
    ]);
    (0,react.useEffect)(()=>{
        fetchTokens();
    }, [
        fetchTokens
    ]);
    (0,react.useEffect)(()=>{
        const unsubscribeTokens = messages/* WalletMessages.events.erc721TokensUpdated.on */.R.events.erc721TokensUpdated.on(fetchTokens);
        const unsubscribeSocket = messages/* WalletMessages.events.socketMessageUpdated.on */.R.events.socketMessageUpdated.on((info)=>{
            setGuessLoading(info.done);
            if (!info.done) {
                fetchTokens();
            }
        });
        return ()=>{
            unsubscribeTokens();
            unsubscribeSocket();
        };
    }, [
        fetchTokens
    ]);
    const fetchedTokens = value?.data ?? src/* EMPTY_LIST */.rP;
    const tokens = (0,react.useMemo)(()=>{
        return (0,uniqWith/* default */.Z)(fetchedTokens, (v1, v2)=>{
            return (0,utils_address/* isSameAddress */.Wr)(v1.contract?.address, v2.contract?.address) && v1.tokenId === v2.tokenId;
        });
    }, [
        fetchedTokens
    ]);
    const showLoadingIndicator = tokens.length === 0 && !loading && !guessLoading;
    (0,react.useEffect)(()=>{
        onEmpty?.(showLoadingIndicator);
    }, [
        onEmpty,
        showLoadingIndicator
    ]);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
        className: classnames_default()(classes.root, className),
        ...rest,
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
            className: classes.selectSection,
            children: (()=>{
                if (tokens.length) {
                    return /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTList, {
                        className: classes.list,
                        selectedPairs: selectedPairs,
                        tokens: tokens,
                        onChange: (id, address)=>{
                            setErc721TokenId(id);
                            setErc721Address(address);
                        }
                    });
                }
                if (loading || guessLoading) {
                    return /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                        className: classes.statusBox,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(CircularProgress/* default */.Z, {
                                size: 24
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                className: classes.loadingText,
                                children: t.tip_loading()
                            })
                        ]
                    });
                }
                return /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                    className: classes.statusBox,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.loadingText,
                            children: t.tip_empty_nft()
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                            variant: "text",
                            onClick: onAddToken,
                            children: t.tip_add_collectibles()
                        })
                    ]
                });
            })()
        })
    });
};

// EXTERNAL MODULE: ../../node_modules/.pnpm/bignumber.js@9.0.2/node_modules/bignumber.js/bignumber.js
var bignumber = __webpack_require__(42263);
var bignumber_default = /*#__PURE__*/__webpack_require__.n(bignumber);
// EXTERNAL MODULE: ./src/web3/UI/TokenAmountPanel.tsx + 1 modules
var TokenAmountPanel = __webpack_require__(79154);
// EXTERNAL MODULE: ./src/plugins/Trader/SNSAdaptor/trader/hooks/useGasConfig.ts
var useGasConfig = __webpack_require__(15574);
;// CONCATENATED MODULE: ./src/plugins/NextID/components/Tip/TokenSection/index.tsx








const GAS_LIMIT = 21000;
const TokenSection = ()=>{
    const { token , setToken , amount , setAmount , isSending  } = useTip();
    const { targetChainId: chainId  } = TargetChainIdContext.useContainer();
    // balance
    const { value: tokenBalance = '0' , loading: loadingTokenBalance  } = (0,useFungibleTokenBalance/* useFungibleTokenBalance */.V)(token?.type || types/* EthereumTokenType.Native */.Dr.Native, token?.address || '', chainId);
    const gasConfig = (0,useGasConfig/* useGasConfig */.c)(chainId);
    const maxAmount = (0,react.useMemo)(()=>{
        if (!(0,utils_address/* isNativeTokenAddress */.qw)(token?.address)) return tokenBalance;
        const gasPrice = gasConfig.gasPrice ?? '1';
        const gasFee = new (bignumber_default())(gasPrice).times(GAS_LIMIT);
        return new (bignumber_default())(tokenBalance).minus(gasFee).toFixed();
    }, [
        token?.address,
        tokenBalance,
        gasConfig.gasPrice
    ]);
    const pickToken = (0,shared_src/* usePickToken */.yQ)();
    const onSelectTokenChipClick = (0,react.useCallback)(async ()=>{
        const picked = await pickToken({
            chainId,
            disableNativeToken: false,
            selectedTokens: token ? [
                token.address
            ] : []
        });
        if (picked) {
            setToken(picked);
        }
    }, [
        pickToken,
        token?.address,
        chainId
    ]);
    // #endregion
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(TokenAmountPanel/* TokenAmountPanel */.x, {
        label: "",
        token: token,
        amount: amount,
        maxAmount: maxAmount,
        onAmountChange: setAmount,
        balance: tokenBalance,
        InputProps: {
            disabled: isSending
        },
        SelectTokenChip: {
            loading: loadingTokenBalance,
            ChipProps: {
                onClick: onSelectTokenChipClick
            }
        }
    });
};

;// CONCATENATED MODULE: ./src/plugins/NextID/components/Tip/TipForm.tsx
















const TipForm_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    return {
        root: {
            display: 'flex',
            flexDirection: 'column'
        },
        main: {
            display: 'flex',
            flexDirection: 'column',
            flexGrow: 1,
            overflow: 'auto'
        },
        receiverRow: {
            display: 'flex',
            flexDirection: 'row',
            alignItems: 'center'
        },
        to: {
            fontSize: 19,
            fontWeight: 500
        },
        address: {
            height: 48,
            flexGrow: 1,
            marginLeft: theme.spacing(1)
        },
        actionButton: {
            marginTop: theme.spacing(1.5),
            fontSize: 16
        },
        button: {
            width: '100%',
            fontSize: 16,
            lineHeight: '22px',
            fontWeight: 600,
            padding: '10px 0',
            borderRadius: 24,
            height: 'auto',
            marginTop: theme.spacing(1.5)
        },
        disabledButton: {
            fontSize: 16,
            lineHeight: '22px',
            fontWeight: 600,
            padding: '10px 0',
            borderRadius: 24,
            height: 'auto'
        },
        controls: {
            marginTop: theme.spacing(1),
            display: 'flex',
            flexDirection: 'row'
        },
        addButton: {
            marginLeft: 'auto'
        },
        tokenField: {
            marginTop: theme.spacing(2)
        }
    };
});
const TipForm = /*#__PURE__*/ (0,react.memo)(({ className , onAddToken , ...rest })=>{
    const t = (0,locales/* useI18N */.M)();
    const currentChainId = (0,useChainId/* useChainId */.xx)();
    const { targetChainId: chainId  } = TargetChainIdContext.useContainer();
    const { classes  } = TipForm_useStyles();
    const { recipient , recipients: recipientAddresses , setRecipient , isSending , sendTip , tipType , setTipType ,  } = useTip();
    const [isValid, validateMessage] = useTipValidate();
    const { Utils  } = (0,entry_web3/* useWeb3State */.dM)();
    const selectRef = (0,react.useRef)(null);
    const account = (0,useAccount/* useAccount */.m)();
    const { openDialog: openSelectProviderDialog  } = (0,shared_base_ui_src/* useRemoteControlledDialog */.F$)(Wallet_src/* WalletMessages.events.selectProviderDialogUpdated */.R$.events.selectProviderDialogUpdated);
    const [empty, setEmpty] = (0,react.useState)(false);
    const buttonLabel = isSending ? t.sending_tip() : isValid || !validateMessage ? t.send_tip() : validateMessage;
    const enabledNft = !isSending && chainId === currentChainId && [
        types/* ChainId.Mainnet */.a_.Mainnet,
        types/* ChainId.BSC */.a_.BSC,
        types/* ChainId.Matic */.a_.Matic
    ].includes(currentChainId);
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
        className: classnames_default()(classes.root, className),
        ...rest,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                className: classes.main,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)(FormControl/* default */.Z, {
                        fullWidth: true,
                        className: classes.receiverRow,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                className: classes.to,
                                children: t.tip_to()
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Select/* default */.Z, {
                                className: classes.address,
                                ref: selectRef,
                                value: recipient,
                                disabled: isSending,
                                onChange: (e)=>{
                                    setRecipient(e.target.value);
                                },
                                MenuProps: {
                                    anchorOrigin: {
                                        vertical: 'bottom',
                                        horizontal: 'center'
                                    },
                                    container: selectRef.current,
                                    anchorEl: selectRef.current,
                                    BackdropProps: {
                                        invisible: true
                                    }
                                },
                                children: recipientAddresses.map((address)=>/*#__PURE__*/ (0,jsx_runtime.jsx)(MenuItem/* default */.Z, {
                                        value: address,
                                        children: Utils?.formatDomainName?.(address) || address
                                    }, address)
                                )
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)(FormControl/* default */.Z, {
                        className: classes.controls,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsxs)(RadioGroup/* default */.Z, {
                                row: true,
                                value: tipType,
                                onChange: (e)=>setTipType(e.target.value)
                                ,
                                children: [
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)(FormControlLabel/* default */.Z, {
                                        disabled: isSending,
                                        value: TipType.Token,
                                        control: /*#__PURE__*/ (0,jsx_runtime.jsx)(Radio/* default */.Z, {}),
                                        label: t.tip_type_token()
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)(FormControlLabel/* default */.Z, {
                                        disabled: !enabledNft,
                                        value: TipType.NFT,
                                        control: /*#__PURE__*/ (0,jsx_runtime.jsx)(Radio/* default */.Z, {}),
                                        label: t.tip_type_nft()
                                    })
                                ]
                            }),
                            tipType === TipType.NFT && !empty ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                                variant: "text",
                                className: classes.addButton,
                                onClick: onAddToken,
                                children: t.tip_add_collectibles()
                            }) : null
                        ]
                    }),
                    tipType === TipType.Token ? /*#__PURE__*/ (0,jsx_runtime.jsx)(FormControl/* default */.Z, {
                        className: classes.tokenField,
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TokenSection, {})
                    }) : /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTSection, {
                        onEmpty: setEmpty,
                        onAddToken: onAddToken
                    })
                ]
            }),
            account ? /*#__PURE__*/ (0,jsx_runtime.jsx)(EthereumChainBoundary/* EthereumChainBoundary */.T, {
                chainId: chainId,
                noSwitchNetworkTip: true,
                disablePadding: true,
                ActionButtonPromiseProps: {
                    fullWidth: true,
                    classes: {
                        root: classes.button,
                        disabled: classes.disabledButton
                    },
                    color: 'primary'
                },
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                    variant: "contained",
                    size: "large",
                    className: classes.actionButton,
                    fullWidth: true,
                    disabled: !isValid || isSending,
                    onClick: sendTip,
                    children: buttonLabel
                })
            }) : /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                variant: "contained",
                size: "large",
                className: classes.actionButton,
                fullWidth: true,
                onClick: openSelectProviderDialog,
                children: t.tip_connect_wallet()
            })
        ]
    });
});

;// CONCATENATED MODULE: ./src/plugins/NextID/components/Tip/TipDialog.tsx






















const TipDialog_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        dialog: {
            width: 600,
            backgroundImage: 'none'
        },
        dialogTitle: {
            height: 60
        },
        content: {
            display: 'flex',
            flexDirection: 'column',
            flexBasis: '100%',
            paddingTop: 0,
            '&::-webkit-scrollbar': {
                display: 'none'
            }
        },
        abstractTabWrapper: {
            width: '100%',
            paddingTop: theme.spacing(1),
            paddingBottom: theme.spacing(2),
            flexShrink: 0
        },
        tab: {
            height: 36,
            minHeight: 36
        },
        tabPaper: {
            backgroundColor: 'inherit'
        },
        tabs: {
            height: 36,
            minHeight: 36,
            margin: '0 auto',
            borderRadius: 4
        },
        tipForm: {
            flexGrow: 1,
            overflow: 'auto'
        },
        nftContainer: {
            height: 100,
            width: 100
        },
        nftMessage: {
            textAlign: 'center',
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center'
        },
        nftMessageText: {
            fontSize: 18,
            color: '#3DC233',
            marginTop: theme.spacing(3),
            lineHeight: '30px'
        },
        loadingFailImage: {
            width: 64,
            height: 64
        },
        walletChip: {
            marginLeft: 'auto',
            height: 40,
            boxSizing: 'border-box',
            display: 'flex',
            alignItems: 'center',
            backgroundColor: theme.palette.background.default,
            padding: theme.spacing(0.5, 1),
            borderRadius: 99
        },
        wallet: {
            marginLeft: theme.spacing(1)
        },
        walletTitle: {
            marginLeft: theme.spacing(1),
            lineHeight: '18px',
            height: 18,
            fontSize: 14,
            fontWeight: 'bold'
        },
        walletAddress: {
            height: 12,
            display: 'flex',
            alignItems: 'center',
            fontSize: 10,
            color: theme.palette.text.secondary
        },
        changeWalletButton: {
            marginLeft: theme.spacing(0.5),
            display: 'flex',
            alignItems: 'center',
            cursor: 'pointer'
        },
        link: {
            cursor: 'pointer',
            lineHeight: '10px',
            marginTop: 2,
            '&:hover': {
                textDecoration: 'none'
            }
        },
        linkIcon: {
            fill: 'none',
            width: 12,
            height: 12,
            marginLeft: theme.spacing(0.5)
        }
    })
);
function TipDialog({ open =false , onClose  }) {
    const pluginID = (0,entry_web3/* useCurrentWeb3NetworkPluginID */.$f)();
    const tipDefinition = (0,entry_dom/* useActivatedPlugin */.Rc)(entry_dom/* PluginId.NextID */.je.NextID, 'any');
    const chainIdList = tipDefinition?.enableRequirement.web3?.[pluginID]?.supportedChainIds ?? src/* EMPTY_LIST */.rP;
    const t = (0,locales/* useI18N */.M)();
    const { classes  } = TipDialog_useStyles();
    const [addTokenDialogIsOpen, openAddTokenDialog] = (0,useBoolean/* default */.Z)(false);
    const [confirmModalIsOpen, openConfirmModal] = (0,useBoolean/* default */.Z)(false);
    const { targetChainId , setTargetChainId  } = TargetChainIdContext.useContainer();
    const { tipType , amount , token: token1 , recipientSnsId , recipient , sendState , erc721Contract , erc721TokenId , setErc721Address , setErc721TokenId , reset ,  } = useTip();
    const isTokenTip = tipType === TipType.Token;
    const shareText = (0,react.useMemo)(()=>{
        const promote = t.tip_mask_promote();
        const message = isTokenTip ? t.tip_token_share_post({
            amount,
            symbol: token1?.symbol || 'token',
            recipientSnsId,
            recipient,
            promote
        }) : t.tip_nft_share_post({
            name: erc721Contract?.name || 'NFT',
            recipientSnsId,
            recipient,
            promote
        });
        return message;
    }, [
        amount,
        isTokenTip,
        erc721Contract?.name,
        token1,
        recipient,
        recipientSnsId,
        t
    ]);
    const { tokenDetailed: erc721Token  } = (0,useERC721TokenDetailed/* useERC721TokenDetailed */.zi)(erc721Contract, erc721TokenId);
    const chainId = (0,useChainId/* useChainId */.xx)();
    const successMessage = (0,react.useMemo)(()=>{
        if (isTokenTip) return t.send_tip_successfully();
        if (erc721Token) return /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
            className: classes.nftMessage,
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                    className: classes.nftContainer,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_src/* NFTCardStyledAssetPlayer */.yC, {
                        chainId: chainId,
                        contractAddress: erc721Token.contractDetailed.address,
                        url: erc721Token.info.mediaUrl,
                        tokenId: erc721Token.tokenId,
                        classes: {
                            loadingFailImage: classes.loadingFailImage
                        }
                    })
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    className: classes.nftMessageText,
                    children: t.send_specific_tip_successfully({
                        amount: '1',
                        name: erc721Token.info.name || 'NFT'
                    })
                })
            ]
        });
        return t.send_tip_successfully();
    }, [
        t,
        isTokenTip,
        classes.nftMessage,
        erc721Token
    ]);
    (0,react.useEffect)(()=>{
        if (sendState.type !== types/* TransactionStateType.CONFIRMED */.n$.CONFIRMED) return;
        openConfirmModal(true);
    }, [
        sendState.type
    ]);
    const handleConfirm = (0,react.useCallback)(()=>{
        social_network/* activatedSocialNetworkUI.utils.share */.LM.utils.share?.(shareText);
        openConfirmModal(false);
        onClose?.();
    }, [
        shareText,
        onClose
    ]);
    const networkDescriptor = (0,entry_web3/* useNetworkDescriptor */.Vw)();
    const providerDescriptor = (0,entry_web3/* useProviderDescriptor */.fY)();
    const { Utils  } = (0,entry_web3/* useWeb3State */.dM)();
    const account = (0,useAccount/* useAccount */.m)();
    const { value: domain  } = (0,entry_web3/* useReverseAddress */.$q)(account);
    const walletTitle = Utils?.formatDomainName?.(domain) || Utils?.formatAddress?.(account, 4) || providerDescriptor?.name;
    // #region change provider
    const { openDialog: openSelectProviderDialog  } = (0,shared_base_ui_src/* useRemoteControlledDialog */.F$)(messages/* WalletMessages.events.selectProviderDialogUpdated */.R.events.selectProviderDialogUpdated);
    // #endregion
    const openWallet = (0,react.useCallback)(()=>{
        if (native_rpc/* hasNativeAPI */._) return native_rpc/* nativeAPI */.Nz?.api.misc_openCreateWalletView();
        return openSelectProviderDialog();
    }, [
        openSelectProviderDialog,
        native_rpc/* hasNativeAPI */._
    ]);
    const handleAddToken = (0,react.useCallback)((token)=>{
        setErc721Address(token.contractDetailed.address ?? '');
        setErc721TokenId(token.tokenId);
        openAddTokenDialog(false);
    }, []);
    const walletChip = account ? /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
        className: classes.walletChip,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_src/* WalletIcon */.o, {
                size: 30,
                badgeSize: 12,
                networkIcon: providerDescriptor?.icon,
                providerIcon: networkDescriptor?.icon
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                className: classes.wallet,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                        ml: 1,
                        className: classes.walletTitle,
                        children: walletTitle
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                        ml: 1,
                        className: classes.walletAddress,
                        children: [
                            Utils?.formatAddress?.(account, 4),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Link/* default */.Z, {
                                className: classes.link,
                                href: account ? Utils?.resolveAddressLink?.(chainId, account) ?? '' : '',
                                target: "_blank",
                                rel: "noopener noreferrer",
                                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(LinkOut/* LinkOutIcon */.A, {
                                    className: classes.linkIcon
                                })
                            })
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                className: classes.changeWalletButton,
                role: "button",
                onClick: openWallet,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Drop2Icon, {})
            })
        ]
    }) : null;
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_src/* InjectedDialog */.Fl, {
                open: open,
                onClose: onClose,
                classes: {
                    dialogTitle: classes.dialogTitle,
                    paper: classes.dialog
                },
                title: t.tips(),
                titleTail: walletChip,
                children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(DialogContent/* default */.Z, {
                    className: classes.content,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                            className: classes.abstractTabWrapper,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(NetworkTab/* NetworkTab */.L, {
                                classes: classes,
                                chainId: targetChainId,
                                setChainId: setTargetChainId,
                                chains: chainIdList
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(TipForm, {
                            className: classes.tipForm,
                            onAddToken: ()=>openAddTokenDialog(true)
                        })
                    ]
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(ConfirmModal, {
                title: t.tips(),
                open: confirmModalIsOpen,
                onClose: ()=>{
                    openConfirmModal(false);
                    reset();
                    onClose?.();
                },
                icon: isTokenTip ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Success/* SuccessIcon */.t, {
                    style: {
                        height: 64,
                        width: 64
                    }
                }) : null,
                message: successMessage,
                confirmText: t.tip_share(),
                onConfirm: handleConfirm
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(AddDialog, {
                open: addTokenDialogIsOpen,
                onClose: ()=>openAddTokenDialog(false)
                ,
                onAdd: handleAddToken
            })
        ]
    });
}

// EXTERNAL MODULE: ./src/plugins/NextID/components/Tip/TipButton.tsx + 1 modules
var TipButton = __webpack_require__(68487);
// EXTERNAL MODULE: ./src/plugins/NextID/messages.ts
var NextID_messages = __webpack_require__(81441);
;// CONCATENATED MODULE: ./src/plugins/NextID/components/Tip/TipTaskManager.tsx






let id = 0;
const TipTaskManager = ({ children  })=>{
    const [tasks, setTasks] = (0,react.useState)(src/* EMPTY_LIST */.rP);
    const removeTask = (0,react.useCallback)((task)=>{
        setTasks((list)=>list.filter((t)=>t !== task
            )
        );
    }, []);
    (0,react.useEffect)(()=>{
        return NextID_messages/* PluginNextIdMessages.tipTask.on */.$.tipTask.on((task)=>{
            id += 1;
            setTasks((list)=>[
                    ...list,
                    {
                        id,
                        ...task
                    }
                ]
            );
        });
    }, []);
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            tasks.map((task)=>/*#__PURE__*/ (0,jsx_runtime.jsx)(TipTaskProvider, {
                    task: task,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TipDialog, {
                        open: true,
                        onClose: ()=>removeTask(task)
                    }, task.id)
                }, task.id)
            ),
            children
        ]
    });
};

;// CONCATENATED MODULE: ./src/plugins/NextID/components/Tip/index.ts




;// CONCATENATED MODULE: ./src/plugins/NextID/components/BindingItem.tsx














const BindingItem_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        item: {
            padding: theme.spacing(1.5),
            marginBottom: theme.spacing(1),
            backgroundColor: theme.palette.background.default,
            borderRadius: 8,
            alignItems: 'center'
        },
        copy: {
            fontSize: 16,
            stroke: theme.palette.text.primary,
            cursor: 'pointer'
        },
        address: {
            color: theme.palette.text.primary
        },
        link: {
            color: theme.palette.text.primary,
            fontSize: 14,
            display: 'flex',
            alignItems: 'center'
        },
        linkIcon: {
            marginRight: theme.spacing(1)
        },
        tipButton: {
            display: 'inline-flex',
            alignItems: 'center',
            color: theme.palette.text.primary,
            marginRight: theme.spacing(0.5)
        },
        tipButtonLabel: {
            color: theme.palette.text.primary,
            fontSize: 14,
            marginLeft: theme.spacing(0.5)
        },
        delButton: {
            fontSize: 20,
            stroke: theme.palette.text.primary,
            cursor: 'pointer',
            marginLeft: theme.spacing(1)
        }
    })
);
const BindingItem = /*#__PURE__*/ (0,react.memo)(({ platform , identity , tipable , deletable , onUnBind  })=>{
    const t = (0,locales/* useI18N */.M)();
    const { Utils  } = (0,entry_web3/* useWeb3State */.dM)() ?? {};
    const { classes  } = BindingItem_useStyles();
    const networkDescriptor = (0,entry_web3/* useNetworkDescriptor */.Vw)(types/* ChainId.Mainnet */.a_.Mainnet, entry_web3/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const visitingPersona = (0,useActivatedUI/* useCurrentVisitingIdentity */.fb)();
    if (platform === src/* NextIDPlatform.Ethereum */.Vd.Ethereum) {
        return /*#__PURE__*/ (0,jsx_runtime.jsxs)(Stack/* default */.Z, {
            direction: "row",
            justifyContent: "space-between",
            alignItems: "center",
            mx: 1,
            mb: 4,
            className: classes.item,
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Stack/* default */.Z, {
                    direction: "row",
                    alignItems: "center",
                    gap: "12px",
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_src/* ImageIcon */.XB, {
                            size: 18,
                            icon: networkDescriptor?.icon
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.address,
                            children: (0,formatter/* formatEthereumAddress */.j8)(identity, 4)
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(CopyIconButton, {
                            text: identity,
                            className: classes.copy
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Link/* default */.Z, {
                            className: classes.link,
                            href: Utils?.resolveAddressLink?.(1, identity) ?? '',
                            target: "_blank",
                            title: t.view_on_explorer(),
                            rel: "noopener noreferrer",
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(external_link/* default */.Z, {
                                className: classes.linkIcon,
                                size: 14
                            })
                        })
                    ]
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                    children: [
                        tipable ? /*#__PURE__*/ (0,jsx_runtime.jsx)(TipButton/* TipButton */.X, {
                            addresses: [
                                identity
                            ],
                            receiver: visitingPersona.identifier,
                            className: classes.tipButton,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                                className: classes.tipButtonLabel,
                                children: t.tips()
                            })
                        }) : null,
                        deletable ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Delete/* DeleteIcon */.p, {
                            className: classes.delButton,
                            onClick: ()=>onUnBind(identity)
                        }) : null
                    ]
                })
            ]
        });
    }
    return null;
});

// EXTERNAL MODULE: ./src/components/shared/AbstractTab.tsx
var AbstractTab = __webpack_require__(77522);
;// CONCATENATED MODULE: ./src/plugins/NextID/components/UnbindPanelUI.tsx













const UnbindPanelUI_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        persona: {
            padding: theme.spacing(1.7),
            marginBottom: theme.spacing(2),
            backgroundColor: theme.palette.background.default,
            borderRadius: 8,
            alignItems: 'center'
        },
        iconContainer: {
            display: 'flex',
            alignItems: 'center',
            marginRight: '4px',
            width: 48,
            height: 48
        },
        name: {
            display: 'flex',
            alignItems: 'center',
            fontSize: 14,
            color: theme.palette.text.primary,
            fontWeight: 500
        },
        identifier: {
            fontSize: 12,
            color: theme.palette.text.primary,
            display: 'flex',
            alignItems: 'center',
            wordBreak: 'break-all'
        },
        subTitle: {
            fontSize: 18,
            lineHeight: '24px',
            fontWeight: 600,
            marginBottom: 11.5,
            color: theme.palette.text.primary
        },
        done: {
            background: '#60DFAB !important',
            color: `${entry/* MaskColorVar.white */.ZN.white} !important`
        },
        loadingIcon: {
            position: 'relative',
            right: -6
        },
        error: {
            color: (0,entry/* getMaskColor */.nb)(theme).redMain,
            paddingLeft: theme.spacing(0.5),
            borderLeft: `solid 2px ${(0,entry/* getMaskColor */.nb)(theme).redMain}`
        }
    })
);
const UnbindPanelUI_SUPPORTED_PLUGINS = [
    entry_web3/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM
];
var DialogTabs;
(function(DialogTabs) {
    DialogTabs[DialogTabs["persona"] = 0] = "persona";
    DialogTabs[DialogTabs["wallet"] = 1] = "wallet";
})(DialogTabs || (DialogTabs = {}));
const UnbindPanelUI = /*#__PURE__*/ (0,react.memo)(({ onPersonaSign , onWalletSign , currentPersona , signature , isBound , title , onClose , open , isCurrentAccount  })=>{
    const t = (0,locales/* useI18N */.M)();
    const { classes  } = UnbindPanelUI_useStyles();
    const pluginId = (0,entry_web3/* useCurrentWeb3NetworkPluginID */.$f)();
    const isSupported = UnbindPanelUI_SUPPORTED_PLUGINS.includes(pluginId);
    const isWalletSigned = !!signature.wallet.value;
    const isPersonaSigned = !!signature.persona.value;
    const state = (0,react.useState)(DialogTabs.persona);
    const tabProps = {
        tabs: [
            {
                label: t.persona(),
                children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                    mt: 3,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.subTitle,
                            children: t.persona()
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsxs)(Stack/* default */.Z, {
                            direction: "row",
                            className: classes.persona,
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                                    className: classes.iconContainer,
                                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Masks/* MasksIcon */.s, {
                                        style: {
                                            fontSize: '48px'
                                        }
                                    })
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                            className: classes.name,
                                            children: currentPersona?.nickname
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                            className: classes.identifier,
                                            children: (0,src/* formatPersonaFingerprint */.Nb)(currentPersona?.identifier.compressedPoint ?? '', 10)
                                        })
                                    ]
                                })
                            ]
                        }),
                        !isSupported && /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.error,
                            children: t.unsupported_network()
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            my: 3,
                            children: t.unbind_persona_tip()
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(LoadingButton/* default */.Z, {
                            fullWidth: true,
                            disabled: !isBound || !!isPersonaSigned || !isSupported,
                            classes: {
                                loadingIndicatorEnd: classes.loadingIcon
                            },
                            loadingPosition: "end",
                            className: isPersonaSigned ? classes.done : '',
                            loading: signature.persona.loading,
                            variant: "contained",
                            onClick: onPersonaSign,
                            endIcon: isPersonaSigned ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Done/* default */.Z, {
                                sx: {
                                    color: entry/* MaskColorVar.white */.ZN.white
                                }
                            }) : null,
                            loadingIndicator: /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_src/* LoadingAnimation */.p6, {}),
                            children: isPersonaSigned ? t.done() : t.persona_sign()
                        })
                    ]
                }),
                sx: {
                    p: 0
                }
            },
            {
                label: t.wallet(),
                children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                    mt: 3,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.subTitle,
                            children: t.wallet()
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(WalletStatusBox/* WalletStatusBox */.C, {
                            disableChange: true
                        }),
                        !isSupported && /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.error,
                            children: t.unsupported_network()
                        }),
                        !isCurrentAccount && /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.error,
                            children: t.unbind_wallet_same_account_error()
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            my: 3,
                            children: t.unbind_wallet_tip()
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(LoadingButton/* default */.Z, {
                            fullWidth: true,
                            classes: {
                                loadingIndicatorEnd: classes.loadingIcon
                            },
                            loadingPosition: "end",
                            disabled: !isCurrentAccount || !!isWalletSigned || !isSupported,
                            className: isWalletSigned ? classes.done : '',
                            loading: signature.wallet.loading,
                            variant: "contained",
                            onClick: onWalletSign,
                            endIcon: isWalletSigned ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Done/* default */.Z, {
                                sx: {
                                    color: entry/* MaskColorVar.white */.ZN.white
                                }
                            }) : null,
                            loadingIndicator: /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_src/* LoadingAnimation */.p6, {}),
                            children: isWalletSigned ? t.done() : t.wallet_sign()
                        })
                    ]
                }),
                sx: {
                    p: 0
                }
            }, 
        ],
        state
    };
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_src/* InjectedDialog */.Fl, {
        open: open,
        title: title,
        onClose: onClose,
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(DialogContent/* default */.Z, {
            style: {
                padding: '24px'
            },
            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(AbstractTab/* default */.Z, {
                height: "auto",
                ...tabProps
            })
        })
    });
});

;// CONCATENATED MODULE: ./src/plugins/NextID/components/UnbindConfirm.tsx






const UnbindConfirm_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        wrapper: {
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            flexDirection: 'column',
            padding: '24px !important'
        },
        title: {
            fontSize: '16px',
            fontWeight: 500,
            marginBottom: '24px'
        },
        content: {
            marginBottom: '36px',
            color: theme.palette.grey[700]
        },
        confirmButton: {
            width: '100%',
            marginBottom: '16px',
            backgroundColor: 'red',
            color: theme.palette.common.white
        },
        cancelButton: {
            width: '100%',
            marginBottom: '16px'
        }
    })
);
var UnbindConfirm_DialogTabs;
(function(DialogTabs) {
    DialogTabs[DialogTabs["persona"] = 0] = "persona";
    DialogTabs[DialogTabs["wallet"] = 1] = "wallet";
})(UnbindConfirm_DialogTabs || (UnbindConfirm_DialogTabs = {}));
const UnbindConfirm = /*#__PURE__*/ (0,react.memo)(({ onClose , unbindAddress , onConfirm  })=>{
    const t = (0,locales/* useI18N */.M)();
    const { classes  } = UnbindConfirm_useStyles();
    const { Utils  } = (0,entry_web3/* useWeb3State */.dM)();
    const [isVisible, setVisible] = (0,react.useState)(true);
    const handleConfirm = ()=>{
        onConfirm();
        setVisible(false);
    };
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(entry/* MaskDialog */.Df, {
        open: !!unbindAddress && isVisible,
        maxWidth: "xs",
        title: "",
        children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(DialogContent/* default */.Z, {
            className: classes.wrapper,
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                    className: classes.title,
                    children: [
                        t.delete(),
                        " ",
                        Utils?.formatAddress?.(unbindAddress, 4),
                        " \uFF1F"
                    ]
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(Box/* default */.Z, {
                    className: classes.content,
                    children: t.disconnect_warning()
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                    className: classes.confirmButton,
                    onClick: handleConfirm,
                    children: t.confirm()
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                    className: classes.cancelButton,
                    onClick: onClose,
                    children: t.cancel()
                })
            ]
        })
    });
});

;// CONCATENATED MODULE: ./src/plugins/NextID/components/UnbindDialog.tsx















const UnbindDialog = /*#__PURE__*/ (0,react.memo)(({ unbindAddress , onClose , persona , onUnBound , bounds  })=>{
    const account = (0,useAccount/* useAccount */.m)();
    const t = (0,locales/* useI18N */.M)();
    const [openSecondDialog, setSecondDialog] = (0,react.useState)(false);
    const { showSnackbar  } = (0,entry/* useCustomSnackbar */.Ii)();
    const currentIdentifier = persona.identifier;
    const isBound = !!bounds.find((x)=>(0,utils_address/* isSameAddress */.Wr)(x.identity, unbindAddress)
    );
    const { value: message  } = useBindPayload(src/* NextIDAction.Delete */.BU.Delete, unbindAddress, persona.publicHexKey);
    const [personaSignState, handlePersonaSign] = usePersonaSign(message?.signPayload, currentIdentifier);
    const [walletSignState, handleWalletSign] = useWalletSign(message?.signPayload, unbindAddress);
    (0,useAsyncRetry/* default */.Z)(async ()=>{
        if (!personaSignState.value && !walletSignState.value) return;
        if (!message || !persona.publicHexKey) return;
        try {
            await web3_providers_src/* NextIDProof.bindProof */.q7.bindProof(message.uuid, persona.publicHexKey, src/* NextIDAction.Delete */.BU.Delete, src/* NextIDPlatform.Ethereum */.Vd.Ethereum, unbindAddress, message.createdAt, {
                walletSignature: walletSignState?.value,
                signature: personaSignState?.value?.signature.signature
            });
            showSnackbar(t.notify_wallet_sign_request_title(), {
                variant: 'success',
                message: t.notify_wallet_sign_request_success()
            });
            shared/* MaskMessages.events.ownProofChanged.sendToAll */.ql.events.ownProofChanged.sendToAll();
            await (0,esm/* delay */.gw)(2000);
            onUnBound();
            onClose();
        } catch  {
            showSnackbar(t.notify_wallet_sign_request_title(), {
                variant: 'error',
                message: t.notify_wallet_sign_request_failed()
            });
        }
    }, [
        walletSignState.value,
        personaSignState.value,
        unbindAddress
    ]);
    const handleConfirm = (0,react.useCallback)(()=>setSecondDialog(true)
    , []);
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(UnbindConfirm, {
                unbindAddress: unbindAddress,
                onConfirm: handleConfirm,
                onClose: onClose
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(UnbindPanelUI, {
                title: t.unbind_dialog_title(),
                onClose: onClose,
                open: !!unbindAddress && openSecondDialog,
                currentPersona: persona,
                onPersonaSign: handlePersonaSign,
                onWalletSign: handleWalletSign,
                isCurrentAccount: (0,utils_address/* isSameAddress */.Wr)(account, unbindAddress),
                signature: {
                    persona: {
                        value: personaSignState.value?.signature.signature,
                        loading: personaSignState.loading
                    },
                    wallet: walletSignState
                },
                isBound: isBound
            })
        ]
    });
});

;// CONCATENATED MODULE: ./src/plugins/NextID/components/NextIdPage.tsx

















const NextIdPage_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        tip: {
            padding: theme.spacing(1.5),
            marginBottom: theme.spacing(2),
            backgroundColor: theme.palette.background.default,
            borderRadius: 8,
            alignItems: 'center',
            color: theme.palette.text.primary
        },
        verifyIntro: {
            fontSize: '14px',
            fontWeight: 500,
            marginBottom: '12px'
        },
        verifyDetail: {
            fontSize: '14px',
            fontWeight: 400,
            color: theme.palette.grey[700]
        },
        verifyInstruction: {
            fontSize: '14px',
            fontWeight: 400,
            color: theme.palette.grey[700]
        },
        skeleton: {
            borderRadius: 8,
            margin: theme.spacing(1),
            marginTop: 0,
            backgroundColor: theme.palette.background.default,
            height: '48px'
        }
    })
);
function NextIdPage({ personaList  }) {
    const t = (0,locales/* useI18N */.M)();
    const { classes  } = NextIdPage_useStyles();
    const currentProfileIdentifier = (0,useActivatedUI/* useLastRecognizedIdentity */.FB)();
    const visitingPersonaIdentifier = (0,useActivatedUI/* useCurrentVisitingIdentity */.fb)();
    const personaConnectStatus = (0,usePersonaConnectStatus/* usePersonaConnectStatus */.x)();
    const { reset , isVerified  } = (0,useNextID/* useNextIDConnectStatus */.EP)();
    const [openBindDialog, toggleBindDialog] = (0,react.useState)(false);
    const [unbindAddress, setUnBindAddress] = (0,react.useState)();
    const platform = social_network/* activatedSocialNetworkUI.configuration.nextIDConfig */.LM.configuration.nextIDConfig?.platform;
    const isOwn = currentProfileIdentifier.identifier.toText() === visitingPersonaIdentifier.identifier.toText();
    const tipable = !isOwn;
    const personaActionButton = (0,react.useMemo)(()=>{
        if (!personaConnectStatus.action) return null;
        const button = personaConnectStatus.hasPersona ? t.connect_persona() : t.create_persona();
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
            variant: "contained",
            onClick: personaConnectStatus.action,
            children: button
        });
    }, [
        personaConnectStatus,
        t
    ]);
    const { value: currentPersona , loading: loadingPersona  } = (0,useAsyncRetry/* default */.Z)(async ()=>{
        if (!visitingPersonaIdentifier) return;
        return service/* default.Identity.queryPersonaByProfile */.ZP.Identity.queryPersonaByProfile(visitingPersonaIdentifier.identifier);
    }, [
        visitingPersonaIdentifier,
        personaConnectStatus.hasPersona
    ]);
    const { value: isAccountVerified , loading: loadingVerifyInfo  } = (0,useAsync/* default */.Z)(async ()=>{
        if (!currentPersona?.publicHexKey) return;
        return web3_providers_src/* NextIDProof.queryIsBound */.q7.queryIsBound(currentPersona.publicHexKey, platform, visitingPersonaIdentifier.identifier.userId);
    }, [
        isOwn,
        currentPersona,
        visitingPersonaIdentifier,
        isVerified
    ]);
    const { value: bindings , loading , retry: retryQueryBinding ,  } = (0,useAsyncRetry/* default */.Z)(async ()=>{
        if (!currentPersona) return;
        return web3_providers_src/* NextIDProof.queryExistedBindingByPersona */.q7.queryExistedBindingByPersona(currentPersona.publicHexKey);
    }, [
        currentPersona,
        isOwn
    ]);
    const onVerify = async ()=>{
        reset();
        const firstTab = constants/* TAB_SELECTOR */.tt?.[platform]?.evaluate()?.querySelector('div')?.parentNode?.firstChild;
        firstTab.click();
    };
    if (personaActionButton) {
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(Stack/* default */.Z, {
            justifyContent: "center",
            direction: "row",
            mt: "24px",
            children: personaActionButton
        });
    }
    if (loading || loadingPersona || loadingVerifyInfo) {
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
            children: Array.from({
                length: 2
            }).fill(0).map((_, i)=>/*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Skeleton/* default */.Z, {
                        className: classes.skeleton,
                        animation: "wave",
                        variant: "rectangular"
                    })
                }, i)
            )
        });
    }
    if (!isAccountVerified && isOwn) {
        return /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                    className: classes.tip,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.verifyIntro,
                            children: t.verify_Twitter_ID_intro()
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.verifyDetail,
                            children: t.verify_Twitter_ID()
                        })
                    ]
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(Stack/* default */.Z, {
                    justifyContent: "center",
                    direction: "row",
                    mt: "24px",
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                        variant: "contained",
                        onClick: onVerify,
                        children: t.verify_Twitter_ID_button()
                    })
                })
            ]
        });
    }
    if (bindings?.proofs.filter((proof)=>proof.platform === src/* NextIDPlatform.Ethereum */.Vd.Ethereum
    ).length) {
        return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Box/* default */.Z, {
                            children: bindings.proofs.map((x)=>/*#__PURE__*/ (0,jsx_runtime.jsx)(BindingItem, {
                                    deletable: isOwn,
                                    tipable: tipable,
                                    platform: x.platform,
                                    identity: x.identity,
                                    onUnBind: setUnBindAddress
                                }, x.identity)
                            )
                        }),
                        isOwn && /*#__PURE__*/ (0,jsx_runtime.jsx)(Stack/* default */.Z, {
                            justifyContent: "center",
                            direction: "row",
                            mt: "24px",
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                                variant: "contained",
                                onClick: ()=>toggleBindDialog(true)
                                ,
                                children: t.add_wallet_button()
                            })
                        })
                    ]
                }),
                openBindDialog && currentPersona && isOwn && /*#__PURE__*/ (0,jsx_runtime.jsx)(BindDialog, {
                    open: openBindDialog,
                    onClose: ()=>toggleBindDialog(false)
                    ,
                    persona: currentPersona,
                    bounds: bindings?.proofs ?? [],
                    onBound: retryQueryBinding
                }),
                unbindAddress && currentPersona && isOwn && /*#__PURE__*/ (0,jsx_runtime.jsx)(UnbindDialog, {
                    unbindAddress: unbindAddress,
                    onClose: ()=>setUnBindAddress(undefined)
                    ,
                    persona: currentPersona,
                    onUnBound: retryQueryBinding,
                    bounds: bindings?.proofs ?? []
                })
            ]
        });
    }
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                children: [
                    isOwn ? /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                        className: classes.tip,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                className: classes.verifyIntro,
                                children: t.verify_wallet_intro()
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                className: classes.verifyDetail,
                                children: t.verify_wallet()
                            })
                        ]
                    }) : /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                        className: classes.tip,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                className: classes.verifyIntro,
                                children: t.connect_wallet__other_user_tip_intro()
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                className: classes.verifyInstruction,
                                children: t.connect_wallet_other_user_instruction()
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                className: classes.verifyDetail,
                                children: t.connect_wallet_other_user_tip1()
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                className: classes.verifyDetail,
                                children: t.connect_wallet_other_user_tip2()
                            })
                        ]
                    }),
                    isOwn && /*#__PURE__*/ (0,jsx_runtime.jsx)(Stack/* default */.Z, {
                        justifyContent: "center",
                        direction: "row",
                        mt: "24px",
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                            variant: "contained",
                            onClick: ()=>toggleBindDialog(true)
                            ,
                            children: t.verify_wallet_button()
                        })
                    })
                ]
            }),
            openBindDialog && currentPersona && isOwn && /*#__PURE__*/ (0,jsx_runtime.jsx)(BindDialog, {
                open: openBindDialog,
                onClose: ()=>toggleBindDialog(false)
                ,
                persona: currentPersona,
                bounds: bindings?.proofs ?? [],
                onBound: retryQueryBinding
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/plugins/NextID/SNSAdaptor/index.tsx









const sns = {
    ...base/* base */.u,
    init (signal, context) {
        setupStorage(context.createKVStorage('memory', storageDefaultValue));
    },
    ProfileTabs: [
        {
            ID: `${constants/* PLUGIN_ID */.Uu}_tabContent`,
            label: 'Wallet',
            priority: 10,
            UI: {
                TabContent: ({ personaList =src/* EMPTY_LIST */.rP  })=>/*#__PURE__*/ (0,jsx_runtime.jsx)(NextIdPage, {
                        personaList: personaList
                    })
            }
        }, 
    ],
    GlobalInjection () {
        if (!shared/* Flags.next_id_tip_enabled */.vU.next_id_tip_enabled) return null;
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(RootContext, {
            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TipTaskManager, {})
        });
    },
    PostActions () {
        if (!shared/* Flags.next_id_tip_enabled */.vU.next_id_tip_enabled) return null;
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(RootContext, {
            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TipButton/* PostTipButton */.i, {})
        });
    }
};
/* harmony default export */ const SNSAdaptor = (sns);


/***/ }),

/***/ 68487:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "i": () => (/* binding */ PostTipButton),
  "X": () => (/* binding */ TipButton)
});

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.0.0/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(71999);
// EXTERNAL MODULE: ../icons/utils/index.tsx
var utils = __webpack_require__(15679);
;// CONCATENATED MODULE: ../icons/plugins/TipCoin.tsx


const TipCoin = (0,utils/* createIcon */.I)('TipCoin', /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [
        /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M3.6 20.4H12C16.6392 20.4 20.4 16.6392 20.4 12C20.4 7.36081 16.6392 3.6 12 3.6C7.36081 3.6 3.6 7.36081 3.6 12V20.4ZM12 2C6.47715 2 2 6.47715 2 12V20.5047C2 21.3305 2.66948 22 3.49533 22H12C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z",
            fill: "currentColor"
        }),
        /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
            d: "M7.67344 16.718C7.54433 16.5875 7.47205 16.4112 7.47226 16.2273C7.47247 16.0434 7.54516 15.8666 7.67457 15.7354L8.4109 14.999L8.35513 14.906C8.14516 14.5665 7.9938 14.194 7.90737 13.8039C7.83335 13.5063 7.80321 13.1993 7.81787 12.8926C7.83412 12.7107 7.92117 12.5421 8.06025 12.4232C8.19933 12.3043 8.37932 12.2446 8.56146 12.257C8.7436 12.2693 8.9133 12.3527 9.03402 12.4893C9.15474 12.6258 9.21682 12.8045 9.20688 12.9868C9.2042 13.1567 9.22354 13.326 9.26442 13.4907C9.35189 13.8916 9.5519 14.2587 9.84101 14.5491C9.98886 14.7089 10.168 14.8366 10.3673 14.9243C10.5667 15.012 10.782 15.0579 11.0001 15.0591C11.1032 15.058 11.205 15.035 11.2987 14.9917C11.3924 14.9483 11.4759 14.8856 11.5438 14.8077C11.8188 14.4655 11.7824 13.9828 11.3917 12.7397L11.3001 12.4541C11.0597 11.8096 10.9189 11.132 10.8826 10.4443C10.8936 9.91804 11.0965 9.41312 11.453 9.02444C11.8096 8.63577 12.2952 8.3901 12.8188 8.33361C13.4181 8.28161 14.0176 8.42285 14.5293 8.73664L14.6206 8.79066L15.3606 8.05061C15.4939 7.93224 15.6672 7.86907 15.845 7.874C16.0229 7.87893 16.1918 7.95159 16.3174 8.07714C16.4429 8.20269 16.5156 8.37165 16.5205 8.54948C16.5255 8.7273 16.4623 8.90058 16.3439 9.03389L15.6076 9.77022L15.6642 9.86233C15.8734 10.2023 16.0247 10.5747 16.112 10.9645C16.1855 11.2622 16.2157 11.5691 16.2015 11.8757C16.1967 11.9681 16.1736 12.0586 16.1335 12.1421C16.0934 12.2255 16.0371 12.3002 15.9679 12.3618C15.8987 12.4233 15.8179 12.4705 15.7304 12.5006C15.6429 12.5306 15.5503 12.543 15.4581 12.5368C15.3659 12.5307 15.2759 12.5063 15.1934 12.4649C15.1108 12.4236 15.0375 12.3662 14.9775 12.2961C14.9176 12.2259 14.8723 12.1445 14.8442 12.0566C14.8162 11.9686 14.806 11.8758 14.8142 11.7837C14.8171 11.6135 14.7975 11.4437 14.756 11.2787C14.6701 10.8772 14.4707 10.5091 14.1814 10.2184C14.0335 10.0586 13.8542 9.93104 13.6548 9.84352C13.4553 9.756 13.2398 9.71038 13.0216 9.7095C12.9185 9.71069 12.8167 9.73361 12.7229 9.77678C12.6291 9.81994 12.5453 9.88237 12.4771 9.96C12.203 10.3013 12.2383 10.7851 12.6307 12.0277L12.7215 12.3126C12.9613 12.9574 13.1018 13.6353 13.1381 14.3232C13.1281 14.8495 12.9256 15.3548 12.5691 15.7435C12.2125 16.1322 11.7265 16.3775 11.2028 16.433C10.604 16.485 10.005 16.3438 9.49396 16.03L9.40184 15.9751L8.66092 16.716C8.59617 16.781 8.51929 16.8326 8.43468 16.8679C8.35006 16.9032 8.25939 16.9214 8.16785 16.9216C8.07631 16.9218 7.98571 16.9039 7.90124 16.869C7.81677 16.834 7.7401 16.7827 7.67562 16.718L7.67344 16.718Z",
            fill: "currentColor"
        })
    ]
}), '0 0 24 24');

// EXTERNAL MODULE: ../plugin-infra/src/entry-content-script.ts + 1 modules
var entry_content_script = __webpack_require__(98541);
// EXTERNAL MODULE: ../shared-base/src/index.ts + 1 modules
var src = __webpack_require__(78144);
// EXTERNAL MODULE: ../theme/src/entry.ts
var entry = __webpack_require__(30232);
// EXTERNAL MODULE: ../web3-providers/src/index.ts
var web3_providers_src = __webpack_require__(92820);
// EXTERNAL MODULE: ../../node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js
var classnames = __webpack_require__(83849);
var classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/uniq.js
var uniq = __webpack_require__(78854);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.0.0/node_modules/react/index.js
var react = __webpack_require__(86248);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useAsyncRetry.js
var useAsyncRetry = __webpack_require__(64452);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useAsyncFn.js
var useAsyncFn = __webpack_require__(30688);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useAsync.js
var useAsync = __webpack_require__(73570);
// EXTERNAL MODULE: ./src/extension/service.ts
var service = __webpack_require__(5027);
// EXTERNAL MODULE: ./src/social-network/index.ts
var social_network = __webpack_require__(3747);
// EXTERNAL MODULE: ./src/plugins/NextID/locales/index.ts + 1 modules
var locales = __webpack_require__(13573);
// EXTERNAL MODULE: ./src/plugins/NextID/messages.ts
var messages = __webpack_require__(81441);
// EXTERNAL MODULE: ./shared/index.ts
var shared = __webpack_require__(62481);
;// CONCATENATED MODULE: ./src/plugins/NextID/components/Tip/TipButton.tsx















const useStyles = (0,entry/* makeStyles */.ZL)()({
    tipButton: {
        cursor: 'pointer',
        display: 'flex',
        justifyContent: 'center',
        alignItems: 'center',
        fontFamily: '-apple-system, system-ui, sans-serif'
    },
    buttonWrapper: {
        // temporarily hard code
        height: 46,
        display: 'flex',
        alignItems: 'center',
        color: '#8899a6'
    },
    postTipButton: {
        cursor: 'pointer',
        width: 34,
        height: 34,
        borderRadius: '100%',
        '&:hover': {
            backgroundColor: 'rgba(20,155,240,0.1)'
        }
    },
    tooltip: {
        backgroundColor: 'rgb(102,102,102)',
        color: 'white',
        marginTop: '0 !important'
    },
    disabled: {
        opacity: 0.4,
        cursor: 'default'
    }
});
const TipButton = ({ className , receiver , addresses =src/* EMPTY_LIST */.rP , children , tooltipProps , ...rest })=>{
    const { classes  } = useStyles();
    const t = (0,locales/* useI18N */.M)();
    const platform = social_network/* activatedSocialNetworkUI.configuration.nextIDConfig */.LM.configuration.nextIDConfig?.platform;
    const { value: receiverPersona , loading: loadingPersona  } = (0,useAsyncRetry/* default */.Z)(async ()=>{
        if (!receiver) return;
        return service/* default.Identity.queryPersonaByProfile */.ZP.Identity.queryPersonaByProfile(receiver);
    }, [
        receiver
    ]);
    const { value: isAccountVerified , loading: loadingVerifyInfo , retry: retryLoadVerifyInfo ,  } = (0,useAsyncRetry/* default */.Z)(()=>{
        if (!receiverPersona?.publicHexKey || !receiver?.userId) return Promise.resolve(false);
        return web3_providers_src/* NextIDProof.queryIsBound */.q7.queryIsBound(receiverPersona.publicHexKey, platform, receiver.userId, true);
    }, [
        receiverPersona?.publicHexKey,
        platform,
        receiver?.userId
    ]);
    const [walletsState, queryBindings] = (0,useAsyncFn/* default */.Z)(async ()=>{
        if (!receiver) return src/* EMPTY_LIST */.rP;
        const persona = await service/* default.Identity.queryPersonaByProfile */.ZP.Identity.queryPersonaByProfile(receiver);
        if (!persona?.publicHexKey) return src/* EMPTY_LIST */.rP;
        const bindings = await web3_providers_src/* NextIDProof.queryExistedBindingByPersona */.q7.queryExistedBindingByPersona(persona.publicHexKey, true);
        if (!bindings) return src/* EMPTY_LIST */.rP;
        const wallets = bindings.proofs.filter((p)=>p.platform === src/* NextIDPlatform.Ethereum */.Vd.Ethereum
        ).map((p)=>p.identity
        );
        return wallets;
    }, [
        receiver
    ]);
    (0,useAsync/* default */.Z)(queryBindings, [
        queryBindings
    ]);
    (0,react.useEffect)(()=>{
        return shared/* MaskMessages.events.ownProofChanged.on */.ql.events.ownProofChanged.on(()=>{
            retryLoadVerifyInfo();
            queryBindings();
        });
    }, []);
    const allAddresses = (0,react.useMemo)(()=>{
        return (0,uniq/* default */.Z)([
            ...walletsState.value || [],
            ...addresses
        ]);
    }, [
        walletsState.value,
        addresses
    ]);
    const disabled = loadingPersona || loadingVerifyInfo || !isAccountVerified || allAddresses.length === 0;
    const sendTip = (0,react.useCallback)(async (evt)=>{
        evt.stopPropagation();
        evt.preventDefault();
        if (disabled) return;
        if (walletsState.loading || !walletsState.value) {
            await queryBindings();
        }
        if (!allAddresses.length || !receiver?.userId) return;
        messages/* PluginNextIdMessages.tipTask.sendToLocal */.$.tipTask.sendToLocal({
            recipientSnsId: receiver.userId,
            addresses: allAddresses
        });
    }, [
        disabled,
        walletsState,
        allAddresses,
        receiver?.userId,
        queryBindings
    ]);
    const dom = /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
        className: classnames_default()(className, classes.tipButton, disabled ? classes.disabled : null),
        ...rest,
        role: "button",
        onClick: sendTip,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(TipCoin, {
                viewBox: "0 0 24 24"
            }),
            children
        ]
    });
    if (disabled) return /*#__PURE__*/ (0,jsx_runtime.jsx)(entry/* ShadowRootTooltip */.p_, {
        classes: {
            tooltip: classes.tooltip
        },
        title: t.tip_wallets_missed(),
        placement: "bottom",
        arrow: false,
        ...tooltipProps,
        children: dom
    });
    return dom;
};
const PostTipButton = ({ className , ...rest })=>{
    const identifier = entry_content_script/* usePostInfoDetails.author */.H9.author();
    const { classes  } = useStyles();
    return /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
        className: classes.buttonWrapper,
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TipButton, {
            className: classnames_default()(classes.postTipButton, className),
            ...rest,
            receiver: identifier
        })
    });
};


/***/ }),

/***/ 13573:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "M": () => (/* reexport */ useI18N)
});

// UNUSED EXPORTS: Translate

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.0.0/node_modules/react/index.js
var react = __webpack_require__(86248);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-i18next@11.16.5_react-dom@18.0.0+react@18.0.0/node_modules/react-i18next/dist/es/Trans.js
var Trans = __webpack_require__(31008);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-i18next@11.16.5_react-dom@18.0.0+react@18.0.0/node_modules/react-i18next/dist/es/useTranslation.js
var useTranslation = __webpack_require__(43966);
;// CONCATENATED MODULE: ./src/plugins/NextID/locales/i18n_generated.js
/* eslint-disable */


const bind = (i18nKey) => (props) => (0,react.createElement)(Trans/* Trans */.c, { i18nKey, ns: "com.mask.next_id", ...props })
function useI18N() {
    const { t } = (0,useTranslation/* useTranslation */.$)("com.mask.next_id")
    return (0,react.useMemo)(
        function proxyBasedHooks() {
    return new Proxy({ __proto__: null }, {
        get(target, key) {
            if (target[key])
                return target[key];
            return (target[key] = t.bind(null, key));
        },
    });
},
        [t],
    )
}
const Translate = function proxyBasedTrans() {
    return new Proxy({ __proto__: null }, {
        get(target, key) {
            if (target[key])
                return target[key];
            return (target[key] = bind(key));
        },
    });
}()
;// CONCATENATED MODULE: ./src/plugins/NextID/locales/index.ts
// This file is auto generated. DO NOT EDIT
// Run `npx gulp sync-languages` to regenerate.
// Default fallback language in a family of languages are chosen by the alphabet order
// To overwrite this, please overwrite packages/scripts/src/locale-kit-next/index.ts



/***/ }),

/***/ 81441:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "$": () => (/* binding */ PluginNextIdMessages)
/* harmony export */ });
/* harmony import */ var _masknet_plugin_infra__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79936);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6736);


if (false) {}
const PluginNextIdMessages = (0,_masknet_plugin_infra__WEBPACK_IMPORTED_MODULE_0__/* .createPluginMessage */ .I4)(_constants__WEBPACK_IMPORTED_MODULE_1__/* .PLUGIN_ID */ .Uu);


/***/ }),

/***/ 15574:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "c": () => (/* binding */ useGasConfig)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86248);
/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(73570);
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(42263);
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bignumber_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _masknet_web3_shared_evm__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(80526);
/* harmony import */ var _masknet_web3_shared_evm__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(66394);
/* harmony import */ var _Wallet_messages__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(84797);





function useGasConfig(chainId) {
    const [gasConfig, setGasConfig] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();
    const { value: gasPrice1  } = (0,react_use__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)(async ()=>{
        try {
            if (gasConfig) {
                return new (bignumber_js__WEBPACK_IMPORTED_MODULE_1___default())(((0,_masknet_web3_shared_evm__WEBPACK_IMPORTED_MODULE_4__/* .isEIP1559Supported */ .U1)(chainId) ? gasConfig.maxFeePerGas : gasConfig.gasPrice) ?? 0).toString();
            } else {
                if ((0,_masknet_web3_shared_evm__WEBPACK_IMPORTED_MODULE_4__/* .isEIP1559Supported */ .U1)(chainId)) {
                    const response = await _Wallet_messages__WEBPACK_IMPORTED_MODULE_2__/* .WalletRPC.getEstimateGasFees */ .V.getEstimateGasFees(chainId);
                    const maxFeePerGas = (0,_masknet_web3_shared_evm__WEBPACK_IMPORTED_MODULE_5__/* .formatGweiToWei */ .nU)(response?.medium?.suggestedMaxFeePerGas ?? 0).toFixed(0);
                    const maxPriorityFeePerGas = (0,_masknet_web3_shared_evm__WEBPACK_IMPORTED_MODULE_5__/* .formatGweiToWei */ .nU)(response?.medium?.suggestedMaxPriorityFeePerGas ?? 0).toFixed(0);
                    setGasConfig({
                        maxFeePerGas,
                        maxPriorityFeePerGas
                    });
                    return maxFeePerGas;
                } else {
                    const response = await _Wallet_messages__WEBPACK_IMPORTED_MODULE_2__/* .WalletRPC.getGasPriceDictFromDeBank */ .V.getGasPriceDictFromDeBank(chainId);
                    const gasPrice = new (bignumber_js__WEBPACK_IMPORTED_MODULE_1___default())(response?.data.normal.price ?? 0).toString();
                    setGasConfig({
                        gasPrice
                    });
                    return gasPrice;
                }
            }
        } catch  {
            return '0';
        }
    }, [
        chainId,
        gasConfig
    ]);
    return {
        gasPrice: gasPrice1,
        gasConfig,
        setGasConfig
    };
}


/***/ }),

/***/ 38587:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "T": () => (/* binding */ EthereumChainBoundary)
});

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.0.0/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(71999);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.0.0/node_modules/react/index.js
var react = __webpack_require__(86248);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Box/Box.js
var Box = __webpack_require__(85139);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Typography/Typography.js + 1 modules
var Typography = __webpack_require__(37253);
// EXTERNAL MODULE: ../theme/src/entry.ts
var entry = __webpack_require__(30232);
// EXTERNAL MODULE: ../plugin-infra/src/entry-dom.ts + 1 modules
var entry_dom = __webpack_require__(3267);
// EXTERNAL MODULE: ../plugin-infra/src/entry-web3.ts
var entry_web3 = __webpack_require__(67071);
// EXTERNAL MODULE: ../web3-shared/evm/context/index.tsx
var context = __webpack_require__(24790);
;// CONCATENATED MODULE: ../web3-shared/evm/hooks/useAllowTestnet.ts

function useAllowTestnet() {
    return (0,context/* useWeb3StateContext */.N9)().allowTestnet;
}

// EXTERNAL MODULE: ../web3-shared/evm/hooks/useChainId.ts
var useChainId = __webpack_require__(31174);
// EXTERNAL MODULE: ../web3-shared/evm/utils/chainDetailed.ts
var chainDetailed = __webpack_require__(80526);
// EXTERNAL MODULE: ../web3-shared/evm/types/index.ts
var types = __webpack_require__(65506);
// EXTERNAL MODULE: ../web3-shared/evm/pipes/index.ts
var pipes = __webpack_require__(55678);
// EXTERNAL MODULE: ../web3-shared/evm/utils/address.ts
var address = __webpack_require__(2239);
// EXTERNAL MODULE: ../shared-base-ui/src/index.ts
var src = __webpack_require__(53242);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@dimensiondev+kit@0.0.0-20220228054820-f2378be/node_modules/@dimensiondev/kit/esm/index.js + 1 modules
var esm = __webpack_require__(28807);
// EXTERNAL MODULE: ./src/extension/options-page/DashboardComponents/ActionButton.tsx
var ActionButton = __webpack_require__(83463);
// EXTERNAL MODULE: ./src/plugins/Wallet/settings.ts
var settings = __webpack_require__(94232);
// EXTERNAL MODULE: ./src/utils/index.ts + 7 modules
var utils = __webpack_require__(6955);
// EXTERNAL MODULE: ./src/plugins/Wallet/messages.ts
var messages = __webpack_require__(84797);
// EXTERNAL MODULE: ./src/extension/service.ts
var service = __webpack_require__(5027);
// EXTERNAL MODULE: ./src/settings/settings.ts
var settings_settings = __webpack_require__(80917);
;// CONCATENATED MODULE: ./src/web3/UI/EthereumChainBoundary.tsx















const useStyles = (0,entry/* makeStyles */.ZL)()(()=>({})
);
function EthereumChainBoundary(props) {
    const { t  } = (0,utils/* useI18N */.M1)();
    const pluginID = (0,entry_web3/* useCurrentWeb3NetworkPluginID */.$f)();
    const plugin = (0,entry_dom/* useActivatedPlugin */.Rc)(pluginID, 'any');
    const account = (0,entry_web3/* useAccount */.mA)();
    const chainId = (0,useChainId/* useChainId */.xx)();
    const allowTestnet = useAllowTestnet();
    const providerType = (0,src/* useValueRef */.E)(settings/* currentProviderSettings */.t1);
    const { noSwitchNetworkTip =false  } = props;
    const classes = (0,entry/* useStylesExtends */.Bc)(useStyles(), props);
    const expectedChainId = props.chainId;
    const expectedNetwork = (0,chainDetailed/* getChainName */.qz)(expectedChainId);
    const actualChainId = chainId;
    const actualNetwork = (0,chainDetailed/* getChainName */.qz)(actualChainId);
    // if false then it will not guide the user to switch the network
    const isAllowed = (0,chainDetailed/* isChainIdValid */.Ji)(expectedChainId, allowTestnet) && !!account && providerType !== types/* ProviderType.Coin98 */.lP.Coin98;
    // is the actual chain id matched with the expected one?
    const isChainMatched = actualChainId === expectedChainId;
    const isPluginMatched = pluginID === entry_web3/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM;
    // is the actual chain id a valid one even if it does not match with the expected one?
    const isValid = props?.isValidChainId?.(actualChainId, expectedChainId) ?? false;
    const { openDialog: openSelectProviderDialog  } = (0,src/* useRemoteControlledDialog */.F$)(messages/* WalletMessages.events.selectProviderDialogUpdated */.R.events.selectProviderDialogUpdated);
    // #region connect wallet dialog
    const { setDialog: setConnectWalletDialog  } = (0,src/* useRemoteControlledDialog */.F$)(messages/* WalletMessages.events.connectWalletDialogUpdated */.R.events.connectWalletDialogUpdated, (ev)=>{
        if (ev.open) return;
    });
    // #endregion
    // request ethereum-compatible network
    const networkType = (0,chainDetailed/* getNetworkTypeFromChainId */._T)(expectedChainId);
    const onSwitchChain = (0,react.useCallback)(async ()=>{
        // a short time loading makes the user fells better
        await (0,esm/* delay */.gw)(1000);
        if (!isAllowed) return;
        const switchToChain = async ()=>{
            // read the chain detailed from the built-in chain list
            const chainDetailedCAIP = (0,chainDetailed/* getChainDetailedCAIP */.EX)(expectedChainId);
            if (!chainDetailedCAIP) throw new Error('Unknown network type.');
            // if mask wallet was used it can switch network automatically
            if (providerType === types/* ProviderType.MaskWallet */.lP.MaskWallet) {
                await messages/* WalletRPC.updateAccount */.V.updateAccount({
                    chainId: expectedChainId
                });
                return;
            }
            if (!networkType) return;
            try {
                const overrides = {
                    chainId: expectedChainId,
                    providerType
                };
                await Promise.race([
                    (async ()=>{
                        await (0,esm/* delay */.gw)(30 /* seconds */  * 1000 /* milliseconds */ );
                        throw new Error('Timeout!');
                    })(),
                    networkType === types/* NetworkType.Ethereum */.td.Ethereum ? service/* default.Ethereum.switchEthereumChain */.ZP.Ethereum.switchEthereumChain(expectedChainId, overrides) : service/* default.Ethereum.addEthereumChain */.ZP.Ethereum.addEthereumChain(chainDetailedCAIP, account, overrides), 
                ]);
                // recheck
                const chainIdHex = await service/* default.Ethereum.getChainId */.ZP.Ethereum.getChainId(overrides);
                if (Number.parseInt(chainIdHex, 16) !== expectedChainId) throw new Error('Failed to switch chain.');
            } catch  {
                throw new Error(`Switch Chain Error: Make sure your wallet is on the ${(0,pipes/* resolveNetworkName */.nW)(networkType)} network.`);
            }
        };
        const switchToPlugin = async ()=>{
            settings_settings/* pluginIDSettings.value */.tR.value = entry_web3/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM;
        };
        if (!isChainMatched) await switchToChain();
        if (!isPluginMatched) {
            await switchToPlugin();
            if (!networkType || networkType !== types/* NetworkType.Ethereum */.td.Ethereum || (0,address/* isValidAddress */.At)(account)) return;
            setConnectWalletDialog({
                open: true,
                providerType: types/* ProviderType.MetaMask */.lP.MetaMask,
                networkType
            });
        }
    }, [
        account,
        isAllowed,
        isChainMatched,
        isPluginMatched,
        providerType,
        expectedChainId
    ]);
    const renderBox = (children)=>{
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(Box/* default */.Z, {
            className: props.className,
            display: "flex",
            flexDirection: "column",
            alignItems: "center",
            sx: !props.disablePadding ? {
                paddingTop: 1,
                paddingBottom: 1
            } : null,
            children: children
        });
    };
    if (!account) return renderBox(/*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                color: "textPrimary",
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                    children: t('plugin_wallet_connect_wallet_tip')
                })
            }),
            !props.hiddenConnectButton ? /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                variant: "contained",
                size: "small",
                sx: {
                    marginTop: 1.5
                },
                onClick: openSelectProviderDialog,
                children: t('plugin_wallet_connect_wallet')
            }) : null
        ]
    }));
    if (isChainMatched && isPluginMatched || isValid) return /*#__PURE__*/ (0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
        children: props.children
    });
    if (!isAllowed) return renderBox(/*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
        color: "textPrimary",
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
            children: t('plugin_wallet_not_available_on', {
                network: actualNetwork
            })
        })
    }));
    if (pluginID !== entry_web3/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM) {
        return renderBox(/*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
            children: [
                !noSwitchNetworkTip ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    color: "textPrimary",
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                        children: t('plugin_wallet_not_available_on', {
                            network: plugin?.name?.fallback ?? 'Unknown Plugin'
                        })
                    })
                }) : null,
                isAllowed ? /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* ActionButtonPromise */.Zc, {
                    variant: "contained",
                    size: "small",
                    className: classes.switchButton,
                    sx: props.switchButtonStyle ?? {
                        marginTop: 1.5
                    },
                    init: /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                        children: t('plugin_wallet_switch_network', {
                            network: expectedNetwork
                        })
                    }),
                    waiting: t('plugin_wallet_switch_network_under_going', {
                        network: expectedNetwork
                    }),
                    complete: t('plugin_wallet_switch_network', {
                        network: expectedNetwork
                    }),
                    failed: t('retry'),
                    executor: onSwitchChain,
                    completeOnClick: onSwitchChain,
                    failedOnClick: "use executor",
                    ...props.ActionButtonPromiseProps
                }) : null
            ]
        }));
    }
    return renderBox(/*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            !noSwitchNetworkTip ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                color: "textPrimary",
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                    children: t('plugin_wallet_not_available_on', {
                        network: actualNetwork
                    })
                })
            }) : null,
            isAllowed ? /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* ActionButtonPromise */.Zc, {
                variant: "contained",
                size: "small",
                className: classes.switchButton,
                sx: props.switchButtonStyle ?? {
                    marginTop: 1.5
                },
                init: /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                    children: t('plugin_wallet_switch_network', {
                        network: expectedNetwork
                    })
                }),
                waiting: t('plugin_wallet_switch_network_under_going', {
                    network: expectedNetwork
                }),
                complete: t('plugin_wallet_switch_network', {
                    network: expectedNetwork
                }),
                failed: t('retry'),
                executor: onSwitchChain,
                completeOnClick: onSwitchChain,
                failedOnClick: "use executor",
                ...props.ActionButtonPromiseProps
            }) : null
        ]
    }));
}


/***/ }),

/***/ 79154:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "x": () => (/* binding */ TokenAmountPanel)
});

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.0.0/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(71999);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.0.0/node_modules/react/index.js
var react = __webpack_require__(86248);
// EXTERNAL MODULE: ../../node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js
var classnames = __webpack_require__(83849);
var classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);
// EXTERNAL MODULE: ../../node_modules/.pnpm/bignumber.js@9.0.2/node_modules/bignumber.js/bignumber.js
var bignumber = __webpack_require__(42263);
var bignumber_default = /*#__PURE__*/__webpack_require__.n(bignumber);
// EXTERNAL MODULE: ../theme/src/entry.ts
var entry = __webpack_require__(30232);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/TextField/TextField.js + 2 modules
var TextField = __webpack_require__(7284);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Box/Box.js
var Box = __webpack_require__(85139);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Typography/Typography.js + 1 modules
var Typography = __webpack_require__(37253);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Chip/Chip.js + 1 modules
var Chip = __webpack_require__(46995);
// EXTERNAL MODULE: ../shared/src/index.ts
var src = __webpack_require__(2666);
// EXTERNAL MODULE: ../plugin-infra/src/entry-web3.ts
var entry_web3 = __webpack_require__(67071);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/CircularProgress/CircularProgress.js + 1 modules
var CircularProgress = __webpack_require__(98354);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.6.1_15f9e73798f83ff073fea11061a4a4f7/node_modules/@mui/icons-material/ExpandMore.js
var ExpandMore = __webpack_require__(29579);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.6.1_15f9e73798f83ff073fea11061a4a4f7/node_modules/@mui/icons-material/Error.js
var Error = __webpack_require__(53852);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/noop.js
var noop = __webpack_require__(21122);
// EXTERNAL MODULE: ./src/utils/index.ts + 7 modules
var utils = __webpack_require__(6955);
;// CONCATENATED MODULE: ./src/web3/UI/SelectTokenChip.tsx









const useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    return {
        chip: {
            border: 'none',
            borderRadius: 8,
            paddingLeft: theme.spacing(0.5)
        },
        loadingChip: {
            marginRight: theme.spacing(-0.5)
        },
        icon: {
            color: theme.palette.text.primary,
            pointerEvents: 'none'
        },
        tokenIcon: {
            width: 16,
            height: 16
        }
    };
});
function SelectTokenChip(props) {
    const { t  } = (0,utils/* useI18N */.M1)();
    const { token , error , loading =false , readonly =false , ChipProps  } = props;
    const { classes  } = useStyles();
    if (loading) return /*#__PURE__*/ (0,jsx_runtime.jsx)(Chip/* default */.Z, {
        className: classnames_default()(classes.chip, classes.loadingChip),
        icon: /*#__PURE__*/ (0,jsx_runtime.jsx)(CircularProgress/* default */.Z, {
            size: 16
        }),
        size: "small",
        clickable: false,
        variant: "outlined"
    });
    if (!token) return /*#__PURE__*/ (0,jsx_runtime.jsx)(Chip/* default */.Z, {
        className: classes.chip,
        label: t('plugin_gitcoin_select_a_token'),
        size: "small",
        clickable: !readonly,
        ...ChipProps
    });
    if (token && error) return /*#__PURE__*/ (0,jsx_runtime.jsx)(Chip/* default */.Z, {
        className: classes.chip,
        icon: /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* TokenIcon */.T1, {
            address: token.address,
            name: token.name,
            logoURI: token.logoURI
        }),
        deleteIcon: /*#__PURE__*/ (0,jsx_runtime.jsx)(Error/* default */.Z, {
            className: classes.icon
        }),
        label: token.symbol,
        color: "default",
        size: "small",
        variant: "outlined",
        clickable: !readonly,
        // the delete icon only visible when this callback provided
        onDelete: noop/* default */.Z,
        ...ChipProps
    });
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(Chip/* default */.Z, {
        className: classes.chip,
        icon: /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* TokenIcon */.T1, {
            classes: {
                icon: classes.tokenIcon
            },
            address: token.address,
            name: token.name,
            logoURI: token.logoURI
        }),
        deleteIcon: readonly ? undefined : /*#__PURE__*/ (0,jsx_runtime.jsx)(ExpandMore/* default */.Z, {
            className: classes.icon
        }),
        color: "default",
        size: "small",
        variant: "outlined",
        clickable: !readonly,
        label: token.symbol,
        // the delete icon only visible when this callback provided
        onDelete: readonly ? undefined : noop/* default */.Z,
        ...ChipProps
    });
}

;// CONCATENATED MODULE: ./src/web3/UI/TokenAmountPanel.tsx










const MIN_AMOUNT_LENGTH = 1;
const MAX_AMOUNT_LENGTH = 79;
const TokenAmountPanel_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    return {
        root: {},
        input: {
            '&::-webkit-outer-spin-button, &::-webkit-inner-spin-button': {
                appearance: 'none',
                margin: 0
            },
            appearance: 'textfield'
        },
        max: {
            marginRight: theme.spacing(0.5),
            borderRadius: 8
        },
        token: {
            whiteSpace: 'pre',
            maxWidth: 300,
            paddingLeft: theme.spacing(1)
        },
        balance: {
            whiteSpace: 'nowrap',
            textOverflow: 'ellipsis',
            overflow: 'hidden',
            maxWidth: '80%',
            fontSize: 12,
            top: theme.spacing(0.5),
            position: 'absolute'
        },
        inputShrinkLabel: {
            transform: 'translate(17px, -3px) scale(0.75) !important'
        }
    };
});
function TokenAmountPanel(props) {
    const { amount , maxAmount , balance , token , onAmountChange , maxAmountShares =1 , label , disableToken =false , disableBalance =false , MaxChipProps ,  } = props;
    const { t  } = (0,utils/* useI18N */.M1)();
    const classes = (0,entry/* useStylesExtends */.Bc)(TokenAmountPanel_useStyles(), props);
    const { Utils  } = (0,entry_web3/* useWeb3State */.dM)();
    // #region update amount by self
    const { RE_MATCH_WHOLE_AMOUNT , RE_MATCH_FRACTION_AMOUNT  } = (0,react.useMemo)(()=>({
            RE_MATCH_FRACTION_AMOUNT: new RegExp(`^\\.\\d{0,${token?.decimals}}$`),
            RE_MATCH_WHOLE_AMOUNT: new RegExp(`^\\d*\\.?\\d{0,${token?.decimals}}$`)
        })
    , [
        token?.decimals
    ]);
    const onChange = (0,react.useCallback)((ev)=>{
        const amount_ = ev.currentTarget.value.replace(/,/g, '.');
        if (RE_MATCH_FRACTION_AMOUNT.test(amount_)) onAmountChange(`0${amount_}`);
        else if (amount_ === '' || RE_MATCH_WHOLE_AMOUNT.test(amount_)) onAmountChange(amount_);
    }, [
        onAmountChange,
        RE_MATCH_WHOLE_AMOUNT,
        RE_MATCH_FRACTION_AMOUNT
    ]);
    // #endregion
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(TextField/* default */.Z, {
        className: classes.root,
        label: label,
        fullWidth: true,
        required: true,
        type: "text",
        value: amount,
        variant: "outlined",
        onChange: onChange,
        placeholder: "0.0",
        InputProps: {
            inputProps: {
                autoComplete: 'off',
                autoCorrect: 'off',
                title: 'Token Amount',
                inputMode: 'decimal',
                min: 0,
                minLength: MIN_AMOUNT_LENGTH,
                maxLength: MAX_AMOUNT_LENGTH,
                pattern: '^[0-9]*[.,]?[0-9]*$',
                spellCheck: false,
                className: classes.input
            },
            endAdornment: disableToken ? null : token ? /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                className: classes.token,
                sx: {
                    display: 'flex',
                    flexDirection: 'column',
                    justifyContent: 'center',
                    alignItems: 'flex-end'
                },
                children: [
                    !disableBalance ? /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                        className: classes.balance,
                        color: "textSecondary",
                        variant: "body2",
                        component: "span",
                        children: [
                            t('plugin_ito_list_table_got'),
                            ":",
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* FormattedBalance */.BV, {
                                value: balance,
                                decimals: token.decimals,
                                significant: 6,
                                formatter: Utils?.formatBalance
                            })
                        ]
                    }) : null,
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                        sx: {
                            display: 'flex',
                            alignItems: 'center',
                            marginTop: 2
                        },
                        children: [
                            balance !== '0' && !disableBalance ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Chip/* default */.Z, {
                                classes: {
                                    root: classnames_default()(classes.max, MaxChipProps?.classes?.root),
                                    ...MaxChipProps?.classes
                                },
                                size: "small",
                                label: "MAX",
                                clickable: true,
                                color: "primary",
                                variant: "outlined",
                                onClick: ()=>{
                                    onAmountChange(Utils?.formatBalance?.(new (bignumber_default())(maxAmount ?? balance).dividedBy(maxAmountShares).decimalPlaces(0, 1), token.decimals) ?? '0');
                                },
                                ...MaxChipProps
                            }) : null,
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(SelectTokenChip, {
                                token: token,
                                ...props.SelectTokenChip
                            })
                        ]
                    })
                ]
            }) : /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                className: classes.token,
                sx: {
                    display: 'flex',
                    flexDirection: 'column',
                    justifyContent: 'center',
                    alignItems: 'flex-end',
                    marginTop: 2
                },
                children: [
                    !disableBalance ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                        className: classes.balance,
                        color: "textSecondary",
                        variant: "body2",
                        component: "span",
                        children: "-"
                    }) : null,
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(SelectTokenChip, {
                        token: token,
                        ...props.SelectTokenChip
                    })
                ]
            }),
            ...props.InputProps
        },
        InputLabelProps: {
            shrink: true,
            classes: {
                shrink: classes.inputShrinkLabel
            }
        },
        ...props.TextFieldProps
    });
}


/***/ })

}]);