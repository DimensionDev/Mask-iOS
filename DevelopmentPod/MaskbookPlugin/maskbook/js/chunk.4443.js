"use strict";
(globalThis["webpackChunk_masknet_extension"] = globalThis["webpackChunk_masknet_extension"] || []).push([[4443],{

/***/ 28839:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "T": () => (/* binding */ CopyIcon)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(35667);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50498);


const CopyIcon = (0,_utils__WEBPACK_IMPORTED_MODULE_1__/* .createIcon */ .I)('copy', /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("g", {
    children: [
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M7.736 12.538c-.898 0-1.68-.267-2.244-.793-.566-.53-.858-1.273-.858-2.117V4.882c0-.84.29-1.58.852-2.109.558-.525 1.335-.795 2.226-.8h.003l4.383-.001c.898 0 1.68.267 2.244.793.566.53.858 1.273.858 2.117v4.746c0 .84-.29 1.58-.852 2.109-.558.525-1.335.794-2.226.8h-.003l-4.383.001v-.533.533Zm0-1.066c-.689 0-1.19-.203-1.516-.507-.32-.3-.52-.745-.52-1.337V4.882c0-.588.198-1.032.516-1.332.322-.303.82-.506 1.5-.51h.002l4.38-.002c.689 0 1.19.203 1.515.507.321.3.52.745.52 1.337v4.746c0 .588-.197 1.032-.516 1.332-.321.302-.818.506-1.5.51l-4.381.002Z"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M5.41 14.615c-.898 0-1.68-.267-2.243-.793-.567-.53-.86-1.273-.86-2.117V6.959c0-1.084.484-1.986 1.37-2.489a.533.533 0 1 1 .526.928c-.514.292-.828.816-.828 1.561v4.746c0 .592.199 1.037.52 1.337.325.304.826.507 1.515.507l4.382-.002c.763-.005 1.295-.259 1.612-.628a.533.533 0 1 1 .81.695c-.563.654-1.418.994-2.418 1h-.003l-4.383.001v-.533.533Z"
        })
    ]
}), '0 0 16 17');


/***/ }),

/***/ 39138:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "j": () => (/* binding */ SendIcon)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(35667);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50498);


const SendIcon = (0,_utils__WEBPACK_IMPORTED_MODULE_1__/* .createIcon */ .I)('SendIcon', /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg", {
    viewBox: "0 0 18 18",
    children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M16.3449 3.38244L2.42483 7.92639L5.82181 9.95786C6.04825 10.0933 6.18688 10.3377 6.18688 10.6015V12.8779L8.48652 11.9452C8.69775 11.8595 8.93648 11.8746 9.13529 11.9861L14.3428 14.9067L16.3449 3.38244ZM16.6836 2.00958C17.221 1.83413 17.752 2.29389 17.6552 2.85093L15.4163 15.7386C15.3277 16.2484 14.7618 16.5175 14.3105 16.2644L8.73702 13.1385L6.01877 14.241C5.52564 14.441 4.98688 14.0782 4.98688 13.546V10.8568L0.960663 8.449C0.40841 8.11874 0.501143 7.29202 1.11286 7.09234L16.6836 2.00958ZM14.1798 5.65582C14.3971 5.90598 14.3705 6.28494 14.1203 6.50226L9.88582 10.1807C9.63565 10.398 9.25669 10.3714 9.03938 10.1213C8.82206 9.87109 8.84869 9.49213 9.09886 9.27482L13.3334 5.59634C13.5835 5.37902 13.9625 5.40565 14.1798 5.65582Z"
    })
}), '0 0 18 18');


/***/ }),

/***/ 10126:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "$": () => (/* binding */ defineSiteAdaptor),
/* harmony export */   "t": () => (/* binding */ definedSiteAdaptors)
/* harmony export */ });
const defined = new Map();
const definedSiteAdaptors = defined;
function defineSiteAdaptor(UI) {
    defined.set(UI.networkIdentifier, UI);
}


/***/ }),

/***/ 65902:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "f": () => (/* binding */ Composition)
});

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(35667);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/index.js
var react = __webpack_require__(58757);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/DialogContent/DialogContent.js + 1 modules
var DialogContent_DialogContent = __webpack_require__(46715);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/DialogActions/DialogActions.js + 1 modules
var DialogActions = __webpack_require__(21948);
// EXTERNAL MODULE: ../theme/src/entry.ts
var entry = __webpack_require__(31939);
// EXTERNAL MODULE: ./src/social-network/index.ts
var social_network = __webpack_require__(82192);
// EXTERNAL MODULE: ./src/utils/index.ts + 4 modules
var utils = __webpack_require__(93455);
// EXTERNAL MODULE: ../shared-base/src/index.ts + 2 modules
var src = __webpack_require__(44451);
// EXTERNAL MODULE: ./src/components/CompositionDialog/useRecipientsList.ts
var useRecipientsList = __webpack_require__(57488);
// EXTERNAL MODULE: ../shared/src/index.ts + 2 modules
var shared_src = __webpack_require__(77818);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Typography/Typography.js + 1 modules
var Typography_Typography = __webpack_require__(21784);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Button/Button.js
var Button_Button = __webpack_require__(85792);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+lab@5.0.0-alpha.82_ygk7qgdlnpugkmqdrmzyce476m/node_modules/@mui/lab/LoadingButton/LoadingButton.js + 1 modules
var LoadingButton = __webpack_require__(80875);
// EXTERNAL MODULE: ../icons/general/Send.tsx
var Send = __webpack_require__(39138);
// EXTERNAL MODULE: ../plugin-infra/src/entry-content-script.ts
var entry_content_script = __webpack_require__(20778);
// EXTERNAL MODULE: ../plugin-infra/src/entry-web3.ts + 1 modules
var entry_web3 = __webpack_require__(50719);
// EXTERNAL MODULE: ../shared-base-ui/src/index.ts
var shared_base_ui_src = __webpack_require__(80226);
// EXTERNAL MODULE: ../../node_modules/.pnpm/ts-results@3.3.0/node_modules/ts-results/esm/index.js + 3 modules
var esm = __webpack_require__(48160);
// EXTERNAL MODULE: ./src/plugins/RedPacket/constants.ts
var constants = __webpack_require__(70176);
// EXTERNAL MODULE: ./src/plugins/ITO/constants.ts
var ITO_constants = __webpack_require__(83072);
// EXTERNAL MODULE: ../../node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js
var classnames = __webpack_require__(83849);
var classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.8.0_ar3vczqpton7uep5462l6mtgi4/node_modules/@mui/icons-material/Done.js
var Done = __webpack_require__(31363);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Chip/Chip.js + 1 modules
var Chip_Chip = __webpack_require__(11142);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/noop.js
var noop = __webpack_require__(21122);
;// CONCATENATED MODULE: ./src/components/shared/SelectRecipients/ClickableChip.tsx






const useStyles = (0,entry/* makeStyles */.ZL)()((theme, { checked  })=>({
        root: {
            marginRight: 6,
            marginBottom: 6,
            cursor: 'pointer',
            ...checked ? {
                color: theme.palette.text.buttonText,
                backgroundColor: theme.palette.text.primary
            } : {},
            '&:hover': {
                color: theme.palette.text.primary,
                '& > svg': {
                    color: `${theme.palette.text.primary} !important`
                }
            }
        },
        icon: {
            backgroundColor: 'transparent !important',
            ...checked ? {
                color: `${theme.palette.text.buttonText} !important`
            } : {}
        },
        label: {
            display: 'flex'
        }
    })
);
function ClickableChip(props) {
    const { classes  } = useStyles({
        checked: Boolean(props.checked)
    });
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(Chip_Chip/* default */.Z, {
        deleteIcon: props.checked ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Done/* default */.Z, {
            className: classes.icon
        }) : undefined,
        onDelete: props.checked ? noop/* default */.Z : undefined,
        color: props.checked ? 'primary' : 'default',
        ...props,
        classes: {
            ...props.classes,
            root: classnames_default()(classes.root, props.classes?.root),
            label: classnames_default()(classes.label, props.classes?.label)
        }
    });
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/react-i18next@11.16.9_nlaekqjbpikw4agfyzvj2iejnm/node_modules/react-i18next/dist/es/Trans.js
var Trans = __webpack_require__(62266);
;// CONCATENATED MODULE: ./src/components/CompositionDialog/PluginEntryRender.tsx











const PluginEntryRender_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        sup: {
            paddingLeft: 2
        },
        clickRoot: {
            background: theme.palette.background.paper,
            boxShadow: `0px 0px 20px 0px ${theme.palette.mode === 'dark' ? '#FFFFFF1F' : '#0000000D'}`
        }
    })
);
const PluginEntryRender = /*#__PURE__*/ (0,react.memo)(/*#__PURE__*/ (0,react.forwardRef)((props, ref)=>{
    const [trackPluginRef] = useSetPluginEntryRenderRef(ref);
    const pluginField = (0,entry_content_script/* usePluginI18NField */.eS)();
    const chainId = (0,entry_web3/* useChainId */.xx)();
    const pluginID = (0,entry_web3/* useCurrentWeb3NetworkPluginID */.$f)();
    const operatingSupportedChainMapping = (0,entry_content_script/* useActivatedPluginSNSAdaptor_Web3Supported */.Ar)(chainId, pluginID);
    const result = [
        ...(0,entry_content_script/* useActivatedPluginsSNSAdaptor */.Pz)('any')
    ].sort((plugin)=>{
        // TODO: support priority order
        if (plugin.ID === constants/* RedPacketPluginID */.jY || plugin.ID === ITO_constants/* ITO_PluginID */.yV) return -1;
        return 1;
    }).map((plugin)=>esm/* Result.wrap */.x4.wrap(()=>{
            const entry = plugin.CompositionDialogEntry;
            const unstable = plugin.enableRequirement.target !== 'stable';
            const ID = plugin.ID;
            if (!entry || !operatingSupportedChainMapping[ID]) return null;
            const extra = {
                unstable,
                id: ID,
                readonly: props.readonly
            };
            return /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_base_ui_src/* ErrorBoundary */.SV, {
                subject: `Plugin "${pluginField(ID, plugin.name)}"`,
                children: 'onClick' in entry ? /*#__PURE__*/ (0,jsx_runtime.jsx)(CustomEntry, {
                    ...entry,
                    ...extra,
                    ref: trackPluginRef(ID)
                }) : /*#__PURE__*/ (0,jsx_runtime.jsx)(DialogEntry, {
                    ...entry,
                    ...extra,
                    ref: trackPluginRef(ID),
                    isOpenFromApplicationBoard: props.isOpenFromApplicationBoard
                })
            }, plugin.ID);
        }).unwrapOr(null)
    );
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
        children: result
    });
}));
function useSetPluginEntryRenderRef(ref1) {
    const pluginRefs = (0,react.useRef)({});
    const refItem = (0,react.useMemo)(()=>({
            openPlugin: function openPlugin(id, tryTimes = 4) {
                const ref = pluginRefs.current[id];
                if (ref) return ref.open();
                // If the plugin has not been loaded yet, we wait for at most 2000ms
                if (tryTimes === 0) return;
                setTimeout(()=>openPlugin(id, tryTimes - 1)
                , 500);
            }
        })
    , []);
    (0,react.useImperativeHandle)(ref1, ()=>refItem
    , [
        refItem
    ]);
    const trackPluginRef = (pluginID)=>(ref)=>{
            pluginRefs.current = {
                ...pluginRefs.current,
                [pluginID]: ref
            };
        }
    ;
    return [
        trackPluginRef
    ];
}
function useSetPluginRef(ref, onClick) {
    const refItem = (0,react.useMemo)(()=>({
            open: onClick
        })
    , [
        onClick
    ]);
    (0,react.useImperativeHandle)(ref, ()=>refItem
    , [
        refItem
    ]);
}
const CustomEntry = /*#__PURE__*/ (0,react.memo)(/*#__PURE__*/ (0,react.forwardRef)((props, ref)=>{
    const { classes  } = PluginEntryRender_useStyles();
    const { id , label , onClick , unstable  } = props;
    useSetPluginRef(ref, onClick);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(ClickableChip, {
        classes: {
            root: classes.clickRoot
        },
        label: /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsx)(entry_content_script/* PluginI18NFieldRender */.KP, {
                    field: label,
                    pluginID: id
                }),
                unstable && /*#__PURE__*/ (0,jsx_runtime.jsx)(Trans/* Trans */.c, {
                    i18nKey: "beta_sup",
                    components: {
                        sup: /*#__PURE__*/ (0,jsx_runtime.jsx)("sup", {
                            className: classes.sup
                        })
                    }
                })
            ]
        }),
        onClick: onClick,
        disabled: props.readonly
    });
}));
const DialogEntry = /*#__PURE__*/ (0,react.memo)(/*#__PURE__*/ (0,react.forwardRef)((props, ref)=>{
    const { classes  } = PluginEntryRender_useStyles();
    const { dialog: Dialog , id , label , unstable , keepMounted , isOpenFromApplicationBoard  } = props;
    const [open, setOpen] = (0,react.useState)(false);
    const opener = (0,react.useCallback)(()=>setOpen(true)
    , []);
    const close = (0,react.useCallback)(()=>{
        setOpen(false);
    }, []);
    useSetPluginRef(ref, opener);
    const chip = /*#__PURE__*/ (0,jsx_runtime.jsx)(ClickableChip, {
        classes: {
            root: classes.clickRoot
        },
        label: /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsx)(entry_content_script/* PluginI18NFieldRender */.KP, {
                    field: label,
                    pluginID: id
                }),
                unstable && /*#__PURE__*/ (0,jsx_runtime.jsx)(Trans/* Trans */.c, {
                    i18nKey: "beta_sup",
                    components: {
                        sup: /*#__PURE__*/ (0,jsx_runtime.jsx)("sup", {
                            className: classes.sup
                        })
                    }
                })
            ]
        }),
        disabled: props.readonly,
        onClick: opener
    });
    if (keepMounted || open) return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            chip,
            /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                style: {
                    display: 'none'
                },
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Dialog, {
                    open: open,
                    onClose: close,
                    isOpenFromApplicationBoard: isOpenFromApplicationBoard
                })
            })
        ]
    });
    return chip;
}));

// EXTERNAL MODULE: ../typed-message/base/index.ts + 2 modules
var base = __webpack_require__(80681);
// EXTERNAL MODULE: ../typed-message/dom/index.ts + 14 modules
var dom = __webpack_require__(30003);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Alert/Alert.js + 4 modules
var Alert = __webpack_require__(60904);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/InputBase/InputBase.js
var InputBase = __webpack_require__(52125);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Box/Box.js
var Box_Box = __webpack_require__(96436);
;// CONCATENATED MODULE: ./src/components/CompositionDialog/BadgeRenderer.tsx





const BadgeRenderer_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        chip: {
            maxWidth: 500,
            background: theme.palette.background.paper,
            boxShadow: `0px 0px 20px 0px ${theme.palette.mode === 'dark' ? '#FFFFFF1F' : '#0000000D'}`
        }
    })
);
function BadgeRenderer({ meta , onDeleteMeta , readonly  }) {
    const plugins = (0,entry_content_script/* useActivatedPluginsSNSAdaptor */.Pz)('any');
    const i18n = (0,entry_content_script/* usePluginI18NField */.eS)();
    const { t  } = (0,utils/* useI18N */.M1)();
    if (!meta) return null;
    const result = [
        ...meta.entries()
    ].flatMap(([metaKey, metaValue])=>{
        return plugins.map((plugin)=>{
            const render = plugin.CompositionDialogMetadataBadgeRender;
            if (!render) return null;
            try {
                if (typeof render === 'function') {
                    return normalizeBadgeDescriptor(render(metaKey, metaValue));
                } else {
                    const f = render.get(metaKey);
                    if (!f) return null;
                    return normalizeBadgeDescriptor(f(metaValue));
                }
            } catch (error) {
                console.error(error);
                return null;
            }
            function normalizeBadgeDescriptor(desc) {
                if (!desc) return null;
                if (typeof desc === 'string') desc = {
                    text: desc,
                    tooltip: `${t('badge_renderer_provided_by_plugin')} "${i18n(plugin.ID, plugin.name)}"`
                };
                return /*#__PURE__*/ (0,jsx_runtime.jsx)(MetaBadge, {
                    readonly: readonly,
                    title: desc.tooltip || '',
                    onDelete: ()=>onDeleteMeta(metaKey)
                    ,
                    children: desc.text
                }, metaKey + ';' + plugin.ID);
            }
        });
    });
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
        children: result
    });
}
function MetaBadge({ title , children , onDelete , readonly  }) {
    const { classes  } = BadgeRenderer_useStyles();
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(Box_Box/* default */.Z, {
        sx: {
            display: 'inline-block'
        },
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(entry/* ShadowRootTooltip */.p_, {
            title: title,
            children: /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Chip_Chip/* default */.Z, {
                    disabled: readonly,
                    onDelete: onDelete,
                    label: children,
                    className: classes.chip
                })
            })
        })
    });
}

;// CONCATENATED MODULE: ./src/components/CompositionDialog/TypedMessageEditor.tsx








const TypedMessageEditor_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        root: {
            padding: 0
        },
        input: {
            fontSize: 15,
            minHeight: '8em'
        },
        badge: {
            marginBottom: 12
        }
    })
);
const emptyMessage = (0,base/* makeTypedMessageText */.P)('');
// This is an **uncontrolled** component. (performance consideration, because it will be re-rendered very frequently).
const TypedMessageEditor = /*#__PURE__*/ (0,react.memo)(/*#__PURE__*/ (0,react.forwardRef)((props, ref)=>{
    const { onChange , readonly  } = props;
    const { classes  } = TypedMessageEditor_useStyles();
    const { t  } = (0,utils/* useI18N */.M1)();
    const [value1, setValue] = (0,react.useState)(props.defaultValue ?? emptyMessage);
    const currentValue = (0,react.useRef)(value1);
    currentValue.current = value1;
    const setMessage = (0,react.useCallback)((value)=>{
        if ((0,base/* isTypedMessageEqual */.Hz)(currentValue.current, value)) return;
        setValue(value);
        currentValue.current = value;
        onChange?.(value);
    }, [
        onChange
    ]);
    const setAsText = (0,react.useCallback)((val)=>{
        const text = typeof val === 'string' ? val : val.target.value;
        const newValue = (0,base/* makeTypedMessageText */.P)(text, currentValue.current.meta);
        setMessage(newValue);
    }, [
        setMessage
    ]);
    const deleteMetaID = (0,react.useCallback)((meta)=>{
        setMessage((0,dom/* editTypedMessageMeta */.r1)(currentValue.current, (map)=>map.delete(meta)
        ));
    }, [
        setMessage
    ]);
    const refItem = (0,react.useMemo)(()=>{
        return {
            get estimatedLength () {
                // TODO: we should count metadata into the estimated size
                if ((0,base/* isTypedMessageText */.Rz)(currentValue.current)) return currentValue.current.content.length;
                return 0;
            },
            get value () {
                return currentValue.current;
            },
            set value (val){
                setMessage(val);
            },
            reset: ()=>setMessage(emptyMessage)
            ,
            attachMetadata (meta, data) {
                setMessage((0,dom/* editTypedMessageMeta */.r1)(currentValue.current, (map)=>map.set(meta, data)
                ));
            },
            dropMetadata: deleteMetaID
        };
    }, [
        setMessage,
        deleteMetaID
    ]);
    (0,react.useImperativeHandle)(ref, ()=>refItem
    , [
        refItem
    ]);
    if (!(0,base/* isTypedMessageText */.Rz)(value1)) {
        const reset = ()=>setAsText('')
        ;
        // We don't have an rich text editor yet.
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(Alert/* default */.Z, {
            severity: "error",
            action: /*#__PURE__*/ (0,jsx_runtime.jsxs)(Button_Button/* default */.Z, {
                onClick: reset,
                children: [
                    t('reset'),
                    " ",
                    t('editor')
                ]
            }),
            children: t('typed_message_text_alert')
        });
    }
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            value1.meta && /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                className: classes.badge,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(BadgeRenderer, {
                    readonly: !!readonly,
                    meta: value1.meta,
                    onDeleteMeta: deleteMetaID
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(InputBase/* default */.ZP, {
                readOnly: readonly,
                classes: {
                    root: classes.root,
                    input: classes.input
                },
                autoFocus: props.autoFocus,
                value: value1.content,
                onChange: setAsText,
                fullWidth: true,
                multiline: true,
                placeholder: t('post_dialog__placeholder')
            })
        ]
    });
}));

// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/CircularProgress/CircularProgress.js + 1 modules
var CircularProgress = __webpack_require__(69314);
;// CONCATENATED MODULE: ./src/components/CompositionDialog/CharLimitIndicator.tsx




const CharLimitIndicator_useStyles = (0,entry/* makeStyles */.ZL)()((_theme, overflowed)=>({
        root: {
            position: 'relative',
            display: 'inline-flex',
            marginLeft: 8,
            marginRight: 8
        },
        circle: {
            transitionProperty: 'transform, width, height, color',
            color: overflowed ? 'red' : undefined
        },
        label: {
            top: 0,
            left: 0,
            bottom: 0,
            right: 0,
            position: 'absolute',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center'
        }
    })
);
const CharLimitIndicator = /*#__PURE__*/ (0,react.memo)(({ value , max , ...props })=>{
    const displayLabel = max - value < 40;
    const normalized = Math.min(value / max * 100, 100);
    const { classes , cx  } = CharLimitIndicator_useStyles(value >= max);
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
        className: classes.root,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(CircularProgress/* default */.Z, {
                variant: "determinate",
                color: displayLabel ? 'secondary' : 'primary',
                size: displayLabel ? void 0 : 16,
                ...props,
                value: normalized,
                className: cx(props.className, classes.circle)
            }),
            displayLabel ? /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                className: classes.label,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography_Typography/* default */.Z, {
                    variant: "caption",
                    component: "div",
                    color: "textSecondary",
                    children: max - value
                })
            }) : null
        ]
    });
});

// EXTERNAL MODULE: ./shared/index.ts
var shared = __webpack_require__(94670);
;// CONCATENATED MODULE: ./src/components/shared/DebugMetadataInspector.tsx








function DebugMetadataInspector_DebugMetadataInspector(props) {
    const { meta , onExit , onDeleteMeta , onNewMeta  } = props;
    const [field, setField] = useState('');
    const [content1, setContent] = useState('{}');
    const { t  } = useI18N();
    const knownMetadata = getKnownMetadataKeys();
    const result = isValid(content1);
    const isInvalid = result !== true;
    const editor = onNewMeta ? /*#__PURE__*/ _jsxs(Card, {
        variant: "outlined",
        children: [
            /*#__PURE__*/ _jsxs(CardContent, {
                children: [
                    /*#__PURE__*/ _jsx(Typography, {
                        color: "textSecondary",
                        gutterBottom: true,
                        children: t('debug_metadata_title')
                    }),
                    /*#__PURE__*/ _jsxs("form", {
                        children: [
                            /*#__PURE__*/ _jsx(Autocomplete, {
                                sx: {
                                    marginBottom: 2
                                },
                                autoComplete: true,
                                freeSolo: true,
                                options: knownMetadata,
                                inputValue: field,
                                onInputChange: (_, newValue)=>setField(newValue)
                                ,
                                PopperComponent: ShadowRootPopper,
                                renderInput: (params)=>/*#__PURE__*/ _jsx(TextField, {
                                        ...params,
                                        spellCheck: false,
                                        autoCapitalize: "off",
                                        autoComplete: "off",
                                        autoCorrect: "off",
                                        fullWidth: true,
                                        label: "Metadata Key",
                                        margin: "normal",
                                        variant: "standard"
                                    })
                            }),
                            /*#__PURE__*/ _jsx(TextField, {
                                label: "Metadata content",
                                value: content1,
                                onChange: (e)=>setContent(e.currentTarget.value)
                                ,
                                multiline: true,
                                fullWidth: true,
                                spellCheck: false,
                                autoCapitalize: "off",
                                autoComplete: "off",
                                autoCorrect: "off",
                                error: isInvalid,
                                helperText: /*#__PURE__*/ _jsx("span", {
                                    style: {
                                        whiteSpace: 'pre-wrap'
                                    },
                                    children: result
                                }),
                                variant: "standard"
                            })
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ _jsxs(CardActions, {
                children: [
                    /*#__PURE__*/ _jsx(Button, {
                        onClick: ()=>onNewMeta(field, JSON.parse(content1))
                        ,
                        size: "small",
                        variant: "contained",
                        disabled: isInvalid || field?.length <= 3,
                        children: t('debug_metadata_put_metadata')
                    }),
                    /*#__PURE__*/ _jsx(Button, {
                        onClick: ()=>{
                            setField('');
                            setContent('{}');
                        },
                        size: "small",
                        variant: "text",
                        children: t('clear')
                    })
                ]
            })
        ]
    }) : null;
    return /*#__PURE__*/ _jsx(InjectedDialog, {
        open: true,
        title: "Debug: Metadata Inspector",
        onClose: onExit,
        children: /*#__PURE__*/ _jsxs(DialogContent, {
            children: [
                editor,
                [
                    ...meta
                ].map(([key, content])=>{
                    return /*#__PURE__*/ _jsxs(Accordion, {
                        children: [
                            /*#__PURE__*/ _jsxs(AccordionSummary, {
                                expandIcon: /*#__PURE__*/ _jsx(ExpandMoreIcon, {}),
                                children: [
                                    /*#__PURE__*/ _jsx(Typography, {
                                        style: {
                                            alignSelf: 'center'
                                        },
                                        children: key
                                    }),
                                    /*#__PURE__*/ _jsx(Box, {
                                        sx: {
                                            flex: 1
                                        }
                                    }),
                                    /*#__PURE__*/ _jsxs(Typography, {
                                        onClick: (e)=>e.stopPropagation()
                                        ,
                                        children: [
                                            onNewMeta ? /*#__PURE__*/ _jsx(Button, {
                                                variant: "contained",
                                                size: "small",
                                                color: "secondary",
                                                onClick: ()=>{
                                                    setField(key);
                                                    setContent(JSON.stringify(content, undefined, 4));
                                                },
                                                children: t('edit')
                                            }) : null,
                                            onDeleteMeta ? /*#__PURE__*/ _jsx(Button, {
                                                variant: "text",
                                                size: "small",
                                                color: "secondary",
                                                onClick: ()=>onDeleteMeta(key)
                                                ,
                                                children: t('delete')
                                            }) : null
                                        ]
                                    })
                                ]
                            }),
                            /*#__PURE__*/ _jsx(AccordionDetails, {
                                style: {
                                    display: 'flex'
                                },
                                children: /*#__PURE__*/ _jsx(Typography, {
                                    component: "code",
                                    children: JSON.stringify(content, undefined, 4),
                                    style: {
                                        whiteSpace: 'pre-wrap'
                                    }
                                })
                            })
                        ]
                    }, key);
                })
            ]
        })
    });
    function isValid(newData) {
        try {
            JSON.parse(newData);
        } catch  {
            return 'Invalid JSON';
        }
        const validator = getMetadataSchema(field);
        if (validator.some) {
            const valid = isDataMatchJSONSchema(JSON.parse(newData), validator.val);
            if (valid.err) return 'Metadata content is invalid:\n' + valid.val.map((x)=>'    ' + x.message
            ).join('\n');
        }
        return true;
    }
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/use-subscription@1.6.0/node_modules/use-subscription/index.js
var use_subscription = __webpack_require__(14257);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/InputAdornment/InputAdornment.js + 1 modules
var InputAdornment = __webpack_require__(29324);
// EXTERNAL MODULE: ../../node_modules/.pnpm/fuse.js@6.6.2/node_modules/fuse.js/dist/fuse.esm.js
var fuse_esm = __webpack_require__(36005);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/ListItem/ListItem.js + 2 modules
var ListItem = __webpack_require__(82138);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/ListItemAvatar/ListItemAvatar.js + 1 modules
var ListItemAvatar = __webpack_require__(11945);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/ListItemText/ListItemText.js
var ListItemText = __webpack_require__(63153);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Checkbox/Checkbox.js + 4 modules
var Checkbox = __webpack_require__(23230);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-highlight-words@0.18.0/node_modules/react-highlight-words/dist/main.js
var main = __webpack_require__(25473);
var main_default = /*#__PURE__*/__webpack_require__.n(main);
// EXTERNAL MODULE: ./src/utils/components/Avatar.tsx
var Avatar = __webpack_require__(4004);
// EXTERNAL MODULE: ../icons/general/Copy.tsx
var Copy = __webpack_require__(28839);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/truncate.js + 5 modules
var truncate = __webpack_require__(21186);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.4.0/node_modules/react-use/esm/useCopyToClipboard.js + 1 modules
var useCopyToClipboard = __webpack_require__(39969);
;// CONCATENATED MODULE: ./src/components/shared/SelectRecipients/ProfileInList.tsx











const ProfileInList_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        root: {
            maxWidth: 'calc(50% - 6px)',
            padding: '0 0 0 8px',
            borderRadius: 8
        },
        overflow: {
            textOverflow: 'ellipsis',
            whiteSpace: 'nowrap',
            overflow: 'hidden'
        },
        highlighted: {
            backgroundColor: 'inherit',
            color: 'inherit',
            fontWeight: 'bold'
        },
        flex: {
            display: 'flex',
            alignItems: 'center'
        },
        actionIcon: {
            fontSize: 16,
            cursor: 'pointer'
        },
        badge: {
            background: theme.palette.background.input,
            color: theme.palette.text.strong,
            fontSize: 10,
            fontWeight: 700,
            marginLeft: 12,
            padding: '2px 4px',
            borderRadius: 2
        },
        highLightBg: {
            background: theme.palette.background.default
        },
        avatarBox: {
            minWidth: 46
        },
        avatar: {
            width: 36,
            height: 36
        },
        highLightBase: {
            lineHeight: '20px'
        },
        highLightSecond: {
            fontSize: 14,
            lineHeight: '20px'
        },
        listItemRoot: {
            margin: '4px 0'
        },
        columnReverse: {
            margin: '4px 0',
            display: 'flex',
            flexDirection: 'column-reverse'
        },
        toolTip: {
            maxWidth: 250,
            fontSize: 14,
            lineHeight: '18px',
            padding: 10,
            boxSizing: 'border-box',
            borderRadius: 4,
            whiteSpace: 'normal',
            marginTop: 0,
            transform: 'translate(5px,45px,0px)'
        }
    })
);
function ProfileInList(props) {
    const { t  } = (0,utils/* useI18N */.M1)();
    const { classes , cx  } = ProfileInList_useStyles();
    const profile = props.item;
    const [, copyToClipboard] = (0,useCopyToClipboard/* default */.Z)();
    const highlightText = (()=>{
        if (!profile.fromNextID) return `@${profile.identifier.userId || profile.nickname}`;
        const mentions = profile.linkedTwitterNames.map((x)=>'@' + x
        ).join(' ');
        if (mentions.length < 15) return mentions;
        const len = profile.linkedTwitterNames.length;
        return (0,truncate/* default */.Z)(mentions, {
            length: 15
        }) + (len > 1 ? `(${len})` : '');
    })();
    const tooltipTitle = (()=>{
        const linkedNames = profile.linkedTwitterNames;
        if (!linkedNames || !linkedNames.length) return '';
        const mentions = profile.linkedTwitterNames.map((username)=>'@' + username
        );
        return `${t('select_friends_dialog_persona_connect')} ${mentions.join(', ')}.`;
    })();
    const onClick = (0,react.useCallback)((ev)=>props.onChange(ev, !props.selected)
    , [
        props
    ]);
    const textToHighlight = (0,src/* formatPersonaFingerprint */.Nb)(profile.linkedPersona?.rawPublicKey?.toUpperCase() ?? '', 3);
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(ListItem/* default */.ZP, {
        disabled: props.disabled,
        className: props.selected ? cx(classes.root, classes.highLightBg) : classes.root,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(ListItemAvatar/* default */.Z, {
                classes: {
                    root: classes.avatarBox
                },
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Avatar/* Avatar */.q, {
                    classes: {
                        root: classes.avatar
                    },
                    person: profile
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(ListItemText/* default */.Z, {
                classes: {
                    root: profile.fromNextID ? classes.columnReverse : classes.listItemRoot,
                    primary: classes.overflow,
                    secondary: classes.overflow
                },
                primary: /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                    className: classes.flex,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(entry/* ShadowRootTooltip */.p_, {
                        title: tooltipTitle,
                        arrow: true,
                        classes: {
                            tooltip: classes.toolTip
                        },
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)((main_default()), {
                                className: classes.highLightBase,
                                highlightClassName: classes.highlighted,
                                searchWords: [
                                    props.highlightText ?? ''
                                ],
                                autoEscape: true,
                                textToHighlight: highlightText
                            })
                        })
                    })
                }),
                secondary: /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                    className: classes.flex,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)((main_default()), {
                            className: classes.highLightSecond,
                            highlightClassName: classes.highlighted,
                            searchWords: [
                                props.highlightText ?? ''
                            ],
                            autoEscape: true,
                            textToHighlight: textToHighlight
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Copy/* CopyIcon */.T, {
                            className: classes.actionIcon,
                            onClick: ()=>{
                                const rawPublicKey = profile.linkedPersona?.rawPublicKey;
                                if (!rawPublicKey) return;
                                copyToClipboard(rawPublicKey.toUpperCase());
                            }
                        }),
                        profile.fromNextID && /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                            className: classes.badge,
                            children: "Next.ID"
                        })
                    ]
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Checkbox/* default */.Z, {
                onClick: onClick,
                checked: !!props.selected,
                color: "primary"
            })
        ]
    });
}

// EXTERNAL MODULE: ../icons/general/Search.tsx
var Search = __webpack_require__(68488);
// EXTERNAL MODULE: ../icons/utils/index.tsx
var icons_utils = __webpack_require__(50498);
;// CONCATENATED MODULE: ../icons/general/SearchEmpty.tsx


const SearchEmptyIcon = (0,icons_utils/* createIcon */.I)('SearchEmpty', /*#__PURE__*/ (0,jsx_runtime.jsxs)("g", {
    children: [
        /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M4.58926 4.5878C6.61192 2.56515 9.63194 1.79883 13.5003 1.79883H22.5003C26.3686 1.79883 29.3887 2.56515 31.4113 4.5878C33.434 6.61045 34.2003 9.63047 34.2003 13.4988V22.4988C34.2003 26.3672 33.434 29.3872 31.4113 31.4099C29.3887 33.4325 26.3686 34.1988 22.5003 34.1988H13.5003C9.63194 34.1988 6.61192 33.4325 4.58926 31.4099C2.56661 29.3872 1.80029 26.3672 1.80029 22.4988V13.4988C1.80029 9.63047 2.56661 6.61045 4.58926 4.5878ZM6.28632 6.28486C4.93397 7.63721 4.20029 9.86718 4.20029 13.4988V22.4988C4.20029 26.1305 4.93397 28.3604 6.28632 29.7128C7.63867 31.0652 9.86865 31.7988 13.5003 31.7988H22.5003C26.1319 31.7988 28.3619 31.0652 29.7143 29.7128C31.0666 28.3604 31.8003 26.1305 31.8003 22.4988V13.4988C31.8003 9.86718 31.0666 7.63721 29.7143 6.28486C28.3619 4.93251 26.1319 4.19883 22.5003 4.19883H13.5003C9.86865 4.19883 7.63867 4.93251 6.28632 6.28486Z",
            fill: "#ACB4C1"
        }),
        /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M25.7486 21.6858C25.7485 21.6861 25.7488 21.6855 25.7486 21.6858L24.4136 24.3708C23.7021 25.7938 22.2538 26.6992 20.6553 26.6992H15.3603C14.9239 26.6992 12.7631 26.6961 11.5909 24.3936L11.5857 24.3835L10.252 21.7008C10.2518 21.7005 10.2522 21.7012 10.252 21.7008C9.94329 21.0844 9.3214 20.6992 8.64029 20.6992H3.00029C2.33755 20.6992 1.80029 20.1619 1.80029 19.4992C1.80029 18.8364 2.33755 18.2992 3.00029 18.2992H8.64029C10.2388 18.2992 11.6871 19.2046 12.3986 20.6275L12.3998 20.6299L13.732 23.3093C14.2385 24.2992 15.072 24.2992 15.3577 24.2992H20.6553C21.3365 24.2992 21.9579 23.9149 22.2665 23.2984C22.2667 23.2981 22.2664 23.2987 22.2665 23.2984L23.602 20.6125C24.3135 19.1896 25.7618 18.2842 27.3603 18.2842H32.9703C33.633 18.2842 34.1703 18.8214 34.1703 19.4842C34.1703 20.1469 33.633 20.6842 32.9703 20.6842H27.3603C26.6791 20.6842 26.0573 21.0693 25.7486 21.6858Z",
            fill: "#ACB4C1"
        })
    ]
}), '0 0 36 36');

// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/uniqBy.js
var uniqBy = __webpack_require__(18443);
;// CONCATENATED MODULE: ./src/components/shared/SelectRecipients/SelectRecipientsDialog.tsx










const SelectRecipientsDialog_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        root: {
            minHeight: 400,
            minWidth: 400,
            overflow: 'hidden'
        },
        content: {
            padding: '0 !important'
        },
        title: {
            marginLeft: 6
        },
        inputRoot: {
            padding: '4px 10px',
            borderRadius: 8,
            width: '100%',
            background: theme.palette.background.input,
            border: '1px solid transparent',
            fontSize: 14,
            marginBottom: 16
        },
        inputFocused: {
            background: 'none',
            borderColor: theme.palette.text.third
        },
        paper: {
            height: 450,
            position: 'relative'
        },
        empty: {
            position: 'absolute',
            top: '50%',
            left: '50%',
            transform: 'translate(-50%,-50%)',
            display: 'flex',
            alignItems: 'center',
            flexDirection: 'column',
            gap: 12,
            color: theme.palette.text.secondary,
            whiteSpace: 'nowrap'
        },
        mainText: {
            color: theme.palette.text.primary
        },
        list: {
            width: '100%',
            display: 'flex',
            flexWrap: 'wrap',
            alignContent: 'baseline',
            gap: 12,
            minHeight: 300,
            maxHeight: 380,
            overflowY: 'auto'
        },
        actions: {
            display: 'flex',
            gap: 8,
            padding: 16,
            boxSizing: 'border-box',
            alignItems: 'center',
            background: theme.palette.background.paper,
            boxShadow: `0px 0px 20px 0px ${theme.palette.background.messageShadow}`
        }
    })
);
function SelectRecipientsDialogUI(props) {
    const { t  } = (0,utils/* useI18N */.M1)();
    const { classes , cx  } = SelectRecipientsDialog_useStyles();
    const { items , disabledItems , onSearch  } = props;
    const [search, setSearch] = (0,react.useState)('');
    (0,react.useEffect)(()=>{
        setSearch('');
        onSearch('');
    }, [
        props.open
    ]);
    const itemsAfterSearch = (0,react.useMemo)(()=>{
        const fuse = new fuse_esm/* default */.Z(items, {
            keys: [
                'identifier.userId',
                'nickname',
                'walletAddress',
                'linkedPersona.rawPublicKey',
                'linkedPersona.publicKeyAsHex', 
            ],
            isCaseSensitive: false,
            ignoreLocation: true,
            threshold: 0
        });
        return (0,uniqBy/* default */.Z)((search === '' ? items : fuse.search(search).map((item)=>item.item
        )).concat(props.selected), (x)=>x.linkedPersona?.rawPublicKey.toLowerCase()
        );
    }, [
        search,
        items
    ]);
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(shared_src/* InjectedDialog */.Fl, {
        className: classes.root,
        open: props.open,
        title: t('select_specific_friends_dialog__title'),
        onClose: props.onClose,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)(DialogContent_DialogContent/* default */.Z, {
                className: classes.paper,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(InputBase/* default */.ZP, {
                        className: classes.inputRoot,
                        classes: {
                            focused: classes.inputFocused
                        },
                        value: search,
                        onKeyUp: (e)=>{
                            if (e.code !== 'Enter') return;
                            onSearch(search);
                        },
                        onChange: (e)=>setSearch(e.target.value)
                        ,
                        onBlur: ()=>onSearch(search)
                        ,
                        startAdornment: /*#__PURE__*/ (0,jsx_runtime.jsx)(InputAdornment/* default */.Z, {
                            position: "start",
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Search/* SearchIcon */.W, {})
                        }),
                        placeholder: t('post_dialog_share_with_input_placeholder')
                    }),
                    props.loading ? /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                        className: cx(classes.empty, classes.mainText),
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(entry/* LoadingBase */.Sx, {
                                style: {
                                    fontSize: '2rem'
                                }
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography_Typography/* default */.Z, {
                                children: t('loading')
                            })
                        ]
                    }) : /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                        className: classes.list,
                        children: itemsAfterSearch.length === 0 ? /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                            className: classes.empty,
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(SearchEmptyIcon, {
                                    style: {
                                        width: 36,
                                        height: 36
                                    }
                                }),
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography_Typography/* default */.Z, {
                                    children: props.searchEmptyText ?? t('compose_encrypt_share_dialog_empty')
                                })
                            ]
                        }) : itemsAfterSearch.map((item, idx)=>/*#__PURE__*/ (0,jsx_runtime.jsx)(ProfileInList, {
                                item: item,
                                highlightText: search,
                                selected: props.selected.some((x)=>x.linkedPersona?.publicKeyAsHex === item.linkedPersona?.publicKeyAsHex
                                ) || disabledItems?.includes(item),
                                disabled: props.disabled || disabledItems?.includes(item),
                                onChange: (_, checked)=>{
                                    if (checked) {
                                        props.onSelect(item);
                                    } else {
                                        props.onDeselect(item);
                                    }
                                }
                            }, idx)
                        )
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsxs)(DialogActions/* default */.Z, {
                className: classes.actions,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Button_Button/* default */.Z, {
                        fullWidth: true,
                        variant: "roundedFlat",
                        disabled: props.submitDisabled,
                        onClick: props.onSubmit,
                        children: t('back')
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Button_Button/* default */.Z, {
                        fullWidth: true,
                        variant: "roundedContained",
                        disabled: props.submitDisabled,
                        onClick: props.onSubmit,
                        children: t('done')
                    })
                ]
            })
        ]
    });
}

// EXTERNAL MODULE: ./src/components/DataSource/useActivatedUI.ts
var useActivatedUI = __webpack_require__(23397);
// EXTERNAL MODULE: ./src/components/DataSource/useNextID.ts
var useNextID = __webpack_require__(360);
;// CONCATENATED MODULE: ./src/components/shared/SelectRecipients/useTwitterIdByWalletSearch.tsx


function useTwitterIdByWalletSearch(bindings, value, type) {
    if (!bindings || !type) return src/* EMPTY_LIST */.rP;
    return bindings.map((binding)=>{
        const proofs = (0,uniqBy/* default */.Z)(binding.proofs.filter((x)=>x.platform === src/* NextIDPlatform.Twitter */.Vd.Twitter
        ), (proof)=>proof.identity
        );
        const linkedTwitterNames = proofs.map((x)=>x.identity
        );
        return {
            nickname: proofs[0].identity,
            identifier: src/* ProfileIdentifier.of */.WO.of('twitter.com', proofs[0].identity).unwrap(),
            walletAddress: type === src/* NextIDPlatform.Ethereum */.Vd.Ethereum ? value : undefined,
            fromNextID: true,
            linkedTwitterNames,
            linkedPersona: src/* ECKeyIdentifier.fromHexPublicKeyK256 */.ob.fromHexPublicKeyK256(binding.persona).unwrap()
        };
    });
}

// EXTERNAL MODULE: ../web3-shared/evm/utils/address.ts
var address = __webpack_require__(2596);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/cloneDeep.js
var cloneDeep = __webpack_require__(46440);
;// CONCATENATED MODULE: ./src/components/shared/SelectRecipients/SelectRecipients.tsx










const resolveNextIDPlatform = (value)=>{
    if ((0,address/* isValidAddress */.At)(value)) return src/* NextIDPlatform.Ethereum */.Vd.Ethereum;
    if (value.length >= 44) return src/* NextIDPlatform.NextID */.Vd.NextID;
    if (/^\w{1,15}$/.test(value)) return src/* NextIDPlatform.Twitter */.Vd.Twitter;
    return;
};
const resolveValueToSearch = (value)=>{
    if (value.length === 44) return new src/* ECKeyIdentifier */.ob('secp256k1', value).publicKeyAsHex ?? value;
    return value.toLowerCase();
};
function SelectRecipientsUI(props) {
    const { items , selected , onSetSelected , open , onClose  } = props;
    const { t  } = (0,utils/* useI18N */.M1)();
    const [valueToSearch, setValueToSearch] = (0,react.useState)('');
    const currentIdentity = (0,useActivatedUI/* useCurrentIdentity */.Ud)();
    const type = resolveNextIDPlatform(valueToSearch);
    const value = resolveValueToSearch(valueToSearch);
    const { loading: searchLoading , value: NextIDResults  } = (0,useNextID/* useNextIDBoundByPlatform */.OB)(type ?? src/* NextIDPlatform.NextID */.Vd.NextID, value);
    const NextIDItems = useTwitterIdByWalletSearch(NextIDResults, value, type);
    const profileItems = items.recipients?.filter((x)=>x.identifier !== currentIdentity?.identifier
    );
    const searchedList = (0,uniqBy/* default */.Z)(profileItems?.concat(NextIDItems) ?? [], ({ linkedPersona  })=>linkedPersona?.publicKeyAsHex
    );
    (0,react.useEffect)(()=>void (open && items.request())
    , [
        open,
        items.request
    ]);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(SelectRecipientsDialogUI, {
        searchEmptyText: valueToSearch ? t('wallet_search_no_result') : undefined,
        loading: searchLoading,
        onSearch: (v)=>{
            setValueToSearch(v);
        },
        open: open,
        items: searchedList || src/* EMPTY_LIST */.rP,
        selected: selected,
        disabled: false,
        submitDisabled: false,
        onSubmit: onClose,
        onClose: onClose,
        onSelect: (item)=>onSetSelected([
                ...selected,
                item
            ])
        ,
        onDeselect: (item)=>{
            onSetSelected((0,cloneDeep/* default */.Z)(selected).filter((x)=>x.linkedPersona?.publicKeyAsHex !== item.linkedPersona?.publicKeyAsHex
            ));
        }
    });
}

// EXTERNAL MODULE: ../icons/general/RightArrow.tsx
var RightArrow = __webpack_require__(64947);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Popover/Popover.js + 1 modules
var Popover = __webpack_require__(73551);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/RadioGroup/RadioGroup.js
var RadioGroup = __webpack_require__(54152);
;// CONCATENATED MODULE: ./src/components/CompositionDialog/PopoverListTrigger.tsx





const PopoverListTrigger_useStyles = (0,entry/* makeStyles */.ZL)()({
    popper: {
        overflow: 'visible',
        boxShadow: '0px 0px 16px 0px rgba(101, 119, 134, 0.2)',
        borderRadius: 4
    },
    popperText: {
        fontSize: 14,
        fontWeight: 700,
        lineHeight: '18px',
        display: 'flex',
        alignItems: 'center',
        gap: 4,
        cursor: 'pointer'
    },
    paper: {
        width: 280,
        padding: 12,
        boxSizing: 'border-box'
    },
    selected: {
        fontSize: 14,
        lineHeight: '18px',
        fontWeight: 700
    }
});
function PopoverListTrigger({ anchorEl , selected , selectedTitle , children , setAnchorEl , onChange  }) {
    const { classes  } = PopoverListTrigger_useStyles();
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                className: classes.popperText,
                onClick: (e)=>{
                    setAnchorEl(anchorEl ? null : e.currentTarget);
                },
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography_Typography/* default */.Z, {
                        className: classes.selected,
                        children: selectedTitle
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(RightArrow/* RightArrowIcon */.A, {})
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Popover/* default */.ZP, {
                disablePortal: true,
                className: classes.popper,
                open: Boolean(anchorEl),
                anchorEl: anchorEl,
                onClose: ()=>setAnchorEl(null)
                ,
                anchorOrigin: {
                    vertical: 'top',
                    horizontal: 'right'
                },
                transformOrigin: {
                    vertical: 'bottom',
                    horizontal: 'right'
                },
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(RadioGroup/* default */.Z, {
                    className: classes.paper,
                    value: selected,
                    onChange: (e)=>onChange(e.target.value)
                    ,
                    children: children
                })
            })
        ]
    });
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Radio/Radio.js + 5 modules
var Radio = __webpack_require__(68421);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.8.0_ar3vczqpton7uep5462l6mtgi4/node_modules/@mui/icons-material/esm/CheckCircle.js
var CheckCircle = __webpack_require__(10021);
;// CONCATENATED MODULE: ./src/components/CompositionDialog/PopoverListItem.tsx




const PopoverListItem_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        item: {
            display: 'flex',
            alignItems: 'center'
        },
        mainTitle: {
            fontSize: 14,
            color: theme.palette.text.primary,
            fontWeight: 700
        },
        subTitle: {
            fontSize: 14,
            color: theme.palette.text.secondary,
            whiteSpace: 'nowrap'
        },
        pointer: {
            cursor: 'pointer'
        }
    })
);
function PopoverListItem(props) {
    const { title , subTitle , value , itemTail , disabled , onItemClick  } = props;
    const { classes , cx  } = PopoverListItem_useStyles();
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
        children: /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
            style: disabled ? {
                opacity: 0.5,
                pointerEvents: 'none'
            } : {},
            className: itemTail ? cx(classes.item, classes.pointer) : classes.item,
            onClick: onItemClick,
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsx)(Radio/* default */.Z, {
                    checkedIcon: /*#__PURE__*/ (0,jsx_runtime.jsx)(CheckCircle/* default */.Z, {}),
                    disabled: disabled,
                    value: value
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box_Box/* default */.Z, {
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography_Typography/* default */.Z, {
                            className: classes.mainTitle,
                            children: title
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography_Typography/* default */.Z, {
                            className: classes.subTitle,
                            children: subTitle
                        })
                    ]
                }),
                itemTail
            ]
        })
    });
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/@dimensiondev+kit@0.0.0-20220617045824-8bc7a27/node_modules/@dimensiondev/kit/esm/index.js
var kit_esm = __webpack_require__(46123);
;// CONCATENATED MODULE: ./src/components/CompositionDialog/EncryptionTargetSelector.tsx











const EncryptionTargetSelector_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        optionTitle: {
            fontSize: 14,
            lineHeight: '18px',
            color: theme.palette.text.secondary,
            marginRight: 12
        },
        popper: {
            overflow: 'visible',
            boxShadow: '0px 0px 16px 0px rgba(101, 119, 134, 0.2)',
            borderRadius: 4
        },
        popperText: {
            fontSize: 14,
            fontWeight: 700,
            lineHeight: '18px',
            display: 'flex',
            alignItems: 'center',
            gap: 4,
            cursor: 'pointer'
        },
        item: {
            display: 'flex',
            alignItems: 'center'
        },
        divider: {
            width: '100%',
            height: 1,
            background: theme.palette.divider,
            margin: '8px 0'
        },
        mainTitle: {
            fontSize: 14,
            color: theme.palette.text.primary,
            fontWeight: 700
        },
        subTitle: {
            fontSize: 14,
            color: theme.palette.text.secondary,
            whiteSpace: 'nowrap'
        },
        paper: {
            width: 280,
            padding: 12,
            boxSizing: 'border-box'
        },
        flex: {
            width: '100%',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'space-between',
            padding: 4,
            boxSizing: 'border-box'
        },
        create: {
            fontSize: 14,
            cursor: 'pointer',
            fontWeight: 700,
            color: theme.palette.primary.main
        },
        rightIcon: {
            marginLeft: 'auto'
        },
        pointer: {
            cursor: 'pointer'
        }
    })
);
function EncryptionTargetSelector(props) {
    const { t  } = (0,utils/* useI18N */.M1)();
    const { classes  } = EncryptionTargetSelector_useStyles();
    const [anchorEl, setAnchorEl] = (0,react.useState)(null);
    const e2eDisabledMessage = props.e2eDisabled && props.e2eDisabled !== E2EUnavailableReason.NoLocalKey ? /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
        className: classes.flex,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography_Typography/* default */.Z, {
                className: classes.mainTitle,
                children: t('persona_required')
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography_Typography/* default */.Z, {
                className: classes.create,
                onClick: ()=>{
                    if (props.e2eDisabled === E2EUnavailableReason.NoLocalKey) return;
                    props.e2eDisabled === E2EUnavailableReason.NoPersona ? props.onCreatePersona() : props.onConnectPersona();
                },
                children: props.e2eDisabled === E2EUnavailableReason.NoPersona ? t('create') : t('connect')
            })
        ]
    }) : null;
    const noLocalKeyMessage = props.e2eDisabled === E2EUnavailableReason.NoLocalKey && /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
        className: classes.flex,
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography_Typography/* default */.Z, {
            className: classes.mainTitle,
            children: t('compose_no_local_key')
        })
    });
    const selectedTitle = ()=>{
        const selected = props.target;
        const shareWithNum = props.selectedRecipientLength;
        if (selected === src/* EncryptionTargetType.E2E */.J4.E2E) return shareWithNum > 1 ? t('compose_shared_friends_other', {
            count: shareWithNum
        }) : t('compose_shared_friends_one');
        else if (selected === src/* EncryptionTargetType.Public */.J4.Public) return t('compose_encrypt_visible_to_all');
        else if (selected === src/* EncryptionTargetType.Self */.J4.Self) return t('compose_encrypt_visible_to_private');
        (0,kit_esm/* unreachable */.t1)(selected);
    };
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography_Typography/* default */.Z, {
                className: classes.optionTitle,
                children: t('post_dialog_visible_to')
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsxs)(PopoverListTrigger, {
                selected: props.target,
                selectedTitle: selectedTitle(),
                anchorEl: anchorEl,
                setAnchorEl: setAnchorEl,
                onChange: props.onChange,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(PopoverListItem, {
                        onItemClick: ()=>props.onChange(src/* EncryptionTargetType.Public */.J4.Public)
                        ,
                        value: src/* EncryptionTargetType.Public */.J4.Public,
                        title: t('compose_encrypt_visible_to_all'),
                        subTitle: t('compose_encrypt_visible_to_all_sub')
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                        className: classes.divider
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(PopoverListItem, {
                        onItemClick: ()=>props.onChange(src/* EncryptionTargetType.Self */.J4.Self)
                        ,
                        disabled: !!props.e2eDisabled,
                        value: src/* EncryptionTargetType.Self */.J4.Self,
                        title: t('compose_encrypt_visible_to_private'),
                        subTitle: t('compose_encrypt_visible_to_private_sub')
                    }),
                    e2eDisabledMessage,
                    noLocalKeyMessage,
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                        className: classes.divider
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(PopoverListItem, {
                        onItemClick: ()=>{
                            props.onChange(src/* EncryptionTargetType.E2E */.J4.E2E);
                            setAnchorEl(null);
                        },
                        itemTail: /*#__PURE__*/ (0,jsx_runtime.jsx)(RightArrow/* RightArrowIcon */.A, {
                            className: classes.rightIcon
                        }),
                        disabled: !!props.e2eDisabled,
                        value: src/* EncryptionTargetType.E2E */.J4.E2E,
                        title: t('compose_encrypt_visible_to_share'),
                        subTitle: t('compose_encrypt_visible_to_share_sub')
                    }),
                    e2eDisabledMessage,
                    noLocalKeyMessage
                ]
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/components/CompositionDialog/EncryptionMethodSelector.tsx







const EncryptionMethodSelector_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        optionTitle: {
            fontFamily: 'sans-serif',
            fontSize: 14,
            lineHeight: '18px',
            color: theme.palette.text.secondary,
            marginRight: 12
        },
        divider: {
            width: '100%',
            height: 1,
            background: theme.palette.divider,
            margin: '8px 0'
        },
        rightIcon: {
            marginLeft: 'auto'
        }
    })
);
var EncryptionMethodType;
(function(EncryptionMethodType) {
    EncryptionMethodType["Text"] = 'text';
    EncryptionMethodType["Image"] = 'image';
})(EncryptionMethodType || (EncryptionMethodType = {}));
function EncryptionMethodSelector(props) {
    const { t  } = (0,utils/* useI18N */.M1)();
    const { classes  } = EncryptionMethodSelector_useStyles();
    const [anchorEl, setAnchorEl] = (0,react.useState)(null);
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography_Typography/* default */.Z, {
                className: classes.optionTitle,
                children: t('post_dialog_encryption_method')
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsxs)(PopoverListTrigger, {
                selected: props.method ?? EncryptionMethodType.Text,
                anchorEl: anchorEl,
                setAnchorEl: setAnchorEl,
                onChange: props.onChange,
                selectedTitle: props.method === EncryptionMethodType.Text ? t('compose_encrypt_method_text') : t('compose_encrypt_method_image'),
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(PopoverListItem, {
                        value: EncryptionMethodType.Text,
                        title: t('compose_encrypt_method_text'),
                        subTitle: t('compose_encrypt_method_text_sub_title')
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                        className: classes.divider
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(PopoverListItem, {
                        value: EncryptionMethodType.Image,
                        title: t('compose_encrypt_method_image'),
                        subTitle: t('compose_encrypt_method_image_sub_title')
                    })
                ]
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/components/CompositionDialog/CompositionUI.tsx


















const CompositionUI_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        root: {
            '& > *': {
                marginBottom: '18px !important'
            },
            minHeight: 450,
            overflowY: 'auto'
        },
        flex: {
            width: '100%',
            display: 'flex',
            alignItems: 'center',
            flexWrap: 'wrap'
        },
        sup: {
            paddingLeft: 2
        },
        actions: {
            position: 'absolute',
            bottom: 0,
            width: '100%',
            left: '50%',
            transform: 'translateX(-50%)',
            display: 'flex',
            padding: '14px 16px',
            boxSizing: 'border-box',
            flexDirection: 'row',
            justifyContent: 'flex-end',
            alignItems: 'center',
            background: theme.palette.background.paper,
            boxShadow: `0px 0px 20px 0px ${theme.palette.background.messageShadow}`
        },
        between: {
            justifyContent: 'space-between'
        },
        popper: {
            overflow: 'visible',
            padding: 6
        },
        popperText: {
            fontSize: 14,
            fontWeight: 700,
            lineHeight: '18px',
            display: 'flex',
            alignItems: 'center',
            gap: 4,
            cursor: 'pointer'
        },
        optionTitle: {
            fontSize: 14,
            lineHeight: '18px',
            color: theme.palette.text.secondary,
            marginRight: 12
        },
        editorWrapper: {
            minHeight: 338,
            background: theme.palette.background.input,
            padding: 14,
            boxSizing: 'border-box',
            borderRadius: 8
        },
        sendIcon: {
            width: 18,
            height: 18,
            fill: theme.palette.text.buttonText
        }
    })
);
const CompositionDialogUI = /*#__PURE__*/ (0,react.forwardRef)((props, ref)=>{
    const { classes , cx  } = CompositionUI_useStyles();
    const { t  } = (0,utils/* useI18N */.M1)();
    const [currentPostSize, __updatePostSize] = (0,react.useState)(0);
    const [isSelectRecipientOpen, setSelectRecipientOpen] = (0,react.useState)(false);
    const Editor = (0,react.useRef)(null);
    const PluginEntry = (0,react.useRef)(null);
    const [sending, setSending] = (0,react.useState)(false);
    const updatePostSize = (0,react.useCallback)((size)=>{
        (0,react.startTransition)(()=>__updatePostSize(size)
        );
    }, []);
    const { setEncryptionKind , encryptionKind , recipients , setRecipients  } = useSetEncryptionKind(props);
    const { encodingKind , setEncoding  } = useEncryptionEncode(props);
    const reset = (0,react.useCallback)(()=>{
        (0,react.startTransition)(()=>{
            Editor.current?.reset();
            setEncryptionKind(src/* EncryptionTargetType.Public */.J4.Public);
            setRecipients([]);
            // Don't clean up the image/text selection across different encryption.
            // setEncoding('text')
            setSending(false);
        });
    }, []);
    const refItem = (0,react.useMemo)(()=>({
            setMessage: (msg)=>{
                if (Editor.current) Editor.current.value = msg;
            },
            setEncryptionKind,
            startPlugin: (id)=>PluginEntry.current?.openPlugin(id)
            ,
            reset
        })
    , [
        reset
    ]);
    (0,react.useImperativeHandle)(ref, ()=>refItem
    , [
        refItem
    ]);
    const context = (0,react.useMemo)(()=>({
            attachMetadata: (meta, data)=>Editor.current?.attachMetadata(meta, data)
            ,
            dropMetadata: (meta)=>Editor.current?.dropMetadata(meta)
        })
    , []);
    const submitAvailable = currentPostSize > 0 && currentPostSize < (props.maxLength ?? Number.POSITIVE_INFINITY);
    const onSubmit = (0,react.useCallback)(()=>{
        if (!Editor.current) return;
        setSending(true);
        props.onSubmit({
            content: Editor.current.value,
            encode: encodingKind,
            target: encryptionKind === src/* EncryptionTargetType.Public */.J4.Public ? {
                type: 'public'
            } : {
                type: 'E2E',
                target: recipients.map((x)=>x.identifier
                )
            }
        }).finally(reset);
    }, [
        encodingKind,
        encryptionKind,
        recipients,
        props.onSubmit
    ]);
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(entry_content_script/* CompositionContext.Provider */.Nw.Provider, {
        value: context,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                className: classes.root,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                        className: classes.editorWrapper,
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TypedMessageEditor, {
                            autoFocus: true,
                            readonly: sending,
                            ref: (element)=>{
                                Editor.current = element;
                                if (element) updatePostSize(element.estimatedLength);
                            },
                            onChange: (message)=>{
                                (0,react.startTransition)(()=>props.onChange?.(message)
                                );
                                updatePostSize(Editor.current?.estimatedLength || 0);
                            }
                        })
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                        className: classes.flex,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography_Typography/* default */.Z, {
                                className: classes.optionTitle,
                                children: t('plugins')
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(PluginEntryRender, {
                                readonly: sending,
                                ref: PluginEntry,
                                isOpenFromApplicationBoard: props.isOpenFromApplicationBoard
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                        className: cx(classes.flex, classes.between),
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(EncryptionTargetSelector, {
                                target: encryptionKind,
                                onConnectPersona: props.onConnectPersona,
                                onCreatePersona: props.onCreatePersona,
                                e2eDisabled: props.e2eEncryptionDisabled,
                                selectedRecipientLength: recipients.length,
                                onChange: (target)=>{
                                    setEncryptionKind(target);
                                    if (target === src/* EncryptionTargetType.E2E */.J4.E2E) setSelectRecipientOpen(true);
                                }
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(SelectRecipientsUI, {
                                open: isSelectRecipientOpen,
                                onClose: ()=>setSelectRecipientOpen(false)
                                ,
                                disabled: sending,
                                items: props.recipients,
                                selected: recipients,
                                onSetSelected: setRecipients
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                        className: cx(classes.flex, classes.between),
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(EncryptionMethodSelector, {
                            method: encodingKind,
                            onChange: setEncoding
                        })
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                className: classes.actions,
                children: [
                    props.maxLength ? /*#__PURE__*/ (0,jsx_runtime.jsx)(CharLimitIndicator, {
                        value: currentPostSize,
                        max: props.maxLength
                    }) : null,
                    props.requireClipboardPermission && !props.hasClipboardPermission && /*#__PURE__*/ (0,jsx_runtime.jsx)(Button_Button/* default */.Z, {
                        variant: "outlined",
                        onClick: props.onRequestClipboardPermission,
                        children: t('post_dialog_enable_paste_auto')
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(LoadingButton/* default */.Z, {
                        disabled: !submitAvailable,
                        loading: sending,
                        loadingPosition: "start",
                        variant: "roundedContained",
                        onClick: onSubmit,
                        startIcon: /*#__PURE__*/ (0,jsx_runtime.jsx)(Send/* SendIcon */.j, {
                            className: classes.sendIcon
                        }),
                        children: t('post_dialog__button')
                    })
                ]
            })
        ]
    });
});
var E2EUnavailableReason;
(function(E2EUnavailableReason) {
    E2EUnavailableReason[E2EUnavailableReason[// These reasons only applies to E2E encryption.
    "NoPersona"] = 1] = "NoPersona";
    E2EUnavailableReason[E2EUnavailableReason["NoLocalKey"] = 2] = "NoLocalKey";
    E2EUnavailableReason[E2EUnavailableReason["NoConnection"] = 3] = "NoConnection";
})(E2EUnavailableReason || (E2EUnavailableReason = {}));
function useSetEncryptionKind(props) {
    const [internal_encryptionKind, setEncryptionKind] = (0,react.useState)(src/* EncryptionTargetType.Public */.J4.Public);
    // TODO: Change to ProfileIdentifier
    const [recipients, setRecipients] = (0,react.useState)([]);
    let encryptionKind = internal_encryptionKind;
    if (encryptionKind === src/* EncryptionTargetType.E2E */.J4.E2E && recipients.length === 0) encryptionKind = src/* EncryptionTargetType.Self */.J4.Self;
    if (props.e2eEncryptionDisabled) encryptionKind = src/* EncryptionTargetType.Public */.J4.Public;
    return {
        recipients,
        setRecipients,
        encryptionKind,
        setEncryptionKind
    };
}
function useEncryptionEncode(props) {
    const [encoding, setEncoding] = (0,react.useState)(props.supportTextEncoding ? EncryptionMethodType.Text : EncryptionMethodType.Image);
    const imagePayloadSelected = props.supportImageEncoding && (encoding === EncryptionMethodType.Image || !props.supportTextEncoding);
    // XOR
    const imagePayloadReadonly = props.supportImageEncoding && !props.supportTextEncoding || !props.supportImageEncoding && props.supportTextEncoding;
    const imagePayloadVisible = props.supportImageEncoding;
    const encodingKind = imagePayloadSelected ? EncryptionMethodType.Image : EncryptionMethodType.Text;
    return {
        encodingKind,
        imagePayloadSelected,
        imagePayloadReadonly,
        imagePayloadVisible,
        setEncoding
    };
}
function useMetadataDebugger(context, Editor) {
    const isDebug = useSubscription(PersistentStorages.Settings.storage.debugging.subscription);
    const [__MetadataDebuggerMeta, __configureMetadataDebugger] = useState(null);
    const __syncMetadataDebugger = ()=>{
        const meta = Editor?.value.meta ?? new Map();
        setTimeout(()=>__configureMetadataDebugger(meta)
        );
    };
    const UI = [
        isDebug && /*#__PURE__*/ _jsx(Chip, {
            label: "Post metadata inspector",
            onClick: __syncMetadataDebugger
        }, "debug"),
        isDebug && __MetadataDebuggerMeta && /*#__PURE__*/ _jsx(DebugMetadataInspector, {
            meta: __MetadataDebuggerMeta,
            onNewMeta: (meta, data)=>{
                context.attachMetadata(meta, data);
                __syncMetadataDebugger();
            },
            onDeleteMeta: (meta)=>{
                context.dropMetadata(meta);
                __syncMetadataDebugger();
            },
            onExit: ()=>__configureMetadataDebugger(null)
        }, "debug-dialog"), 
    ];
    return UI;
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.4.0/node_modules/react-use/esm/useAsyncRetry.js
var useAsyncRetry = __webpack_require__(58500);
// EXTERNAL MODULE: ./src/extension/service.ts
var service = __webpack_require__(78778);
;// CONCATENATED MODULE: ./src/components/CompositionDialog/useCompositionClipboardRequest.tsx




function useCompositionClipboardRequest(requireClipboardPermission) {
    const { retry , value: hasClipboardPermission = true  } = (0,useAsyncRetry/* default */.Z)(async ()=>{
        if (!requireClipboardPermission) return true;
        return service/* default.Helper.queryExtensionPermission */.ZP.Helper.queryExtensionPermission({
            permissions: [
                'clipboardRead'
            ]
        });
    }, [
        requireClipboardPermission
    ]);
    const onRequestClipboardPermission = (0,react.useCallback)(()=>{
        if (!requireClipboardPermission) return;
        service/* default.Helper.requestExtensionPermission */.ZP.Helper.requestExtensionPermission({
            permissions: [
                'clipboardRead'
            ]
        }).finally(()=>{
            utils/* MaskMessages.events.requestExtensionPermission.sendToAll */.ql.events.requestExtensionPermission.sendToAll({
                permissions: [
                    'clipboardRead'
                ]
            });
        });
    }, [
        requireClipboardPermission
    ]);
    return {
        onQueryClipboardPermission: retry,
        requireClipboardPermission,
        hasClipboardPermission,
        onRequestClipboardPermission
    };
}

// EXTERNAL MODULE: ../encryption/src/index.ts
var encryption_src = __webpack_require__(66525);
// EXTERNAL MODULE: ../plugins/FileService/src/index.ts
var FileService_src = __webpack_require__(787);
// EXTERNAL MODULE: ./src/plugins/ITO/SNSAdaptor/helpers.ts + 2 modules
var helpers = __webpack_require__(32730);
// EXTERNAL MODULE: ./src/plugins/RedPacket/SNSAdaptor/helpers.ts + 2 modules
var SNSAdaptor_helpers = __webpack_require__(79163);
// EXTERNAL MODULE: ./src/social-network-adaptor/facebook.com/base.ts
var facebook_com_base = __webpack_require__(5492);
// EXTERNAL MODULE: ./src/social-network-adaptor/twitter.com/base.ts
var twitter_com_base = __webpack_require__(72005);
;// CONCATENATED MODULE: ./src/resources/image-payload/index.ts
const ImagePayloadURLs = {
    v2: new URL(/* asset import */ __webpack_require__(48825), __webpack_require__.b).toString(),
    eth: new URL(/* asset import */ __webpack_require__(18077), __webpack_require__.b).toString()
};

// EXTERNAL MODULE: ./src/utils/utils.ts
var utils_utils = __webpack_require__(47675);
;// CONCATENATED MODULE: ./src/components/InjectedComponents/SteganographyTextPayload.ts





async function SteganographyTextPayload(template, text) {
    const pass = social_network/* activatedSocialNetworkUI.configuration.steganography */.LM.configuration.steganography?.password?.() || 'mask';
    const blankImage = await (0,utils_utils/* downloadUrl */.GR)(ImagePayloadURLs[template]).then((x)=>x.arrayBuffer()
    );
    const secretImage = await service/* default.Crypto.steganographyEncodeImage */.ZP.Crypto.steganographyEncodeImage(new Uint8Array(blankImage), {
        text,
        pass,
        template,
        grayscaleAlgorithm: social_network/* activatedSocialNetworkUI.configuration.steganography */.LM.configuration.steganography?.grayscaleAlgorithm ?? encryption_src/* GrayscaleAlgorithm.NONE */.Ft.NONE
    });
    const blob = new Blob([
        secretImage
    ], {
        type: 'image/png'
    });
    return blob;
}

;// CONCATENATED MODULE: ./src/components/CompositionDialog/useSubmit.ts












function useSubmit(onClose, reason) {
    const { t  } = (0,utils/* useI18N */.M1)();
    const lastRecognizedIdentity = (0,useActivatedUI/* useLastRecognizedIdentity */.FB)();
    return (0,react.useCallback)(async (info)=>{
        const { content , encode , target  } = info;
        const fallbackProfile = social_network/* globalUIState.profiles.value.0 */.EJ.profiles.value[0]?.identifier;
        if (encode === 'image' && !lastRecognizedIdentity) throw new Error('No Current Profile');
        const _encrypted = await service/* default.Crypto.encryptTo */.ZP.Crypto.encryptTo(content, target, lastRecognizedIdentity?.identifier ?? fallbackProfile, social_network/* activatedSocialNetworkUI.encryptionNetwork */.LM.encryptionNetwork);
        const encrypted = (0,encryption_src/* socialNetworkEncoder */.zl)(social_network/* activatedSocialNetworkUI.encryptionNetwork */.LM.encryptionNetwork, _encrypted);
        const [imageTemplateType, decoratedText] = decorateEncryptedText(encrypted, t, content.meta);
        if (encode === 'image') {
            const defaultText = t('additional_post_box__steganography_post_pre', {
                random: new Date().toLocaleString()
            });
            if (decoratedText) {
                await pasteImage(decoratedText.replace(encrypted, ''), encrypted, imageTemplateType, reason);
            } else {
                await pasteImage(defaultText, encrypted, 'v2', reason);
            }
        } else {
            pasteTextEncode(decoratedText ?? t('additional_post_box__encrypted_post_pre', {
                encrypted
            }), reason);
        }
        onClose();
    }, [
        t,
        lastRecognizedIdentity,
        onClose,
        reason
    ]);
}
function pasteTextEncode(text, reason) {
    social_network/* activatedSocialNetworkUI.automation.nativeCompositionDialog */.LM.automation.nativeCompositionDialog?.appendText?.(text, {
        recover: true,
        reason
    });
}
async function pasteImage(relatedTextPayload, encrypted, template, reason) {
    const img = await SteganographyTextPayload(template, encrypted);
    // Don't await this, otherwise the dialog won't disappear
    social_network/* activatedSocialNetworkUI.automation.nativeCompositionDialog.attachImage */.LM.automation.nativeCompositionDialog.attachImage(img, {
        recover: true,
        relatedTextPayload,
        reason
    });
}
// TODO: Provide API to plugin to post-process post content,
// then we can move these -PreText's and meta readers into plugin's own context
function decorateEncryptedText(encrypted, t, meta) {
    const hasOfficialAccount = (0,twitter_com_base/* isTwitter */.L)(social_network/* activatedSocialNetworkUI */.LM) || (0,facebook_com_base/* isFacebook */.D)(social_network/* activatedSocialNetworkUI */.LM);
    const officialAccount = (0,twitter_com_base/* isTwitter */.L)(social_network/* activatedSocialNetworkUI */.LM) ? t('twitter_account') : t('facebook_account');
    if ((0,SNSAdaptor_helpers/* RedPacketMetadataReader */.Qc)(meta).ok || (0,SNSAdaptor_helpers/* RedPacketNftMetadataReader */.st)(meta).ok) {
        return [
            'eth',
            hasOfficialAccount ? t('additional_post_box__encrypted_post_pre_red_packet_twitter_official_account', {
                encrypted,
                account: officialAccount
            }) : t('additional_post_box__encrypted_post_pre_red_packet', {
                encrypted
            }), 
        ];
    } else if ((0,helpers/* ITO_MetadataReader */.fF)(meta).ok) {
        return [
            'v2',
            hasOfficialAccount ? t('additional_post_box__encrypted_post_pre_ito_twitter_official_account', {
                encrypted,
                account: officialAccount
            }) : t('additional_post_box__encrypted_post_pre_ito', {
                encrypted
            }), 
        ];
    } else if ((0,FileService_src/* FileInfoMetadataReader */.r)(meta).ok) {
        return [
            'v2',
            hasOfficialAccount ? t('additional_post_box__encrypted_post_pre_file_service_twitter_official_account', {
                encrypted,
                account: officialAccount
            }) : t('additional_post_box__encrypted_post_pre_file_service', {
                encrypted
            }), 
        ];
    }
    return [];
}

// EXTERNAL MODULE: ./shared/native-rpc/index.ts + 1 modules
var native_rpc = __webpack_require__(76536);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.4.0/node_modules/react-use/esm/useAsync.js
var useAsync = __webpack_require__(70981);
// EXTERNAL MODULE: ./src/components/DataSource/usePersonaConnectStatus.ts
var usePersonaConnectStatus = __webpack_require__(9987);
;// CONCATENATED MODULE: ./src/components/CompositionDialog/Composition.tsx

















const Composition_useStyles = (0,entry/* makeStyles */.ZL)()({
    dialogRoot: {
        minWidth: 400,
        width: 600,
        boxShadow: 'none',
        backgroundImage: 'none',
        maxWidth: 'none'
    },
    hideDialogRoot: {
        visibility: 'hidden'
    }
});
let openOnInitAnswered = false;
function Composition({ type ='timeline' , requireClipboardPermission  }) {
    const { t  } = (0,utils/* useI18N */.M1)();
    const { classes , cx  } = Composition_useStyles();
    const currentIdentity = (0,useActivatedUI/* useCurrentIdentity */.Ud)()?.identifier;
    const connectStatus = (0,usePersonaConnectStatus/* usePersonaConnectStatus */.x)();
    /** @deprecated */ const { value: hasLocalKey  } = (0,useAsync/* default */.Z)(async ()=>currentIdentity ? service/* default.Identity.hasLocalKey */.ZP.Identity.hasLocalKey(currentIdentity) : false
    , [
        currentIdentity,
        connectStatus
    ]);
    const [reason1, setReason] = (0,react.useState)('timeline');
    // #region Open
    const [open1, setOpen] = (0,react.useState)(false);
    const [isOpenFromApplicationBoard, setIsOpenFromApplicationBoard] = (0,react.useState)(false);
    const onClose = (0,react.useCallback)(()=>{
        setOpen(false);
        UI.current?.reset();
    }, []);
    (0,react.useEffect)(()=>{
        if (native_rpc/* hasNativeAPI */._) {
            native_rpc/* nativeAPI */.Nz?.api.notify_composition_requested({
                reason: reason1,
                open: open1
            });
        }
        if (openOnInitAnswered) return;
        openOnInitAnswered = true;
        service/* default.SocialNetwork.getDesignatedAutoStartPluginID */.ZP.SocialNetwork.getDesignatedAutoStartPluginID().then((plugin)=>{
            if (!plugin) return;
            setOpen(true);
            UI.current?.startPlugin(plugin);
        });
    }, []);
    const { onQueryClipboardPermission , hasClipboardPermission , onRequestClipboardPermission  } = useCompositionClipboardRequest(requireClipboardPermission || false);
    (0,react.useEffect)(()=>{
        return utils/* MaskMessages.events.requestExtensionPermission.on */.ql.events.requestExtensionPermission.on(()=>onQueryClipboardPermission?.()
        );
    }, [
        onQueryClipboardPermission
    ]);
    (0,react.useEffect)(()=>{
        return src/* CrossIsolationMessages.events.requestComposition.on */.WF.events.requestComposition.on(({ reason , open , content , options  })=>{
            if (reason !== 'reply' && reason !== type || reason === 'reply' && type === 'popup') return;
            setOpen(open);
            setReason(reason);
            setIsOpenFromApplicationBoard(Boolean(options?.isOpenFromApplicationBoard));
            if (content) UI.current?.setMessage(content);
            if (options?.target) UI.current?.setEncryptionKind(options.target);
            if (options?.startupPlugin) UI.current?.startPlugin(options.startupPlugin);
        });
    }, [
        type
    ]);
    (0,react.useEffect)(()=>{
        if (!open1) return;
        return utils/* MaskMessages.events.replaceComposition.on */.ql.events.replaceComposition.on((message)=>{
            const ui = UI.current;
            if (!ui) return;
            UI.current.setMessage(message);
        });
    }, [
        open1
    ]);
    // #endregion
    // #region submit
    const onSubmit_ = useSubmit(onClose, reason1);
    // #endregion
    const UI = (0,react.useRef)(null);
    const networkSupport = social_network/* activatedSocialNetworkUI.injection.newPostComposition */.LM.injection.newPostComposition?.supportedOutputTypes;
    const recipients = (0,useRecipientsList/* useRecipientsList */.a)();
    const isE2E_Disabled = (()=>{
        if (!connectStatus.currentConnectedPersona && !connectStatus.hasPersona) return E2EUnavailableReason.NoPersona;
        if (!connectStatus.connected && connectStatus.hasPersona) return E2EUnavailableReason.NoConnection;
        if (!hasLocalKey) return E2EUnavailableReason.NoLocalKey;
        return;
    })();
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(entry/* DialogStackingProvider */.yu, {
        children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(shared_src/* InjectedDialog */.Fl, {
            classes: {
                paper: cx(classes.dialogRoot, !open1 ? classes.hideDialogRoot : '')
            },
            keepMounted: true,
            open: open1,
            onClose: onClose,
            title: t('post_dialog__title'),
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsx)(DialogContent_DialogContent/* default */.Z, {
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(CompositionDialogUI, {
                        onConnectPersona: ()=>{
                            if (connectStatus.action) connectStatus.action();
                            setOpen(false);
                        },
                        onCreatePersona: ()=>{
                            service/* default.Helper.openDashboard */.ZP.Helper.openDashboard(src/* DashboardRoutes.Setup */.vq.Setup);
                            setOpen(false);
                        },
                        ref: UI,
                        hasClipboardPermission: hasClipboardPermission,
                        onRequestClipboardPermission: onRequestClipboardPermission,
                        requireClipboardPermission: requireClipboardPermission,
                        recipients: recipients,
                        maxLength: 560,
                        onSubmit: onSubmit_,
                        supportImageEncoding: networkSupport?.text ?? false,
                        supportTextEncoding: networkSupport?.image ?? false,
                        e2eEncryptionDisabled: isE2E_Disabled,
                        isOpenFromApplicationBoard: isOpenFromApplicationBoard
                    })
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(DialogActions/* default */.Z, {
                    sx: {
                        height: 68
                    }
                })
            ]
        })
    });
}


/***/ }),

/***/ 97997:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (/* binding */ GuideStep)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(35667);
/* harmony import */ var _masknet_shared_base_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(80226);
/* harmony import */ var _masknet_theme__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(31939);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(35878);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1728);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(96436);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(21784);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(83849);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(58757);
/* harmony import */ var _settings_settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(5903);
/* harmony import */ var _social_network__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82192);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(93455);









const useStyles = (0,_masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .makeStyles */ .ZL)()((theme)=>({
        container: {
            position: 'absolute',
            boxShadow: `0 0 0 3000px ${theme.palette.mode === 'light' ? 'rgba(0,0,0,.3)' : 'rgba(110,118,125,.3)'}`,
            borderRadius: 8
        },
        target: {
            background: 'transparent'
        },
        mask: {
            position: 'fixed',
            top: 0,
            width: '100vw',
            height: '100vh',
            background: 'transparent',
            zIndex: 1000
        },
        card: {
            position: 'absolute',
            left: 0,
            width: 256,
            padding: '16px',
            borderRadius: '16px',
            background: 'rgba(0,0,0,.85)',
            boxShadow: '0 4px 8px rgba(0,0,0,.1)',
            boxSizing: 'border-box',
            color: '#fff',
            '&.arrow-top:after': {
                content: '""',
                display: 'inline-block',
                width: 0,
                height: 0,
                border: 'solid 8px transparent',
                borderBottomColor: 'rgba(0,0,0,.85)',
                borderBottomWidth: '13px',
                borderTopWidth: 0,
                position: 'absolute',
                top: '-13px',
                left: '24px'
            },
            '&.arrow-bottom:after': {
                content: '""',
                display: 'inline-block',
                width: 0,
                height: 0,
                border: 'solid 8px transparent',
                borderTopColor: 'rgba(0,0,0,.85)',
                borderTopWidth: '13px',
                borderBottomWidth: 0,
                position: 'absolute',
                bottom: '-13px',
                left: '24px'
            }
        },
        buttonContainer: {
            display: 'flex',
            justifyContent: 'space-between',
            paddingTop: '16px'
        }
    })
);
const ActionButton = (0,_mui_material__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .ZP)('div')(({ theme  })=>({
        boxSizing: 'border-box',
        width: 104,
        height: 32,
        lineHeight: '32px',
        borderRadius: 16,
        textAlign: 'center',
        border: 'solid 1px #000',
        borderColor: '#fff',
        cursor: 'pointer',
        fontFamily: 'PingFang SC'
    })
);
const NextButton = (0,_mui_material__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .ZP)(ActionButton)({
    border: 'none',
    color: '#111418',
    background: '#fff'
});
function GuideStep({ total , step , tip , children , arrow =true , disabled =false , onComplete  }) {
    const { t  } = (0,_utils__WEBPACK_IMPORTED_MODULE_7__/* .useI18N */ .M1)();
    const { classes  } = useStyles();
    const childrenRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)();
    const [clientRect, setClientRect] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)({});
    const [open1, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);
    const [bottomAvailable1, setBottomAvailable] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(true);
    const ui = _social_network__WEBPACK_IMPORTED_MODULE_6__/* .activatedSocialNetworkUI */ .LM;
    const lastStepRef = _settings_settings__WEBPACK_IMPORTED_MODULE_5__/* .userGuideStatus */ .Ct[ui.networkIdentifier];
    const lastStep = (0,_masknet_shared_base_ui__WEBPACK_IMPORTED_MODULE_1__/* .useValueRef */ .E)(lastStepRef);
    (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{
        if (disabled) return;
        const open = +lastStep === step;
        setOpen(open);
        if (!open) return;
        if (location.pathname === '/home') return;
        location.assign('/home');
    }, [
        lastStep
    ]);
    (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{
        if (disabled) return;
        document.body.style.overflow = open1 ? 'hidden' : '';
    }, [
        open1
    ]);
    const onSkip = ()=>{
        setOpen(false);
        _settings_settings__WEBPACK_IMPORTED_MODULE_5__/* .userGuideStatus */ .Ct[ui.networkIdentifier].value = _settings_settings__WEBPACK_IMPORTED_MODULE_5__/* .userGuideVersion.value */ .lJ.value;
        _settings_settings__WEBPACK_IMPORTED_MODULE_5__/* .sayHelloShowed */ .Pg[ui.networkIdentifier].value = true;
    };
    const onNext = ()=>{
        setOpen(false);
        if (step !== total) {
            _settings_settings__WEBPACK_IMPORTED_MODULE_5__/* .userGuideStatus */ .Ct[ui.networkIdentifier].value = String(step + 1);
        }
    };
    const onTry = ()=>{
        setOpen(false);
        _settings_settings__WEBPACK_IMPORTED_MODULE_5__/* .userGuideStatus */ .Ct[ui.networkIdentifier].value = _settings_settings__WEBPACK_IMPORTED_MODULE_5__/* .userGuideVersion.value */ .lJ.value;
        onComplete?.();
    };
    (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{
        const onResize = ()=>{
            const cr = childrenRef.current?.getBoundingClientRect();
            if (cr) {
                const bottomAvailable = window.innerHeight - cr.height - cr.top > 200;
                setBottomAvailable(bottomAvailable);
                if (!cr.width) {
                    setClientRect({
                        ...cr,
                        top: 30,
                        left: 'calc(100vw - 300px)'
                    });
                } else {
                    setClientRect(cr);
                }
            } else {
                setClientRect(cr);
            }
        };
        onResize();
        window.addEventListener('resize', onResize);
        return ()=>{
            window.removeEventListener('resize', onResize);
        };
    }, [
        childrenRef,
        lastStep,
        open1
    ]);
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: [
            /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_4__.cloneElement)(children, {
                ref: childrenRef
            }),
            (0,_masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .usePortalShadowRoot */ .ad)((container)=>{
                if (!open1) return null;
                return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
                    container: container,
                    children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                        className: classes.mask,
                        onClick: (e)=>e.stopPropagation()
                        ,
                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                            className: classes.container,
                            style: {
                                top: clientRect.top,
                                left: clientRect.left
                            },
                            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .Z, {
                                className: classes.target,
                                style: {
                                    width: clientRect.width,
                                    height: clientRect.height
                                },
                                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                                    className: classnames__WEBPACK_IMPORTED_MODULE_3___default()(classes.card, arrow ? bottomAvailable1 ? 'arrow-top' : 'arrow-bottom' : ''),
                                    style: {
                                        left: clientRect.width < 50 ? -clientRect.width / 2 : 0,
                                        [bottomAvailable1 ? 'top' : 'bottom']: clientRect.height + 16
                                    },
                                    children: [
                                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                                            style: {
                                                paddingBottom: '16px'
                                            },
                                            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_mui_material__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
                                                sx: {
                                                    fontSize: 20
                                                },
                                                children: [
                                                    step,
                                                    "/",
                                                    total
                                                ]
                                            })
                                        }),
                                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                                            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z, {
                                                fontSize: 14,
                                                fontWeight: 600,
                                                children: tip
                                            })
                                        }),
                                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                                            className: classes.buttonContainer,
                                            children: step === total ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NextButton, {
                                                style: {
                                                    width: '100%'
                                                },
                                                onClick: onTry,
                                                children: t('try')
                                            }) : /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ActionButton, {
                                                        onClick: onSkip,
                                                        children: t('skip')
                                                    }),
                                                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NextButton, {
                                                        onClick: onNext,
                                                        children: t('next')
                                                    })
                                                ]
                                            })
                                        })
                                    ]
                                })
                            })
                        })
                    })
                });
            })
        ]
    });
};


/***/ }),

/***/ 43017:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "A": () => (/* binding */ PostDialogHint)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(35667);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(58757);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(13231);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(48941);
/* harmony import */ var _masknet_theme__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(31939);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(93455);
/* harmony import */ var _social_network_adaptor_facebook_com_utils_isMobile__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(16480);
/* harmony import */ var _resources_MaskIcon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(61305);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(83849);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _GuideStep__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97997);









const useStyles = (0,_masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .makeStyles */ .ZL)()((theme)=>({
        button: {
            // TODO: is it correct? (what about twitter?)
            padding: _social_network_adaptor_facebook_com_utils_isMobile__WEBPACK_IMPORTED_MODULE_4__/* .isMobileFacebook */ .q ? 0 : '7px'
        },
        text: {
            fontSize: 14,
            color: '#606770',
            marginLeft: theme.spacing(1)
        },
        wrapper: {
            display: 'flex',
            alignItems: 'center',
            width: '100%',
            padding: '8px 10px',
            borderBottom: '1px solid #dadde1'
        },
        tooltip: {
            color: 'white'
        }
    })
);
const ICON_MAP = {
    minds: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_resources_MaskIcon__WEBPACK_IMPORTED_MODULE_5__/* .MaskIconInMinds */ .oL, {}),
    default: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_resources_MaskIcon__WEBPACK_IMPORTED_MODULE_5__/* .MaskSharpIcon */ .LT, {
        color: "primary"
    })
};
const EntryIconButton = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)((props)=>{
    const { t  } = (0,_utils__WEBPACK_IMPORTED_MODULE_3__/* .useI18N */ .M1)();
    const { tooltip , disableGuideTip  } = props;
    const classes = (0,_masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .useStylesExtends */ .Bc)(useStyles(), props);
    const getEntry = ()=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
            title: "Mask Network",
            classes: {
                tooltip: classes.tooltip
            },
            placement: tooltip?.placement,
            disableHoverListener: tooltip?.disabled,
            PopperProps: {
                disablePortal: true
            },
            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .Z, {
                size: "large",
                className: classnames__WEBPACK_IMPORTED_MODULE_6___default()(classes.button, classes.iconButton),
                onClick: props.onHintButtonClicked,
                children: ICON_MAP?.[props?.iconType ?? 'default']
            })
        })
    ;
    return disableGuideTip ? getEntry() : /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_GuideStep__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
        step: 4,
        total: 4,
        tip: t('user_guide_tip_4'),
        onComplete: props.onHintButtonClicked,
        children: getEntry()
    });
});
const PostDialogHint = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(function PostDialogHintUI(props) {
    const { onHintButtonClicked , size , ...others } = props;
    const classes = (0,_masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .useStylesExtends */ .Bc)(useStyles(), props);
    const { t  } = (0,_utils__WEBPACK_IMPORTED_MODULE_3__/* .useI18N */ .M1)();
    return _social_network_adaptor_facebook_com_utils_isMobile__WEBPACK_IMPORTED_MODULE_4__/* .isMobileFacebook */ .q ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: classes.wrapper,
        onClick: onHintButtonClicked,
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(EntryIconButton, {
                size: size,
                onHintButtonClicked: ()=>undefined
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                className: classes.text,
                children: t('post_modal_hint__button')
            })
        ]
    }) : /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
        className: classes.buttonTransform,
        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(EntryIconButton, {
            size: size,
            onHintButtonClicked: onHintButtonClicked,
            ...others
        })
    });
});


/***/ }),

/***/ 16834:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "L": () => (/* binding */ SearchResultBox)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(35667);
/* harmony import */ var _masknet_plugin_infra_content_script__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(20778);


const PluginRenderer = (0,_masknet_plugin_infra_content_script__WEBPACK_IMPORTED_MODULE_1__/* .createInjectHooksRenderer */ .EK)(_masknet_plugin_infra_content_script__WEBPACK_IMPORTED_MODULE_1__/* .useActivatedPluginsSNSAdaptor.visibility.useAnyMode */ .Pz.visibility.useAnyMode, (x)=>x.SearchResultBox
);
function SearchResultBox(props) {
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PluginRenderer, {});
}


/***/ }),

/***/ 77126:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "z": () => (/* binding */ ToolboxHintUnstyled)
});

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(35667);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/ListItemButton/ListItemButton.js
var ListItemButton_ListItemButton = __webpack_require__(836);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/ListItemIcon/ListItemIcon.js
var ListItemIcon_ListItemIcon = __webpack_require__(23228);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Typography/Typography.js + 1 modules
var Typography_Typography = __webpack_require__(21784);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/ListItemText/ListItemText.js
var ListItemText_ListItemText = __webpack_require__(63153);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Box/Box.js
var Box = __webpack_require__(96436);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/styles/useTheme.js
var useTheme = __webpack_require__(76618);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/CircularProgress/CircularProgress.js + 1 modules
var CircularProgress = __webpack_require__(69314);
// EXTERNAL MODULE: ../web3-shared/base/src/index.ts + 1 modules
var src = __webpack_require__(67938);
// EXTERNAL MODULE: ../plugin-infra/src/entry-web3.ts + 1 modules
var entry_web3 = __webpack_require__(50719);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/index.js
var react = __webpack_require__(58757);
// EXTERNAL MODULE: ../shared/src/index.ts + 2 modules
var shared_src = __webpack_require__(77818);
// EXTERNAL MODULE: ../shared-base-ui/src/index.ts
var shared_base_ui_src = __webpack_require__(80226);
// EXTERNAL MODULE: ./src/plugins/Wallet/messages.ts
var messages = __webpack_require__(91788);
// EXTERNAL MODULE: ./src/utils/index.ts + 4 modules
var utils = __webpack_require__(93455);
// EXTERNAL MODULE: ./shared/native-rpc/index.ts + 1 modules
var native_rpc = __webpack_require__(76536);
// EXTERNAL MODULE: ./src/components/GuideStep/index.tsx
var GuideStep = __webpack_require__(97997);
// EXTERNAL MODULE: ../icons/utils/index.tsx
var icons_utils = __webpack_require__(50498);
;// CONCATENATED MODULE: ../icons/general/AccountBalanceWallet.tsx


const AccountBalanceWalletIcon = (0,icons_utils/* createPaletteAwareIcon */.t)('AccountBalanceWalletIcon', /*#__PURE__*/ (0,jsx_runtime.jsxs)("svg", {
    width: "27",
    height: "26",
    viewBox: "0 0 27 26",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    children: [
        /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
            d: "M2.13062 14.2392V24.498V14.2392ZM21.9248 2.17517H4.84818C3.34754 2.17517 2.13062 3.39209 2.13062 4.89273V21.1076C2.13062 22.6082 3.34754 23.8252 4.84818 23.8252H21.9248C23.4254 23.8252 24.6424 22.6082 24.6424 21.1076V4.89273C24.6424 3.39182 23.4254 2.17517 21.9248 2.17517ZM22.7401 21.1076C22.7401 21.5571 22.3743 21.9229 21.9248 21.9229H4.84818C4.39869 21.9229 4.03291 21.5571 4.03291 21.1076V4.89273C4.03291 4.44325 4.39869 4.07746 4.84818 4.07746H21.9248C22.3743 4.07746 22.7401 4.44325 22.7401 4.89273V21.1076Z",
            fill: "#111418"
        }),
        /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
            d: "M22.7401 15.8696H17.524C15.9418 15.8696 14.6545 14.5823 14.6545 12.9998C14.6545 11.4174 15.9415 10.1304 17.524 10.1304H22.7401V8.22806H17.524C14.8887 8.22806 12.7522 10.3643 12.7522 12.9998C12.7522 15.6353 14.8885 17.7719 17.524 17.7719H22.7401V15.8696Z",
            fill: "#111418"
        }),
        /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
            d: "M17.7461 13.0002C17.7461 13.2524 17.8463 13.4943 18.0247 13.6727C18.2031 13.8511 18.445 13.9513 18.6972 13.9513C18.9495 13.9513 19.1914 13.8511 19.3698 13.6727C19.5482 13.4943 19.6484 13.2524 19.6484 13.0002C19.6484 12.7479 19.5482 12.506 19.3698 12.3276C19.1914 12.1492 18.9495 12.049 18.6972 12.049C18.445 12.049 18.2031 12.1492 18.0247 12.3276C17.8463 12.506 17.7461 12.7479 17.7461 13.0002Z",
            fill: "#111418"
        })
    ]
}), /*#__PURE__*/ (0,jsx_runtime.jsxs)("svg", {
    width: "27",
    height: "26",
    viewBox: "0 0 27 26",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    children: [
        /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
            d: "M2.13086 14.2392V24.498V14.2392ZM21.925 2.17517H4.84842C3.34778 2.17517 2.13086 3.39209 2.13086 4.89273V21.1076C2.13086 22.6082 3.34778 23.8252 4.84842 23.8252H21.925C23.4257 23.8252 24.6426 22.6082 24.6426 21.1076V4.89273C24.6426 3.39182 23.4257 2.17517 21.925 2.17517ZM22.7403 21.1076C22.7403 21.5571 22.3745 21.9229 21.925 21.9229H4.84842C4.39894 21.9229 4.03315 21.5571 4.03315 21.1076V4.89273C4.03315 4.44325 4.39894 4.07746 4.84842 4.07746H21.925C22.3745 4.07746 22.7403 4.44325 22.7403 4.89273V21.1076Z",
            fill: "#EFF3F4"
        }),
        /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
            d: "M22.7403 15.8696H17.5242C15.942 15.8696 14.6547 14.5823 14.6547 12.9998C14.6547 11.4174 15.9418 10.1304 17.5242 10.1304H22.7403V8.22806H17.5242C14.889 8.22806 12.7524 10.3643 12.7524 12.9998C12.7524 15.6353 14.8887 17.7719 17.5242 17.7719H22.7403V15.8696Z",
            fill: "#EFF3F4"
        }),
        /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
            d: "M17.7461 13.0002C17.7461 13.2524 17.8463 13.4943 18.0247 13.6727C18.2031 13.8511 18.445 13.9513 18.6972 13.9513C18.9495 13.9513 19.1914 13.8511 19.3698 13.6727C19.5482 13.4943 19.6484 13.2524 19.6484 13.0002C19.6484 12.7479 19.5482 12.506 19.3698 12.3276C19.1914 12.1492 18.9495 12.049 18.6972 12.049C18.445 12.049 18.2031 12.1492 18.0247 12.3276C17.8463 12.506 17.7461 12.7479 17.7461 13.0002Z",
            fill: "#EFF3F4"
        })
    ]
}), undefined, '0 0 27 26');

// EXTERNAL MODULE: ../theme/src/entry.ts
var entry = __webpack_require__(31939);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.8.0_ar3vczqpton7uep5462l6mtgi4/node_modules/@mui/icons-material/FiberManualRecord.js
var FiberManualRecord = __webpack_require__(70738);
// EXTERNAL MODULE: ./src/components/DataSource/useNextID.ts
var useNextID = __webpack_require__(360);
// EXTERNAL MODULE: ./src/resources/MaskIcon.tsx
var MaskIcon = __webpack_require__(61305);
;// CONCATENATED MODULE: ./src/components/InjectedComponents/ToolboxUnstyled.tsx
















const useStyles = (0,entry/* makeStyles */.ZL)()((theme, { iconFontSize ='1.5rem'  })=>({
        title: {
            color: theme.palette.mode === 'dark' ? theme.palette.text.primary : 'rgb(15, 20, 25)',
            display: 'flex',
            alignItems: 'center'
        },
        paper: {
            borderRadius: 4,
            boxShadow: theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.2) 0 0 15px, rgba(255, 255, 255, 0.15) 0 0 3px 1px' : 'rgba(101, 119, 134, 0.2) 0 0 15px, rgba(101, 119, 134, 0.15) 0 0 3px 1px',
            backgroundImage: 'none'
        },
        menuItem: {
            paddingTop: theme.spacing(2),
            paddingBottom: theme.spacing(2)
        },
        menuText: {
            marginLeft: 12,
            fontSize: 15,
            color: theme.palette.mode === 'dark' ? 'rgb(216, 216, 216)' : 'rgb(15, 20, 25)',
            paddingRight: theme.spacing(2)
        },
        chainIcon: {
            fontSize: 18,
            width: 18,
            height: 18
        },
        iconWrapper: {
            display: 'flex',
            alignItems: 'baseline'
        },
        maskFilledIcon: {
            marginRight: 6
        },
        iconFont: {
            fontSize: iconFontSize
        }
    })
);
function ToolboxHintUnstyled(props) {
    return props.category === 'wallet' ? /*#__PURE__*/ (0,jsx_runtime.jsx)(ToolboxHintForWallet, {
        ...props
    }) : /*#__PURE__*/ (0,jsx_runtime.jsx)(ToolboxHintForApplication, {
        ...props
    });
}
function ToolboxHintForApplication(props) {
    const { ListItemButton =ListItemButton_ListItemButton/* default */.Z , ListItemIcon =ListItemIcon_ListItemIcon/* default */.Z , Container ='div' , Typography =Typography_Typography/* default */.Z , iconSize =24 , iconFontSize , mini , ListItemText =ListItemText_ListItemText/* default */.Z ,  } = props;
    const { classes  } = useStyles({
        iconFontSize
    });
    const { t  } = (0,utils/* useI18N */.M1)();
    const { openDialog  } = (0,shared_base_ui_src/* useRemoteControlledDialog */.F$)(messages/* WalletMessages.events.ApplicationDialogUpdated */.R.events.ApplicationDialogUpdated);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(GuideStep/* default */.Z, {
        step: 1,
        total: 4,
        tip: t('user_guide_tip_1'),
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Container, {
            children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(ListItemButton, {
                onClick: openDialog,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(MaskIcon/* MaskIcon */.ec, {
                        style: {
                            width: iconFontSize ? '1em' : iconSize,
                            height: iconFontSize ? '1em' : iconSize
                        },
                        className: classes.iconFont
                    }),
                    mini ? null : /*#__PURE__*/ (0,jsx_runtime.jsx)(ListItemText, {
                        primary: /*#__PURE__*/ (0,jsx_runtime.jsx)(Box/* default */.Z, {
                            sx: {
                                display: 'flex',
                                justifyContent: 'space-between',
                                alignItems: 'center'
                            },
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography, {
                                className: classes.title,
                                children: t('mask_network')
                            })
                        })
                    })
                ]
            })
        })
    });
}
function ToolboxHintForWallet(props) {
    const { t  } = (0,utils/* useI18N */.M1)();
    const nextIDConnectStatus = (0,useNextID/* useNextIDConnectStatus */.EP)();
    const { ListItemButton =ListItemButton_ListItemButton/* default */.Z , ListItemText =ListItemText_ListItemText/* default */.Z , ListItemIcon =ListItemIcon_ListItemIcon/* default */.Z , Container ='div' , Typography =Typography_Typography/* default */.Z , iconSize =24 , iconFontSize , badgeSize =12 , mini ,  } = props;
    const { classes  } = useStyles({
        iconFontSize
    });
    const { openWallet , isWalletValid , walletTitle , chainColor , shouldDisplayChainIndicator  } = useToolbox();
    const theme = (0,useTheme/* default */.Z)();
    const networkDescriptor = (0,entry_web3/* useNetworkDescriptor */.Vw)();
    const providerDescriptor = (0,entry_web3/* useProviderDescriptor */.fY)();
    (0,react.useEffect)(()=>{
        const { status , isVerified , action  } = nextIDConnectStatus;
        if (isVerified || status === useNextID/* NextIDVerificationStatus.WaitingLocalConnect */.s2.WaitingLocalConnect) return;
        if (action) {
            action();
        }
    }, [
        nextIDConnectStatus.status
    ]);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(GuideStep/* default */.Z, {
        step: 2,
        total: 4,
        tip: t('user_guide_tip_2'),
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Container, {
            children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(ListItemButton, {
                onClick: openWallet,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(ListItemIcon, {
                        children: isWalletValid ? /*#__PURE__*/ (0,jsx_runtime.jsx)(shared_src/* WalletIcon */.o, {
                            size: iconSize,
                            badgeSize: badgeSize,
                            mainIcon: providerDescriptor?.icon,
                            badgeIcon: networkDescriptor?.icon,
                            badgeIconBorderColor: theme.palette.background.paper
                        }) : /*#__PURE__*/ (0,jsx_runtime.jsx)(AccountBalanceWalletIcon, {
                            className: classes.iconFont
                        })
                    }),
                    mini ? null : /*#__PURE__*/ (0,jsx_runtime.jsx)(ListItemText, {
                        primary: /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                            sx: {
                                display: 'flex',
                                justifyContent: 'space-between',
                                alignItems: 'center'
                            },
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography, {
                                    className: classes.title,
                                    children: walletTitle
                                }),
                                shouldDisplayChainIndicator ? /*#__PURE__*/ (0,jsx_runtime.jsx)(FiberManualRecord/* default */.Z, {
                                    className: classes.chainIcon,
                                    style: {
                                        color: chainColor
                                    }
                                }) : null
                            ]
                        })
                    })
                ]
            })
        })
    });
}
function useToolbox() {
    const { t  } = (0,utils/* useI18N */.M1)();
    const account = (0,entry_web3/* useAccount */.mA)();
    const chainColor = (0,entry_web3/* useChainColor */.x5)();
    const chainIdValid = (0,entry_web3/* useChainIdValid */.as)();
    const chainIdMainnet = (0,entry_web3/* useChainIdMainnet */.d1)();
    const { Others  } = (0,entry_web3/* useWeb3State */.dM)();
    // #region recent pending transactions
    const pendingTransactions = (0,entry_web3/* useRecentTransactions */.Sp)(undefined, src/* TransactionStatusType.NOT_DEPEND */.g8.NOT_DEPEND);
    // #endregion
    // #region Wallet
    const { openDialog: openWalletStatusDialog  } = (0,shared_base_ui_src/* useRemoteControlledDialog */.F$)(messages/* WalletMessages.events.walletStatusDialogUpdated */.R.events.walletStatusDialogUpdated);
    const { openDialog: openSelectProviderDialog  } = (0,shared_base_ui_src/* useRemoteControlledDialog */.F$)(messages/* WalletMessages.events.selectProviderDialogUpdated */.R.events.selectProviderDialogUpdated);
    // #endregion
    const isWalletValid = !!account && chainIdValid;
    const { value: domain  } = (0,entry_web3/* useReverseAddress */.$q)(undefined, account);
    function renderButtonText() {
        if (!account) return t('plugin_wallet_connect_wallet');
        if (!chainIdValid) return t('plugin_wallet_wrong_network');
        if (pendingTransactions.length <= 0) return Others?.formatDomainName?.(domain) || Others?.formatAddress?.(account, 4) || account;
        return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsx)("span", {
                    style: {
                        marginRight: 12
                    },
                    children: t('plugin_wallet_pending_transactions', {
                        count: pendingTransactions.length,
                        plural: pendingTransactions.length > 1 ? 's' : ''
                    })
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(CircularProgress/* default */.Z, {
                    thickness: 6,
                    size: 20,
                    color: "inherit"
                })
            ]
        });
    }
    const openWallet = (0,react.useCallback)(()=>{
        if (native_rpc/* hasNativeAPI */._) return native_rpc/* nativeAPI */.Nz?.api.misc_openCreateWalletView();
        return isWalletValid ? openWalletStatusDialog() : openSelectProviderDialog();
    }, [
        openWalletStatusDialog,
        openSelectProviderDialog,
        isWalletValid,
        native_rpc/* hasNativeAPI */._
    ]);
    const walletTitle = renderButtonText();
    const shouldDisplayChainIndicator = account && chainIdValid && !chainIdMainnet;
    return {
        openWallet,
        isWalletValid,
        walletTitle,
        shouldDisplayChainIndicator,
        chainColor
    };
}


/***/ }),

/***/ 83458:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "N": () => (/* reexport */ Banner)
});

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(35667);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/index.js
var react = __webpack_require__(58757);
// EXTERNAL MODULE: ../theme/src/entry.ts
var entry = __webpack_require__(31939);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/IconButton/IconButton.js + 1 modules
var IconButton = __webpack_require__(48941);
// EXTERNAL MODULE: ./src/components/DataSource/useActivatedUI.ts
var useActivatedUI = __webpack_require__(23397);
// EXTERNAL MODULE: ./src/extension/service.ts
var service = __webpack_require__(78778);
// EXTERNAL MODULE: ./src/social-network/index.ts
var social_network = __webpack_require__(82192);
// EXTERNAL MODULE: ../shared-base/src/index.ts + 2 modules
var src = __webpack_require__(44451);
// EXTERNAL MODULE: ./src/resources/MaskIcon.tsx
var MaskIcon = __webpack_require__(61305);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.4.0/node_modules/react-use/esm/useMount.js
var useMount = __webpack_require__(96724);
// EXTERNAL MODULE: ./src/components/DataSource/usePersonaConnectStatus.ts
var usePersonaConnectStatus = __webpack_require__(9987);
// EXTERNAL MODULE: ./shared/native-rpc/index.ts + 1 modules
var native_rpc = __webpack_require__(76536);
// EXTERNAL MODULE: ../shared-base-ui/src/index.ts
var shared_base_ui_src = __webpack_require__(80226);
;// CONCATENATED MODULE: ./src/components/Welcomes/Banner.tsx













const ICON_MAP = {
    minds: /*#__PURE__*/ (0,jsx_runtime.jsx)(MaskIcon/* MaskIconInMinds */.oL, {}),
    default: /*#__PURE__*/ (0,jsx_runtime.jsx)(MaskIcon/* MaskSharpIcon */.LT, {
        color: "primary"
    })
};
const useStyles = (0,entry/* makeStyles */.ZL)()({
    buttonText: {
        width: 38,
        height: 38,
        margin: '10px 0'
    },
    span: {
        paddingLeft: 8
    }
});
function BannerUI(props) {
    const classes = (0,entry/* useStylesExtends */.Bc)(useStyles(), props);
    return props.nextStep === 'hidden' ? null : /*#__PURE__*/ (0,jsx_runtime.jsx)(IconButton/* default */.Z, {
        size: "large",
        className: classes.buttonText,
        onClick: props.nextStep.onClick,
        children: ICON_MAP?.[props?.iconType ?? 'default']
    });
}
function Banner(props) {
    const lastRecognizedIdentity = (0,useActivatedUI/* useLastRecognizedIdentity */.FB)();
    const personaConnectStatus = (0,usePersonaConnectStatus/* usePersonaConnectStatus */.x)();
    const { nextStep  } = props;
    const networkIdentifier = social_network/* activatedSocialNetworkUI.networkIdentifier */.LM.networkIdentifier;
    const identities = (0,shared_base_ui_src/* useValueRef */.E)(social_network/* globalUIState.profiles */.EJ.profiles);
    const [value, onChange] = (0,react.useState)('');
    const defaultNextStep = (0,react.useCallback)(()=>{
        if (nextStep === 'hidden') return;
        if (!networkIdentifier) {
            nextStep?.onClick();
            nextStep ?? console.warn('You must provide one of networkIdentifier or nextStep.onClick');
            return;
        }
        native_rpc/* hasNativeAPI */._ ? native_rpc/* nativeAPI */.Nz?.api.misc_openDashboardView() : service/* default.Helper.openDashboard */.ZP.Helper.openDashboard(personaConnectStatus.hasPersona ? src/* DashboardRoutes.Personas */.vq.Personas : src/* DashboardRoutes.Setup */.vq.Setup);
    }, [
        networkIdentifier,
        nextStep
    ]);
    const defaultUserName = networkIdentifier ? {
        defaultValue: lastRecognizedIdentity.identifier?.userId ?? '',
        value,
        onChange,
        isValid: social_network/* activatedSocialNetworkUI.utils.isValidUsername */.LM.utils.isValidUsername || (()=>true
        )
    } : 'hidden';
    const [mounted, setMounted] = (0,react.useState)(false);
    (0,useMount/* default */.Z)(()=>setMounted(true)
    );
    return identities.length === 0 && mounted ? /*#__PURE__*/ (0,jsx_runtime.jsx)(BannerUI, {
        ...props,
        username: props.username ?? defaultUserName,
        nextStep: props.nextStep ?? {
            onClick: defaultNextStep
        }
    }) : null;
}

;// CONCATENATED MODULE: ./src/components/shared/NotSetupYetPrompt.tsx



/***/ }),

/***/ 32730:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "fF": () => (/* binding */ ITO_MetadataReader),
  "th": () => (/* binding */ gcd),
  "cr": () => (/* binding */ isCompactPayload),
  "_x": () => (/* binding */ payloadIntoMask),
  "_D": () => (/* binding */ payloadOutMask),
  "xT": () => (/* binding */ sortTokens),
  "F6": () => (/* binding */ tokenIntoMask)
});

// UNUSED EXPORTS: payloadOutMaskCompact, renderWithITO_Metadata, timestampInMask, timestampOutMask, tokenOutMask

// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/omit.js + 3 modules
var omit = __webpack_require__(96596);
// EXTERNAL MODULE: ../web3-shared/evm/utils/address.ts
var address = __webpack_require__(2596);
// EXTERNAL MODULE: ../typed-message/dom/index.ts + 14 modules
var dom = __webpack_require__(30003);
// EXTERNAL MODULE: ./src/plugins/ITO/constants.ts
var constants = __webpack_require__(83072);
;// CONCATENATED MODULE: ./src/plugins/ITO/schema-v1.json
const schema_v1_namespaceObject = JSON.parse('{"type":"object","additionalProperties":true,"definitions":{"token":{"type":"object","additionalProperties":true,"properties":{"chain_id":{"type":"number","title":"chain_id"},"type":{"enum":[0,1],"type":"number","title":"type"},"address":{"description":"token address","type":"string","title":"address"},"name":{"description":"token name","type":"string","title":"name"},"symbol":{"description":"token symbol","type":"string","title":"symbol"},"decimals":{"description":"token decimal","type":"number","title":"decimals"}},"required":["chain_id","type","address","decimals"],"title":"token"},"trader":{"type":"object","additionalProperties":true,"properties":{"address":{"type":"string","title":"address"},"name":{"type":"string","title":"name"}},"required":["address"],"title":"trader"}},"properties":{"contract_address":{"type":"string","title":"contract_address"},"pid":{"type":"string","title":"pid"},"password":{"type":"string","title":"password"},"message":{"type":"string","title":"message"},"limit":{"type":"string","title":"limit"},"total":{"type":"string","title":"total"},"total_remaining":{"type":"string","title":"total_remaining"},"chain_id":{"type":"number","title":"chain_id"},"start_time":{"type":"number","title":"start_time"},"end_time":{"type":"number","title":"end_time"},"unlock_time":{"type":"number","title":"unlock_time"},"qualification_address":{"type":"string","title":"qualification_address"},"regions":{"type":"string","title":"regions"},"creation_time":{"type":"number","title":"creation_time"},"token":{"$ref":"#/definitions/token"},"seller":{"$ref":"#/definitions/trader"},"exchange_amounts":{"type":"array","title":"exchange_amounts","description":"A list of exchange ratios","additionalItems":true,"items":{"anyOf":[{"type":"string","title":"exchange_amount"}]}},"exchange_tokens":{"type":"array","title":"exchange_tokens","description":"A list of exchange tokens","additionalItems":true,"items":{"anyOf":[{"$ref":"#/definitions/token"}]}}},"required":["contract_address","pid","password","message","limit","total","total_remaining","chain_id","start_time","end_time","creation_time","token","seller","exchange_amounts","exchange_tokens"]}');
;// CONCATENATED MODULE: ./src/plugins/ITO/schema-v2.json
const schema_v2_namespaceObject = JSON.parse('{"type":"object","additionalProperties":true,"definitions":{"token":{"type":"object","additionalProperties":true,"properties":{"chain_id":{"type":"number","title":"chain_id"},"type":{"enum":[0,1],"type":"number","title":"type"},"address":{"description":"token address","type":"string","title":"address"},"name":{"description":"token name","type":"string","title":"name"},"symbol":{"description":"token symbol","type":"string","title":"symbol"},"decimals":{"description":"token decimal","type":"number","title":"decimals"}},"required":["chain_id","type","address","decimals"],"title":"token"},"trader":{"type":"object","additionalProperties":true,"properties":{"address":{"type":"string","title":"address"}},"required":["address"],"title":"trader"}},"properties":{"contract_address":{"type":"string","title":"contract_address"},"pid":{"type":"string","title":"pid"},"password":{"type":"string","title":"password"},"message":{"type":"string","title":"message"},"limit":{"type":"string","title":"limit"},"total":{"type":"string","title":"total"},"chain_id":{"type":"number","title":"chain_id"},"token":{"type":"string","title":"token"},"seller":{"$ref":"#/definitions/trader"},"exchange_amounts":{"type":"array","title":"exchange_amounts","description":"A list of exchange ratios","additionalItems":true,"items":{"anyOf":[{"type":"string","title":"exchange_amount"}]}},"exchange_tokens":{"type":"array","title":"exchange_tokens","description":"A list of exchange tokens","additionalItems":true,"items":{"anyOf":[{"properties":{"address":{"type":"string","title":"address"}}}]}}},"required":["contract_address","pid","password","message","limit","total","chain_id","seller","exchange_amounts","exchange_tokens"]}');
;// CONCATENATED MODULE: ./src/plugins/ITO/SNSAdaptor/helpers.ts






const reader_v1 = (0,dom/* createTypedMessageMetadataReader */.Bi)(constants/* ITO_MetaKey_1 */.uJ, schema_v1_namespaceObject);
const reader_v2 = (0,dom/* createTypedMessageMetadataReader */.Bi)(constants/* ITO_MetaKey_2 */.ag, schema_v2_namespaceObject);
const renderWithITO_Metadata = (0,dom/* createRenderWithMetadata */.mC)(ITO_MetadataReader);
function ITO_MetadataReader(meta) {
    const v2 = reader_v2(meta);
    if (v2.ok) return v2;
    return reader_v1(meta);
}
/**
 * The greatest common divisor
 */ function gcd(a, b) {
    a = a.abs();
    b = b.abs();
    if (b.isGreaterThan(a)) {
        const temp = b;
        b = a;
        a = temp;
    }
    // eslint-disable-next-line no-constant-condition
    while(true){
        if (b.isZero()) return a;
        a = a.mod(b);
        if (a.isZero()) return b;
        b = b.mod(a);
    }
}
function sortTokens(tokenA, tokenB) {
    const addressA = tokenA.address.toLowerCase();
    const addressB = tokenB.address.toLowerCase();
    if ((0,address/* isNativeTokenAddress */.qw)(addressA)) return -1;
    if ((0,address/* isNativeTokenAddress */.qw)(addressB)) return 1;
    return addressA < addressB ? -1 : 1;
}
function timestampInMask(timestamp) {
    return timestamp * 1000;
}
function timestampOutMask(timestamp) {
    return Math.floor(timestamp / 1000);
}
function tokenIntoMask(token) {
    return {
        ...(0,omit/* default */.Z)(token, 'chain_id'),
        chainId: token.chain_id
    };
}
function tokenOutMask(token) {
    return {
        ...(0,omit/* default */.Z)(token, 'chainId'),
        chain_id: token.chainId
    };
}
function payloadIntoMask(payload) {
    return {
        ...payload,
        start_time: timestampInMask(payload.start_time),
        end_time: timestampInMask(payload.end_time),
        creation_time: timestampInMask(payload.creation_time),
        token: tokenIntoMask(payload.token),
        exchange_tokens: payload.exchange_tokens.map(tokenIntoMask).sort(sortTokens)
    };
}
function payloadOutMask(payload) {
    return {
        ...payload,
        start_time: timestampOutMask(payload.start_time),
        end_time: timestampOutMask(payload.end_time),
        creation_time: timestampOutMask(payload.creation_time),
        token: tokenOutMask(payload.token),
        exchange_tokens: payload.exchange_tokens.map(tokenOutMask)
    };
}
function payloadOutMaskCompact(payload) {
    return {
        ...payload,
        // HOTFIX of image payload for ITO
        // remove unnecessary chunks of data to reduce the size of payload
        token: tokenOutMask(payload.token),
        contract_address: '',
        message: '',
        start_time: 0,
        end_time: 0,
        creation_time: 0,
        limit: '0',
        total_remaining: '0',
        exchange_amounts: [],
        exchange_tokens: []
    };
}
function isCompactPayload(payload) {
    return !payload.exchange_tokens.length;
}


/***/ }),

/***/ 79163:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Qc": () => (/* binding */ RedPacketMetadataReader),
  "st": () => (/* binding */ RedPacketNftMetadataReader),
  "vP": () => (/* binding */ renderWithRedPacketMetadata),
  "Ay": () => (/* binding */ renderWithRedPacketNftMetadata)
});

// EXTERNAL MODULE: ../typed-message/dom/index.ts + 14 modules
var dom = __webpack_require__(30003);
// EXTERNAL MODULE: ./src/plugins/RedPacket/constants.ts
var constants = __webpack_require__(70176);
;// CONCATENATED MODULE: ./src/plugins/RedPacket/schema.json
const schema_namespaceObject = JSON.parse('{"type":"object","additionalProperties":true,"properties":{"contract_address":{"type":"string","title":"contract_address"},"rpid":{"type":"string","title":"rpid"},"txid":{"type":"string","title":"txid"},"password":{"type":"string","title":"password"},"shares":{"type":"number","title":"shares"},"sender":{"type":"object","additionalProperties":true,"properties":{"address":{"type":"string","title":"address"},"name":{"type":"string","title":"name"},"message":{"type":"string","title":"message"}},"required":["address","message","name"],"title":"sender"},"is_random":{"type":"boolean","title":"is_random"},"total":{"type":"string","title":"total"},"creation_time":{"type":"number","title":"creation_time"},"duration":{"type":"number","title":"duration"},"network":{"type":"string","title":"network"},"token":{"type":"object","additionalProperties":true,"properties":{"address":{"description":"token address","type":"string","title":"address"},"name":{"description":"token name","type":"string","title":"name"},"decimals":{"description":"token decimal","type":"number","title":"decimals"},"symbol":{"description":"token symbol","type":"string","title":"symbol"}},"required":["address"],"title":"token"}},"required":["contract_address","creation_time","duration","is_random","password","rpid","sender","shares","total"]}');
;// CONCATENATED MODULE: ./src/plugins/RedPacket/schema-nft.json
const schema_nft_namespaceObject = JSON.parse('{"type":"object","additionalProperties":true,"properties":{"id":{"type":"string","title":"id"},"txid":{"type":"string","title":"txid"},"duration":{"type":"number","title":"duration"},"message":{"type":"string","title":"message"},"senderName":{"type":"string","title":"senderName"},"contractName":{"type":"string","title":"contractName"},"contractAddress":{"type":"string","title":"contractAddress"},"privateKey":{"type":"string","title":"privateKey"},"chainId":{"type":"number","title":"chainId"},"contractTokenURI":{"type":"string","title":"contractTokenURI"}},"required":["id","duration","message","senderName","contractName","contractAddress","privateKey","chainId","contractTokenURI"]}');
;// CONCATENATED MODULE: ./src/plugins/RedPacket/SNSAdaptor/helpers.ts




const RedPacketMetadataReader = (0,dom/* createTypedMessageMetadataReader */.Bi)(constants/* RedPacketMetaKey */.Vr, schema_namespaceObject);
const renderWithRedPacketMetadata = (0,dom/* createRenderWithMetadata */.mC)(RedPacketMetadataReader);
const RedPacketNftMetadataReader = (0,dom/* createTypedMessageMetadataReader */.Bi)(constants/* RedPacketNftMetaKey */.HA, schema_nft_namespaceObject);
const renderWithRedPacketNftMetadata = (0,dom/* createRenderWithMetadata */.mC)(RedPacketNftMetadataReader);


/***/ }),

/***/ 16480:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "q": () => (/* binding */ isMobileFacebook)
/* harmony export */ });
/* unused harmony export facebookDomain */
/* harmony import */ var _dimensiondev_holoflows_kit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(88967);
/* harmony import */ var _dimensiondev_holoflows_kit__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_dimensiondev_holoflows_kit__WEBPACK_IMPORTED_MODULE_0__);

const isMobileFacebook = (0,_dimensiondev_holoflows_kit__WEBPACK_IMPORTED_MODULE_0__.isEnvironment)(_dimensiondev_holoflows_kit__WEBPACK_IMPORTED_MODULE_0__.Environment.ContentScript) ? location.hostname === 'm.facebook.com' : navigator.userAgent.match(/Mobile|mobile/);
const facebookDomain = (/* unused pure expression or super */ null && (isMobileFacebook ? 'https://m.facebook.com/' : 'https://facebook.com/'));


/***/ }),

/***/ 48825:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/70c03ec1bb4575d55722.png";

/***/ }),

/***/ 18077:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "assets/413dc2cdada95d3137f6.png";

/***/ })

}]);