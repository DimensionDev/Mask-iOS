"use strict";
(globalThis["webpackChunk_masknet_extension"] = globalThis["webpackChunk_masknet_extension"] || []).push([[1940],{

/***/ 40615:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "t": () => (/* binding */ SuccessIcon)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(35667);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50498);


const SuccessIcon = (0,_utils__WEBPACK_IMPORTED_MODULE_1__/* .createIcon */ .I)('Success', /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("g", {
    children: [
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            opacity: ".2",
            d: "M32 58.667c14.727 0 26.667-11.94 26.667-26.667 0-14.728-11.94-26.667-26.667-26.667C17.272 5.333 5.333 17.273 5.333 32c0 14.728 11.94 26.667 26.667 26.667z",
            fill: "#77E0B5"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M44.46 22.027c1.09.99 1.17 2.677.18 3.767L31.306 40.46a2.667 2.667 0 01-3.708.23l-9.333-8a2.667 2.667 0 113.47-4.049l7.367 6.314 11.591-12.75a2.667 2.667 0 013.767-.18z",
            fill: "#77E0B5"
        })
    ]
}), '0 0 64 64');


/***/ }),

/***/ 47061:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Q": () => (/* binding */ PluginWalletConnectIcon)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(35667);
/* harmony import */ var _masknet_icons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50498);


const PluginWalletConnectIcon = (0,_masknet_icons__WEBPACK_IMPORTED_MODULE_1__/* .createIcon */ .I)('PluginWalletConnectIcon', /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("g", {
    children: [
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M4.15015 7.36221C4.15015 7.03084 4.41878 6.76221 4.75015 6.76221H9.25015C9.58152 6.76221 9.85015 7.03084 9.85015 7.36221C9.85015 7.69358 9.58152 7.96221 9.25015 7.96221H4.75015C4.41878 7.96221 4.15015 7.69358 4.15015 7.36221Z",
            fill: "white"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M3.76765 1.7293C2.56902 1.7293 1.60015 2.69817 1.60015 3.8968V7.36179C1.60015 7.69317 1.33152 7.96179 1.00015 7.96179C0.668776 7.96179 0.400146 7.69317 0.400146 7.36179V3.8968C0.400146 2.03543 1.90628 0.529297 3.76765 0.529297H7.98264C8.86881 0.529297 9.70567 0.805241 10.3308 1.34136C10.9644 1.8848 11.3501 2.67182 11.3501 3.61179C11.3501 3.94317 11.0815 4.2118 10.7501 4.2118C10.4188 4.2118 10.1501 3.94317 10.1501 3.61179C10.1501 3.02177 9.91716 2.56754 9.54953 2.25223C9.17337 1.9296 8.62648 1.7293 7.98264 1.7293H3.76765Z",
            fill: "white"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M4.00015 4.21221C2.67402 4.21221 1.60015 5.28608 1.60015 6.61221V11.8622C1.60015 13.1883 2.67402 14.2622 4.00015 14.2622H11.5001C12.8263 14.2622 13.9001 13.1883 13.9001 11.8622V11.3747H13.8027C12.8621 11.3747 11.896 10.7961 11.6257 9.79044L11.6249 9.78738L11.6249 9.78738C11.4193 9.00591 11.6636 8.23162 12.1873 7.72391C12.5779 7.32659 13.1128 7.09967 13.6901 7.09967H13.9001V6.61221C13.9001 5.29358 12.8188 4.21221 11.5001 4.21221H4.00015ZM0.400146 6.61221C0.400146 4.62334 2.01128 3.01221 4.00015 3.01221H11.5001C13.4815 3.01221 15.1001 4.63084 15.1001 6.61221V7.69967C15.1001 8.03104 14.8315 8.29967 14.5001 8.29967H13.6901C13.4309 8.29967 13.2038 8.40006 13.04 8.56827C13.0353 8.5731 13.0305 8.57786 13.0257 8.58253C12.8047 8.79464 12.6923 9.12611 12.785 9.48043C12.8903 9.86908 13.3039 10.1747 13.8027 10.1747H14.5001C14.8315 10.1747 15.1001 10.4433 15.1001 10.7747V11.8622C15.1001 13.8511 13.489 15.4622 11.5001 15.4622H4.00015C2.01128 15.4622 0.400146 13.8511 0.400146 11.8622V6.61221Z",
            fill: "white"
        }),
        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M13.6903 8.29912C13.4311 8.29912 13.204 8.39951 13.0402 8.56772L13.0294 8.57849C12.8376 8.76576 12.7307 9.03208 12.7576 9.31477L12.7583 9.32182L12.7583 9.32183C12.7961 9.77582 13.235 10.1741 13.7803 10.1741H15.2278C15.3278 10.1741 15.4003 10.094 15.4003 10.0091V8.46414C15.4003 8.37932 15.3278 8.29912 15.2278 8.29912H13.6903ZM12.1858 7.72513C12.5765 7.32671 13.1122 7.09912 13.6903 7.09912H15.2278C15.9829 7.09912 16.6003 7.70895 16.6003 8.46414V10.0091C16.6003 10.7643 15.9829 11.3741 15.2278 11.3741H13.7803C12.7067 11.3741 11.6617 10.5891 11.5627 9.42502C11.5011 8.76677 11.7517 8.1519 12.1858 7.72513Z",
            fill: "white"
        })
    ]
}), '0 0 17 16');


/***/ }),

/***/ 95837:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "L": () => (/* binding */ NetworkTab)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(35667);
/* harmony import */ var _masknet_plugin_infra_web3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50719);
/* harmony import */ var _masknet_theme__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(31939);
/* harmony import */ var _masknet_shared_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(44451);
/* harmony import */ var _mui_lab_TabContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(92916);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(65845);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(73932);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(21784);
/* harmony import */ var _masknet_shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(77818);







const useStyles = (0,_masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .makeStyles */ .ZL)()((theme, props)=>({
        tab: {
            backgroundColor: !props.isDashboard ? `${theme.palette.background.default}!important` : `${_masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .MaskColorVar.primaryBackground2 */ .ZN.primaryBackground2}!important`,
            marginRight: 1,
            '&:last-child': {
                marginRight: 0
            }
        },
        tabs: {
            '& .MuiTabs-flexContainer': {
                backgroundColor: theme.palette.background.paper
            },
            '& .Mui-selected': {
                color: '#ffffff',
                backgroundColor: `${theme.palette.primary.main}!important`
            },
            '& .MuiTabs-scroller': {
                margin: '0 1px'
            },
            '& .MuiTabs-scrollButtons': {
                width: 'unset',
                backgroundColor: !props.isDashboard ? `${theme.palette.background.default}!important` : `${_masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .MaskColorVar.primaryBackground2 */ .ZN.primaryBackground2}!important`,
                '&.Mui-disabled': {
                    opacity: 1,
                    '& svg': {
                        opacity: 0.3
                    }
                }
            }
        }
    })
);
function NetworkTab(props) {
    const isDashboard = (0,_masknet_shared_base__WEBPACK_IMPORTED_MODULE_3__/* .isDashboardPage */ .K2)();
    const { chainId , setChainId , chains  } = props;
    const networks = (0,_masknet_plugin_infra_web3__WEBPACK_IMPORTED_MODULE_1__/* .useNetworkDescriptors */ .px)();
    const usedNetworks = networks.filter((x)=>chains.find((c)=>c === x.chainId
        )
    );
    const networkIds = usedNetworks.map((x)=>x.chainId.toString()
    );
    const [currentTab, , , setTab] = (0,_masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .useTabs */ .YE)(chainId.toString() ?? networkIds[0], ...networkIds);
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_lab_TabContext__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .ZP, {
        value: currentTab,
        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .MaskTabList */ .C3, {
            variant: "flexible",
            onChange: (e, v)=>{
                setChainId(Number.parseInt(v, 10));
                setTab(v);
            },
            "aria-label": "Network Tabs",
            children: usedNetworks.map((x)=>{
                return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z, {
                    "aria-label": x.name,
                    value: x.chainId.toString(),
                    label: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_mui_material__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
                        display: "inline-flex",
                        flexDirection: "row",
                        alignItems: "center",
                        gap: 0.5,
                        children: [
                            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_masknet_shared__WEBPACK_IMPORTED_MODULE_4__/* .WalletIcon */ .o, {
                                mainIcon: x.icon,
                                size: 18
                            }),
                            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z, {
                                variant: "body2",
                                fontSize: 14,
                                fontWeight: currentTab === x.chainId.toString() ? 700 : 400,
                                children: x.name
                            })
                        ]
                    })
                }, x.chainId);
            })
        })
    });
}


/***/ }),

/***/ 11940:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "iU": () => (/* reexport */ PostTipButton),
  "X": () => (/* reexport */ TipButton),
  "_E": () => (/* reexport */ TipTaskManager)
});

// UNUSED EXPORTS: TipDialog

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(35667);
// EXTERNAL MODULE: ../icons/general/LinkOut.tsx
var LinkOut = __webpack_require__(26721);
// EXTERNAL MODULE: ../icons/utils/index.tsx
var utils = __webpack_require__(50498);
;// CONCATENATED MODULE: ../icons/general/Drop2.tsx


const Drop2Icon = (0,utils/* createIcon */.I)('Drop2Icon', /*#__PURE__*/ (0,jsx_runtime.jsx)("g", {
    children: /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
        d: "M11.4343 15.4343L6.36568 10.3657C5.86171 9.86171 6.21864 9 6.93136 9H17.0686C17.7813 9 18.1383 9.86171 17.6343 10.3657L12.5657 15.4343C12.2533 15.7467 11.7467 15.7467 11.4343 15.4343Z",
        fill: "currentColor"
    })
}), '0 0 20 24');

// EXTERNAL MODULE: ../icons/general/Success.tsx
var Success = __webpack_require__(40615);
// EXTERNAL MODULE: ../plugin-infra/src/entry-dom.ts
var entry_dom = __webpack_require__(89239);
// EXTERNAL MODULE: ../plugin-infra/src/entry-web3.ts + 1 modules
var entry_web3 = __webpack_require__(50719);
// EXTERNAL MODULE: ../shared/src/index.ts + 2 modules
var src = __webpack_require__(77818);
// EXTERNAL MODULE: ../shared-base/src/index.ts + 2 modules
var shared_base_src = __webpack_require__(44451);
// EXTERNAL MODULE: ../shared-base-ui/src/index.ts
var shared_base_ui_src = __webpack_require__(80226);
// EXTERNAL MODULE: ../theme/src/entry.ts
var entry = __webpack_require__(31939);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Typography/Typography.js + 1 modules
var Typography = __webpack_require__(21784);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Link/Link.js + 1 modules
var Link = __webpack_require__(28257);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/DialogContent/DialogContent.js + 1 modules
var DialogContent = __webpack_require__(46715);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/index.js
var react = __webpack_require__(58757);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.4.0/node_modules/react-use/esm/useBoolean.js
var useBoolean = __webpack_require__(92555);
// EXTERNAL MODULE: ./shared/native-rpc/index.ts + 1 modules
var native_rpc = __webpack_require__(76536);
// EXTERNAL MODULE: ./src/components/shared/NetworkTab.tsx
var NetworkTab = __webpack_require__(95837);
// EXTERNAL MODULE: ./src/social-network/index.ts
var social_network = __webpack_require__(82192);
// EXTERNAL MODULE: ./src/plugins/Wallet/messages.ts
var messages = __webpack_require__(91788);
// EXTERNAL MODULE: ./src/plugins/Tips/contexts/index.ts + 8 modules
var contexts = __webpack_require__(19600);
// EXTERNAL MODULE: ./src/plugins/Tips/locales/index.ts + 1 modules
var locales = __webpack_require__(39761);
// EXTERNAL MODULE: ./src/plugins/Tips/types/index.ts + 1 modules
var types = __webpack_require__(35228);
// EXTERNAL MODULE: ../plugin-infra/src/entry-web3-evm.ts + 32 modules
var entry_web3_evm = __webpack_require__(94806);
// EXTERNAL MODULE: ../web3-shared/base/src/index.ts + 1 modules
var base_src = __webpack_require__(67938);
// EXTERNAL MODULE: ../web3-shared/evm/types/index.ts
var evm_types = __webpack_require__(72499);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Button/Button.js
var Button = __webpack_require__(85792);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/FormControl/FormControl.js + 1 modules
var FormControl = __webpack_require__(56030);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/TextField/TextField.js + 2 modules
var TextField = __webpack_require__(48591);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.4.0/node_modules/react-use/esm/useAsyncFn.js
var useAsyncFn = __webpack_require__(32588);
// EXTERNAL MODULE: ../../node_modules/.pnpm/wallet.ts@1.0.1/node_modules/wallet.ts/dist/index.js
var dist = __webpack_require__(99674);
;// CONCATENATED MODULE: ./src/plugins/Tips/components/AddDialog.tsx












const useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        addButton: {
            marginLeft: 'auto'
        },
        chain: {
            display: 'flex'
        },
        row: {
            marginTop: theme.spacing(1.5)
        },
        chainName: {
            marginLeft: theme.spacing(1)
        },
        error: {
            display: 'flex',
            height: 16,
            alignItems: 'center',
            color: theme.palette.error.main,
            '&::before': {
                backgroundColor: theme.palette.error.main,
                content: '""',
                width: 2,
                height: 16,
                marginRight: theme.spacing(0.5)
            }
        }
    })
);
const AddDialog = ({ onAdd , onClose , ...rest })=>{
    const { classes  } = useStyles();
    const chainId = (0,entry_web3/* useChainId */.xx)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const account = (0,entry_web3/* useAccount */.mA)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const [contractAddress, setContractAddress] = (0,react.useState)('');
    const [tokenId, setTokenId] = (0,react.useState)('');
    const { Token  } = (0,entry_web3/* useWeb3State */.dM)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const web3Connection = (0,entry_web3/* useWeb3Connection */.Tv)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const t = (0,locales/* useI18N */.M)();
    const allNetworks = (0,entry_web3/* useNetworkDescriptors */.px)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM);
    const network = (0,react.useMemo)(()=>allNetworks.find((n)=>n.chainId === chainId
        )
    , [
        allNetworks,
        chainId
    ]);
    const erc721TokenContract = (0,entry_web3_evm/* useERC721TokenContract */.nT)(chainId, contractAddress);
    const [, checkOwner] = (0,useAsyncFn/* default */.Z)(async ()=>{
        if (!erc721TokenContract || !account) return false;
        const ownerAddress = await erc721TokenContract.methods.ownerOf(tokenId).call();
        return (0,base_src/* isSameAddress */.Wr)(ownerAddress, account);
    }, [
        erc721TokenContract,
        tokenId,
        account
    ]);
    const [message, setMessage] = (0,react.useState)('');
    const reset = (0,react.useCallback)(()=>{
        setMessage('');
        setContractAddress('');
        setTokenId('');
    }, []);
    (0,react.useEffect)(()=>{
        setMessage('');
    }, [
        tokenId,
        contractAddress
    ]);
    const [state, handleAdd] = (0,useAsyncFn/* default */.Z)(async ()=>{
        if (!erc721TokenContract || !dist.EthereumAddress.isValid(contractAddress)) {
            setMessage(t.tip_add_collectibles_error());
            return;
        }
        const hasOwnership = await checkOwner();
        if (!hasOwnership) {
            setMessage(t.tip_add_collectibles_error());
            return;
        }
        const erc721TokenDetailed = await web3Connection?.getNonFungibleToken(contractAddress, tokenId, evm_types/* SchemaType.ERC721 */.XQ.ERC721, {
            chainId,
            account
        });
        if (!erc721TokenDetailed) {
            setMessage(t.tip_add_collectibles_error());
            return;
        }
        await Token?.addToken?.(erc721TokenDetailed);
        onAdd?.(erc721TokenDetailed);
        reset();
    }, [
        onAdd,
        t,
        contractAddress,
        tokenId,
        account,
        chainId
    ]);
    const handleClose = (0,react.useCallback)(()=>{
        onClose?.();
        reset();
    }, [
        onClose
    ]);
    const addButton = (0,react.useMemo)(()=>{
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
            disabled: !contractAddress || !tokenId || state.loading,
            className: classes.addButton,
            onClick: handleAdd,
            children: state.loading ? t.tip_adding() : t.tip_add()
        });
    }, [
        t,
        handleAdd,
        state.loading
    ]);
    if (!network) return null;
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* InjectedDialog */.Fl, {
        title: t.tip_add_collectibles(),
        titleTail: addButton,
        onClose: handleClose,
        ...rest,
        children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(DialogContent/* default */.Z, {
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                    className: classes.chain,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* ImageIcon */.XB, {
                            size: 24,
                            icon: network.icon || ''
                        }),
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.chainName,
                            children: network.name
                        })
                    ]
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(FormControl/* default */.Z, {
                    fullWidth: true,
                    className: classes.row,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TextField/* default */.Z, {
                        fullWidth: true,
                        value: contractAddress,
                        onChange: (e)=>setContractAddress(e.currentTarget.value)
                        ,
                        placeholder: t.tip_add_collectibles_contract_address()
                    })
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(FormControl/* default */.Z, {
                    fullWidth: true,
                    className: classes.row,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TextField/* default */.Z, {
                        fullWidth: true,
                        value: tokenId,
                        onChange: (e)=>setTokenId(e.currentTarget.value)
                        ,
                        placeholder: t.tip_add_collectibles_token_id()
                    })
                }),
                message ? /*#__PURE__*/ (0,jsx_runtime.jsx)(FormControl/* default */.Z, {
                    fullWidth: true,
                    className: classes.row,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                        className: classes.error,
                        children: message
                    })
                }) : null
            ]
        })
    });
};

// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/DialogActions/DialogActions.js + 1 modules
var DialogActions = __webpack_require__(21948);
;// CONCATENATED MODULE: ./src/plugins/Tips/components/common/ConfirmModal.tsx




const ConfirmModal_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        confirmDialog: {
            width: 480,
            backgroundImage: 'none'
        },
        content: {
            display: 'flex',
            flexDirection: 'column',
            justifyContent: 'center',
            justifyItems: 'center',
            padding: theme.spacing(3),
            boxSizing: 'border-box',
            color: theme.palette.text.primary,
            textAlign: 'center',
            fontSize: 18
        },
        icon: {
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center'
        },
        actions: {
            padding: theme.spacing(0, 3, 3)
        }
    })
);
const ConfirmModal = ({ className , message , icon , confirmText , onConfirm , ...rest })=>{
    const { classes  } = ConfirmModal_useStyles();
    confirmText = confirmText || 'Confirm';
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(src/* InjectedDialog */.Fl, {
        classes: {
            paper: classes.confirmDialog
        },
        BackdropProps: {
            style: {
                opacity: 0
            }
        },
        ...rest,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)(DialogContent/* default */.Z, {
                className: classes.content,
                children: [
                    icon ? /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                        className: classes.icon,
                        children: icon
                    }) : null,
                    typeof message === 'string' ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                        children: message
                    }) : message
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(DialogActions/* default */.Z, {
                className: classes.actions,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                    fullWidth: true,
                    onClick: onConfirm,
                    children: confirmText
                })
            })
        ]
    });
};

// EXTERNAL MODULE: ../plugins/Wallet/src/index.ts
var Wallet_src = __webpack_require__(10503);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Box/Box.js
var Box = __webpack_require__(96436);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Select/Select.js + 3 modules
var Select = __webpack_require__(40608);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/MenuItem/MenuItem.js + 1 modules
var MenuItem = __webpack_require__(11087);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/RadioGroup/RadioGroup.js
var RadioGroup = __webpack_require__(54152);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/FormControlLabel/FormControlLabel.js
var FormControlLabel = __webpack_require__(81117);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Radio/Radio.js + 5 modules
var Radio = __webpack_require__(68421);
// EXTERNAL MODULE: ../../node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js
var classnames = __webpack_require__(83849);
var classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);
// EXTERNAL MODULE: ./src/extension/options-page/DashboardComponents/ActionButton.tsx
var ActionButton = __webpack_require__(72288);
// EXTERNAL MODULE: ./src/web3/UI/ChainBoundary.tsx
var ChainBoundary = __webpack_require__(73495);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/uniqWith.js
var uniqWith = __webpack_require__(6986);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.4.0/node_modules/react-use/esm/useTimeoutFn.js
var useTimeoutFn = __webpack_require__(4103);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Checkbox/Checkbox.js + 4 modules
var Checkbox = __webpack_require__(23230);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/List/List.js + 1 modules
var List = __webpack_require__(73518);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/ListItem/ListItem.js + 2 modules
var ListItem = __webpack_require__(82138);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Stack/Stack.js
var Stack = __webpack_require__(73932);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/noop.js
var noop = __webpack_require__(21122);
;// CONCATENATED MODULE: ./src/plugins/Tips/components/NFTSection/NFTList.tsx









const NFTList_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        checkbox: {
            position: 'absolute',
            right: 0,
            top: 0
        },
        list: {
            gridGap: 13,
            display: 'grid',
            gridTemplateColumns: 'repeat(5, 1fr)'
        },
        nftItem: {
            position: 'relative',
            cursor: 'pointer',
            background: theme.palette.mode === 'light' ? '#EDEFEF' : '#2F3336',
            display: 'flex',
            overflow: 'hidden',
            padding: 0,
            flexDirection: 'column',
            borderRadius: 12,
            height: 96,
            userSelect: 'none',
            width: 96,
            justifyContent: 'center'
        },
        disabled: {
            opacity: 0.5,
            cursor: 'not-allowed'
        },
        selected: {
            position: 'relative',
            '&::after': {
                position: 'absolute',
                border: `2px solid ${theme.palette.primary.main}`,
                content: '""',
                left: 0,
                top: 0,
                pointerEvents: 'none',
                boxSizing: 'border-box',
                width: '100%',
                height: '100%',
                borderRadius: 12
            }
        },
        unselected: {
            opacity: 0.5
        },
        loadingFailImage: {
            width: 64,
            height: 64
        },
        assetPlayerIframe: {
            height: 100,
            width: 100
        },
        imgWrapper: {
            height: '100px !important',
            width: '100px !important',
            img: {
                height: '100%',
                width: '100%'
            }
        },
        tooltip: {
            marginBottom: `${theme.spacing(0.5)} !important`
        }
    })
);
const NFTItem = ({ token  })=>{
    const { classes  } = NFTList_useStyles();
    const chainId = (0,entry_web3/* useChainId */.xx)();
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* NFTCardStyledAssetPlayer */.yC, {
        chainId: chainId,
        contractAddress: token.contract?.address,
        url: token.metadata?.imageURL ?? token.metadata?.imageURL,
        tokenId: token.tokenId,
        classes: {
            loadingFailImage: classes.loadingFailImage,
            iframe: classes.assetPlayerIframe,
            imgWrapper: classes.imgWrapper
        }
    });
};
const NFTList = ({ selectedPairs , tokens , onChange , limit =1 , className , nextPage , loadFinish , loadError ,  })=>{
    const { classes  } = NFTList_useStyles();
    const isRadio = limit === 1;
    const reachedLimit = selectedPairs.length >= limit;
    const toggleItem = (0,react.useCallback)((currentId, contractAddress)=>{
        onChange?.(currentId, contractAddress);
    }, [
        onChange,
        isRadio,
        reachedLimit
    ]);
    const pluginId = (0,entry_web3/* useCurrentWeb3NetworkPluginID */.$f)();
    const includes = pluginId === base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM ? (pairs, pair)=>{
        return !!pairs.find(([address, tokenId])=>(0,base_src/* isSameAddress */.Wr)(address, pair[0]) && tokenId === pair[1]
        );
    } : (pairs, pair)=>{
        return !!pairs.find(([, tokenId])=>tokenId === pair[1]
        );
    };
    const SelectComponent = isRadio ? Radio/* default */.Z : Checkbox/* default */.Z;
    const { Others  } = (0,entry_web3/* useWeb3State */.dM)();
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(List/* default */.Z, {
        className: classnames_default()(classes.list, className),
        children: [
            tokens.map((token)=>{
                const selected = includes(selectedPairs, [
                    token.contract?.address,
                    token.tokenId
                ]);
                const disabled = !isRadio && reachedLimit && !selected;
                const link = token.contract ? Others?.explorerResolver?.nonFungibleTokenLink(token.contract.chainId, token.contract.address, token.tokenId) : undefined;
                return /*#__PURE__*/ (0,jsx_runtime.jsx)(entry/* ShadowRootTooltip */.p_, {
                    classes: {
                        tooltip: classes.tooltip
                    },
                    title: `${token.contract?.name} ${Others?.formatTokenId(token.tokenId, 2)}`,
                    placement: "top",
                    arrow: true,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(ListItem/* default */.ZP, {
                        className: classnames_default()(classes.nftItem, {
                            [classes.disabled]: disabled,
                            [classes.selected]: selected,
                            [classes.unselected]: selectedPairs.length > 0 && !selected
                        }),
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Link/* default */.Z, {
                                target: link ? '_blank' : 'self',
                                rel: "noreferrer noopener",
                                href: link,
                                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTItem, {
                                    token: token
                                })
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(SelectComponent, {
                                size: "small",
                                onChange: noop/* default */.Z,
                                disabled: disabled,
                                onClick: ()=>{
                                    if (disabled) return;
                                    if (selected) {
                                        toggleItem(null, '');
                                    } else {
                                        toggleItem(token.tokenId, token.contract?.address);
                                    }
                                },
                                className: classes.checkbox,
                                checked: selected
                            })
                        ]
                    }, token.tokenId + token.id)
                }, `${token.address}/${token.tokenId + token.id}`);
            }),
            loadError && !loadFinish && tokens.length && /*#__PURE__*/ (0,jsx_runtime.jsx)(Stack/* default */.Z, {
                py: 1,
                style: {
                    gridColumnStart: 1,
                    gridColumnEnd: 6
                },
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* RetryHint */.uw, {
                    hint: false,
                    retry: nextPage
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(Stack/* default */.Z, {
                py: 1,
                style: {
                    gridColumnStart: 1,
                    gridColumnEnd: 6
                },
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* ElementAnchor */.ek, {
                    callback: ()=>{
                        if (nextPage) nextPage();
                    },
                    children: !loadFinish && /*#__PURE__*/ (0,jsx_runtime.jsx)(entry/* LoadingBase */.Sx, {})
                })
            })
        ]
    });
};

;// CONCATENATED MODULE: ./src/plugins/Tips/components/NFTSection/index.tsx















const NFTSection_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        root: {
            display: 'flex',
            flexDirection: 'column',
            overflow: 'auto',
            height: 282
        },
        selectSection: {
            display: 'flex',
            flexDirection: 'column',
            overflow: 'auto',
            minHeight: '100%'
        },
        statusBox: {
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center',
            justifyContent: 'center',
            height: 282
        },
        loadingText: {
            marginTop: theme.spacing(1)
        },
        list: {
            flexGrow: 1,
            maxHeight: 400,
            overflow: 'auto',
            borderRadius: 4
        },
        errorMessage: {
            marginTop: theme.spacing(3),
            fontSize: 12,
            color: theme.palette.error.main,
            marginBottom: theme.spacing(3)
        }
    })
);
const NFTSection = ({ className , onAddToken , onEmpty , ...rest })=>{
    const { nonFungibleTokenAddress: tokenAddress , nonFungibleTokenId: tokenId , setNonFungibleTokenId , setNonFungibleTokenAddress ,  } = (0,contexts/* useTip */.p7)();
    const { classes  } = NFTSection_useStyles();
    const t = (0,locales/* useI18N */.M)();
    const selectedPairs = (0,react.useMemo)(()=>tokenId ? [
            [
                tokenAddress,
                tokenId
            ]
        ] : []
    , [
        tokenId,
        tokenId
    ]);
    // Cannot get the loading status of fetching via websocket
    // loading status of `useAsyncRetry` is not the real status
    const [guessLoading, setGuessLoading] = (0,react.useState)(true);
    const account = (0,entry_web3/* useAccount */.mA)();
    (0,useTimeoutFn/* default */.Z)(()=>{
        setGuessLoading(false);
    }, 10000);
    const { targetChainId: chainId , pluginId  } = contexts/* TargetRuntimeContext.useContainer */.Tb.useContainer();
    const { value: fetchedTokens = shared_base_src/* EMPTY_LIST */.rP , done , next , error: loadError ,  } = (0,entry_web3/* useNonFungibleAssets */.H1)(pluginId, undefined, {
        chainId
    });
    const isEvm = pluginId === base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM;
    const tokens = (0,react.useMemo)(()=>{
        return (0,uniqWith/* default */.Z)(fetchedTokens, isEvm ? (v1, v2)=>{
            return (0,base_src/* isSameAddress */.Wr)(v1.contract?.address, v2.contract?.address) && v1.tokenId === v2.tokenId;
        } : (v1, v2)=>v1.tokenId === v2.tokenId
        );
    }, [
        fetchedTokens,
        isEvm
    ]);
    const showLoadingIndicator = tokens.length === 0 && done && !guessLoading;
    (0,react.useEffect)(()=>{
        onEmpty?.(showLoadingIndicator);
    }, [
        onEmpty,
        showLoadingIndicator
    ]);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
        className: classnames_default()(classes.root, className),
        ...rest,
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
            className: classes.selectSection,
            children: (()=>{
                if (tokens.length) {
                    return /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTList, {
                        className: classes.list,
                        selectedPairs: selectedPairs,
                        tokens: tokens,
                        onChange: (id, address)=>{
                            setNonFungibleTokenId(id);
                            setNonFungibleTokenAddress(address || '');
                        },
                        nextPage: next,
                        loadFinish: done,
                        loadError: !!loadError
                    });
                }
                if (tokens.length === 0 && loadError && account) {
                    return /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* RetryHint */.uw, {
                        retry: next
                    });
                }
                if (tokens.length === 0 && (!done || guessLoading) && account) {
                    return /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                        className: classes.statusBox,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(entry/* LoadingBase */.Sx, {}),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                className: classes.loadingText,
                                children: t.tip_loading()
                            })
                        ]
                    });
                }
                return /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                    className: classes.statusBox,
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                            className: classes.loadingText,
                            children: t.tip_empty_nft()
                        }),
                        isEvm ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                            variant: "text",
                            onClick: onAddToken,
                            children: t.tip_add_collectibles()
                        }) : null
                    ]
                });
            })()
        })
    });
};

// EXTERNAL MODULE: ../web3-shared/evm/utils/address.ts
var address = __webpack_require__(2596);
// EXTERNAL MODULE: ../../node_modules/.pnpm/bignumber.js@9.0.2/node_modules/bignumber.js/bignumber.js
var bignumber = __webpack_require__(42263);
var bignumber_default = /*#__PURE__*/__webpack_require__.n(bignumber);
// EXTERNAL MODULE: ./src/web3/UI/TokenAmountPanel.tsx + 1 modules
var TokenAmountPanel = __webpack_require__(49524);
;// CONCATENATED MODULE: ./src/plugins/Tips/components/TokenSection/index.tsx










const GAS_LIMIT = 21000;
const TokenSection = ()=>{
    const { token , setToken , amount , setAmount , isSending , setGasConfig  } = (0,contexts/* useTip */.p7)();
    const { targetChainId: chainId , pluginId  } = contexts/* TargetRuntimeContext.useContainer */.Tb.useContainer();
    const { Others  } = (0,entry_web3/* useWeb3State */.dM)();
    const account = (0,entry_web3/* useAccount */.mA)();
    // balance
    const { value: tokenBalance = '0' , loading: loadingTokenBalance  } = (0,entry_web3/* useFungibleTokenBalance */.V4)(pluginId, token?.address, {
        chainId,
        account
    });
    const { gasPrice , gasConfig  } = (0,entry_web3_evm/* useGasConfig */.cI)(chainId);
    const { value: defaultGasPrice = '1'  } = (0,entry_web3/* useGasPrice */.Fh)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM, {
        chainId
    });
    const isNativeToken = (0,react.useMemo)(()=>(0,address/* isNativeTokenAddress */.qw)(token?.address)
    , [
        token?.address
    ]);
    const maxAmount = (0,react.useMemo)(()=>{
        if (!isNativeToken) return tokenBalance;
        const price = !gasPrice || gasPrice === '0' ? defaultGasPrice : gasPrice;
        const gasFee = new (bignumber_default())(price).times(GAS_LIMIT);
        return new (bignumber_default())(tokenBalance).minus(gasFee).toFixed();
    }, [
        isNativeToken,
        tokenBalance,
        gasPrice,
        defaultGasPrice
    ]);
    (0,react.useEffect)(()=>{
        if (isNativeToken) {
            setGasConfig(Others?.chainResolver.isSupport(chainId, '1559') ? {
                gas: GAS_LIMIT,
                maxFeePerGas: gasConfig?.maxFeePerGas || defaultGasPrice,
                maxPriorityFeePerGas: gasConfig?.maxPriorityFeePerGas || '1'
            } : {
                gas: GAS_LIMIT,
                gasPrice: gasPrice || defaultGasPrice
            });
        } else {
            setGasConfig(undefined);
        }
    }, [
        isNativeToken,
        gasConfig,
        gasPrice,
        chainId
    ]);
    const pickToken = (0,src/* usePickToken */.yQ)();
    const onSelectTokenChipClick = (0,react.useCallback)(async ()=>{
        const picked = await pickToken({
            chainId,
            disableNativeToken: false,
            selectedTokens: token ? [
                token.address
            ] : []
        });
        if (picked) {
            setToken(picked);
        }
    }, [
        pickToken,
        token?.address,
        pluginId,
        chainId
    ]);
    // #endregion
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(TokenAmountPanel/* TokenAmountPanel */.x, {
        label: "",
        token: token,
        amount: amount,
        maxAmount: maxAmount,
        maxAmountSignificant: 6,
        onAmountChange: setAmount,
        balance: tokenBalance,
        InputProps: {
            disabled: isSending
        },
        SelectTokenChip: {
            loading: loadingTokenBalance,
            ChipProps: {
                onClick: onSelectTokenChipClick
            }
        }
    });
};

;// CONCATENATED MODULE: ./src/plugins/Tips/components/TipForm.tsx

















const TipForm_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    return {
        root: {
            display: 'flex',
            flexDirection: 'column'
        },
        main: {
            display: 'flex',
            flexDirection: 'column',
            flexGrow: 1,
            overflow: 'auto'
        },
        receiverRow: {
            display: 'flex',
            flexDirection: 'row',
            alignItems: 'center'
        },
        to: {
            fontSize: 19,
            fontWeight: 500
        },
        address: {
            height: 48,
            flexGrow: 1,
            marginLeft: theme.spacing(1)
        },
        actionButton: {
            marginTop: theme.spacing(1.5),
            paddingTop: 12,
            paddingBottom: 12,
            fontSize: 16
        },
        button: {
            width: '100%',
            fontSize: 16,
            lineHeight: '22px',
            fontWeight: 600,
            padding: '10px 0',
            borderRadius: 24,
            height: 'auto',
            marginTop: theme.spacing(1.5)
        },
        disabledButton: {
            fontSize: 16,
            lineHeight: '22px',
            fontWeight: 600,
            padding: '10px 0',
            borderRadius: 24,
            height: 'auto'
        },
        controls: {
            marginTop: theme.spacing(1),
            display: 'flex',
            flexDirection: 'row'
        },
        addButton: {
            marginLeft: 'auto'
        },
        tokenField: {
            marginTop: theme.spacing(2)
        }
    };
});
const TipForm = /*#__PURE__*/ (0,react.memo)(({ className , onAddToken , onSent , ...rest })=>{
    const t = (0,locales/* useI18N */.M)();
    const currentChainId = (0,entry_web3/* useChainId */.xx)();
    const pluginId = (0,entry_web3/* useCurrentWeb3NetworkPluginID */.$f)();
    const { targetChainId: chainId  } = contexts/* TargetRuntimeContext.useContainer */.Tb.useContainer();
    const { classes  } = TipForm_useStyles();
    const { recipient , recipients: recipientAddresses , setRecipient , isSending , sendTip , tipType , setTipType ,  } = (0,contexts/* useTip */.p7)();
    const [isValid, validateMessage] = (0,contexts/* useTipValidate */.kk)();
    const { Others  } = (0,entry_web3/* useWeb3State */.dM)();
    const selectRef = (0,react.useRef)(null);
    const account = (0,entry_web3/* useAccount */.mA)();
    const { openDialog: openSelectProviderDialog  } = (0,shared_base_ui_src/* useRemoteControlledDialog */.F$)(Wallet_src/* WalletMessages.events.selectProviderDialogUpdated */.R$.events.selectProviderDialogUpdated);
    const [empty, setEmpty] = (0,react.useState)(false);
    const buttonLabel = isSending ? t.sending_tip() : isValid || !validateMessage ? t.send_tip() : validateMessage;
    const enabledNft = (0,react.useMemo)(()=>{
        if (isSending) return false;
        if (chainId !== currentChainId) return false;
        if (pluginId === base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM) {
            return [
                evm_types/* ChainId.Mainnet */.a_.Mainnet,
                evm_types/* ChainId.BSC */.a_.BSC,
                evm_types/* ChainId.Matic */.a_.Matic
            ].includes(currentChainId);
        }
        return pluginId === base_src/* NetworkPluginID.PLUGIN_SOLANA */.FF.PLUGIN_SOLANA;
    }, [
        chainId,
        currentChainId,
        pluginId
    ]);
    const send = (0,react.useCallback)(async ()=>{
        const hash = await sendTip();
        if (typeof hash !== 'string') return;
        onSent?.();
    }, [
        sendTip,
        onSent
    ]);
    const isEvm = pluginId === base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM;
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
        className: classnames_default()(classes.root, className),
        ...rest,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                className: classes.main,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)(FormControl/* default */.Z, {
                        fullWidth: true,
                        className: classes.receiverRow,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                                className: classes.to,
                                children: t.tip_to()
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Select/* default */.Z, {
                                className: classes.address,
                                ref: selectRef,
                                value: recipient,
                                disabled: isSending,
                                onChange: (e)=>{
                                    setRecipient(e.target.value);
                                },
                                MenuProps: {
                                    anchorOrigin: {
                                        vertical: 'bottom',
                                        horizontal: 'center'
                                    },
                                    container: selectRef.current,
                                    anchorEl: selectRef.current,
                                    BackdropProps: {
                                        invisible: true
                                    }
                                },
                                children: recipientAddresses.map((address)=>/*#__PURE__*/ (0,jsx_runtime.jsx)(MenuItem/* default */.Z, {
                                        value: address,
                                        children: Others?.formatDomainName?.(address) || address
                                    }, address)
                                )
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)(FormControl/* default */.Z, {
                        className: classes.controls,
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsxs)(RadioGroup/* default */.Z, {
                                row: true,
                                value: tipType,
                                onChange: (e)=>setTipType(e.target.value)
                                ,
                                children: [
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)(FormControlLabel/* default */.Z, {
                                        disabled: isSending,
                                        value: types/* TipType.Token */.Y.Token,
                                        control: /*#__PURE__*/ (0,jsx_runtime.jsx)(Radio/* default */.Z, {}),
                                        label: t.tip_type_token()
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime.jsx)(FormControlLabel/* default */.Z, {
                                        disabled: !enabledNft,
                                        value: types/* TipType.NFT */.Y.NFT,
                                        control: /*#__PURE__*/ (0,jsx_runtime.jsx)(Radio/* default */.Z, {}),
                                        label: t.tip_type_nft()
                                    })
                                ]
                            }),
                            tipType === types/* TipType.NFT */.Y.NFT && !empty && isEvm ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Button/* default */.Z, {
                                variant: "text",
                                className: classes.addButton,
                                onClick: onAddToken,
                                children: t.tip_add_collectibles()
                            }) : null
                        ]
                    }),
                    tipType === types/* TipType.Token */.Y.Token ? /*#__PURE__*/ (0,jsx_runtime.jsx)(FormControl/* default */.Z, {
                        className: classes.tokenField,
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TokenSection, {})
                    }) : /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTSection, {
                        onEmpty: setEmpty,
                        onAddToken: onAddToken
                    })
                ]
            }),
            account ? /*#__PURE__*/ (0,jsx_runtime.jsx)(ChainBoundary/* ChainBoundary */.s, {
                expectedPluginID: pluginId,
                expectedChainId: chainId,
                noSwitchNetworkTip: true,
                ActionButtonPromiseProps: {
                    fullWidth: true,
                    classes: {
                        root: classes.button,
                        disabled: classes.disabledButton
                    },
                    color: 'primary'
                },
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                    variant: "contained",
                    size: "large",
                    className: classes.actionButton,
                    fullWidth: true,
                    disabled: !isValid || isSending,
                    onClick: send,
                    children: buttonLabel
                })
            }) : /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionButton/* default */.ZP, {
                variant: "contained",
                size: "large",
                className: classes.actionButton,
                fullWidth: true,
                onClick: openSelectProviderDialog,
                children: t.tip_connect_wallet()
            })
        ]
    });
});

;// CONCATENATED MODULE: ./src/plugins/Tips/components/TipDialog.tsx






















const TipDialog_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        dialog: {
            width: 600,
            backgroundImage: 'none'
        },
        dialogTitle: {
            height: 60,
            paddingTop: '0 !important',
            paddingBottom: '0 !important'
        },
        content: {
            display: 'flex',
            flexDirection: 'column',
            flexBasis: '100%',
            paddingTop: 0,
            '&::-webkit-scrollbar': {
                display: 'none'
            }
        },
        abstractTabWrapper: {
            width: '100%',
            paddingTop: theme.spacing(1),
            paddingBottom: theme.spacing(1),
            flexShrink: 0
        },
        tab: {
            height: 36,
            minHeight: 36
        },
        tabPaper: {
            backgroundColor: 'inherit'
        },
        tabs: {
            height: 36,
            minHeight: 36,
            margin: '0 auto',
            borderRadius: 4
        },
        tipForm: {
            paddingTop: theme.spacing(1),
            flexGrow: 1,
            overflow: 'auto'
        },
        nftContainer: {
            height: 100,
            width: 100
        },
        nftMessage: {
            textAlign: 'center',
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center'
        },
        nftMessageText: {
            fontSize: 18,
            color: '#3DC233',
            marginTop: theme.spacing(3),
            lineHeight: '30px'
        },
        loadingFailImage: {
            width: 64,
            height: 64
        },
        walletChip: {
            marginLeft: 'auto',
            height: 40,
            boxSizing: 'border-box',
            display: 'flex',
            alignItems: 'center',
            backgroundColor: theme.palette.background.default,
            padding: theme.spacing(0.5, 1),
            borderRadius: 99
        },
        wallet: {
            marginLeft: theme.spacing(1)
        },
        walletTitle: {
            marginLeft: theme.spacing(1),
            lineHeight: '18px',
            height: 18,
            fontSize: 14,
            fontWeight: 'bold'
        },
        walletAddress: {
            height: 12,
            display: 'flex',
            alignItems: 'center',
            fontSize: 10,
            color: theme.palette.text.secondary
        },
        changeWalletButton: {
            marginLeft: theme.spacing(0.5),
            display: 'flex',
            alignItems: 'center',
            cursor: 'pointer'
        },
        link: {
            cursor: 'pointer',
            lineHeight: '10px',
            marginTop: 2,
            '&:hover': {
                textDecoration: 'none'
            }
        },
        linkIcon: {
            fill: 'none',
            width: 12,
            height: 12,
            marginLeft: theme.spacing(0.5)
        }
    })
);
function TipDialog({ open =false , onClose  }) {
    const pluginID = (0,entry_web3/* useCurrentWeb3NetworkPluginID */.$f)();
    const tipDefinition = (0,entry_dom/* useActivatedPlugin */.Rc)(entry_dom/* PluginId.NextID */.je.NextID, 'any');
    const chainIdList = tipDefinition?.enableRequirement.web3?.[pluginID]?.supportedChainIds ?? shared_base_src/* EMPTY_LIST */.rP;
    const t = (0,locales/* useI18N */.M)();
    const { classes  } = TipDialog_useStyles();
    const [addTokenDialogIsOpen, openAddTokenDialog] = (0,useBoolean/* default */.Z)(false);
    const [confirmModalIsOpen, openConfirmModal] = (0,useBoolean/* default */.Z)(false);
    const { targetChainId , setTargetChainId  } = contexts/* TargetRuntimeContext.useContainer */.Tb.useContainer();
    const { tipType , amount , token: token1 , recipientSnsId , recipient , nonFungibleTokenContract , nonFungibleTokenId: erc721TokenId , setNonFungibleTokenAddress , setNonFungibleTokenId , reset ,  } = (0,contexts/* useTip */.p7)();
    const isTokenTip = tipType === types/* TipType.Token */.Y.Token;
    const shareText = (0,react.useMemo)(()=>{
        const promote = t.tip_mask_promote();
        const message = isTokenTip ? t.tip_token_share_post({
            amount,
            symbol: token1?.symbol || 'token',
            recipientSnsId,
            recipient,
            promote
        }) : t.tip_nft_share_post({
            name: nonFungibleTokenContract?.name || 'NFT',
            recipientSnsId,
            recipient,
            promote
        });
        return message;
    }, [
        amount,
        isTokenTip,
        nonFungibleTokenContract?.name,
        token1,
        recipient,
        recipientSnsId,
        t
    ]);
    const { value: erc721Token  } = (0,entry_web3/* useNonFungibleToken */.bs)(base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM, nonFungibleTokenContract?.address, erc721TokenId ?? '');
    const chainId = (0,entry_web3/* useChainId */.xx)();
    const successMessage = (0,react.useMemo)(()=>{
        if (isTokenTip) return t.send_tip_successfully();
        if (erc721Token) return /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
            className: classes.nftMessage,
            children: [
                /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                    className: classes.nftContainer,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* NFTCardStyledAssetPlayer */.yC, {
                        chainId: chainId,
                        contractAddress: erc721Token.address,
                        url: erc721Token.metadata?.mediaURL,
                        tokenId: erc721Token.tokenId,
                        classes: {
                            loadingFailImage: classes.loadingFailImage
                        }
                    })
                }),
                /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                    className: classes.nftMessageText,
                    children: t.send_specific_tip_successfully({
                        amount: '1',
                        name: erc721Token.contract?.name || 'NFT'
                    })
                })
            ]
        });
        return t.send_tip_successfully();
    }, [
        t,
        isTokenTip,
        classes.nftMessage,
        erc721Token
    ]);
    const handleConfirm = (0,react.useCallback)(()=>{
        social_network/* activatedSocialNetworkUI.utils.share */.LM.utils.share?.(shareText);
        openConfirmModal(false);
        onClose?.();
    }, [
        shareText,
        onClose
    ]);
    const networkDescriptor = (0,entry_web3/* useNetworkDescriptor */.Vw)();
    const providerDescriptor = (0,entry_web3/* useProviderDescriptor */.fY)();
    const { Others  } = (0,entry_web3/* useWeb3State */.dM)();
    const account = (0,entry_web3/* useAccount */.mA)();
    const { value: domain  } = (0,entry_web3/* useReverseAddress */.$q)(pluginID, account);
    const walletTitle = Others?.formatDomainName?.(domain) || Others?.formatAddress?.(account, 4) || providerDescriptor?.name;
    // #region change provider
    const { openDialog: openSelectProviderDialog  } = (0,shared_base_ui_src/* useRemoteControlledDialog */.F$)(messages/* WalletMessages.events.selectProviderDialogUpdated */.R.events.selectProviderDialogUpdated);
    // #endregion
    const openWallet = (0,react.useCallback)(()=>{
        if (native_rpc/* hasNativeAPI */._) return native_rpc/* nativeAPI */.Nz?.api.misc_openCreateWalletView();
        return openSelectProviderDialog();
    }, [
        openSelectProviderDialog,
        native_rpc/* hasNativeAPI */._
    ]);
    const handleAddToken = (0,react.useCallback)((token)=>{
        setNonFungibleTokenAddress(token.address ?? '');
        setNonFungibleTokenId(token.tokenId);
        openAddTokenDialog(false);
    }, []);
    const walletChip = account ? /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
        className: classes.walletChip,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* WalletIcon */.o, {
                size: 30,
                badgeSize: 12,
                mainIcon: providerDescriptor?.icon,
                badgeIcon: networkDescriptor?.icon
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
                className: classes.wallet,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                        ml: 1,
                        className: classes.walletTitle,
                        children: walletTitle
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                        ml: 1,
                        className: classes.walletAddress,
                        children: [
                            Others?.formatAddress?.(account, 4),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(Link/* default */.Z, {
                                className: classes.link,
                                href: account ? Others?.explorerResolver.addressLink(chainId, account) ?? '' : '',
                                target: "_blank",
                                rel: "noopener noreferrer",
                                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(LinkOut/* LinkOutIcon */.A, {
                                    className: classes.linkIcon
                                })
                            })
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                className: classes.changeWalletButton,
                role: "button",
                onClick: openWallet,
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Drop2Icon, {})
            })
        ]
    }) : null;
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* InjectedDialog */.Fl, {
                open: open,
                onClose: onClose,
                classes: {
                    dialogTitle: classes.dialogTitle,
                    paper: classes.dialog
                },
                title: t.tips(),
                titleTail: walletChip,
                children: /*#__PURE__*/ (0,jsx_runtime.jsxs)(DialogContent/* default */.Z, {
                    className: classes.content,
                    children: [
                        chainIdList.length ? /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                            className: classes.abstractTabWrapper,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(NetworkTab/* NetworkTab */.L, {
                                classes: classes,
                                chainId: targetChainId,
                                setChainId: setTargetChainId,
                                chains: chainIdList
                            })
                        }) : null,
                        /*#__PURE__*/ (0,jsx_runtime.jsx)(TipForm, {
                            className: classes.tipForm,
                            onAddToken: ()=>openAddTokenDialog(true)
                            ,
                            onSent: ()=>{
                                openConfirmModal(true);
                            }
                        })
                    ]
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(ConfirmModal, {
                title: t.tips(),
                open: confirmModalIsOpen,
                onClose: ()=>{
                    openConfirmModal(false);
                    reset();
                    onClose?.();
                },
                icon: isTokenTip ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Success/* SuccessIcon */.t, {
                    style: {
                        height: 64,
                        width: 64
                    }
                }) : null,
                message: successMessage,
                confirmText: t.tip_share(),
                onConfirm: handleConfirm
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)(AddDialog, {
                open: addTokenDialogIsOpen,
                onClose: ()=>openAddTokenDialog(false)
                ,
                onAdd: handleAddToken
            })
        ]
    });
}

;// CONCATENATED MODULE: ../icons/plugins/TipCoin.tsx


const TipCoin = (0,utils/* createIcon */.I)('TipCoin', /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [
        /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M12 2C6.47715 2 2 6.47715 2 12V20.5047C2 21.3305 2.66948 22 3.49533 22H12C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z",
            fill: "url(#paint0_linear_1927_27567)"
        }),
        /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
            d: "M7.67344 16.718C7.54433 16.5875 7.47205 16.4112 7.47226 16.2273C7.47247 16.0434 7.54516 15.8666 7.67457 15.7354L8.4109 14.999L8.35513 14.906C8.14516 14.5665 7.9938 14.194 7.90737 13.8039C7.83335 13.5063 7.80321 13.1993 7.81787 12.8926C7.83412 12.7107 7.92117 12.5421 8.06025 12.4232C8.19933 12.3043 8.37932 12.2446 8.56146 12.257C8.7436 12.2693 8.9133 12.3527 9.03402 12.4893C9.15474 12.6258 9.21682 12.8045 9.20688 12.9868C9.2042 13.1567 9.22354 13.326 9.26442 13.4907C9.35189 13.8916 9.5519 14.2587 9.84101 14.5491C9.98886 14.7089 10.168 14.8366 10.3673 14.9243C10.5667 15.012 10.782 15.0579 11.0001 15.0591C11.1032 15.058 11.205 15.035 11.2987 14.9917C11.3924 14.9483 11.4759 14.8856 11.5438 14.8077C11.8188 14.4655 11.7824 13.9828 11.3917 12.7397L11.3001 12.4541C11.0597 11.8096 10.9189 11.132 10.8826 10.4443C10.8936 9.91804 11.0965 9.41312 11.453 9.02444C11.8096 8.63577 12.2952 8.3901 12.8188 8.33361C13.4181 8.28161 14.0176 8.42285 14.5293 8.73664L14.6206 8.79066L15.3606 8.05061C15.4939 7.93224 15.6672 7.86907 15.845 7.874C16.0229 7.87893 16.1918 7.95159 16.3174 8.07714C16.4429 8.20269 16.5156 8.37165 16.5205 8.54948C16.5255 8.7273 16.4623 8.90058 16.3439 9.03389L15.6076 9.77022L15.6642 9.86233C15.8734 10.2023 16.0247 10.5747 16.112 10.9645C16.1855 11.2622 16.2157 11.5691 16.2015 11.8757C16.1967 11.9681 16.1736 12.0586 16.1335 12.1421C16.0934 12.2255 16.0371 12.3002 15.9679 12.3618C15.8987 12.4233 15.8179 12.4705 15.7304 12.5006C15.6429 12.5306 15.5503 12.543 15.4581 12.5368C15.3659 12.5307 15.2759 12.5063 15.1934 12.4649C15.1108 12.4236 15.0375 12.3662 14.9775 12.2961C14.9176 12.2259 14.8723 12.1445 14.8442 12.0566C14.8162 11.9686 14.806 11.8758 14.8142 11.7837C14.8171 11.6135 14.7975 11.4437 14.756 11.2787C14.6701 10.8772 14.4707 10.5091 14.1814 10.2184C14.0335 10.0586 13.8542 9.93104 13.6548 9.84352C13.4553 9.756 13.2398 9.71038 13.0216 9.7095C12.9185 9.71069 12.8167 9.73361 12.7229 9.77678C12.6291 9.81994 12.5453 9.88237 12.4771 9.96C12.203 10.3013 12.2383 10.7851 12.6307 12.0277L12.7215 12.3126C12.9613 12.9574 13.1018 13.6353 13.1381 14.3232C13.1281 14.8495 12.9256 15.3548 12.5691 15.7435C12.2125 16.1322 11.7265 16.3775 11.2028 16.433C10.604 16.485 10.005 16.3438 9.49396 16.03L9.40184 15.9751L8.66092 16.716C8.59617 16.781 8.51929 16.8326 8.43468 16.8679C8.35006 16.9032 8.25939 16.9214 8.16785 16.9216C8.07631 16.9218 7.98571 16.9039 7.90124 16.869C7.81677 16.834 7.7401 16.7827 7.67562 16.718L7.67344 16.718Z",
            fill: "white"
        }),
        /*#__PURE__*/ (0,jsx_runtime.jsx)("defs", {
            children: /*#__PURE__*/ (0,jsx_runtime.jsxs)("linearGradient", {
                id: "paint0_linear_1927_27567",
                x1: "12",
                y1: "2",
                x2: "12",
                y2: "22",
                gradientUnits: "userSpaceOnUse",
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("stop", {
                        stopColor: "#F7931E"
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("stop", {
                        offset: "1",
                        stopColor: "#FBB03B"
                    })
                ]
            })
        })
    ]
}), '0 0 24 24');

// EXTERNAL MODULE: ../plugin-infra/src/entry-content-script.ts
var entry_content_script = __webpack_require__(20778);
// EXTERNAL MODULE: ../web3-providers/src/index.ts
var web3_providers_src = __webpack_require__(19769);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/uniq.js
var uniq = __webpack_require__(78854);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.4.0/node_modules/react-use/esm/useAsyncRetry.js
var useAsyncRetry = __webpack_require__(58500);
// EXTERNAL MODULE: ./shared/index.ts
var shared = __webpack_require__(94670);
// EXTERNAL MODULE: ./src/components/DataSource/useActivatedUI.ts
var useActivatedUI = __webpack_require__(23397);
// EXTERNAL MODULE: ./src/extension/service.ts
var service = __webpack_require__(78778);
// EXTERNAL MODULE: ../plugin-infra/src/entry.ts
var src_entry = __webpack_require__(70226);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/head.js
var head = __webpack_require__(29730);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.4.0/node_modules/react-use/esm/useAsync.js
var useAsync = __webpack_require__(70981);
// EXTERNAL MODULE: ./src/utils/index.ts + 4 modules
var src_utils = __webpack_require__(93455);
// EXTERNAL MODULE: ./src/plugins/Tips/hooks/useKv.ts
var useKv = __webpack_require__(34893);
;// CONCATENATED MODULE: ./src/plugins/Tips/hooks/useProfilePublicKey.ts


function useProfilePublicKey(receiver) {
    const { value: publicKey  } = (0,useAsync/* default */.Z)(async ()=>{
        if (!receiver) return;
        const persona = await service/* default.Identity.queryPersonaByProfile */.ZP.Identity.queryPersonaByProfile(receiver);
        return persona?.identifier.publicKeyAsHex;
    }, [
        receiver
    ]);
    return publicKey;
}

;// CONCATENATED MODULE: ./src/plugins/Tips/hooks/usePublicWallets.ts









function usePublicWallets(profile) {
    const publicKey = useProfilePublicKey(profile);
    const { value: kv  } = (0,useKv/* useKvGet */.M9)(publicKey);
    const [NextIDWalletsState, queryWallets] = (0,useAsyncFn/* default */.Z)(async ()=>{
        if (!publicKey) return shared_base_src/* EMPTY_LIST */.rP;
        const bindings = await web3_providers_src/* NextIDProof.queryExistedBindingByPersona */.q7.queryExistedBindingByPersona(publicKey, true);
        if (!bindings) return shared_base_src/* EMPTY_LIST */.rP;
        const wallets = bindings.proofs.filter((p)=>p.platform === shared_base_src/* NextIDPlatform.Ethereum */.Vd.Ethereum
        ).map((p)=>p.identity
        );
        return wallets;
    }, [
        publicKey
    ]);
    (0,useAsync/* default */.Z)(queryWallets, [
        queryWallets
    ]);
    const walletsFromCloud = (0,react.useMemo)(()=>{
        if (!kv?.ok) return null;
        const { proofs  } = kv.val;
        if (!proofs.length) return null;
        const configuredTipsWallets = proofs.some((x)=>x.content[src_entry/* PluginId.Tips */.je.Tips]
        );
        if (!configuredTipsWallets) return null;
        const tipWallets = (0,head/* default */.Z)(proofs.map((x)=>x.content[src_entry/* PluginId.Tips */.je.Tips]?.filter((y)=>y.platform === shared_base_src/* NextIDPlatform.Ethereum */.Vd.Ethereum
            )
        ));
        if (!tipWallets) return null;
        return tipWallets.filter((x)=>{
            if (NextIDWalletsState.value) {
                // Sometimes, the wallet might get deleted from next.id
                return x.isPublic && NextIDWalletsState.value.includes(x.identity);
            } else {
                return x.isPublic;
            }
        }).map((x)=>x.identity
        );
    }, [
        kv,
        NextIDWalletsState.value
    ]);
    (0,react.useEffect)(()=>{
        return src_utils/* MaskMessages.events.ownProofChanged.on */.ql.events.ownProofChanged.on(()=>{
            queryWallets();
        });
    }, []);
    return (0,react.useMemo)(()=>{
        // If user configured wallets for tips, it couldn't be null.
        return walletsFromCloud || (0,uniq/* default */.Z)(NextIDWalletsState.value || []);
    }, [
        NextIDWalletsState.value,
        walletsFromCloud
    ]);
}

;// CONCATENATED MODULE: ./src/plugins/Tips/messages.ts

if (false) {}
const PluginNextIDMessages = (0,src_entry/* createPluginMessage */.I4)(src_entry/* PluginId.Tips */.je.Tips);

;// CONCATENATED MODULE: ./src/plugins/Tips/components/TipButton.tsx



















const TipButton_useStyles = (0,entry/* makeStyles */.ZL)()({
    tipButton: {
        cursor: 'pointer',
        display: 'flex',
        justifyContent: 'center',
        alignItems: 'center',
        fontFamily: '-apple-system, system-ui, sans-serif'
    },
    buttonWrapper: {
        // temporarily hard code
        height: 46,
        display: 'flex',
        alignItems: 'center',
        color: '#8899a6'
    },
    postTipButton: {
        cursor: 'pointer',
        width: 34,
        height: 34,
        borderRadius: '100%',
        '&:hover': {
            backgroundColor: 'rgba(20,155,240,0.1)'
        }
    },
    tooltip: {
        backgroundColor: 'rgb(102,102,102)',
        color: 'white',
        marginTop: '0 !important'
    },
    disabled: {
        opacity: 0.4,
        cursor: 'default'
    }
});
const TipButton = ({ className , receiver , addresses =shared_base_src/* EMPTY_LIST */.rP , children , tooltipProps , ...rest })=>{
    const { classes  } = TipButton_useStyles();
    const t = (0,locales/* useI18N */.M)();
    const platform = social_network/* activatedSocialNetworkUI.configuration.nextIDConfig */.LM.configuration.nextIDConfig?.platform;
    const { value: receiverPersona , loading: loadingPersona  } = (0,useAsyncRetry/* default */.Z)(async ()=>{
        if (!receiver) return;
        return service/* default.Identity.queryPersonaByProfile */.ZP.Identity.queryPersonaByProfile(receiver);
    }, [
        receiver
    ]);
    const pluginId = (0,entry_web3/* useCurrentWeb3NetworkPluginID */.$f)();
    const { value: isAccountVerified , loading: loadingVerifyInfo , retry: retryLoadVerifyInfo ,  } = (0,useAsyncRetry/* default */.Z)(()=>{
        if (pluginId !== base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM) return Promise.resolve(true);
        if (!receiverPersona?.identifier.publicKeyAsHex || !receiver?.userId) return Promise.resolve(false);
        return web3_providers_src/* NextIDProof.queryIsBound */.q7.queryIsBound(receiverPersona.identifier.publicKeyAsHex, platform, receiver.userId, true);
    }, [
        pluginId,
        receiverPersona?.identifier.publicKeyAsHex,
        platform,
        receiver?.userId
    ]);
    const visitingIdentity = (0,useActivatedUI/* useCurrentVisitingIdentity */.fb)();
    const isVisitingUser = visitingIdentity.identifier?.userId === receiver?.userId;
    const isRuntimeAvailable = (0,react.useMemo)(()=>{
        switch(pluginId){
            case base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM:
                return true;
            case base_src/* NetworkPluginID.PLUGIN_SOLANA */.FF.PLUGIN_SOLANA:
                return isVisitingUser;
        }
        return false;
    }, [
        pluginId,
        isVisitingUser
    ]);
    (0,react.useEffect)(()=>{
        return shared/* MaskMessages.events.ownProofChanged.on */.ql.events.ownProofChanged.on(()=>{
            retryLoadVerifyInfo();
        });
    }, []);
    const publicWallets = usePublicWallets(receiver || undefined);
    const { value: socialAddressList = shared_base_src/* EMPTY_LIST */.rP  } = (0,entry_web3/* useSocialAddressListAll */.zx)(visitingIdentity);
    const allAddresses = (0,react.useMemo)(()=>{
        switch(pluginId){
            case base_src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM:
                return (0,uniq/* default */.Z)([
                    ...publicWallets,
                    ...addresses
                ]);
            case base_src/* NetworkPluginID.PLUGIN_SOLANA */.FF.PLUGIN_SOLANA:
                return socialAddressList.filter((x)=>x.networkSupporterPluginID === pluginId
                ).map((x)=>x.address
                );
        }
        return shared_base_src/* EMPTY_LIST */.rP;
    }, [
        pluginId,
        publicWallets,
        addresses,
        socialAddressList
    ]);
    const isChecking = loadingPersona || loadingVerifyInfo;
    const disabled = isChecking || !isAccountVerified || allAddresses.length === 0 || !isRuntimeAvailable;
    const createTipTask = (0,react.useCallback)(async (evt)=>{
        evt.stopPropagation();
        evt.preventDefault();
        if (disabled) return;
        if (!allAddresses.length || !receiver?.userId) return;
        PluginNextIDMessages.tipTask.sendToLocal({
            recipientSnsId: receiver.userId,
            addresses: allAddresses
        });
    }, [
        disabled,
        allAddresses,
        receiver?.userId
    ]);
    (0,react.useEffect)(()=>{
        PluginNextIDMessages.tipTaskUpdate.sendToLocal({
            recipientSnsId: receiver?.userId,
            addresses: allAddresses
        });
    }, [
        receiver?.userId,
        allAddresses
    ]);
    const dom = /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
        className: classnames_default()(className, classes.tipButton, disabled ? classes.disabled : null),
        ...rest,
        role: "button",
        onClick: createTipTask,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(TipCoin, {
                viewBox: "0 0 24 24"
            }),
            children
        ]
    });
    if (disabled) return /*#__PURE__*/ (0,jsx_runtime.jsx)(entry/* ShadowRootTooltip */.p_, {
        classes: {
            tooltip: classes.tooltip
        },
        title: isChecking ? '' : t.tip_wallets_missed(),
        placement: "bottom",
        arrow: false,
        ...tooltipProps,
        children: dom
    });
    return dom;
};
const PostTipButton = ({ className , ...rest })=>{
    const identifier = entry_content_script/* usePostInfoDetails.author */.H9.author();
    const { classes  } = TipButton_useStyles();
    return /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
        className: classes.buttonWrapper,
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TipButton, {
            className: classnames_default()(classes.postTipButton, className),
            ...rest,
            receiver: identifier
        })
    });
};

;// CONCATENATED MODULE: ./src/plugins/Tips/components/TipTaskManager.tsx






let id = 0;
const TipTaskManager = ({ children  })=>{
    const [tasks, setTasks] = (0,react.useState)(shared_base_src/* EMPTY_LIST */.rP);
    const removeTask = (0,react.useCallback)((task)=>{
        setTasks((list)=>list.filter((t)=>t.id !== task.id
            )
        );
    }, []);
    (0,react.useEffect)(()=>{
        return PluginNextIDMessages.tipTask.on((task)=>{
            id += 1;
            setTasks((list)=>[
                    ...list,
                    {
                        id,
                        ...task
                    }
                ]
            );
        });
    }, []);
    (0,react.useEffect)(()=>{
        return PluginNextIDMessages.tipTaskUpdate.on((task)=>{
            setTasks((list)=>{
                const included = list.some((t)=>t.recipientSnsId === task.recipientSnsId
                );
                if (!included) return list;
                return list.map((t)=>t.recipientSnsId === task.recipientSnsId ? {
                        ...task,
                        id: t.id
                    } : t
                );
            });
        });
    }, []);
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [
            tasks.map((task)=>/*#__PURE__*/ (0,jsx_runtime.jsx)(contexts/* TipTaskProvider */.w6, {
                    task: task,
                    children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TipDialog, {
                        open: true,
                        onClose: ()=>removeTask(task)
                    }, task.id)
                }, task.id)
            ),
            children
        ]
    });
};

;// CONCATENATED MODULE: ./src/plugins/Tips/components/index.ts





/***/ }),

/***/ 19600:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Ti": () => (/* reexport */ RootContext),
  "Tb": () => (/* reexport */ TargetRuntimeContext),
  "w6": () => (/* reexport */ TipTaskProvider),
  "p7": () => (/* reexport */ useTip),
  "kk": () => (/* reexport */ useTipValidate)
});

// UNUSED EXPORTS: TipContext

// EXTERNAL MODULE: ../plugin-infra/src/entry-web3.ts + 1 modules
var entry_web3 = __webpack_require__(50719);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/index.js
var react = __webpack_require__(58757);
// EXTERNAL MODULE: ../../node_modules/.pnpm/unstated-next@1.1.0/node_modules/unstated-next/dist/unstated-next.mjs
var unstated_next = __webpack_require__(44737);
;// CONCATENATED MODULE: ./src/plugins/Tips/contexts/TargetRuntimeContext.ts



function useTargetChainId() {
    const pluginId = (0,entry_web3/* useCurrentWeb3NetworkPluginID */.$f)();
    const chainId = (0,entry_web3/* useChainId */.xx)();
    const [targetChainId, setTargetChainId] = (0,react.useState)(chainId);
    (0,react.useEffect)(()=>{
        setTargetChainId(chainId);
    }, [
        chainId
    ]);
    return {
        pluginId,
        targetChainId,
        setTargetChainId
    };
}
const TargetRuntimeContext = (0,unstated_next/* createContainer */.f)(useTargetChainId);

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(35667);
;// CONCATENATED MODULE: ./src/plugins/Tips/contexts/RootContext.tsx


const RootContext = ({ children  })=>{
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(TargetRuntimeContext.Provider, {
        children: children
    });
};

// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/noop.js
var noop = __webpack_require__(21122);
// EXTERNAL MODULE: ./src/plugins/Tips/types/index.ts + 1 modules
var types = __webpack_require__(35228);
;// CONCATENATED MODULE: ./src/plugins/Tips/contexts/Tip/TipContext.ts



const TipContext = (0,react.createContext)({
    recipient: '',
    recipientSnsId: '',
    setRecipient: noop/* default */.Z,
    tipType: types/* TipType.NFT */.Y.NFT,
    setTipType: noop/* default */.Z,
    recipients: [],
    token: null,
    setToken: noop/* default */.Z,
    amount: '',
    setAmount: noop/* default */.Z,
    nonFungibleTokenId: null,
    setNonFungibleTokenId: noop/* default */.Z,
    nonFungibleTokenContract: null,
    nonFungibleTokenAddress: '',
    setNonFungibleTokenAddress: noop/* default */.Z,
    sendTip: noop/* default */.Z,
    isSending: false,
    storedTokens: [],
    reset: noop/* default */.Z,
    setGasConfig: noop/* default */.Z
});

// EXTERNAL MODULE: ../web3-shared/base/src/index.ts + 1 modules
var src = __webpack_require__(67938);
// EXTERNAL MODULE: ../../node_modules/.pnpm/use-subscription@1.6.0/node_modules/use-subscription/index.js
var use_subscription = __webpack_require__(14257);
// EXTERNAL MODULE: ./src/plugins/Tips/storage/index.ts
var storage = __webpack_require__(32581);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.4.0/node_modules/react-use/esm/useAsyncFn.js
var useAsyncFn = __webpack_require__(32588);
;// CONCATENATED MODULE: ./src/plugins/Tips/contexts/Tip/useNftTip.ts



function useNftTip(pluginId, recipient, tokenId, contractAddress, options) {
    const { Token , Connection  } = (0,entry_web3/* useWeb3State */.dM)(pluginId);
    const chainId = (0,entry_web3/* useChainId */.xx)();
    const account = (0,entry_web3/* useAccount */.mA)(pluginId);
    const connectionOptions = {
        account,
        ...options,
        overrides: {
            from: account
        }
    };
    const [{ loading: isTransferring  }, sendTip] = (0,useAsyncFn/* default */.Z)(async ()=>{
        const connection = await Connection?.getConnection?.();
        if (!tokenId || !connection) return;
        if (pluginId === src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM && !contractAddress) return;
        const txid = await connection.transferNonFungibleToken(contractAddress, recipient, tokenId, '1', undefined, connectionOptions);
        const tokenDetailed = await connection?.getNonFungibleToken(contractAddress ?? '', tokenId, undefined, {
            chainId,
            account
        });
        if (tokenDetailed) {
            await Token?.removeToken?.(tokenDetailed);
        }
        return txid;
    }, [
        tokenId,
        pluginId,
        Connection,
        contractAddress,
        recipient,
        JSON.stringify(connectionOptions)
    ]);
    return [
        isTransferring,
        sendTip
    ];
}

;// CONCATENATED MODULE: ./src/plugins/Tips/contexts/Tip/useTokenTip.ts



function useTokenTip(pluginId, recipient, token, amount, options) {
    const { Connection  } = (0,entry_web3/* useWeb3State */.dM)(pluginId);
    const account = (0,entry_web3/* useAccount */.mA)(pluginId);
    const connectionOptions = {
        account,
        ...options
    };
    const [{ loading: isTransferring  }, sendTip] = (0,useAsyncFn/* default */.Z)(async ()=>{
        const connection = await Connection?.getConnection?.();
        if (!token?.address || !connection) return;
        const totalAmount = (0,src/* rightShift */.pu)(amount, token.decimals).toFixed();
        return connection.transferFungibleToken(token?.address, recipient, totalAmount, '', connectionOptions);
    }, [
        JSON.stringify(connectionOptions),
        token?.address,
        token?.decimals,
        amount
    ]);
    return [
        isTransferring,
        sendTip
    ];
}

;// CONCATENATED MODULE: ./src/plugins/Tips/contexts/Tip/TipTaskProvider.tsx











const TipTaskProvider = ({ children , task  })=>{
    const { targetChainId , pluginId  } = TargetRuntimeContext.useContainer();
    const [recipient, setRecipient] = (0,react.useState)('');
    const [tipType, setTipType] = (0,react.useState)(types/* TipType.Token */.Y.Token);
    const [amount, setAmount] = (0,react.useState)('');
    const chainId = (0,entry_web3/* useChainId */.xx)();
    const [nonFungibleTokenAddress, setNonFungibleTokenAddress] = (0,react.useState)('');
    const { value: nativeTokenDetailed = null  } = (0,entry_web3/* useFungibleToken */.cf)(pluginId, undefined, {
        chainId: targetChainId
    });
    const [token, setToken] = (0,react.useState)(nativeTokenDetailed);
    const [nonFungibleTokenId, setNonFungibleTokenId] = (0,react.useState)(null);
    const storedTokens = (0,use_subscription.useSubscription)((0,storage/* getStorage */.cF)().addedTokens.subscription);
    const { value: nonFungibleTokenContract  } = (0,entry_web3/* useNonFungibleTokenContract */.LN)(pluginId, nonFungibleTokenAddress);
    (0,react.useEffect)(()=>{
        setTipType(types/* TipType.Token */.Y.Token);
    }, [
        targetChainId
    ]);
    (0,react.useEffect)(()=>{
        const selected = recipient && task.addresses.includes(recipient);
        if (selected || task.addresses.length === 0) return;
        setRecipient(task.addresses[0]);
    }, [
        recipient,
        task.addresses
    ]);
    (0,react.useEffect)(()=>{
        if (!nativeTokenDetailed) return;
        setToken(nativeTokenDetailed);
    }, [
        nativeTokenDetailed
    ]);
    const [gasConfig, setGasConfig] = (0,react.useState)();
    const connectionOptions = pluginId === src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM ? {
        overrides: gasConfig
    } : undefined;
    const tokenTipTuple = useTokenTip(pluginId, recipient, token, amount, connectionOptions);
    const nftTipTuple = useNftTip(pluginId, recipient, nonFungibleTokenId, nonFungibleTokenAddress, connectionOptions);
    const sendTipTuple = tipType === types/* TipType.Token */.Y.Token ? tokenTipTuple : nftTipTuple;
    const isSending = sendTipTuple[0];
    const sendTip = sendTipTuple[1];
    const contextValue = (0,react.useMemo)(()=>{
        const reset = ()=>{
            setAmount('');
            setNonFungibleTokenId(null);
            setNonFungibleTokenAddress('');
        };
        return {
            recipient,
            recipientSnsId: task.recipientSnsId || '',
            setRecipient,
            recipients: task.addresses,
            tipType,
            setTipType,
            token,
            setToken,
            amount,
            setAmount,
            nonFungibleTokenId,
            setNonFungibleTokenId,
            nonFungibleTokenContract: nonFungibleTokenContract || null,
            nonFungibleTokenAddress,
            setNonFungibleTokenAddress,
            sendTip,
            isSending,
            storedTokens: storedTokens.filter((t)=>t.contract?.chainId === chainId
            ),
            reset,
            setGasConfig
        };
    }, [
        chainId,
        recipient,
        task.recipientSnsId,
        task.addresses,
        tipType,
        amount,
        nonFungibleTokenId,
        nonFungibleTokenContract,
        nonFungibleTokenAddress,
        token,
        sendTip,
        isSending,
        storedTokens, 
    ]);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(TipContext.Provider, {
        value: contextValue,
        children: children
    });
};
function useTip() {
    return (0,react.useContext)(TipContext);
}

// EXTERNAL MODULE: ./src/plugins/Tips/locales/index.ts + 1 modules
var locales = __webpack_require__(39761);
;// CONCATENATED MODULE: ./src/plugins/Tips/contexts/Tip/useTipValidate.ts







function useTipValidate() {
    const { tipType , amount , token , nonFungibleTokenId: tokenId , nonFungibleTokenAddress: tokenAddress ,  } = (0,react.useContext)(TipContext);
    const account = (0,entry_web3/* useAccount */.mA)();
    const { pluginId , targetChainId: chainId  } = TargetRuntimeContext.useContainer();
    const { value: balance = '0'  } = (0,entry_web3/* useFungibleTokenBalance */.V4)(pluginId, token?.address, {
        chainId,
        account
    });
    const t = (0,locales/* useI18N */.M)();
    const result = (0,react.useMemo)(()=>{
        if (tipType === types/* TipType.Token */.Y.Token) {
            if (!amount || (0,src/* isLessThanOrEqualTo */.PW)(amount, 0)) return [
                false
            ];
            if ((0,src/* isGreaterThan */.T1)((0,src/* rightShift */.pu)(amount, token?.decimals), balance)) return [
                false,
                t.token_insufficient_balance()
            ];
        } else if (pluginId === src/* NetworkPluginID.PLUGIN_EVM */.FF.PLUGIN_EVM) {
            if (!tokenId || !tokenAddress) return [
                false
            ];
        } else if (!tokenId) {
            return [
                false
            ];
        }
        return [
            true
        ];
    }, [
        tipType,
        amount,
        token?.decimals,
        balance,
        tokenId,
        tokenAddress,
        t
    ]);
    return result;
}

;// CONCATENATED MODULE: ./src/plugins/Tips/contexts/Tip/index.ts




;// CONCATENATED MODULE: ./src/plugins/Tips/contexts/index.ts





/***/ }),

/***/ 34893:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "M9": () => (/* binding */ useKvGet),
/* harmony export */   "nN": () => (/* binding */ getKvPayload),
/* harmony export */   "rN": () => (/* binding */ setKvPatchData)
/* harmony export */ });
/* harmony import */ var _masknet_plugin_infra__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(70226);
/* harmony import */ var _masknet_shared_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(44451);
/* harmony import */ var _masknet_web3_providers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(19769);
/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(58500);
/* harmony import */ var _extension_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(78778);





const pluginId = _masknet_plugin_infra__WEBPACK_IMPORTED_MODULE_0__/* .PluginId.Tips */ .je.Tips;
const getCurrentPersonaPublicKey = async ()=>{
    const currentPersonaIdentifier = await _extension_service__WEBPACK_IMPORTED_MODULE_3__/* ["default"].Settings.getCurrentPersonaIdentifier */ .ZP.Settings.getCurrentPersonaIdentifier();
    if (!currentPersonaIdentifier) return '';
    const currentPersona = await _extension_service__WEBPACK_IMPORTED_MODULE_3__/* ["default"].Identity.queryPersona */ .ZP.Identity.queryPersona(currentPersonaIdentifier);
    return currentPersona?.identifier.publicKeyAsHex || '';
};
function useKvGet(publicKey) {
    return (0,react_use__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z)(async ()=>{
        if (!publicKey) return null;
        return _masknet_web3_providers__WEBPACK_IMPORTED_MODULE_2__/* .NextIDStorage.get */ .wA.get(publicKey);
    }, [
        publicKey
    ]);
}
const getKvPayload = async (patchData)=>{
    try {
        const data = JSON.parse(JSON.stringify(patchData));
        const publicHexKey = await getCurrentPersonaPublicKey();
        const payload = await _masknet_web3_providers__WEBPACK_IMPORTED_MODULE_2__/* .NextIDStorage.getPayload */ .wA.getPayload(publicHexKey, _masknet_shared_base__WEBPACK_IMPORTED_MODULE_1__/* .NextIDPlatform.NextID */ .Vd.NextID, publicHexKey, data, pluginId);
        return payload;
    } catch (error) {
        console.error(error);
        return null;
    }
};
const setKvPatchData = async (payload, signature, patchData)=>{
    try {
        const publicHexKey = await getCurrentPersonaPublicKey();
        const base64Sig = (0,_masknet_shared_base__WEBPACK_IMPORTED_MODULE_1__/* .toBase64 */ .s3)((0,_masknet_shared_base__WEBPACK_IMPORTED_MODULE_1__/* .fromHex */ .H_)(signature));
        await _masknet_web3_providers__WEBPACK_IMPORTED_MODULE_2__/* .NextIDStorage.set */ .wA.set(payload.uuid, publicHexKey, base64Sig, _masknet_shared_base__WEBPACK_IMPORTED_MODULE_1__/* .NextIDPlatform.NextID */ .Vd.NextID, publicHexKey, payload.createdAt, patchData, pluginId);
    } catch (error) {
        console.error(error);
    }
};


/***/ }),

/***/ 39761:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "M": () => (/* reexport */ useI18N)
});

// UNUSED EXPORTS: Translate

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/index.js
var react = __webpack_require__(58757);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-i18next@11.16.9_nlaekqjbpikw4agfyzvj2iejnm/node_modules/react-i18next/dist/es/Trans.js
var Trans = __webpack_require__(62266);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-i18next@11.16.9_nlaekqjbpikw4agfyzvj2iejnm/node_modules/react-i18next/dist/es/useTranslation.js
var useTranslation = __webpack_require__(43133);
;// CONCATENATED MODULE: ./src/plugins/Tips/locales/i18n_generated.js
/* eslint-disable */


const bind = (i18nKey) => (props) => (0,react.createElement)(Trans/* Trans */.c, { i18nKey, ns: "com.maskbook.tip", ...props })
function useI18N() {
    const { t } = (0,useTranslation/* useTranslation */.$)("com.maskbook.tip")
    return (0,react.useMemo)(
        function proxyBasedHooks() {
    return new Proxy({ __proto__: null }, {
        get(target, key) {
            if (target[key])
                return target[key];
            return (target[key] = t.bind(null, key));
        },
    });
},
        [t],
    )
}
const Translate = function proxyBasedTrans() {
    return new Proxy({ __proto__: null }, {
        get(target, key) {
            if (target[key])
                return target[key];
            return (target[key] = bind(key));
        },
    });
}()
;// CONCATENATED MODULE: ./src/plugins/Tips/locales/index.ts
// This file is auto generated. DO NOT EDIT
// Run `npx gulp sync-languages` to regenerate.
// Default fallback language in a family of languages are chosen by the alphabet order
// To overwrite this, please overwrite packages/scripts/src/locale-kit-next/index.ts



/***/ }),

/***/ 32581:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "cF": () => (/* binding */ getStorage),
/* harmony export */   "fq": () => (/* binding */ storageDefaultValue),
/* harmony export */   "tX": () => (/* binding */ setupStorage)
/* harmony export */ });
/* unused harmony exports getTokens, storeToken, deleteToken */
/* harmony import */ var _masknet_web3_shared_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67938);


const storageDefaultValue = {
    publicKey: null,
    addedTokens: []
};
let storage = null;
function setupStorage(_) {
    storage = _;
}
function getStorage() {
    return storage.storage;
}
function getTokens() {
    return storage.storage.addedTokens.value;
}
function storeToken(token) {
    const tokens = [
        token,
        ...getTokens()
    ];
    storage.storage.addedTokens.setValue(tokens);
}
function deleteToken(address, tokenId) {
    const tokens = getTokens();
    remove(tokens, (t)=>t.tokenId === tokenId && isSameAddress(t.contract?.address, address)
    );
    storage.storage.addedTokens.setValue(tokens);
}


/***/ }),

/***/ 35228:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Y": () => (/* reexport */ TipType)
});

;// CONCATENATED MODULE: ./src/plugins/Tips/types/tip.ts
var TipType;
(function(TipType) {
    TipType["Token"] = 'token';
    TipType["NFT"] = 'nft';
})(TipType || (TipType = {}));

;// CONCATENATED MODULE: ./src/plugins/Tips/types/index.ts



/***/ }),

/***/ 73495:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "s": () => (/* binding */ ChainBoundary)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(35667);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(58757);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(76618);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(96436);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(21784);
/* harmony import */ var _masknet_theme__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(31939);
/* harmony import */ var _masknet_plugin_infra_web3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(50719);
/* harmony import */ var _masknet_web3_shared_evm__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(72499);
/* harmony import */ var _masknet_shared_base_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(80226);
/* harmony import */ var _dimensiondev_kit__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(46123);
/* harmony import */ var _extension_options_page_DashboardComponents_ActionButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(72288);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(93455);
/* harmony import */ var _plugins_Wallet_messages__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(91788);
/* harmony import */ var _masknet_shared__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(77818);
/* harmony import */ var _masknet_icons__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(47061);
/* harmony import */ var _masknet_web3_shared_base__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(67938);
/* harmony import */ var _masknet_plugin_infra_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(89239);















const useStyles = (0,_masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .makeStyles */ .ZL)()((theme)=>({
        action: {
            textAlign: 'center',
            margin: theme.spacing(1),
            width: '100%',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            marginBottom: 48
        },
        tooltip: {
            borderRadius: 4,
            padding: 10
        }
    })
);
function ChainBoundary(props) {
    const { noSwitchNetworkTip =true , expectedPluginID , expectedChainId , predicate =(actualPluginID, actualChainId)=>actualPluginID === expectedPluginID && actualChainId === expectedChainId
     ,  } = props;
    const { t  } = (0,_utils__WEBPACK_IMPORTED_MODULE_7__/* .useI18N */ .M1)();
    const theme = (0,_mui_material__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z)();
    const classes = (0,_masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .useStylesExtends */ .Bc)(useStyles(), props);
    const actualPluginID1 = (0,_masknet_plugin_infra_web3__WEBPACK_IMPORTED_MODULE_3__/* .useCurrentWeb3NetworkPluginID */ .$f)();
    const plugin = (0,_masknet_plugin_infra_dom__WEBPACK_IMPORTED_MODULE_11__/* .useActivatedPlugin */ .Rc)(actualPluginID1, 'any');
    const { Others: actualOthers  } = (0,_masknet_plugin_infra_web3__WEBPACK_IMPORTED_MODULE_3__/* .useWeb3State */ .dM)(actualPluginID1);
    const actualChainId1 = (0,_masknet_plugin_infra_web3__WEBPACK_IMPORTED_MODULE_3__/* .useChainId */ .xx)(actualPluginID1);
    const actualProviderType = (0,_masknet_plugin_infra_web3__WEBPACK_IMPORTED_MODULE_3__/* .useProviderType */ ._o)(actualPluginID1);
    const actualChainName = actualOthers?.chainResolver.chainName(actualChainId1);
    const account = (0,_masknet_plugin_infra_web3__WEBPACK_IMPORTED_MODULE_3__/* .useAccount */ .mA)(actualPluginID1);
    const { Others: expectedOthers  } = (0,_masknet_plugin_infra_web3__WEBPACK_IMPORTED_MODULE_3__/* .useWeb3State */ .dM)(expectedPluginID);
    const expectedConnection = (0,_masknet_plugin_infra_web3__WEBPACK_IMPORTED_MODULE_3__/* .useWeb3Connection */ .Tv)(expectedPluginID);
    const expectedAllowTestnet = (0,_masknet_plugin_infra_web3__WEBPACK_IMPORTED_MODULE_3__/* .useAllowTestnet */ .QE)(expectedPluginID);
    const expectedChainName = expectedOthers?.chainResolver.chainName(expectedChainId);
    const expectedNetworkDescriptor = (0,_masknet_plugin_infra_web3__WEBPACK_IMPORTED_MODULE_3__/* .useNetworkDescriptor */ .Vw)(_masknet_web3_shared_base__WEBPACK_IMPORTED_MODULE_10__/* .NetworkPluginID.PLUGIN_EVM */ .FF.PLUGIN_EVM, expectedChainId);
    const expectedChainAllowed = expectedOthers?.chainResolver.isValid(expectedChainId, expectedAllowTestnet);
    const isPluginIDMatched = actualPluginID1 === expectedPluginID;
    const isMatched = predicate(actualPluginID1, actualChainId1);
    const { openDialog: openSelectProviderDialog  } = (0,_masknet_shared_base_ui__WEBPACK_IMPORTED_MODULE_4__/* .useRemoteControlledDialog */ .F$)(_plugins_Wallet_messages__WEBPACK_IMPORTED_MODULE_8__/* .WalletMessages.events.selectProviderDialogUpdated */ .R.events.selectProviderDialogUpdated);
    const onSwitchChain = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{
        // a short time loading makes the user fells better
        await (0,_dimensiondev_kit__WEBPACK_IMPORTED_MODULE_5__/* .delay */ .gw)(1000);
        if (!expectedChainAllowed) return;
        if (!isPluginIDMatched || actualProviderType === _masknet_web3_shared_evm__WEBPACK_IMPORTED_MODULE_13__/* .ProviderType.WalletConnect */ .lP.WalletConnect) {
            openSelectProviderDialog();
            return;
        }
        if (!isMatched) {
            await expectedConnection?.connect({
                chainId: expectedChainId
            });
        }
    }, [
        expectedChainAllowed,
        isMatched,
        isPluginIDMatched,
        actualProviderType,
        expectedChainId,
        expectedConnection,
        openSelectProviderDialog, 
    ]);
    // TODO: will remove this and extract new boundary for timeline
    const buttonProps = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{
        return {
            ...props.renderInTimeline ? {
                variant: 'contained',
                fullWidth: true,
                sx: {
                    backgroundColor: theme.palette.maskColor?.dark,
                    color: theme.palette.maskColor?.white,
                    '&:hover': {
                        backgroundColor: theme.palette.maskColor?.dark
                    }
                }
            } : {},
            ...props.ActionButtonPromiseProps
        };
    }, [
        props.ActionButtonPromiseProps,
        props.renderInTimeline
    ]);
    const renderBox = (children, tips)=>{
        return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .ShadowRootTooltip */ .p_, {
            title: tips ?? '',
            classes: {
                tooltip: classes.tooltip
            },
            arrow: true,
            placement: "top",
            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .Z, {
                className: props.className,
                sx: {
                    flex: 1
                },
                display: "flex",
                flexDirection: "column",
                alignItems: "center",
                children: children
            })
        });
    };
    if (!account) return renderBox(/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: !props.hiddenConnectButton ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_extension_options_page_DashboardComponents_ActionButton__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .ZP, {
            fullWidth: true,
            startIcon: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_masknet_icons__WEBPACK_IMPORTED_MODULE_15__/* .PluginWalletConnectIcon */ .Q, {}),
            variant: "contained",
            size: props.ActionButtonPromiseProps?.size,
            sx: {
                marginTop: 1.5
            },
            onClick: openSelectProviderDialog,
            ...buttonProps,
            children: t('plugin_wallet_connect_wallet')
        }) : null
    }));
    if (isMatched) return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: props.children
    });
    if (actualPluginID1 !== expectedPluginID) {
        return renderBox(/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
            children: [
                !noSwitchNetworkTip ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
                    color: _masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .MaskColorVar.errorPlugin */ .ZN.errorPlugin,
                    children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                        children: t('plugin_wallet_not_available_on', {
                            network: plugin?.name?.fallback ?? 'Unknown Plugin'
                        })
                    })
                }) : null,
                expectedChainAllowed ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_extension_options_page_DashboardComponents_ActionButton__WEBPACK_IMPORTED_MODULE_6__/* .ActionButtonPromise */ .Zc, {
                    fullWidth: true,
                    className: classes.switchButton,
                    startIcon: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_masknet_shared__WEBPACK_IMPORTED_MODULE_9__/* .WalletIcon */ .o, {
                        mainIcon: expectedNetworkDescriptor?.icon,
                        size: 18
                    }),
                    sx: props.ActionButtonPromiseProps?.sx,
                    style: {
                        borderRadius: 10
                    },
                    init: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                        children: t('plugin_wallet_connect_network', {
                            network: 'EVM'
                        })
                    }),
                    waiting: t('plugin_wallet_connect_network_under_going', {
                        network: 'EVM'
                    }),
                    complete: t('plugin_wallet_connect_network', {
                        network: 'EVM'
                    }),
                    failed: t('retry'),
                    executor: onSwitchChain,
                    completeOnClick: onSwitchChain,
                    failedOnClick: "use executor",
                    ...buttonProps
                }) : null
            ]
        }));
    }
    return renderBox(/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: [
            !noSwitchNetworkTip ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z, {
                color: _masknet_theme__WEBPACK_IMPORTED_MODULE_2__/* .MaskColorVar.errorPlugin */ .ZN.errorPlugin,
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                    children: t('plugin_wallet_not_available_on', {
                        network: actualChainName
                    })
                })
            }) : null,
            expectedChainAllowed ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_extension_options_page_DashboardComponents_ActionButton__WEBPACK_IMPORTED_MODULE_6__/* .ActionButtonPromise */ .Zc, {
                startIcon: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_masknet_shared__WEBPACK_IMPORTED_MODULE_9__/* .WalletIcon */ .o, {
                    mainIcon: expectedNetworkDescriptor?.icon,
                    size: 18
                }),
                sx: props.ActionButtonPromiseProps?.sx,
                style: {
                    borderRadius: 10,
                    paddingTop: 11,
                    paddingBottom: 11
                },
                init: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                    children: t('plugin_wallet_switch_network', {
                        network: expectedChainName
                    })
                }),
                waiting: t('plugin_wallet_switch_network_under_going', {
                    network: expectedChainName
                }),
                complete: t('plugin_wallet_switch_network', {
                    network: expectedChainName
                }),
                failed: t('retry'),
                executor: onSwitchChain,
                completeOnClick: onSwitchChain,
                failedOnClick: "use executor",
                ...buttonProps
            }) : null
        ]
    }), actualProviderType === _masknet_web3_shared_evm__WEBPACK_IMPORTED_MODULE_13__/* .ProviderType.WalletConnect */ .lP.WalletConnect ? t('plugin_wallet_connect_tips') : '');
}


/***/ }),

/***/ 49524:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "x": () => (/* binding */ TokenAmountPanel)
});

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(35667);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.1.0/node_modules/react/index.js
var react = __webpack_require__(58757);
// EXTERNAL MODULE: ../../node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js
var classnames = __webpack_require__(83849);
var classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);
// EXTERNAL MODULE: ../../node_modules/.pnpm/bignumber.js@9.0.2/node_modules/bignumber.js/bignumber.js
var bignumber = __webpack_require__(42263);
var bignumber_default = /*#__PURE__*/__webpack_require__.n(bignumber);
// EXTERNAL MODULE: ../theme/src/entry.ts
var entry = __webpack_require__(31939);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/TextField/TextField.js + 2 modules
var TextField = __webpack_require__(48591);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Box/Box.js
var Box = __webpack_require__(96436);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Typography/Typography.js + 1 modules
var Typography = __webpack_require__(21784);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/Chip/Chip.js + 1 modules
var Chip = __webpack_require__(11142);
// EXTERNAL MODULE: ../shared/src/index.ts + 2 modules
var src = __webpack_require__(77818);
// EXTERNAL MODULE: ../web3-shared/base/src/index.ts + 1 modules
var base_src = __webpack_require__(67938);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.8.0_ar3vczqpton7uep5462l6mtgi4/node_modules/@mui/icons-material/Error.js
var Error = __webpack_require__(72388);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+icons-material@5.8.0_ar3vczqpton7uep5462l6mtgi4/node_modules/@mui/icons-material/ExpandMore.js
var ExpandMore = __webpack_require__(96209);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.8.0_4xriuibr7qayay6mzcpq5f43me/node_modules/@mui/material/CircularProgress/CircularProgress.js + 1 modules
var CircularProgress = __webpack_require__(69314);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/noop.js
var noop = __webpack_require__(21122);
// EXTERNAL MODULE: ./src/utils/index.ts + 4 modules
var utils = __webpack_require__(93455);
;// CONCATENATED MODULE: ./src/web3/UI/SelectTokenChip.tsx









const useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    return {
        chip: {
            border: 'none',
            borderRadius: 8,
            paddingLeft: theme.spacing(0.5)
        },
        loadingChip: {
            marginRight: theme.spacing(-0.5)
        },
        icon: {
            color: theme.palette.text.primary,
            pointerEvents: 'none'
        },
        tokenIcon: {
            width: 16,
            height: 16
        }
    };
});
function SelectTokenChip(props) {
    const { t  } = (0,utils/* useI18N */.M1)();
    const { token , error , loading =false , readonly =false , ChipProps  } = props;
    const { classes  } = useStyles();
    if (loading) return /*#__PURE__*/ (0,jsx_runtime.jsx)(Chip/* default */.Z, {
        className: classnames_default()(classes.chip, classes.loadingChip),
        icon: /*#__PURE__*/ (0,jsx_runtime.jsx)(CircularProgress/* default */.Z, {
            size: 16
        }),
        size: "small",
        clickable: false,
        variant: "outlined"
    });
    if (!token) return /*#__PURE__*/ (0,jsx_runtime.jsx)(Chip/* default */.Z, {
        className: classes.chip,
        label: t('plugin_gitcoin_select_a_token'),
        size: "small",
        clickable: !readonly,
        ...ChipProps
    });
    if (token && error) return /*#__PURE__*/ (0,jsx_runtime.jsx)(Chip/* default */.Z, {
        className: classes.chip,
        icon: /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* TokenIcon */.T1, {
            address: token.address,
            chainId: token.chainId,
            name: token.name,
            logoURL: token.logoURL
        }),
        deleteIcon: /*#__PURE__*/ (0,jsx_runtime.jsx)(Error/* default */.Z, {
            className: classes.icon
        }),
        label: token.symbol,
        color: "default",
        size: "small",
        variant: "outlined",
        clickable: !readonly,
        // the delete icon only visible when this callback provided
        onDelete: noop/* default */.Z,
        ...ChipProps
    });
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(Chip/* default */.Z, {
        className: classes.chip,
        icon: /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* TokenIcon */.T1, {
            classes: {
                icon: classes.tokenIcon
            },
            address: token.address,
            name: token.name,
            chainId: token.chainId,
            logoURL: token.logoURL
        }),
        deleteIcon: readonly ? undefined : /*#__PURE__*/ (0,jsx_runtime.jsx)(ExpandMore/* default */.Z, {
            className: classes.icon
        }),
        color: "default",
        size: "small",
        variant: "outlined",
        clickable: !readonly,
        label: token.symbol,
        // the delete icon only visible when this callback provided
        onDelete: readonly ? undefined : noop/* default */.Z,
        ...ChipProps
    });
}

;// CONCATENATED MODULE: ./src/web3/UI/TokenAmountPanel.tsx










const MIN_AMOUNT_LENGTH = 1;
const MAX_AMOUNT_LENGTH = 79;
const TokenAmountPanel_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    return {
        root: {},
        input: {
            '&::-webkit-outer-spin-button, &::-webkit-inner-spin-button': {
                appearance: 'none',
                margin: 0
            },
            appearance: 'textfield'
        },
        max: {
            marginRight: theme.spacing(0.5),
            borderRadius: 8
        },
        token: {
            whiteSpace: 'pre',
            maxWidth: 300,
            paddingLeft: theme.spacing(1)
        },
        balance: {
            whiteSpace: 'nowrap',
            textOverflow: 'ellipsis',
            overflow: 'hidden',
            maxWidth: '80%',
            fontSize: 12,
            top: theme.spacing(0.5),
            position: 'absolute'
        },
        inputShrinkLabel: {
            transform: 'translate(17px, -3px) scale(0.75) !important'
        }
    };
});
function TokenAmountPanel(props) {
    const { amount: amount1 , maxAmount , maxAmountShares =1 , maxAmountSignificant , balance , token , onAmountChange , label , disableToken =false , disableBalance =false , MaxChipProps ,  } = props;
    const { t  } = (0,utils/* useI18N */.M1)();
    const classes = (0,entry/* useStylesExtends */.Bc)(TokenAmountPanel_useStyles(), props);
    // #region update amount by self
    const { RE_MATCH_WHOLE_AMOUNT , RE_MATCH_FRACTION_AMOUNT  } = (0,react.useMemo)(()=>({
            RE_MATCH_FRACTION_AMOUNT: new RegExp(`^\\.\\d{0,${token?.decimals}}$`),
            RE_MATCH_WHOLE_AMOUNT: new RegExp(`^\\d*\\.?\\d{0,${token?.decimals}}$`)
        })
    , [
        token?.decimals
    ]);
    const onChange = (0,react.useCallback)((ev)=>{
        const amount_ = ev.currentTarget.value.replace(/,/g, '.');
        if (RE_MATCH_FRACTION_AMOUNT.test(amount_)) onAmountChange(`0${amount_}`);
        else if (amount_ === '' || RE_MATCH_WHOLE_AMOUNT.test(amount_)) onAmountChange(amount_);
    }, [
        onAmountChange,
        RE_MATCH_WHOLE_AMOUNT,
        RE_MATCH_FRACTION_AMOUNT
    ]);
    // #endregion
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(TextField/* default */.Z, {
        className: classes.root,
        label: label,
        fullWidth: true,
        required: true,
        type: "text",
        value: amount1,
        variant: "outlined",
        onKeyDown: (ev)=>{
            if (ev.key === 'Enter') ev.preventDefault();
        },
        onChange: onChange,
        placeholder: "0.0",
        InputProps: {
            inputProps: {
                autoComplete: 'off',
                autoCorrect: 'off',
                title: 'Token Amount',
                inputMode: 'decimal',
                min: 0,
                minLength: MIN_AMOUNT_LENGTH,
                maxLength: MAX_AMOUNT_LENGTH,
                pattern: '^[0-9]*[.,]?[0-9]*$',
                spellCheck: false,
                className: classes.input
            },
            endAdornment: disableToken ? null : token ? /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                className: classes.token,
                sx: {
                    display: 'flex',
                    flexDirection: 'column',
                    justifyContent: 'center',
                    alignItems: 'flex-end'
                },
                children: [
                    !disableBalance ? /*#__PURE__*/ (0,jsx_runtime.jsxs)(Typography/* default */.Z, {
                        className: classes.balance,
                        color: "textSecondary",
                        variant: "body2",
                        component: "span",
                        children: [
                            t('plugin_ito_list_table_got'),
                            ":",
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(src/* FormattedBalance */.BV, {
                                value: balance,
                                decimals: token.decimals,
                                significant: 6,
                                formatter: base_src/* formatBalance */.az
                            })
                        ]
                    }) : null,
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                        sx: {
                            display: 'flex',
                            alignItems: 'center',
                            marginTop: 2
                        },
                        children: [
                            balance !== '0' && !disableBalance ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Chip/* default */.Z, {
                                classes: {
                                    root: classnames_default()(classes.max, MaxChipProps?.classes?.root),
                                    ...MaxChipProps?.classes
                                },
                                size: "small",
                                label: "MAX",
                                clickable: true,
                                color: "primary",
                                variant: "outlined",
                                onClick: ()=>{
                                    const amount = new (bignumber_default())(maxAmount ?? balance).dividedBy(maxAmountShares).decimalPlaces(0, 1);
                                    onAmountChange((0,base_src/* formatBalance */.az)(amount, token.decimals, maxAmountSignificant) ?? '0');
                                },
                                ...MaxChipProps
                            }) : null,
                            /*#__PURE__*/ (0,jsx_runtime.jsx)(SelectTokenChip, {
                                token: token,
                                ...props.SelectTokenChip
                            })
                        ]
                    })
                ]
            }) : /*#__PURE__*/ (0,jsx_runtime.jsxs)(Box/* default */.Z, {
                className: classes.token,
                sx: {
                    display: 'flex',
                    flexDirection: 'column',
                    justifyContent: 'center',
                    alignItems: 'flex-end',
                    marginTop: 2
                },
                children: [
                    !disableBalance ? /*#__PURE__*/ (0,jsx_runtime.jsx)(Typography/* default */.Z, {
                        className: classes.balance,
                        color: "textSecondary",
                        variant: "body2",
                        component: "span",
                        children: "-"
                    }) : null,
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(SelectTokenChip, {
                        token: token,
                        ...props.SelectTokenChip
                    })
                ]
            }),
            ...props.InputProps
        },
        InputLabelProps: {
            shrink: true,
            classes: {
                shrink: classes.inputShrinkLabel
            }
        },
        ...props.TextFieldProps
    });
}


/***/ }),

/***/ 44737:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "f": () => (/* binding */ createContainer),
/* harmony export */   "u": () => (/* binding */ useContainer)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58757);


function createContainer(useHook) {
  var Context = react__WEBPACK_IMPORTED_MODULE_0__.createContext(null);

  function Provider(props) {
    var value = useHook(props.initialState);
    return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Context.Provider, {
      value: value
    }, props.children);
  }

  function useContainer() {
    var value = react__WEBPACK_IMPORTED_MODULE_0__.useContext(Context);

    if (value === null) {
      throw new Error("Component must be wrapped with <Container.Provider>");
    }

    return value;
  }

  return {
    Provider: Provider,
    useContainer: useContainer
  };
}
function useContainer(container) {
  return container.useContainer();
}


//# sourceMappingURL=unstated-next.mjs.map


/***/ })

}]);