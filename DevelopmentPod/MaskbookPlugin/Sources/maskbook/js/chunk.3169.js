"use strict";
(globalThis["webpackChunk_masknet_extension"] = globalThis["webpackChunk_masknet_extension"] || []).push([[3169],{

/***/ 68487:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "i": () => (/* binding */ PostTipButton),
  "X": () => (/* binding */ TipButton)
});

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.0.0/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(71999);
// EXTERNAL MODULE: ../icons/utils/index.tsx
var utils = __webpack_require__(15679);
;// CONCATENATED MODULE: ../icons/plugins/TipCoin.tsx


const TipCoin = (0,utils/* createIcon */.I)('TipCoin', /*#__PURE__*/ (0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [
        /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M3.6 20.4H12C16.6392 20.4 20.4 16.6392 20.4 12C20.4 7.36081 16.6392 3.6 12 3.6C7.36081 3.6 3.6 7.36081 3.6 12V20.4ZM12 2C6.47715 2 2 6.47715 2 12V20.5047C2 21.3305 2.66948 22 3.49533 22H12C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z",
            fill: "currentColor"
        }),
        /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
            d: "M7.67344 16.718C7.54433 16.5875 7.47205 16.4112 7.47226 16.2273C7.47247 16.0434 7.54516 15.8666 7.67457 15.7354L8.4109 14.999L8.35513 14.906C8.14516 14.5665 7.9938 14.194 7.90737 13.8039C7.83335 13.5063 7.80321 13.1993 7.81787 12.8926C7.83412 12.7107 7.92117 12.5421 8.06025 12.4232C8.19933 12.3043 8.37932 12.2446 8.56146 12.257C8.7436 12.2693 8.9133 12.3527 9.03402 12.4893C9.15474 12.6258 9.21682 12.8045 9.20688 12.9868C9.2042 13.1567 9.22354 13.326 9.26442 13.4907C9.35189 13.8916 9.5519 14.2587 9.84101 14.5491C9.98886 14.7089 10.168 14.8366 10.3673 14.9243C10.5667 15.012 10.782 15.0579 11.0001 15.0591C11.1032 15.058 11.205 15.035 11.2987 14.9917C11.3924 14.9483 11.4759 14.8856 11.5438 14.8077C11.8188 14.4655 11.7824 13.9828 11.3917 12.7397L11.3001 12.4541C11.0597 11.8096 10.9189 11.132 10.8826 10.4443C10.8936 9.91804 11.0965 9.41312 11.453 9.02444C11.8096 8.63577 12.2952 8.3901 12.8188 8.33361C13.4181 8.28161 14.0176 8.42285 14.5293 8.73664L14.6206 8.79066L15.3606 8.05061C15.4939 7.93224 15.6672 7.86907 15.845 7.874C16.0229 7.87893 16.1918 7.95159 16.3174 8.07714C16.4429 8.20269 16.5156 8.37165 16.5205 8.54948C16.5255 8.7273 16.4623 8.90058 16.3439 9.03389L15.6076 9.77022L15.6642 9.86233C15.8734 10.2023 16.0247 10.5747 16.112 10.9645C16.1855 11.2622 16.2157 11.5691 16.2015 11.8757C16.1967 11.9681 16.1736 12.0586 16.1335 12.1421C16.0934 12.2255 16.0371 12.3002 15.9679 12.3618C15.8987 12.4233 15.8179 12.4705 15.7304 12.5006C15.6429 12.5306 15.5503 12.543 15.4581 12.5368C15.3659 12.5307 15.2759 12.5063 15.1934 12.4649C15.1108 12.4236 15.0375 12.3662 14.9775 12.2961C14.9176 12.2259 14.8723 12.1445 14.8442 12.0566C14.8162 11.9686 14.806 11.8758 14.8142 11.7837C14.8171 11.6135 14.7975 11.4437 14.756 11.2787C14.6701 10.8772 14.4707 10.5091 14.1814 10.2184C14.0335 10.0586 13.8542 9.93104 13.6548 9.84352C13.4553 9.756 13.2398 9.71038 13.0216 9.7095C12.9185 9.71069 12.8167 9.73361 12.7229 9.77678C12.6291 9.81994 12.5453 9.88237 12.4771 9.96C12.203 10.3013 12.2383 10.7851 12.6307 12.0277L12.7215 12.3126C12.9613 12.9574 13.1018 13.6353 13.1381 14.3232C13.1281 14.8495 12.9256 15.3548 12.5691 15.7435C12.2125 16.1322 11.7265 16.3775 11.2028 16.433C10.604 16.485 10.005 16.3438 9.49396 16.03L9.40184 15.9751L8.66092 16.716C8.59617 16.781 8.51929 16.8326 8.43468 16.8679C8.35006 16.9032 8.25939 16.9214 8.16785 16.9216C8.07631 16.9218 7.98571 16.9039 7.90124 16.869C7.81677 16.834 7.7401 16.7827 7.67562 16.718L7.67344 16.718Z",
            fill: "currentColor"
        })
    ]
}), '0 0 24 24');

// EXTERNAL MODULE: ../plugin-infra/src/entry-content-script.ts + 1 modules
var entry_content_script = __webpack_require__(98541);
// EXTERNAL MODULE: ../shared-base/src/index.ts + 1 modules
var src = __webpack_require__(78144);
// EXTERNAL MODULE: ../theme/src/entry.ts
var entry = __webpack_require__(30232);
// EXTERNAL MODULE: ../web3-providers/src/index.ts
var web3_providers_src = __webpack_require__(92820);
// EXTERNAL MODULE: ../../node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js
var classnames = __webpack_require__(83849);
var classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/uniq.js
var uniq = __webpack_require__(78854);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.0.0/node_modules/react/index.js
var react = __webpack_require__(86248);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useAsyncRetry.js
var useAsyncRetry = __webpack_require__(64452);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useAsyncFn.js
var useAsyncFn = __webpack_require__(30688);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useAsync.js
var useAsync = __webpack_require__(73570);
// EXTERNAL MODULE: ./src/extension/service.ts
var service = __webpack_require__(5027);
// EXTERNAL MODULE: ./src/social-network/index.ts
var social_network = __webpack_require__(3747);
// EXTERNAL MODULE: ./src/plugins/NextID/locales/index.ts + 1 modules
var locales = __webpack_require__(13573);
// EXTERNAL MODULE: ./src/plugins/NextID/messages.ts
var messages = __webpack_require__(81441);
// EXTERNAL MODULE: ./shared/index.ts
var shared = __webpack_require__(62481);
;// CONCATENATED MODULE: ./src/plugins/NextID/components/Tip/TipButton.tsx















const useStyles = (0,entry/* makeStyles */.ZL)()({
    tipButton: {
        cursor: 'pointer',
        display: 'flex',
        justifyContent: 'center',
        alignItems: 'center',
        fontFamily: '-apple-system, system-ui, sans-serif'
    },
    buttonWrapper: {
        // temporarily hard code
        height: 46,
        display: 'flex',
        alignItems: 'center',
        color: '#8899a6'
    },
    postTipButton: {
        cursor: 'pointer',
        width: 34,
        height: 34,
        borderRadius: '100%',
        '&:hover': {
            backgroundColor: 'rgba(20,155,240,0.1)'
        }
    },
    tooltip: {
        backgroundColor: 'rgb(102,102,102)',
        color: 'white',
        marginTop: '0 !important'
    },
    disabled: {
        opacity: 0.4,
        cursor: 'default'
    }
});
const TipButton = ({ className , receiver , addresses =src/* EMPTY_LIST */.rP , children , tooltipProps , ...rest })=>{
    const { classes  } = useStyles();
    const t = (0,locales/* useI18N */.M)();
    const platform = social_network/* activatedSocialNetworkUI.configuration.nextIDConfig */.LM.configuration.nextIDConfig?.platform;
    const { value: receiverPersona , loading: loadingPersona  } = (0,useAsyncRetry/* default */.Z)(async ()=>{
        if (!receiver) return;
        return service/* default.Identity.queryPersonaByProfile */.ZP.Identity.queryPersonaByProfile(receiver);
    }, [
        receiver
    ]);
    const { value: isAccountVerified , loading: loadingVerifyInfo , retry: retryLoadVerifyInfo ,  } = (0,useAsyncRetry/* default */.Z)(()=>{
        if (!receiverPersona?.publicHexKey || !receiver?.userId) return Promise.resolve(false);
        return web3_providers_src/* NextIDProof.queryIsBound */.q7.queryIsBound(receiverPersona.publicHexKey, platform, receiver.userId, true);
    }, [
        receiverPersona?.publicHexKey,
        platform,
        receiver?.userId
    ]);
    const [walletsState, queryBindings] = (0,useAsyncFn/* default */.Z)(async ()=>{
        if (!receiver) return src/* EMPTY_LIST */.rP;
        const persona = await service/* default.Identity.queryPersonaByProfile */.ZP.Identity.queryPersonaByProfile(receiver);
        if (!persona?.publicHexKey) return src/* EMPTY_LIST */.rP;
        const bindings = await web3_providers_src/* NextIDProof.queryExistedBindingByPersona */.q7.queryExistedBindingByPersona(persona.publicHexKey, true);
        if (!bindings) return src/* EMPTY_LIST */.rP;
        const wallets = bindings.proofs.filter((p)=>p.platform === src/* NextIDPlatform.Ethereum */.Vd.Ethereum
        ).map((p)=>p.identity
        );
        return wallets;
    }, [
        receiver
    ]);
    (0,useAsync/* default */.Z)(queryBindings, [
        queryBindings
    ]);
    (0,react.useEffect)(()=>{
        return shared/* MaskMessages.events.ownProofChanged.on */.ql.events.ownProofChanged.on(()=>{
            retryLoadVerifyInfo();
            queryBindings();
        });
    }, []);
    const allAddresses = (0,react.useMemo)(()=>{
        return (0,uniq/* default */.Z)([
            ...walletsState.value || [],
            ...addresses
        ]);
    }, [
        walletsState.value,
        addresses
    ]);
    const disabled = loadingPersona || loadingVerifyInfo || !isAccountVerified || allAddresses.length === 0;
    const sendTip = (0,react.useCallback)(async (evt)=>{
        evt.stopPropagation();
        evt.preventDefault();
        if (disabled) return;
        if (walletsState.loading || !walletsState.value) {
            await queryBindings();
        }
        if (!allAddresses.length || !receiver?.userId) return;
        messages/* PluginNextIdMessages.tipTask.sendToLocal */.$.tipTask.sendToLocal({
            recipientSnsId: receiver.userId,
            addresses: allAddresses
        });
    }, [
        disabled,
        walletsState,
        allAddresses,
        receiver?.userId,
        queryBindings
    ]);
    const dom = /*#__PURE__*/ (0,jsx_runtime.jsxs)("div", {
        className: classnames_default()(className, classes.tipButton, disabled ? classes.disabled : null),
        ...rest,
        role: "button",
        onClick: sendTip,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)(TipCoin, {
                viewBox: "0 0 24 24"
            }),
            children
        ]
    });
    if (disabled) return /*#__PURE__*/ (0,jsx_runtime.jsx)(entry/* ShadowRootTooltip */.p_, {
        classes: {
            tooltip: classes.tooltip
        },
        title: t.tip_wallets_missed(),
        placement: "bottom",
        arrow: false,
        ...tooltipProps,
        children: dom
    });
    return dom;
};
const PostTipButton = ({ className , ...rest })=>{
    const identifier = entry_content_script/* usePostInfoDetails.author */.H9.author();
    const { classes  } = useStyles();
    return /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
        className: classes.buttonWrapper,
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(TipButton, {
            className: classnames_default()(classes.postTipButton, className),
            ...rest,
            receiver: identifier
        })
    });
};


/***/ }),

/***/ 13573:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "M": () => (/* reexport */ useI18N)
});

// UNUSED EXPORTS: Translate

// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.0.0/node_modules/react/index.js
var react = __webpack_require__(86248);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-i18next@11.16.5_react-dom@18.0.0+react@18.0.0/node_modules/react-i18next/dist/es/Trans.js
var Trans = __webpack_require__(31008);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-i18next@11.16.5_react-dom@18.0.0+react@18.0.0/node_modules/react-i18next/dist/es/useTranslation.js
var useTranslation = __webpack_require__(43966);
;// CONCATENATED MODULE: ./src/plugins/NextID/locales/i18n_generated.js
/* eslint-disable */


const bind = (i18nKey) => (props) => (0,react.createElement)(Trans/* Trans */.c, { i18nKey, ns: "com.mask.next_id", ...props })
function useI18N() {
    const { t } = (0,useTranslation/* useTranslation */.$)("com.mask.next_id")
    return (0,react.useMemo)(
        function proxyBasedHooks() {
    return new Proxy({ __proto__: null }, {
        get(target, key) {
            if (target[key])
                return target[key];
            return (target[key] = t.bind(null, key));
        },
    });
},
        [t],
    )
}
const Translate = function proxyBasedTrans() {
    return new Proxy({ __proto__: null }, {
        get(target, key) {
            if (target[key])
                return target[key];
            return (target[key] = bind(key));
        },
    });
}()
;// CONCATENATED MODULE: ./src/plugins/NextID/locales/index.ts
// This file is auto generated. DO NOT EDIT
// Run `npx gulp sync-languages` to regenerate.
// Default fallback language in a family of languages are chosen by the alphabet order
// To overwrite this, please overwrite packages/scripts/src/locale-kit-next/index.ts



/***/ }),

/***/ 81441:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "$": () => (/* binding */ PluginNextIdMessages)
/* harmony export */ });
/* harmony import */ var _masknet_plugin_infra__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79936);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6736);


if (false) {}
const PluginNextIdMessages = (0,_masknet_plugin_infra__WEBPACK_IMPORTED_MODULE_0__/* .createPluginMessage */ .I4)(_constants__WEBPACK_IMPORTED_MODULE_1__/* .PLUGIN_ID */ .Uu);


/***/ }),

/***/ 61009:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "n": () => (/* binding */ twitterEncoding)
/* harmony export */ });
/* harmony import */ var _masknet_encryption__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52222);
/* harmony import */ var lodash_unified__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(32139);


const ICAO9303Checksum = {
    encode: (input)=>{
        return `${input}${(input.toUpperCase().replace(/[+/=]/g, '0').split('').map((d, i)=>Number.parseInt(d, 36) * [
                7,
                3,
                1
            ][i % 3]
        ).reduce((l, r)=>l + r
        , 0) % 19).toString(19).toUpperCase()}`;
    },
    decode: (input)=>{
        const content = input.slice(0, input.length - 1);
        const checksum = input.slice(input.length - 1);
        const r = ICAO9303Checksum.encode(content);
        if (checksum === r.slice(r.length - 1)) {
            return content;
        } else {
            return null;
        }
    }
};
const twitterEncoding = {
    /**
     * @link https://github.com/DimensionDev/Maskbook/issues/191
     */ publicKeyEncoder: (text)=>`\u{1F3AD}${ICAO9303Checksum.encode(text)}\u{1F3AD}`
    ,
    publicKeyDecoder: (text)=>{
        const r = regexMatchAll(text, /([\d+/=A-Za-z]{20,60})/);
        if ((0,lodash_unified__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(r)) {
            return [];
        }
        for (const v of r){
            const retV = ICAO9303Checksum.decode(v);
            if ((0,lodash_unified__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(retV)) {
                continue;
            }
            return [
                retV
            ];
        }
        return [];
    },
    payloadEncoder: _masknet_encryption__WEBPACK_IMPORTED_MODULE_0__/* .__TwitterEncoder */ .EK,
    payloadDecoder: (text)=>{
        return (0,_masknet_encryption__WEBPACK_IMPORTED_MODULE_0__/* .TwitterDecoder */ .Ym)(text).map((x)=>[
                x
            ]
        ).unwrapOr([]);
    }
};
function regexMatchAll(str, regexp, index = 1) {
    const gPos = regexp.flags.indexOf('g');
    const withoutG = gPos >= 0 ? `${regexp.flags.slice(0, gPos)}${regexp.flags.slice(gPos + 1)}` : regexp.flags;
    const o = new RegExp(regexp.source, withoutG);
    const g = new RegExp(regexp.source, `${withoutG}g`);
    const r = str.match(g);
    if ((0,lodash_unified__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(r)) {
        return null;
    }
    const sto = [];
    for (const v of r){
        const retV = v.match(o);
        if ((0,lodash_unified__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)(retV)) {
            continue;
        }
        sto.push(retV[index]);
    }
    if (sto.length === 0) {
        return null;
    }
    return sto;
}


/***/ }),

/***/ 29055:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "p": () => (/* binding */ twitterShared)
/* harmony export */ });
/* harmony import */ var _masknet_shared_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(78144);
/* harmony import */ var _masknet_shared_base_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(53242);
/* harmony import */ var urlcat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(19802);
/* harmony import */ var urlcat__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(urlcat__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _social_network_utils_create_post_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(94627);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6955);
/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(37732);
/* harmony import */ var _encoding__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(61009);
/* harmony import */ var _utils_user__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(25954);








const getPostURL = (post)=>{
    if (!(post.identifier instanceof _masknet_shared_base__WEBPACK_IMPORTED_MODULE_0__/* .ProfileIdentifier */ .WO)) return null;
    return new URL(`https://twitter.com/${post.identifier.userId}/status/${post.postId}`);
};
const twitterShared = {
    ..._base__WEBPACK_IMPORTED_MODULE_5__/* .twitterBase */ .oQ,
    utils: {
        getHomePage: ()=>'https://twitter.com'
        ,
        getProfilePage: (userId)=>`https://twitter.com/${userId}`
        ,
        isValidUsername: _utils_user__WEBPACK_IMPORTED_MODULE_7__/* .usernameValidator */ .S_,
        textPayloadPostProcessor: {
            encoder (text) {
                return _encoding__WEBPACK_IMPORTED_MODULE_6__/* .twitterEncoding.payloadEncoder */ .n.payloadEncoder(text);
            },
            decoder (text) {
                return _encoding__WEBPACK_IMPORTED_MODULE_6__/* .twitterEncoding.payloadDecoder */ .n.payloadDecoder(text);
            }
        },
        getPostURL,
        share (text) {
            const url = this.getShareLinkURL(text);
            const width = 700;
            const height = 520;
            const openedWindow = (0,_masknet_shared_base_ui__WEBPACK_IMPORTED_MODULE_1__/* .openWindow */ .xw)(url, 'share', {
                width,
                height,
                screenX: window.screenX + (window.innerWidth - width) / 2,
                screenY: window.screenY + (window.innerHeight - height) / 2,
                opener: true,
                referrer: true,
                behaviors: {
                    toolbar: true,
                    status: true,
                    resizable: true,
                    scrollbars: true
                }
            });
            if (openedWindow === null) {
                location.assign(url);
            }
        },
        getShareLinkURL (message) {
            const url = urlcat__WEBPACK_IMPORTED_MODULE_2___default()('https://twitter.com/intent/tweet', {
                text: message
            });
            return new URL(url);
        },
        createPostContext: (0,_social_network_utils_create_post_context__WEBPACK_IMPORTED_MODULE_3__/* .createSNSAdaptorSpecializedPostContext */ .k)({
            payloadParser: _utils__WEBPACK_IMPORTED_MODULE_4__/* .deconstructPayload */ .Qn,
            payloadDecoder: _encoding__WEBPACK_IMPORTED_MODULE_6__/* .twitterEncoding.payloadDecoder */ .n.payloadDecoder,
            getURLFromPostIdentifier: getPostURL
        })
    }
};


/***/ }),

/***/ 5756:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ ui_provider)
});

// EXTERNAL MODULE: ./src/social-network/index.ts
var social_network = __webpack_require__(3747);
// EXTERNAL MODULE: ./src/social-network-adaptor/twitter.com/base.ts
var base = __webpack_require__(37732);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/collecting/getSearchedKeyword.ts
/**
 * Listing all possible pathnames start from /search that the search box will keep existing on twitter.
 * That means the keyword will not be cleaned and related components keep injecting.
 * Otherwise, if a pathname not in this list the keyword will be cleaned and remove relative components from DOM.
 */ const SAFE_PATHNAMES_ON_TWITTER = [
    '/compose/tweet',
    '/search-advanced',
    '/settings/trends',
    '/settings/search',
    '/i/display',
    '/account/switch',
    '/i/keyboard_shortcuts', 
];
function getSearchedKeywordAtTwitter() {
    const params = new URLSearchParams(location.search);
    const hashTagMatched = location.pathname.match(/\/hashtag\/([\dA-Za-z]+)/);
    const isTabAvailable = [
        'top'
    ].includes(params.get('f') ?? '');
    if (location.pathname === '/search' && (!params.get('f') || isTabAvailable)) return decodeURIComponent(params.get('q') ?? '');
    else if (hashTagMatched) return '#' + hashTagMatched[1];
    else if (!SAFE_PATHNAMES_ON_TWITTER.includes(location.pathname)) return '';
    return '';
};

// EXTERNAL MODULE: ./src/social-network-adaptor/twitter.com/shared.ts
var shared = __webpack_require__(29055);
// EXTERNAL MODULE: ./src/social-network/defaults/state/InitFriends.ts
var InitFriends = __webpack_require__(58903);
// EXTERNAL MODULE: ./src/social-network/defaults/state/InitProfiles.ts
var InitProfiles = __webpack_require__(61199);
// EXTERNAL MODULE: ../shared-base/src/index.ts + 1 modules
var src = __webpack_require__(78144);
// EXTERNAL MODULE: ../typed-message/base/index.ts + 2 modules
var typed_message_base = __webpack_require__(81148);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/automation/openComposeBox.ts


function openComposeBoxTwitter(content, options) {
    src/* CrossIsolationMessages.events.requestComposition.sendToLocal */.WF.events.requestComposition.sendToLocal({
        reason: 'timeline',
        open: true,
        content: typeof content === 'string' ? (0,typed_message_base/* makeTypedMessageText */.P)(content) : content,
        options
    });
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/@dimensiondev+kit@0.0.0-20220228054820-f2378be/node_modules/@dimensiondev/kit/esm/index.js + 1 modules
var esm = __webpack_require__(28807);
// EXTERNAL MODULE: ../injected-script/sdk/index.ts
var sdk = __webpack_require__(39230);
// EXTERNAL MODULE: ./src/social-network-adaptor/twitter.com/utils/selector.ts
var selector = __webpack_require__(43399);
// EXTERNAL MODULE: ./src/social-network-adaptor/twitter.com/utils/postBox.ts
var postBox = __webpack_require__(74372);
// EXTERNAL MODULE: ./src/utils/dom.ts
var dom = __webpack_require__(99665);
// EXTERNAL MODULE: ./src/social-network-adaptor/twitter.com/utils/isMobile.ts
var isMobile = __webpack_require__(97216);
// EXTERNAL MODULE: ./src/utils/messages.ts
var messages = __webpack_require__(32196);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/automation/pasteTextToComposition.ts







/**
 * Wait for up to 5000 ms
 * If not complete, let user do it.
 */ const pasteTextToCompositionTwitter = (text, opt)=>{
    const interval = 500;
    const timeout = 5000;
    const worker = async function(abort) {
        const checkSignal = ()=>{
            if (abort.aborted) throw new Error('Aborted');
        };
        if (!(0,postBox/* isCompose */.iv)() && !(0,postBox/* hasEditor */.Wu)() && opt?.reason !== 'reply') {
            // open tweet window
            await (0,dom/* untilElementAvailable */.f)((0,selector/* newPostButtonSelector */.nS)());
            (0,selector/* newPostButtonSelector */.nS)().evaluate().click();
            checkSignal();
        }
        // get focus
        const i = (0,selector/* postEditorDraftContentSelector */.Y5)();
        await (0,dom/* untilElementAvailable */.f)(i);
        checkSignal();
        while(!(0,postBox/* hasFocus */.uf)(i)){
            i.evaluate().focus();
            checkSignal();
            await (0,esm/* delay */.gw)(interval);
        }
        // paste
        isMobile/* isMobileTwitter */.b ? (0,sdk/* inputText */.iJ)(text) : (0,sdk/* pasteText */.M1)(text);
        await (0,esm/* delay */.gw)(interval);
        if (!(0,postBox/* getEditorContent */.kt)().replace(/\n/g, '').includes(text.replace(/\n/g, ''))) {
            fail(new Error('Unable to paste text automatically'));
        }
    };
    const fail = (e)=>{
        if (opt?.recover) messages/* MaskMessages.events.autoPasteFailed.sendToLocal */.q.events.autoPasteFailed.sendToLocal({
            text
        });
        throw e;
    };
    worker((0,esm/* abortSignalTimeout */.VJ)(timeout)).then(undefined, (error)=>fail(error)
    );
};

;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/automation/gotoNewsFeedPage.ts
function gotoNewsFeedPageTwitter() {
    if (location.pathname.includes('/home')) location.reload();
    else location.assign('/home');
}

;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/automation/gotoProfilePage.ts
function gotoProfilePageTwitter(profile) {
    const path = `/${profile.userId}`;
    document.querySelector(`[href="${path}"]`)?.click();
    setTimeout(()=>{
        // The classic way
        if (!location.pathname.startsWith(path)) location.assign(path);
    }, 400);
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/@dimensiondev+holoflows-kit@0.9.0-20210902104757-7c3d0d0_webextension-polyfill@0.9.0/node_modules/@dimensiondev/holoflows-kit/umd/index.cjs
var umd = __webpack_require__(85646);
// EXTERNAL MODULE: ../web3-providers/src/index.ts
var web3_providers_src = __webpack_require__(92820);
// EXTERNAL MODULE: ./src/extension/service.ts
var service = __webpack_require__(5027);
// EXTERNAL MODULE: ./src/social-network-adaptor/twitter.com/utils/user.ts
var user = __webpack_require__(25954);
// EXTERNAL MODULE: ./shared/native-rpc/index.ts + 1 modules
var native_rpc = __webpack_require__(30246);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/collecting/identity.ts










function resolveLastRecognizedIdentityInner(ref, cancel) {
    const assign = ()=>{
        const avatar = (0,selector/* searchSelfAvatarSelector */.Kq)().evaluate()?.getAttribute('src') ?? '';
        const handle = (0,selector/* searchSelfHandleSelector */.s8)().evaluate()?.textContent?.trim()?.replace(/^@/, '');
        const nickname = (0,selector/* searchSelfNicknameSelector */.Sn)().evaluate()?.textContent?.trim() ?? '';
        if (handle) {
            ref.value = {
                avatar,
                nickname,
                identifier: new src/* ProfileIdentifier */.WO(base/* twitterBase.networkIdentifier */.oQ.networkIdentifier, handle)
            };
        }
    };
    const watcher = new umd.MutationObserverWatcher((0,selector/* searchSelfHandleSelector */.s8)()).addListener('onAdd', ()=>assign()
    ).addListener('onChange', ()=>assign()
    ).startWatch({
        childList: true,
        subtree: true
    });
    cancel.addEventListener('abort', ()=>watcher.stopWatch()
    );
}
function resolveLastRecognizedIdentityMobileInner(ref, cancel) {
    const onLocationChange = async ()=>{
        const settings = await web3_providers_src/* Twitter.getSettings */.tL.getSettings();
        if (settings?.screen_name && (!ref.value.identifier || ref.value.identifier.isUnknown)) {
            ref.value = {
                ...ref.value,
                identifier: new src/* ProfileIdentifier */.WO(base/* twitterBase.networkIdentifier */.oQ.networkIdentifier, settings.screen_name)
            };
        }
    };
    onLocationChange();
    window.addEventListener('locationchange', onLocationChange);
    cancel.addEventListener('abort', ()=>window.removeEventListener('locationchange', onLocationChange)
    );
}
function resolveCurrentVisitingIdentityInner(ref, cancel) {
    const avatarSelector = (0,selector/* searchAvatarSelector */.Ls)();
    const avatarMetaSelector = (0,selector/* searchAvatarMetaSelector */.pz)();
    const assign = async ()=>{
        await (0,esm/* delay */.gw)(500);
        const bio = (0,user/* getBio */.IF)();
        const homepage = (0,user/* getPersonalHomepage */.o1)();
        const nickname = (0,user/* getNickname */.y)();
        const handle = (0,user/* getTwitterId */.WM)();
        const avatar = (0,user/* getAvatar */.wX)();
        ref.value = {
            identifier: new src/* ProfileIdentifier */.WO(base/* twitterBase.networkIdentifier */.oQ.networkIdentifier, handle),
            nickname,
            avatar,
            bio
        };
        service/* default.Helper.resolveTCOLink */.ZP.Helper.resolveTCOLink(homepage).then((link)=>{
            if (cancel?.aborted || !link) return;
            ref.value = {
                ...ref.value,
                homepage: link
            };
        });
    };
    const createWatcher = (selector)=>{
        const watcher = new umd.MutationObserverWatcher(selector).addListener('onAdd', ()=>assign()
        ).addListener('onChange', ()=>assign()
        ).startWatch({
            childList: true,
            subtree: true,
            attributes: true,
            attributeFilter: [
                'src',
                'content'
            ]
        });
        window.addEventListener('locationchange', assign);
        cancel.addEventListener('abort', ()=>{
            window.removeEventListener('locationchange', assign);
            watcher.stopWatch();
        });
    };
    assign();
    createWatcher(avatarSelector);
    createWatcher(avatarMetaSelector);
}
const IdentityProviderTwitter = {
    hasDeprecatedPlaceholderName: false,
    recognized: social_network/* creator.EmptyIdentityResolveProviderState */.Du.EmptyIdentityResolveProviderState(),
    start (cancel) {
        resolveLastRecognizedIdentityInner(this.recognized, cancel);
        if (native_rpc/* hasNativeAPI */._) resolveLastRecognizedIdentityMobileInner(this.recognized, cancel);
    }
};
const CurrentVisitingIdentityProviderTwitter = {
    hasDeprecatedPlaceholderName: false,
    recognized: social_network/* creator.EmptyIdentityResolveProviderState */.Du.EmptyIdentityResolveProviderState(),
    start (cancel) {
        resolveCurrentVisitingIdentityInner(this.recognized, cancel);
    }
};

// EXTERNAL MODULE: ./src/utils/utils.ts
var utils = __webpack_require__(27028);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/defaultTo.js
var defaultTo = __webpack_require__(51670);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/flattenDeep.js
var flattenDeep = __webpack_require__(65648);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/utils/url.ts
const twitterUrl = {
    hostIdentifier: 'twitter.com',
    hostLeadingUrl: 'https://twitter.com',
    hostLeadingUrlMobile: 'https://mobile.twitter.com'
};
const hostLeadingUrlAutoTwitter = (isMobile)=>isMobile ? twitterUrl.hostLeadingUrlMobile : twitterUrl.hostLeadingUrl
;
// more about twitter photo url formating: https://developer.twitter.com/en/docs/tweets/data-dictionary/overview/entities-object#photo_format
const canonifyImgUrl = (url)=>{
    const parsed = new URL(url);
    if (parsed.hostname !== 'pbs.twimg.com') {
        return url;
    }
    const { searchParams  } = parsed;
    searchParams.set('name', 'orig');
    // we can't understand original image format when given url labeled as webp
    if (searchParams.get('format') === 'webp') {
        searchParams.set('format', 'png');
        const pngURL = parsed.href;
        searchParams.set('format', 'jpg');
        const jpgURL = parsed.href;
        return [
            pngURL,
            jpgURL
        ];
    }
    return parsed.href;
};

// EXTERNAL MODULE: ./src/utils/index.ts + 7 modules
var src_utils = __webpack_require__(6955);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/utils/fetch.ts





const parseId = (t)=>{
    return (0,utils/* regexMatch */.ZB)(t, /status\/(\d+)/, 1);
};
const postIdParser = (node)=>{
    const idNode = (0,defaultTo/* default */.Z)(node.children[1]?.querySelector('a[href*="status"]'), (0,defaultTo/* default */.Z)(node.parentElement.querySelector('a[href*="status"]'), node.closest('article > div')?.querySelector('a[href*="status"]')));
    const isRetweet = !!node.querySelector('[data-testid=socialContext]');
    const pid = idNode ? parseId(idNode.href) : parseId(location.href);
    // You can't retweet a tweet or a retweet, but only cancel retweeting
    return isRetweet ? `retweet:${pid}` : pid;
};
const postNameParser = (node)=>{
    const tweetElement = node.querySelector('[data-testid="tweet"]') ?? node;
    const name = (0,src_utils/* collectNodeText */.aW)(tweetElement.querySelector('a:not([target]) > div > div[dir="auto"] > span'));
    const handle = (0,src_utils/* collectNodeText */.aW)(tweetElement.querySelector('a[tabindex="-1"] span'));
    if (name && handle) {
        return {
            name,
            handle: handle.slice(1)
        };
    }
    const quotedTweetName = (0,src_utils/* collectNodeText */.aW)(tweetElement.querySelector('div[role="link"] div[dir="auto"] > span'));
    const quotedTweetHandle = (0,src_utils/* collectNodeText */.aW)(tweetElement.querySelector('div[role="link"] div[dir="ltr"] > span'));
    if (quotedTweetName && quotedTweetHandle) {
        return {
            name: quotedTweetName,
            handle: quotedTweetHandle.slice(1)
        };
    }
    return {
        name: '',
        handle: ''
    };
};
const postAvatarParser = (node)=>{
    const tweetElement = node.querySelector('[data-testid="tweet"]') ?? node;
    const avatarElement = tweetElement.children[0].querySelector('img[src*="twimg.com"]');
    return avatarElement ? avatarElement.src : undefined;
};
const postContentMessageParser = (node1)=>{
    function resolve(content) {
        if (content.startsWith('@')) return 'user';
        if (content.startsWith('#')) return 'hash';
        if (content.startsWith('$')) return 'cash';
        return 'normal';
    }
    function make(node) {
        if (node.nodeType === Node.TEXT_NODE) {
            if (!node.nodeValue) return (0,typed_message_base/* makeTypedMessageEmpty */.WM)();
            return (0,typed_message_base/* makeTypedMessageText */.P)(node.nodeValue);
        } else if (node instanceof HTMLAnchorElement) {
            const anchor = node;
            const href = anchor.getAttribute('title') ?? anchor.getAttribute('href');
            const content = anchor.textContent;
            if (!content) return (0,typed_message_base/* makeTypedMessageEmpty */.WM)();
            return (0,typed_message_base/* makeTypedMessageAnchor */.Jv)(resolve(content), href ?? '', content);
        } else if (node instanceof HTMLImageElement) {
            const image = node;
            const src = image.getAttribute('src');
            const matched = src?.match(/emoji\/v2\/svg\/([\w\-]+)\.svg/);
            if (matched?.[1]) {
                const codePoints = matched[1].split('-').map((x)=>Number.parseInt(`0x${x}`, 16)
                );
                return (0,typed_message_base/* makeTypedMessageText */.P)((0,src_utils/* collectTwitterEmoji */._r)(codePoints));
            }
            return (0,typed_message_base/* makeTypedMessageEmpty */.WM)();
        } else if (node.childNodes.length) {
            const flattened = (0,flattenDeep/* default */.Z)(Array.from(node.childNodes).map(make));
            // conjunct text messages under same node
            if (flattened.every(typed_message_base/* isTypedMessageText */.Rz)) return (0,typed_message_base/* makeTypedMessageText */.P)(flattened.map((x)=>x.content
            ).join(''));
            return flattened;
        } else return (0,typed_message_base/* makeTypedMessageEmpty */.WM)();
    }
    const lang = node1.parentElement.querySelector('[lang]');
    return lang ? Array.from(lang.childNodes).flatMap(make) : [];
};
const postImagesParser = async (node2)=>{
    const isQuotedTweet = !!node2.closest('div[role="link"]');
    const imgNodes = node2.querySelectorAll('img[src*="twimg.com/media"]');
    if (!imgNodes.length) return [];
    const imgUrls = Array.from(imgNodes).filter((node)=>isQuotedTweet || !node.closest('div[role="link"]')
    ).flatMap((node)=>canonifyImgUrl(node.getAttribute('src') ?? '')
    ).filter(Boolean);
    if (!imgUrls.length) return [];
    return imgUrls;
};
const postParser = (node)=>{
    return {
        ...postNameParser(node),
        avatar: postAvatarParser(node),
        // FIXME:
        // we get wrong pid for nested tweet
        pid: postIdParser(node),
        messages: postContentMessageParser(node).filter((x)=>!(0,typed_message_base/* isTypedMessageEmpty */.YN)(x)
        )
    };
};

// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/memoize.js
var memoize = __webpack_require__(77184);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/noop.js
var noop = __webpack_require__(21122);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.0.0/node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(71999);
// EXTERNAL MODULE: ./src/resources/MaskIcon.tsx
var MaskIcon = __webpack_require__(66559);
// EXTERNAL MODULE: ./src/utils/shadow-root/renderInShadowRoot.tsx
var renderInShadowRoot = __webpack_require__(55423);
// EXTERNAL MODULE: ./shared/index.ts
var shared_0 = __webpack_require__(62481);
// EXTERNAL MODULE: ./src/utils/watcher.ts
var utils_watcher = __webpack_require__(69900);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/MaskIcon.tsx










function Icon(props) {
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(MaskIcon/* MaskIcon */.ec, {
        size: props.size,
        style: {
            verticalAlign: 'text-bottom',
            marginLeft: 6
        }
    });
}
function _(main, size, signal) {
    // TODO: for unknown reason the MutationObserverWatcher doesn't work well
    // To reproduce, open a profile and switch to another profile.
    (0,utils_watcher/* startWatch */.f)(new umd.MutationObserverWatcher(main()).useForeach((ele, _, meta)=>{
        let remover = ()=>{};
        const remove = ()=>remover()
        ;
        const check = ()=>{
            ifUsingMask(new src/* ProfileIdentifier */.WO('twitter.com', (0,selector/* bioPageUserIDSelector */.QK)(main).evaluate() || '')).then(()=>{
                const root = (0,renderInShadowRoot/* createReactRootShadowed */.o)(meta.afterShadow, {
                    signal
                });
                root.render(/*#__PURE__*/ (0,jsx_runtime.jsx)(Icon, {
                    size: size
                }));
                remover = root.destroy;
            }, remove);
        };
        check();
        return {
            onNodeMutation: check,
            onTargetChanged: check,
            onRemove: remove
        };
    }), signal);
}
function injectMaskUserBadgeAtTwitter(signal) {
    // profile
    _(selector/* bioPageUserNickNameSelector */.uy, 24, signal);
    // floating bio
    _(selector/* floatingBioCardSelector */.YG, 20, signal);
}
function injectMaskIconToPostTwitter(post, signal) {
    const ls = new umd.LiveSelector([
        post.rootElement
    ]).map((x)=>x.current.parentElement?.parentElement?.previousElementSibling?.querySelector('a[role="link"] > div > div:first-child')
    ).enableSingleMode();
    ifUsingMask(post.author.getCurrentValue()).then(add, remove);
    post.author.subscribe(()=>ifUsingMask(post.author.getCurrentValue()).then(add, remove)
    );
    let remover = ()=>{};
    function add() {
        if (signal?.aborted) return;
        const node = ls.evaluate();
        if (!node) return;
        const proxy = (0,umd.DOMProxy)({
            afterShadowRootInit: {
                mode: shared_0/* Flags.using_ShadowDOM_attach_mode */.vU.using_ShadowDOM_attach_mode
            }
        });
        proxy.realCurrent = node;
        const root = (0,renderInShadowRoot/* createReactRootShadowed */.o)(proxy.afterShadow, {
            signal
        });
        root.render(/*#__PURE__*/ (0,jsx_runtime.jsx)(Icon, {
            size: 24
        }));
        remover = root.destroy;
    }
    function remove() {
        remover();
    }
}
const ifUsingMask = (0,esm/* memoizePromise */.J3)((pid)=>service/* default.Identity.queryProfile */.ZP.Identity.queryProfile(pid).then((x)=>x.linkedPersona ? Promise.resolve() : Promise.reject()
    )
, (pid)=>pid.toText()
);

// EXTERNAL MODULE: ./src/social-network/utils/create-post-context.ts + 1 modules
var create_post_context = __webpack_require__(94627);
// EXTERNAL MODULE: ./src/social-network-adaptor/utils.ts
var social_network_adaptor_utils = __webpack_require__(33060);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/collecting/post.ts















function getPostActionsNode(postNode) {
    if (!postNode) return null;
    return postNode.closest('[data-testid="tweet"]')?.querySelector('[role="group"] > div:last-child');
}
const getParentTweetNode = (node)=>{
    return node.closest('[data-testid="tweet"]');
};
function isQuotedTweet(tweetNode) {
    return tweetNode?.getAttribute('role') === 'link';
}
function registerPostCollectorInner(postStore, cancel) {
    const getTweetNode = (node)=>{
        const root = node.closest([
            'article > div',
            'div[role="link"]'
        ].join());
        if (!root) return null;
        const isCardNode = node.matches('[data-testid="card.wrapper"]');
        const hasTextNode = !!root.querySelector([
            '[data-testid="tweet"] div[lang]',
            '[data-testid="tweet"] + div div[lang]'
        ].join());
        // if a text node already exists, it's not going to decrypt the card node
        if (isCardNode && hasTextNode) return null;
        return root;
    };
    const updateProfileInfo = (0,memoize/* default */.Z)((info)=>{
        const currentProfile = (0,social_network_adaptor_utils/* getCurrentIdentifier */.T)();
        const profileIdentifier = info.author.getCurrentValue();
        service/* default.Identity.updateProfileInfo */.ZP.Identity.updateProfileInfo(profileIdentifier, {
            nickname: info.nickname.getCurrentValue(),
            avatarURL: info.avatarURL.getCurrentValue()?.toString()
        });
        if (currentProfile?.linkedPersona) {
            service/* default.Identity.createNewRelation */.ZP.Identity.createNewRelation(profileIdentifier, currentProfile.linkedPersona.identifier);
        }
    }, (info)=>info.author.getCurrentValue()?.toText()
    );
    const watcher = new umd.IntervalWatcher((0,selector/* postsContentSelector */.XD)()).useForeach((node, _, proxy)=>{
        const tweetNode = getTweetNode(node);
        if (!tweetNode) return;
        const refs = (0,create_post_context/* createRefsForCreatePostContext */.T)();
        let actionsElementProxy = undefined;
        const actionsInjectPoint = getPostActionsNode(proxy.current);
        let unwatchPostNodeChange = noop/* default */.Z;
        if (actionsInjectPoint && !isQuotedTweet(tweetNode)) {
            actionsElementProxy = (0,umd.DOMProxy)({});
            actionsElementProxy.realCurrent = actionsInjectPoint;
            const handleChanged = (e)=>{
                actionsElementProxy.realCurrent = getPostActionsNode(e.new) || null;
            };
            proxy.on('currentChanged', handleChanged);
            unwatchPostNodeChange = ()=>{
                proxy.off('currentChanged', handleChanged);
            };
        }
        const info = shared/* twitterShared.utils.createPostContext */.p.utils.createPostContext({
            comments: undefined,
            rootElement: proxy,
            actionsElement: actionsElementProxy,
            suggestedInjectionPoint: tweetNode,
            ...refs.subscriptions
        });
        function run() {
            collectPostInfo(tweetNode, refs, cancel);
            collectLinks(tweetNode, refs, cancel);
        }
        run();
        cancel.addEventListener('abort', info.containingMaskPayload.subscribe(()=>{
            const payload = info.containingMaskPayload.getCurrentValue();
            if (payload.err && refs.postMetadataImages.size === 0) return;
            updateProfileInfo(info);
        }));
        injectMaskIconToPostTwitter(info, cancel);
        postStore.set(proxy, info);
        return {
            onTargetChanged: run,
            onRemove: ()=>{
                postStore.delete(proxy);
                unwatchPostNodeChange();
            },
            onNodeMutation: run
        };
    }).assignKeys((node)=>{
        const tweetNode = getTweetNode(node);
        const parentTweetNode = isQuotedTweet(tweetNode) ? getParentTweetNode(tweetNode) : null;
        if (!tweetNode) return node.innerText;
        const parentTweetId = parentTweetNode ? postIdParser(parentTweetNode) : '';
        const tweetId = postIdParser(tweetNode);
        return `${parentTweetId}/${tweetId}`;
    });
    watcher.startWatch(250);
    cancel.addEventListener('abort', ()=>watcher.stopWatch()
    );
}
const PostProviderTwitter = {
    posts: social_network/* creator.EmptyPostProviderState */.Du.EmptyPostProviderState(),
    start (cancel) {
        registerPostCollectorInner(this.posts, cancel);
    }
};
function collectVerificationPost(keyword) {
    const userId = IdentityProviderTwitter.recognized.value.identifier || social_network/* globalUIState.profiles.value.0.identifier */.EJ.profiles.value[0].identifier;
    const postNodes = (0,selector/* timelinePostContentSelector */.yR)().evaluate();
    for (const postNode of postNodes){
        const postId = postIdParser(postNode);
        const postContent = postContentMessageParser(postNode);
        const content = postContent.map((x)=>{
            if ((0,typed_message_base/* isTypedMessageText */.Rz)(x)) return x.content ?? '';
            if ((0,typed_message_base/* isTypedMessageAnchor */.bj)(x) && x.category === 'user') return x.content ?? '';
            if ((0,typed_message_base/* isTypedMessageAnchor */.bj)(x) && x.category === 'normal') return (x.content ?? '').replace(/http(.*)\/\//g, '');
            return '';
        }).join('');
        const isVerified = postId && content.toLowerCase().replace(/\r\n|\n|\r/gm, '') === keyword.toLowerCase().replace(/\r\n|\n|\r/gm, '');
        if (isVerified && userId) {
            return new src/* PostIdentifier */._P(userId, postId);
        }
    }
    return null;
}
function collectPostInfo(tweetNode, info, cancel) {
    if (!tweetNode) return;
    if (cancel?.aborted) return;
    const { pid , messages , handle , name , avatar  } = postParser(tweetNode);
    if (!pid) return;
    const postBy = handle ? new src/* ProfileIdentifier */.WO(base/* twitterBase.networkIdentifier */.oQ.networkIdentifier, handle) : src/* ProfileIdentifier.unknown */.WO.unknown;
    info.postID.value = pid;
    if (!info.postBy.value.equals(postBy)) info.postBy.value = postBy;
    info.nickname.value = name;
    info.avatarURL.value = avatar || null;
    // decode steganographic image
    // don't add await on this
    const images = (0,dom/* untilElementAvailable */.f)((0,selector/* postsImageSelector */.rk)(tweetNode), 10000).then(()=>postImagesParser(tweetNode)
    ).then((urls)=>{
        for (const url of urls)info.postMetadataImages.add(url);
        if (urls.length) return (0,typed_message_base/* makeTypedMessageTupleFromList */.n_)(...urls.map((x)=>(0,typed_message_base/* makeTypedMessageImage */.as)(x)
        ));
        return (0,typed_message_base/* makeTypedMessageEmpty */.WM)();
    }).catch(()=>(0,typed_message_base/* makeTypedMessageEmpty */.WM)()
    );
    info.postMessage.value = (0,typed_message_base/* makeTypedMessageTuple */.Zw)([
        ...messages,
        (0,typed_message_base/* makeTypedMessagePromise */.Ng)(images)
    ]);
}
function collectLinks(tweetNode, info, cancel) {
    if (!tweetNode) return;
    if (cancel?.aborted) return;
    const links = [
        ...tweetNode.querySelectorAll('a')
    ].filter((x)=>x.rel
    );
    const seen = new Set([
        'https://help.twitter.com/using-twitter/how-to-tweet#source-labels'
    ]);
    for (const x1 of links){
        if (seen.has(x1.href)) continue;
        seen.add(x1.href);
        info.postMetadataMentionedLinks.set(x1, x1.href);
        service/* default.Helper.resolveTCOLink */.ZP.Helper.resolveTCOLink(x1.href).then((val)=>{
            if (cancel?.aborted) return;
            if (!val) return;
            info.postMetadataMentionedLinks.set(x1, val);
        });
    }
}

// EXTERNAL MODULE: ../shared-base-ui/src/index.ts
var shared_base_ui_src = __webpack_require__(53242);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/styles/createMuiStrictModeTheme.js
var createMuiStrictModeTheme = __webpack_require__(25689);
// EXTERNAL MODULE: ../../node_modules/.pnpm/immer@9.0.12/node_modules/immer/dist/immer.esm.js
var immer_esm = __webpack_require__(60232);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react@18.0.0/node_modules/react/index.js
var react = __webpack_require__(86248);
// EXTERNAL MODULE: ./src/utils/theme/index.ts + 1 modules
var utils_theme = __webpack_require__(92121);
// EXTERNAL MODULE: ./src/social-network-adaptor/twitter.com/customization/twitter-color-schema.json
var twitter_color_schema = __webpack_require__(88674);
// EXTERNAL MODULE: ../theme/src/entry.ts
var entry = __webpack_require__(30232);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/customization/custom.ts












const themeColorRef = new umd.ValueRef('rgb(29, 161, 242)');
const textColorRef = new umd.ValueRef('rgb(255, 255, 255)');
const backgroundColorRef = new umd.ValueRef('rgb(255, 255, 255)');
const currentTheme = new umd.ValueRef('light');
const PaletteModeProviderTwitter = {
    current: (0,src/* SubscriptionFromValueRef */.Jf)(currentTheme),
    start: startWatchThemeColor
};
function startWatchThemeColor(signal) {
    function updateThemeColor() {
        const composeAnchor = (0,selector/* composeAnchorSelector */.QG)().evaluate();
        const anchorText = (0,selector/* composeAnchorTextSelector */.xH)().evaluate();
        const headingText = (0,selector/* headingTextSelector */.ag)().evaluate();
        const themeColor = (0,utils_theme/* getBackgroundColor */.dF)(composeAnchor);
        const textColor = (0,utils_theme/* getForegroundColor */.aF)(anchorText || headingText);
        const backgroundColor = (0,utils_theme/* getBackgroundColor */.dF)(document.body);
        currentTheme.value = (0,utils_theme/* isDark */._T)((0,utils_theme/* fromRGB */.f2)(backgroundColor)) ? 'dark' : 'light';
        if (themeColor) themeColorRef.value = themeColor;
        if (textColor) textColorRef.value = textColor;
        if (backgroundColor) backgroundColorRef.value = backgroundColor;
    }
    const watcher = new umd.MutationObserverWatcher((0,selector/* composeAnchorSelector */.QG)()).addListener('onAdd', updateThemeColor).addListener('onChange', updateThemeColor).startWatch({
        childList: true,
        subtree: true
    });
    const unwatchAnchor = ()=>watcher.stopWatch()
    ;
    let unwatchHeadingText = noop/* default */.Z;
    if (isMobile/* isMobileTwitter */.b) {
        const headingWatcher = new umd.MutationObserverWatcher((0,selector/* headingTextSelector */.ag)()).addListener('onAdd', updateThemeColor).addListener('onChange', updateThemeColor).startWatch({
            childList: true,
            subtree: true
        });
        unwatchHeadingText = ()=>headingWatcher.stopWatch()
        ;
    }
    signal.addEventListener('abort', ()=>{
        unwatchAnchor();
        unwatchHeadingText();
    });
}
function useThemeTwitterVariant(baseTheme) {
    const primaryColor = (0,shared_base_ui_src/* useValueRef */.E)(themeColorRef);
    const primaryContrastColor = (0,shared_base_ui_src/* useValueRef */.E)(textColorRef);
    const backgroundColor = (0,shared_base_ui_src/* useValueRef */.E)(backgroundColorRef);
    return (0,react.useMemo)(()=>{
        const primaryColorRGB = (0,utils_theme/* fromRGB */.f2)(primaryColor);
        const primaryContrastColorRGB = (0,utils_theme/* fromRGB */.f2)(primaryContrastColor);
        (0,immer_esm/* setAutoFreeze */.Fl)(false);
        const TwitterTheme = (0,immer_esm/* default */.ZP)(baseTheme, (theme)=>{
            theme.palette.background.paper = backgroundColor;
            const isDark1 = theme.palette.mode === 'dark';
            const isDarker = backgroundColor === 'rgb(0,0,0)';
            theme.palette.primary = {
                light: (0,utils_theme/* toRGB */.xr)((0,utils_theme/* shade */.wj)(primaryColorRGB, 10)),
                main: (0,utils_theme/* toRGB */.xr)(primaryColorRGB),
                dark: (0,utils_theme/* toRGB */.xr)((0,utils_theme/* shade */.wj)(primaryColorRGB, -10)),
                contrastText: (0,utils_theme/* toRGB */.xr)(primaryContrastColorRGB)
            };
            const themeName = isDark1 ? isDarker ? 'darker' : 'dark' : 'light';
            // Just for design
            if (themeName === 'dark') {
                theme.palette.background.paper = '#151D26';
            }
            const colorSchema = twitter_color_schema[themeName];
            const colors = Object.keys(colorSchema);
            colors.forEach((color)=>{
                if (typeof theme.palette[color] === 'object') {
                    Object.assign(theme.palette[color], colorSchema[color]);
                }
            });
            theme.palette.divider = colorSchema.divider;
            theme.palette.secondaryDivider = colorSchema.secondaryDivider;
            theme.shape.borderRadius = isMobile/* isMobileTwitter */.b ? 0 : 15;
            theme.breakpoints.values = {
                xs: 0,
                sm: 687,
                md: 1024,
                lg: 1280,
                xl: 1920
            };
            theme.components = theme.components || {};
            const smallQuery = `@media (max-width: ${theme.breakpoints.values.sm}px)`;
            theme.components.MuiButton = {
                defaultProps: {
                    size: 'medium',
                    disableElevation: true,
                    variant: 'contained'
                },
                variants: [
                    {
                        props: {
                            variant: 'sns'
                        },
                        style: {
                            backgroundColor: theme.palette.primary.main,
                            color: theme.palette.common.white,
                            '&:hover': {
                                backgroundColor: theme.palette.primary.dark,
                                color: theme.palette.common.white
                            },
                            '&.Mui-disabled': {
                                opacity: 0.5,
                                backgroundColor: theme.palette.primary.main,
                                color: theme.palette.common.white
                            }
                        }
                    },
                    {
                        props: {
                            color: 'error'
                        },
                        style: {
                            backgroundColor: theme.palette.error.main,
                            color: theme.palette.common.white,
                            '&:hover': {
                                backgroundColor: '#f53b47'
                            }
                        }
                    }, 
                ],
                styleOverrides: {
                    root: {
                        borderRadius: 500,
                        textTransform: 'initial',
                        fontWeight: 600,
                        minHeight: 39,
                        paddingLeft: 15,
                        paddingRight: 15,
                        boxShadow: 'none',
                        [smallQuery]: {
                            '&': {
                                height: 30,
                                minHeight: 'auto !important',
                                padding: '0 14px !important'
                            }
                        }
                    },
                    contained: {
                        backgroundColor: theme.palette.text.primary,
                        color: theme.palette.text.buttonText,
                        '&.Mui-disabled': {
                            opacity: 0.5,
                            backgroundColor: theme.palette.text.primary,
                            color: theme.palette.text.buttonText
                        },
                        '&:hover': {
                            backgroundColor: theme.palette.action.buttonHover
                        },
                        [smallQuery]: {
                            '&': {
                                height: 30,
                                minHeight: 'auto !important',
                                padding: '0 14px !important'
                            }
                        }
                    },
                    containedSecondary: {
                        backgroundColor: theme.palette.background.default,
                        color: theme.palette.text.strong,
                        '&:hover': {
                            color: theme.palette.action.buttonHover,
                            backgroundColor: theme.palette.action.bgHover
                        },
                        '&.Mui-disabled': {
                            opacity: 0.5,
                            backgroundColor: theme.palette.background.default,
                            color: theme.palette.text.strong
                        }
                    },
                    outlined: {
                        color: theme.palette.text.strong,
                        borderColor: theme.palette.secondaryDivider,
                        backgroundColor: 'transparent',
                        '&:hover': {
                            color: theme.palette.action.buttonHover,
                            borderColor: theme.palette.secondaryDivider,
                            backgroundColor: (0,entry/* parseColor */.lu)(theme.palette.text.primary).setAlpha(0.1).toRgbString()
                        },
                        '&.Mui-disabled': {
                            opacity: 0.5,
                            color: theme.palette.text.strong,
                            backgroundColor: 'transparent'
                        }
                    },
                    sizeLarge: {
                        minHeight: 40,
                        paddingLeft: 30,
                        paddingRight: 30,
                        [smallQuery]: {
                            '&': {
                                height: 28,
                                minHeight: 28,
                                paddingLeft: 15,
                                paddingRight: 15
                            }
                        }
                    },
                    sizeSmall: {
                        minHeight: 30,
                        paddingLeft: 15,
                        paddingRight: 15,
                        [smallQuery]: {
                            '&': {
                                height: 25,
                                minHeight: 29,
                                paddingLeft: 10,
                                paddingRight: 10
                            }
                        }
                    }
                }
            };
            theme.components.MuiPaper = {
                defaultProps: {
                    elevation: 0
                }
            };
            theme.components.MuiTab = {
                styleOverrides: {
                    root: {
                        textTransform: 'none'
                    }
                }
            };
            theme.components.MuiChip = {
                styleOverrides: {
                    root: {
                        backgroundColor: theme.palette.background.default,
                        color: theme.palette.text.strong
                    },
                    colorPrimary: {
                        backgroundColor: theme.palette.primary.main,
                        color: theme.palette.common.white,
                        '&:hover': {
                            backgroundColor: `${theme.palette.primary.main} !important`,
                            opacity: 0.9
                        }
                    }
                }
            };
            theme.components.MuiBackdrop = {
                styleOverrides: {
                    root: {
                        backgroundColor: theme.palette.action.mask
                    }
                }
            };
            theme.components.MuiTooltip = {
                styleOverrides: {
                    tooltip: {
                        backgroundColor: theme.palette.background.tipMask,
                        color: theme.palette.text.buttonText,
                        borderRadius: 8
                    },
                    tooltipArrow: {
                        backgroundColor: theme.palette.background.tipMask
                    },
                    arrow: {
                        color: theme.palette.background.tipMask
                    }
                }
            };
            theme.components.MuiSnackbar = {
                styleOverrides: {
                    root: {
                        filter: `drop-shadow(0px 0px 16px ${theme.palette.background.messageShadow});`
                    }
                }
            };
        });
        (0,immer_esm/* setAutoFreeze */.Fl)(true);
        return (0,createMuiStrictModeTheme/* default */.Z)(TwitterTheme);
    }, [
        baseTheme,
        backgroundColor,
        primaryColor,
        primaryContrastColor
    ]);
}

// EXTERNAL MODULE: ./src/components/InjectedComponents/ToolboxUnstyled.tsx
var ToolboxUnstyled = __webpack_require__(9210);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/styles/styled.js
var styled = __webpack_require__(32831);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/ListItemButton/ListItemButton.js
var ListItemButton = __webpack_require__(51179);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Typography/Typography.js + 1 modules
var Typography = __webpack_require__(37253);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/ListItemIcon/ListItemIcon.js
var ListItemIcon = __webpack_require__(40006);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/useMediaQuery/useMediaQuery.js
var useMediaQuery = __webpack_require__(93854);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Box/Box.js
var Box = __webpack_require__(85139);
// EXTERNAL MODULE: ./src/components/GuideStep/index.tsx
var GuideStep = __webpack_require__(37655);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/ToolboxHint_UI.tsx





const twitterBreakPoint = 1265;
const Container = (0,styled/* default */.ZP)('div')`
    cursor: pointer;
    padding: 4px 0;
`;
const ListItem = (0,styled/* default */.ZP)(ListItemButton/* default */.Z)`
    border-radius: 9999px;
    padding: 6px 14px;
    display: inline-flex;
    &:hover {
        background: rgba(15, 20, 25, 0.1);
        ${({ theme  })=>theme.palette.mode === 'dark' ? 'background: rgba(217, 217, 217, 0.1);' : ''
}
    }
    /* twitter break point */
    @media screen and (max-width: ${twitterBreakPoint}px) {
        height: 50px;
    }
`;
const Text = (0,styled/* default */.ZP)(Typography/* default */.Z)`
    margin-left: 20px;
    margin-right: 16px;
    font-size: 15px;
    font-family: inherit;
    font-weight: 400;
    font-size: 20px;
    color: ${({ theme  })=>theme.palette.mode === 'light' ? 'rgb(15, 20, 25)' : 'rgb(216, 216, 216)'
};
`;
const ToolboxHint_UI_Icon = (0,styled/* default */.ZP)(ListItemIcon/* default */.Z)`
    color: ${({ theme  })=>theme.palette.mode === 'light' ? 'rgb(15, 20, 25)' : 'rgb(216, 216, 216)'
};
    min-width: 0;
`;
function ToolboxHintAtTwitter() {
    const mini = (0,useMediaQuery/* default */.Z)(`(max-width: ${twitterBreakPoint}px)`);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(ToolboxUnstyled/* ToolboxHintUnstyled */.z, {
        mini: mini,
        ListItemIcon: ToolboxHint_UI_Icon,
        Typography: Text,
        ListItemButton: ListItem,
        Container: Container
    });
}
function ProfileLinkAtTwitter() {
    const { t  } = (0,src_utils/* useI18N */.M1)();
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(GuideStep/* default */.Z, {
        step: 2,
        total: 3,
        tip: t('user_guide_tip_2'),
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(Box/* default */.Z, {
            sx: {
                position: 'absolute',
                left: 0,
                right: 0,
                width: '100%',
                height: '100%'
            }
        })
    });
}

;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/ToolboxHint.tsx






function injectToolboxHintAtTwitter(signal) {
    const watcher = new umd.MutationObserverWatcher((0,selector/* toolBoxInSideBarSelector */.ch)());
    (0,utils_watcher/* startWatch */.f)(watcher, signal);
    (0,renderInShadowRoot/* createReactRootShadowed */.o)(watcher.firstDOMProxy.afterShadow, {
        signal
    }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(ToolboxHintAtTwitter, {}));
    injectProfile(signal);
}
function injectProfile(signal) {
    const watcher = new umd.MutationObserverWatcher((0,selector/* sideBarProfileSelector */.WU)());
    (0,utils_watcher/* startWatch */.f)(watcher, signal);
    (0,renderInShadowRoot/* createReactRootShadowed */.o)(watcher.firstDOMProxy.afterShadow, {
        signal
    }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(ProfileLinkAtTwitter, {}));
}

;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/locales/en-US.json
const en_US_namespaceObject = JSON.parse('{"additional_post_box__encrypted_post_pre":"This tweet is encrypted with #mask_io (@realMaskNetwork). 📪🔑\\n\\nInstall {{encrypted}} to decrypt it."}');
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/locales/ja-JP.json
const ja_JP_namespaceObject = {};
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/locales/ko-KR.json
const ko_KR_namespaceObject = JSON.parse('{"additional_post_box__encrypted_post_pre":"이 트윗은 #mask_io (@realMaskNetwork) 로 암호화되었습니다. 📪🔑\\n\\n{{encrypted}} 설치하고 해독하세요."}');
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/locales/qya-AA.json
const qya_AA_namespaceObject = JSON.parse('{"additional_post_box__encrypted_post_pre":"crwdns5581:0{{encrypted}}crwdne5581:0"}');
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/locales/zh-CN.json
const zh_CN_namespaceObject = {};
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/locales/zh-TW.json
const zh_TW_namespaceObject = JSON.parse('{"additional_post_box__encrypted_post_pre":"此推文已被 Mask（@realMaskNetwork）加密。📪🔑\\n\\n請安裝 {{encrypted}} 進行解密。"}');
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/locales/languages.ts
// This file is auto generated. DO NOT EDIT
// Run `npx gulp sync-languages` to regenerate.
// Default fallback language in a family of languages are chosen by the alphabet order
// To overwrite this, please overwrite packages/scripts/src/locale-kit-next/index.ts






const languages = {
    en: en_US_namespaceObject,
    ja: ja_JP_namespaceObject,
    ko: ko_KR_namespaceObject,
    qy: qya_AA_namespaceObject,
    'zh-CN': zh_CN_namespaceObject,
    zh: zh_TW_namespaceObject
};

const addDO_NOT_USEI18N = (0,src/* createI18NBundle */.C9)('DO_NOT_USE', languages);
// @ts-ignore
if (false) {}

;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/customization/i18n.ts

const i18NOverwriteTwitter = {
    mask: {}
};
const resource = languages;
for(const lng in resource){
    for(const key in resource[lng]){
        i18NOverwriteTwitter.mask[key] ??= {};
        i18NOverwriteTwitter.mask[key][lng] = resource[lng][key];
    }
}

// EXTERNAL MODULE: ./src/components/InjectedComponents/SearchResultBox.tsx
var SearchResultBox = __webpack_require__(45246);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/SearchResultBox.tsx






function injectSearchResultBoxAtTwitter(signal) {
    const watcher = new umd.MutationObserverWatcher((0,selector/* searchResultHeadingSelector */.R9)());
    (0,utils_watcher/* startWatch */.f)(watcher, signal);
    (0,renderInShadowRoot/* createReactRootShadowed */.o)(watcher.firstDOMProxy.afterShadow, {
        signal
    }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(SearchResultBox/* SearchResultBox */.L, {}));
}

// EXTERNAL MODULE: ../plugin-infra/src/entry-content-script.ts + 1 modules
var entry_content_script = __webpack_require__(98541);
;// CONCATENATED MODULE: ./src/components/InjectedComponents/ProfileSlider.tsx


const PluginRenderer = (0,entry_content_script/* createInjectHooksRenderer */.EK)(entry_content_script/* useActivatedPluginsSNSAdaptor.visibility.useAnyMode */.Pz.visibility.useAnyMode, (x)=>{
    return ()=>{
        return /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
            children: "Profile Slider"
        });
    };
});
function ProfileSlider(props) {
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(PluginRenderer, {});
}

;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/ProfileSlider.tsx






function injectProfileSliderAtTwitter(signal) {
    const watcher = new umd.MutationObserverWatcher((0,selector/* searchResultHeadingSelector */.R9)());
    (0,utils_watcher/* startWatch */.f)(watcher, signal);
    (0,renderInShadowRoot/* createReactRootShadowed */.o)(watcher.firstDOMProxy.afterShadow, {
        signal
    }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(ProfileSlider, {}));
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/color@4.2.3/node_modules/color/index.js
var color = __webpack_require__(88106);
var color_default = /*#__PURE__*/__webpack_require__.n(color);
// EXTERNAL MODULE: ./src/components/InjectedComponents/ProfileTab.tsx
var ProfileTab = __webpack_require__(39947);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/ProfileTab.tsx








function getStyleProps() {
    const EMPTY_STYLE = {};
    const eleTab = (0,selector/* searchProfileTabSelector */.Fe)().evaluate()?.querySelector('div');
    const style = eleTab ? window.getComputedStyle(eleTab) : EMPTY_STYLE;
    const eleNewTweetButton = (0,selector/* searchNewTweetButtonSelector */.r$)().evaluate();
    const newTweetButtonColorStyle = eleNewTweetButton ? window.getComputedStyle(eleNewTweetButton) : EMPTY_STYLE;
    const eleBackButton = (0,selector/* searchAppBarBackSelector */.Hk)().evaluate();
    const backButtonColorStyle = eleBackButton ? window.getComputedStyle(eleBackButton) : EMPTY_STYLE;
    return {
        color: style.color,
        font: style.font,
        fontSize: style.fontSize,
        padding: style.paddingBottom,
        height: style.height,
        hover: backButtonColorStyle.color,
        line: newTweetButtonColorStyle.backgroundColor
    };
}
const useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    const props = getStyleProps();
    return {
        root: {
            '&:hover': {
                backgroundColor: new (color_default())(props.hover).alpha(0.1).toString(),
                cursor: 'pointer'
            },
            height: props.height
        },
        button: {
            zIndex: 1,
            position: 'relative',
            display: 'flex',
            minWidth: 56,
            justifyContent: 'center',
            alignItems: 'center',
            textAlign: 'center',
            padding: theme.spacing(0, props.padding),
            color: props.color,
            font: props.font,
            fontSize: props.fontSize,
            fontWeight: 500,
            '&:hover': {
                color: props.color
            },
            height: props.height
        },
        selected: {
            color: `${props.hover} !important`,
            fontWeight: 700
        },
        line: {
            borderRadius: 9999,
            position: 'absolute',
            bottom: 0,
            minWidth: 56,
            alignSelf: 'center',
            height: 4,
            backgroundColor: props.line
        }
    };
});
async function hideTwitterActivatedContent() {
    const eleTab = (0,selector/* searchProfileTabSelector */.Fe)().evaluate()?.querySelector('div');
    const loseConnectionEle = (0,selector/* searchProfileTabLoseConnectionPageSelector */.zA)().evaluate();
    if (!eleTab) return;
    const style = window.getComputedStyle(eleTab);
    // hide the activated indicator
    const tabList = (0,selector/* searchProfileTabListSelector */.JN)().evaluate();
    tabList.map((v)=>{
        const _v = v.querySelector('div');
        _v.style.color = style.color;
        const line = v.querySelector('div > div');
        line.style.display = 'none';
    });
    if (loseConnectionEle) return;
    // hide the empty list indicator on the page
    const eleEmpty = (0,selector/* searchProfileEmptySelector */.YX)().evaluate();
    if (eleEmpty) eleEmpty.style.display = 'none';
    // hide the content page
    await (0,src_utils/* untilElementAvailable */.ft)((0,selector/* searchProfileTabPageSelector */.xx)());
    const elePage = (0,selector/* searchProfileTabPageSelector */.xx)().evaluate();
    if (elePage) {
        elePage.style.visibility = 'hidden';
        elePage.style.height = '0px';
    }
}
function resetTwitterActivatedContent() {
    const eleTab = (0,selector/* searchProfileTabSelector */.Fe)().evaluate()?.querySelector('div');
    const loseConnectionEle = (0,selector/* searchProfileTabLoseConnectionPageSelector */.zA)().evaluate();
    if (!eleTab) return;
    const tabList = (0,selector/* searchProfileTabListSelector */.JN)().evaluate();
    tabList.map((v)=>{
        const _v = v.querySelector('div');
        _v.style.color = '';
        const line = v.querySelector('div > div');
        line.style.display = '';
    });
    if (loseConnectionEle) return;
    const eleEmpty = (0,selector/* searchProfileEmptySelector */.YX)().evaluate();
    if (eleEmpty) eleEmpty.style.display = '';
    const elePage = (0,selector/* searchProfileTabPageSelector */.xx)().evaluate();
    if (elePage) {
        elePage.style.visibility = 'visible';
        elePage.style.height = 'auto';
    }
}
function ProfileTabAtTwitter() {
    const { classes  } = useStyles();
    const [hidden, setHidden] = (0,react.useState)(false);
    (0,react.useEffect)(()=>{
        return src_utils/* MaskMessages.events.profileTabHidden.on */.ql.events.profileTabHidden.on((data)=>{
            setHidden(data.hidden);
        });
    }, []);
    return hidden ? null : /*#__PURE__*/ (0,jsx_runtime.jsx)(ProfileTab/* ProfileTab */.D, {
        title: "Web3",
        classes: classes,
        reset: resetTwitterActivatedContent,
        clear: hideTwitterActivatedContent,
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
            className: classes.line
        })
    });
}
function injectProfileTabAtTwitter(signal) {
    let tabInjected = false;
    const contentWatcher = new umd.MutationObserverWatcher((0,selector/* searchProfileTabPageSelector */.xx)()).useForeach(()=>{
        const elePage = (0,selector/* searchProfileTabPageSelector */.xx)().evaluate();
        if (elePage && !tabInjected) {
            const watcher = new umd.MutationObserverWatcher((0,selector/* searchProfileTabListLastChildSelector */.L2)());
            (0,src_utils/* startWatch */.fy)(watcher, signal);
            (0,src_utils/* createReactRootShadowed */.ou)(watcher.firstDOMProxy.afterShadow, {
                signal
            }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(ProfileTabAtTwitter, {}));
            tabInjected = true;
        }
    });
    (0,src_utils/* startWatch */.fy)(contentWatcher, signal);
}

// EXTERNAL MODULE: ./src/components/InjectedComponents/ProfileTabContent.tsx + 3 modules
var ProfileTabContent = __webpack_require__(16744);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/ProfileTabContent.tsx






function injectProfileTabContentForEmptyState(signal) {
    const watcher = new umd.MutationObserverWatcher((0,selector/* searchProfileEmptySelector */.YX)());
    (0,src_utils/* startWatch */.fy)(watcher, signal);
    (0,src_utils/* createReactRootShadowed */.ou)(watcher.firstDOMProxy.afterShadow, {
        signal
    }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(ProfileTabContentAtTwitter, {}));
}
function injectProfileTabContentState(signal) {
    const watcher = new umd.MutationObserverWatcher((0,selector/* searchProfileTabPageSelector */.xx)());
    (0,src_utils/* startWatch */.fy)(watcher, signal);
    (0,src_utils/* createReactRootShadowed */.ou)(watcher.firstDOMProxy.afterShadow, {
        signal
    }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(ProfileTabContentAtTwitter, {}));
}
function injectProfileTabContentAtTwitter(signal) {
    const contentLoseConnectionWatcher = new umd.MutationObserverWatcher((0,selector/* searchProfileTabLoseConnectionPageSelector */.zA)()).useForeach(()=>src_utils/* MaskMessages.events.profileTabHidden.sendToLocal */.ql.events.profileTabHidden.sendToLocal({
            hidden: true
        })
    );
    const contentContentWatcher = new umd.MutationObserverWatcher((0,selector/* searchProfileTabPageSelector */.xx)()).useForeach(()=>src_utils/* MaskMessages.events.profileTabHidden.sendToLocal */.ql.events.profileTabHidden.sendToLocal({
            hidden: false
        })
    );
    const ContentForEmptyWatcher = new umd.MutationObserverWatcher((0,selector/* searchProfileEmptySelector */.YX)()).useForeach(()=>src_utils/* MaskMessages.events.profileTabHidden.sendToLocal */.ql.events.profileTabHidden.sendToLocal({
            hidden: false
        })
    );
    (0,src_utils/* startWatch */.fy)(contentLoseConnectionWatcher, signal);
    (0,src_utils/* startWatch */.fy)(contentContentWatcher, signal);
    (0,src_utils/* startWatch */.fy)(ContentForEmptyWatcher, signal);
    injectProfileTabContentForEmptyState(signal);
    injectProfileTabContentState(signal);
}
function ProfileTabContent_getStyleProps() {
    const newTweetButton = (0,selector/* searchNewTweetButtonSelector */.r$)().evaluate();
    return {
        backgroundColor: newTweetButton ? window.getComputedStyle(newTweetButton).backgroundColor : undefined,
        fontFamily: newTweetButton?.firstChild ? window.getComputedStyle(newTweetButton.firstChild).fontFamily : undefined,
        isPositionStatic: location.pathname.endsWith('/likes') || location.pathname.endsWith('/media')
    };
}
const ProfileTabContent_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>{
    const props = ProfileTabContent_getStyleProps();
    return {
        root: {
            position: props.isPositionStatic ? 'static' : 'absolute',
            top: 0,
            left: 0,
            right: 0,
            zIndex: 1
        },
        text: {
            paddingTop: 29,
            paddingBottom: 29,
            '& > p': {
                fontSize: 28,
                fontFamily: props.fontFamily,
                fontWeight: 700,
                color: (0,entry/* getMaskColor */.nb)(theme).textPrimary
            }
        },
        button: {
            backgroundColor: props.backgroundColor,
            color: 'white',
            marginTop: 18,
            '&:hover': {
                backgroundColor: props.backgroundColor
            }
        }
    };
});
function ProfileTabContentAtTwitter() {
    const { classes  } = ProfileTabContent_useStyles();
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(ProfileTabContent/* ProfileTabContent */.d, {
        classes: classes
    });
}

// EXTERNAL MODULE: ./src/social-network/defaults/inject/PostReplacer.tsx + 1 modules
var PostReplacer = __webpack_require__(7641);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/PostReplacer.tsx

function resolveLangNode(node) {
    return node.hasAttribute('lang') ? node : node.querySelector('[lang]') ?? node.parentElement?.querySelector('[lang]');
}
function injectPostReplacerAtTwitter(signal, current) {
    return (0,PostReplacer/* injectPostReplacer */.C)({
        zipPost (node) {
            const langNode = resolveLangNode(node.current);
            if (langNode) langNode.style.display = 'none';
        },
        unzipPost (node) {
            if (!node.current) return;
            const langNode = resolveLangNode(node.current);
            if (langNode) langNode.style.display = 'unset';
        }
    })(current, signal);
}

// EXTERNAL MODULE: ./src/social-network/defaults/inject/PageInspector.tsx + 3 modules
var PageInspector = __webpack_require__(22283);
// EXTERNAL MODULE: ./src/components/shared/NotSetupYetPrompt.tsx + 1 modules
var NotSetupYetPrompt = __webpack_require__(62910);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/SetupPrompt.tsx







function injectSetupPromptAtTwitter(signal) {
    const emptyNode = document.createElement('div');
    injectSetupPrompt((0,selector/* postEditorInTimelineSelector */.Ps)(), signal);
    injectSetupPrompt((0,selector/* postEditorInPopupSelector */.Rd)().map((x)=>(0,postBox/* isCompose */.iv)() && (0,postBox/* hasEditor */.Wu)() ? x : emptyNode
    ), signal);
}
function injectSetupPrompt(ls, signal) {
    const watcher = new umd.MutationObserverWatcher(ls);
    (0,utils_watcher/* startWatch */.f)(watcher, signal);
    (0,renderInShadowRoot/* createReactRootShadowed */.o)(watcher.firstDOMProxy.afterShadow, {
        signal
    }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(NotSetupYetPrompt/* NotSetupYetPrompt */.N, {}));
}

// EXTERNAL MODULE: ./src/components/CompositionDialog/Composition.tsx + 15 modules
var Composition = __webpack_require__(73031);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/PostDialog.tsx






function renderPostDialogTo(reason, ls, signal) {
    const watcher = new umd.MutationObserverWatcher(ls);
    (0,utils_watcher/* startWatch */.f)(watcher, signal);
    (0,renderInShadowRoot/* createReactRootShadowed */.o)(watcher.firstDOMProxy.afterShadow, {
        signal
    }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(Composition/* Composition */.f, {
        type: reason
    }));
}
function injectPostDialogAtTwitter(signal) {
    renderPostDialogTo('popup', (0,selector/* postEditorContentInPopupSelector */.$_)(), signal);
    renderPostDialogTo('timeline', (0,selector/* rootSelector */.Du)(), signal);
}

// EXTERNAL MODULE: ./src/components/InjectedComponents/PostDialogHint.tsx
var PostDialogHint = __webpack_require__(8549);
// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+system@5.6.1_de97b6be3b01c831652fad9cf8222fb8/node_modules/@mui/system/esm/colorManipulator.js
var colorManipulator = __webpack_require__(58459);
// EXTERNAL MODULE: ./src/settings/settings.ts
var settings = __webpack_require__(80917);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/PostDialogHint.tsx















const PostDialogHint_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        iconButton: {
            '&:hover': {
                background: (0,colorManipulator/* alpha */.Fq)(theme.palette.primary.main, 0.1)
            }
        },
        tooltip: {
            marginTop: '2px !important',
            borderRadius: 2,
            padding: 4,
            background: entry/* MaskColorVar.twitterTooltipBg */.ZN.twitterTooltipBg,
            color: entry/* MaskColorVar.white */.ZN.white
        }
    })
);
function injectPostDialogHintAtTwitter(signal) {
    const emptyNode = document.createElement('div');
    renderPostDialogHintTo('timeline', (0,selector/* searchReplyToolbarSelector */.NN)(), signal);
    renderPostDialogHintTo('popup', (0,selector/* postEditorInPopupSelector */.Rd)().map((x)=>(0,postBox/* isCompose */.iv)() && (0,postBox/* hasEditor */.Wu)() ? x : emptyNode
    ), signal);
}
function renderPostDialogHintTo(reason, ls, signal) {
    const watcher = new umd.MutationObserverWatcher(ls);
    (0,utils_watcher/* startWatch */.f)(watcher, signal);
    (0,renderInShadowRoot/* createReactRootShadowed */.o)(watcher.firstDOMProxy.afterShadow, {
        signal
    }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(PostDialogHintAtTwitter, {
        reason: reason
    }));
}
function PostDialogHintAtTwitter({ reason  }) {
    const { classes  } = PostDialogHint_useStyles();
    const { t  } = (0,src_utils/* useI18N */.M1)();
    const onHintButtonClicked = (0,react.useCallback)(()=>{
        const content = settings/* sayHelloShowed */.Pg[base/* twitterBase.networkIdentifier */.oQ.networkIdentifier].value ? undefined : (0,typed_message_base/* makeTypedMessageText */.P)(t('setup_guide_say_hello_content') + t('setup_guide_say_hello_follow', {
            account: '@realMaskNetwork'
        }));
        src/* CrossIsolationMessages.events.requestComposition.sendToLocal */.WF.events.requestComposition.sendToLocal({
            reason: (0,selector/* isReplyPageSelector */.tk)() ? 'reply' : reason,
            open: true,
            content
        });
        settings/* sayHelloShowed */.Pg[base/* twitterBase.networkIdentifier */.oQ.networkIdentifier].value = true;
    }, [
        reason,
        selector/* isReplyPageSelector */.tk
    ]);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(PostDialogHint/* PostDialogHint */.A, {
        disableGuideTip: reason === 'popup',
        classes: {
            iconButton: classes.iconButton,
            tooltip: classes.tooltip
        },
        size: 20,
        onHintButtonClicked: onHintButtonClicked,
        tooltip: {
            disabled: false
        }
    });
}

;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/inject.tsx


function injectPostBoxComposed(signal) {
    injectPostDialogAtTwitter(signal);
    injectPostDialogHintAtTwitter(signal);
}

// EXTERNAL MODULE: ./src/social-network/defaults/inject/StartSetupGuide.tsx + 7 modules
var StartSetupGuide = __webpack_require__(85153);
// EXTERNAL MODULE: ./src/social-network/defaults/automation/AttachImageToComposition.ts
var AttachImageToComposition = __webpack_require__(8142);
// EXTERNAL MODULE: ./src/social-network/defaults/inject/PostInspector.tsx + 15 modules
var PostInspector = __webpack_require__(72097);
// EXTERNAL MODULE: ./src/social-network-adaptor/twitter.com/encoding.ts
var encoding = __webpack_require__(61009);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/PostInspector.tsx


function injectPostInspectorAtTwitter(signal, current) {
    return (0,PostInspector/* injectPostInspectorDefault */.J)({
        zipPost (node) {
            const contentContainer = node.current.parentElement;
            if (!contentContainer) return;
            const content = contentContainer.querySelector('[lang]');
            if (!content) return;
            for (const a of content.querySelectorAll('a')){
                if (encoding/* twitterEncoding.payloadDecoder */.n.payloadDecoder(a.title).length) hideDOM(a);
                if (/^https?:\/\/mask(\.io|book\.com)$/i.test(a.title)) hideDOM(a);
            }
            for (const span of content.querySelectorAll('span')){
                // match (.) (\n) (—§—) (any space) (/*)
                // Note: In Chinese we can't hide dom because "解密这条推文。\n—§—" is in the same DOM
                // hide it will break the sentence.
                if (span.innerText.match(/^\.\n\u2014\u00A7\u2014 +\/\* $/)) hideDOM(span);
                // match (any space) (*/) (any space)
                if (span.innerText.match(/^ +\*\/ ?$/)) hideDOM(span);
            }
            const parent = content.parentElement?.nextElementSibling;
            if (parent && matches(parent.innerText)) {
                parent.style.height = '0';
                parent.style.overflow = 'hidden';
            }
            const cardWrapper = contentContainer.parentElement?.querySelector('[data-testid="card.wrapper"]');
            if (cardWrapper) {
                cardWrapper.style.display = 'none';
                cardWrapper.setAttribute('aria-hidden', 'true');
            }
        }
    })(current, signal);
}
function matches(input) {
    input = input.toLowerCase();
    return input.includes('maskbook.com') && input.includes('make privacy protected again');
}
function hideDOM(a) {
    a.style.width = '0';
    a.style.height = '0';
    a.style.overflow = 'hidden';
    a.style.display = 'inline-block';
}

;// CONCATENATED MODULE: ./src/components/InjectedComponents/PostActions.tsx


const ActionsRenderer = (0,entry_content_script/* createInjectHooksRenderer */.EK)(entry_content_script/* useActivatedPluginsSNSAdaptor.visibility.useNotMinimalMode */.Pz.visibility.useNotMinimalMode, (plugin)=>plugin.PostActions
);
function PostActions() {
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(ActionsRenderer, {});
}

;// CONCATENATED MODULE: ./src/social-network/defaults/inject/PostActions.tsx





function createPostActionsInjector() {
    return function injectPostActions(current, signal) {
        const jsx = /*#__PURE__*/ (0,jsx_runtime.jsx)(entry_content_script/* PostInfoProvider */.eT, {
            post: current,
            children: /*#__PURE__*/ (0,jsx_runtime.jsx)(PostActions, {})
        });
        if (current.actionsElement) {
            const root = (0,renderInShadowRoot/* createReactRootShadowed */.o)(current.actionsElement.afterShadow, {
                key: 'post-actions',
                signal
            });
            root.render(jsx);
            return root.destroy;
        }
        return noop/* default */.Z;
    };
}

;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/PostActions/index.tsx


function injectPostActionsAtTwitter(signal, postInfo) {
    if (!shared_0/* Flags.post_actions_enabled */.vU.post_actions_enabled) return;
    const injector = createPostActionsInjector();
    return injector(postInfo, signal);
}

// EXTERNAL MODULE: ./src/components/DataSource/useActivatedUI.ts
var useActivatedUI = __webpack_require__(68043);
// EXTERNAL MODULE: ../web3-shared/evm/hooks/useWallet.ts
var useWallet = __webpack_require__(67376);
// EXTERNAL MODULE: ../web3-shared/evm/pipes/index.ts
var pipes = __webpack_require__(55678);
// EXTERNAL MODULE: ./src/plugins/Avatar/hooks/index.ts + 2 modules
var hooks = __webpack_require__(70890);
// EXTERNAL MODULE: ./src/plugins/Avatar/messages.ts
var Avatar_messages = __webpack_require__(44603);
// EXTERNAL MODULE: ./src/plugins/Avatar/SNSAdaptor/NFTBadge.tsx + 1 modules
var NFTBadge = __webpack_require__(68536);
// EXTERNAL MODULE: ./src/plugins/Avatar/SNSAdaptor/NFTAvatar.tsx + 2 modules
var NFTAvatar = __webpack_require__(95739);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useWindowSize.js
var useWindowSize = __webpack_require__(44385);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useLocation.js
var useLocation = __webpack_require__(15758);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useAsync.js
var useAsync = __webpack_require__(73570);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useUpdateEffect.js + 1 modules
var useUpdateEffect = __webpack_require__(93618);
// EXTERNAL MODULE: ./src/plugins/Avatar/SNSAdaptor/RainbowBox.tsx
var RainbowBox = __webpack_require__(850);
// EXTERNAL MODULE: ../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/trim.js
var trim = __webpack_require__(99589);
// EXTERNAL MODULE: ./src/plugins/Avatar/constants.ts
var constants = __webpack_require__(95095);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/NFT/NFTAvatarInTwitter.tsx


















function injectNFTAvatarInTwitter(signal) {
    const watcher = new umd.MutationObserverWatcher((0,selector/* searchTwitterAvatarSelector */.p$)());
    (0,src_utils/* startWatch */.fy)(watcher, signal);
    (0,src_utils/* createReactRootShadowed */.ou)(watcher.firstDOMProxy.afterShadow, {
        signal
    }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(NFTAvatarInTwitter, {}));
}
const NFTAvatarInTwitter_useStyles = (0,entry/* makeStyles */.ZL)()(()=>({
        root: {
            transform: 'scale(1.022)',
            position: 'absolute',
            textAlign: 'center',
            color: 'white',
            zIndex: 2,
            width: '100%',
            height: '100%',
            top: 0,
            left: 0,
            right: 0,
            bottom: 0
        },
        text: {
            fontSize: '20px !important',
            fontWeight: 700
        },
        icon: {
            width: '19px !important',
            height: '19px !important'
        }
    })
);
function NFTAvatarInTwitter() {
    const rainBowElement = (0,react.useRef)();
    const borderElement = (0,react.useRef)();
    const identity = (0,useActivatedUI/* useCurrentVisitingIdentity */.fb)();
    const wallet = (0,useWallet/* useWallet */.O)();
    const { value: _avatar  } = (0,hooks/* useNFTAvatar */.i)(identity.identifier.userId, constants/* RSS3_KEY_SNS.TWITTER */.vu.TWITTER);
    const [avatar1, setAvatar] = (0,react.useState)();
    const windowSize = (0,useWindowSize/* default */.Z)();
    const location = (0,useLocation/* default */.Z)();
    const showAvatar = (0,react.useMemo)(()=>(0,user/* getAvatarId */.yd)(identity.avatar ?? '') === avatar1?.avatarId && avatar1.avatarId
    , [
        avatar1?.avatarId,
        identity.avatar
    ]);
    const size = (0,react.useMemo)(()=>{
        const ele = (0,selector/* searchTwitterAvatarSelector */.p$)().evaluate()?.querySelector('img');
        if (ele) {
            const style = window.getComputedStyle(ele);
            return Number.parseInt(style.width.replace('px', '') ?? 0, 10);
        }
        return 0;
    }, [
        windowSize,
        location
    ]);
    const { classes  } = NFTAvatarInTwitter_useStyles();
    const [NFTEvent, setNFTEvent] = (0,react.useState)();
    const onUpdate = (data)=>{
        setNFTEvent(data);
    };
    // After the avatar is set, it cannot be saved immediately, and must wait until the avatar of twitter is updated
    (0,useAsync/* default */.Z)(async ()=>{
        if (!wallet || !NFTAvatar/* NFTAvatar */.R) return;
        if (!NFTEvent?.address || !NFTEvent?.tokenId) {
            setAvatar(undefined);
            src_utils/* MaskMessages.events.NFTAvatarTimelineUpdated.sendToAll */.ql.events.NFTAvatarTimelineUpdated.sendToAll({
                userId: identity.identifier.userId,
                avatarId: (0,user/* getAvatarId */.yd)(identity.avatar ?? ''),
                address: '',
                tokenId: ''
            });
            return;
        }
        const avatar = await Avatar_messages/* PluginNFTAvatarRPC.saveNFTAvatar */.B.saveNFTAvatar(wallet.address, {
            ...NFTEvent,
            avatarId: (0,user/* getAvatarId */.yd)(identity.avatar ?? '')
        }, identity.identifier.network, constants/* RSS3_KEY_SNS.TWITTER */.vu.TWITTER).catch((error)=>{
            setNFTEvent(undefined);
            setAvatar(undefined);
            window.alert(error.message);
            return;
        });
        if (!avatar) {
            setNFTEvent(undefined);
            setAvatar(undefined);
            window.alert('Sorry, failed to save NFT Avatar. Please set again.');
            return;
        }
        setAvatar(avatar);
        src_utils/* MaskMessages.events.NFTAvatarTimelineUpdated.sendToAll */.ql.events.NFTAvatarTimelineUpdated.sendToAll(avatar ?? {
            userId: identity.identifier.userId,
            avatarId: (0,user/* getAvatarId */.yd)(identity.avatar ?? ''),
            address: '',
            tokenId: ''
        });
        setNFTEvent(undefined);
    }, [
        identity.avatar
    ]);
    (0,react.useEffect)(()=>{
        setAvatar(_avatar);
    }, [
        _avatar
    ]);
    (0,react.useEffect)(()=>{
        return src_utils/* MaskMessages.events.NFTAvatarUpdated.on */.ql.events.NFTAvatarUpdated.on((data)=>onUpdate(data)
        );
    }, [
        onUpdate
    ]);
    (0,react.useEffect)(()=>{
        if (!showAvatar) return;
        const linkDom = (0,selector/* searchTwitterAvatarLinkSelector */.N7)().evaluate();
        if (linkDom?.firstElementChild && linkDom.childNodes.length === 4) {
            const linkParentDom = linkDom.closest('div');
            if (linkParentDom) linkParentDom.style.overflow = 'visible';
            // create rainbow shadow border
            if (linkDom.lastElementChild?.tagName !== 'STYLE') {
                borderElement.current = linkDom.firstElementChild;
                // remove useless border
                linkDom.removeChild(linkDom.firstElementChild);
                const style = document.createElement('style');
                style.innerText = `
                ${RainbowBox/* rainbowBorderKeyFrames.styles */.v.styles}

                .rainbowBorder {
                    animation: ${RainbowBox/* rainbowBorderKeyFrames.name */.v.name} 6s linear infinite;
                    box-shadow: 0 5px 15px rgba(0, 248, 255, 0.4), 0 10px 30px rgba(37, 41, 46, 0.2);
                    transition: none;
                    border: 0px solid #00f8ff;
                }
            `;
                rainBowElement.current = linkDom.firstElementChild.nextElementSibling;
                linkDom.firstElementChild.nextElementSibling?.classList.add('rainbowBorder');
                linkDom.appendChild(style);
            }
        }
        return ()=>{
            if (linkDom?.lastElementChild?.tagName === 'STYLE') {
                linkDom.removeChild(linkDom.lastElementChild);
            }
            if (borderElement.current && linkDom?.firstElementChild !== borderElement.current) {
                linkDom?.insertBefore(borderElement.current, linkDom.firstChild);
            }
            if (rainBowElement.current) {
                rainBowElement.current?.classList.remove('rainbowBorder');
            }
        };
    }, [
        location.pathname,
        showAvatar
    ]);
    (0,useUpdateEffect/* default */.Z)(()=>{
        if (location.pathname && location.pathname.split('/').length === 2 && (0,trim/* default */.Z)(location.pathname, '/') !== identity.identifier.userId) {
            setAvatar(undefined);
        }
    }, [
        location,
        identity
    ]);
    (0,useUpdateEffect/* default */.Z)(()=>{
        const linkParentDom = (0,selector/* searchTwitterAvatarLinkSelector */.N7)().evaluate()?.closest('div');
        if (!avatar1 || !linkParentDom || !showAvatar) return;
        const handler = ()=>{
            (0,shared_base_ui_src/* openWindow */.xw)((0,pipes/* resolveOpenSeaLink */.QN)(avatar1.address, avatar1.tokenId));
        };
        linkParentDom.addEventListener('click', handler);
        return ()=>{
            linkParentDom.removeEventListener('click', handler);
        };
    }, [
        avatar1
    ]);
    if (!avatar1 || !size) return null;
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
        children: showAvatar ? /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTBadge/* NFTBadge */.A, {
            borderSize: 5,
            hasRainbow: true,
            avatar: avatar1,
            size: size,
            width: 15,
            classes: {
                root: classes.root,
                text: classes.text,
                icon: classes.icon
            }
        }) : null
    });
}

// EXTERNAL MODULE: ./src/plugins/NextID/components/Tip/TipButton.tsx + 1 modules
var TipButton = __webpack_require__(68487);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/Tip/ProfileTipButton.tsx








function injectOpenTipButtonOnProfile(signal) {
    const watcher = new umd.MutationObserverWatcher((0,selector/* profileFollowButtonSelector */.at)());
    (0,src_utils/* startWatch */.fy)(watcher, signal);
    (0,src_utils/* createReactRootShadowed */.ou)(watcher.firstDOMProxy.beforeShadow, {
        signal
    }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(OpenTipDialog, {}));
}
const ProfileTipButton_useStyles = (0,entry/* makeStyles */.ZL)()((theme, props)=>({
        button: {
            height: props.size,
            width: props.size,
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            borderWidth: 1,
            borderStyle: 'solid',
            borderColor: theme.palette.mode === 'dark' ? '#536471' : '#d2dbe0',
            borderRadius: 999,
            marginRight: theme.spacing(1),
            marginBottom: props.marginBottom,
            verticalAlign: 'top',
            color: theme.palette.text.primary,
            '&:hover': {
                backgroundColor: theme.palette.mode === 'dark' ? 'rgba(239,243,244,0.1)' : 'rgba(15,20,25,0.1)'
            }
        },
        label: {
            fontSize: 14,
            marginLeft: theme.spacing(0.5)
        }
    })
);
function OpenTipDialog() {
    const [style, setStyle] = (0,react.useState)({
        size: 34,
        fontSize: 14,
        marginBottom: 11
    });
    const visitingPersona = (0,useActivatedUI/* useCurrentVisitingIdentity */.fb)();
    const setStyleFromEditProfileSelector = ()=>{
        const menuButton = (0,selector/* profileMenuButtonSelector */.b2)().evaluate();
        if (!menuButton) return;
        const css = window.getComputedStyle(menuButton);
        setStyle({
            size: Number.parseFloat(css.height.replace('px', '')),
            fontSize: Number.parseFloat(css.fontSize.replace('px', '')),
            marginBottom: Number.parseFloat(css.marginBottom.replace('px', ''))
        });
    };
    (0,react.useEffect)(setStyleFromEditProfileSelector, []);
    (0,src_utils/* useLocationChange */.SL)(setStyleFromEditProfileSelector);
    const { classes  } = ProfileTipButton_useStyles(style);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(TipButton/* TipButton */.X, {
        className: classes.button,
        receiver: visitingPersona.identifier
    });
}

;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/Tip/index.ts


// EXTERNAL MODULE: ./src/plugins/Avatar/utils/index.ts
var Avatar_utils = __webpack_require__(77066);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/NFT/ProfileNFTAvatar.tsx











async function injectProfileNFTAvatarInTwitter(signal) {
    const watcher = new umd.MutationObserverWatcher((0,selector/* searchProfileSetAvatarSelector */.FK)());
    (0,src_utils/* startWatch */.fy)(watcher, signal);
    (0,src_utils/* createReactRootShadowed */.ou)(watcher.firstDOMProxy.afterShadow, {
        signal
    }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(ProfileNFTAvatar_NFTAvatarInTwitter, {}));
}
const ProfileNFTAvatar_useStyles = (0,entry/* makeStyles */.ZL)()((theme, props)=>({
        root: {
            paddingLeft: props.paddingLeft,
            paddingTop: props.paddingTop,
            paddingRight: props.paddingRight,
            paddingBottom: props.paddingBottom
        }
    })
);
function getStyles() {
    const ele = (0,selector/* searchProfessionalButtonSelector */.$P)().evaluate();
    if (!ele) return {
        paddingTop: '11px',
        paddingLeft: '14px',
        paddingRight: '14px',
        paddingBottom: '14px'
    };
    const style = window.getComputedStyle(ele);
    return {
        paddingTop: style.paddingTop,
        paddingLeft: style.paddingLeft,
        paddingRight: style.paddingRight,
        paddingBottom: style.paddingBottom
    };
}
async function changeImageToActiveElements(image) {
    const imageBuffer = await image.arrayBuffer();
    (0,sdk/* hookInputUploadOnce */.ed)('image/png', 'avatar.png', new Uint8Array(imageBuffer));
    (0,selector/* searchTwitterAvatarOpenFilesSelector */.XL)().evaluate()[0]?.parentElement?.children[0]?.click();
}
function ProfileNFTAvatar_NFTAvatarInTwitter() {
    const { classes  } = ProfileNFTAvatar_useStyles(getStyles());
    const identity = (0,useActivatedUI/* useCurrentVisitingIdentity */.fb)();
    const [avatarEvent, setAvatarEvent] = (0,react.useState)();
    const onChange = async (token)=>{
        if (!token.info.imageURL) return;
        const image = await (0,Avatar_utils/* toPNG */.mr)(token.info.imageURL);
        if (!image) return;
        changeImageToActiveElements(image);
        setAvatarEvent({
            userId: identity.identifier.userId,
            avatarId: (0,user/* getAvatarId */.yd)(identity.avatar ?? ''),
            address: token.contractDetailed.address,
            tokenId: token.tokenId
        });
    };
    const handler = ()=>{
        src_utils/* MaskMessages.events.NFTAvatarUpdated.sendToLocal */.ql.events.NFTAvatarUpdated.sendToLocal(avatarEvent ?? {
            userId: identity.identifier.userId,
            avatarId: (0,user/* getAvatarId */.yd)(identity.avatar ?? ''),
            address: '',
            tokenId: ''
        });
        setAvatarEvent(undefined);
    };
    (0,react.useEffect)(()=>{
        const profileSave = (0,selector/* searchProfileSaveSelector */.$3)().evaluate();
        if (!profileSave) return;
        profileSave.addEventListener('click', handler);
        return ()=>profileSave.removeEventListener('click', handler)
        ;
    }, [
        handler
    ]);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTAvatar/* NFTAvatar */.R, {
        onChange: onChange,
        classes: classes
    });
}

// EXTERNAL MODULE: ./src/plugins/Avatar/SNSAdaptor/NFTBadgeTimeline.tsx
var NFTBadgeTimeline = __webpack_require__(56714);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/utils/avatar.ts

const ClipPath = 'url("#hex-hw-shapeclip-clipconfig")';
function getInjectNodeInfo(ele) {
    const imgEle = ele.firstChild.querySelector('img');
    if (!imgEle) return;
    const nftDom = imgEle.parentNode?.parentNode?.parentNode?.parentNode?.parentNode;
    if (!nftDom) return;
    nftDom.style.overflow = 'unset';
    const avatarParent = nftDom.parentElement;
    let isTwitterNFT = false;
    if (avatarParent) {
        const style = window.getComputedStyle(avatarParent);
        isTwitterNFT = style.clipPath === ClipPath;
    }
    const width = Number(window.getComputedStyle(nftDom).width.replace('px', '') ?? 0);
    const height = Number(window.getComputedStyle(nftDom).height.replace('px', '') ?? 0);
    const dom = imgEle.parentNode?.firstChild;
    if (dom) dom.style.borderRadius = '100%';
    const avatarId = (0,user/* getAvatarId */.yd)(imgEle.src);
    if (!avatarId) return;
    return {
        element: nftDom,
        width,
        height,
        avatarId,
        isTwitterNFT
    };
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/classnames@2.3.1/node_modules/classnames/index.js
var classnames = __webpack_require__(83849);
var classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);
// EXTERNAL MODULE: ../../node_modules/.pnpm/react-use@17.3.2_react-dom@18.0.0+react@18.0.0/node_modules/react-use/esm/useAsyncRetry.js
var useAsyncRetry = __webpack_require__(64452);
;// CONCATENATED MODULE: ./src/plugins/Avatar/hooks/useNFTContainerAtTwitter.ts


function useNFTContainerAtTwitter(screenName) {
    return (0,useAsyncRetry/* default */.Z)(async ()=>{
        return web3_providers_src/* Twitter.getUserNftContainer */.tL.getUserNftContainer(screenName);
    }, [
        web3_providers_src/* Twitter */.tL,
        screenName
    ]);
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/v4.js + 2 modules
var v4 = __webpack_require__(32513);
;// CONCATENATED MODULE: ./src/plugins/Avatar/SNSAdaptor/NFTAvatarClip.tsx








// from twitter page
const ViewBoxWidth = 200;
const ViewBoxHeight = 188;
const rainbowBorderKeyFrames = entry/* keyframes */.F4`
    0%, to {
        stroke: #00f8ff;
    }
    20% {
        stroke: #a4ff00;
    }
    40% {
        stroke: #f7275e;
    }
    60% {
        stroke: #ffd300;
    }
    80% {
        stroke: #ff8a00;
    }
`;
const NFTAvatarClip_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        root: {},
        miniBorder: {
            transform: 'scale(0.94) translate(7px, 6px)',
            strokeWidth: 6,
            stroke: '#00f8ff',
            fill: 'none'
        },
        borderPath: {
            transform: 'scale(0.98, 1.035) translate(3px, -2px)',
            strokeWidth: 3
        },
        background: {
            transform: 'scale(1, 1.05) translate(1px, -3px)',
            fill: 'none',
            strokeWidth: 30,
            stroke: 'black',
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        },
        rainbowBorder: {
            animation: `${rainbowBorderKeyFrames} 6s linear infinite`,
            transition: 'none',
            fill: 'none',
            strokeLinejoin: 'round',
            strokeLinecap: 'round'
        },
        text: {
            transform: 'translate(1px, -5px) ',
            '@supports (translate: 0)': {
                transform: 'none',
                translate: '1px, -5px'
            }
        },
        price: {
            transform: 'translate(0px, -5px) '
        },
        namePath: {
            transform: 'scale(0.9) translate(10px, 10px)'
        }
    })
);
function NamePath(props) {
    const classes = (0,entry/* useStylesExtends */.Bc)(NFTAvatarClip_useStyles(), props);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
        className: classes.root,
        d: "M6.74789,69.55C14.0458,54.2034 22.5561,39.4634 32.1979,25.47L35.3079,20.96C39.1367,15.4049 44.155,10.7724 49.9981,7.3994C55.8413,4.02636 62.3625,1.99743 69.0879,1.46004L74.5479,1.02004C91.4873,-0.340012 108.508,-0.340012 125.448,1.02004L130.908,1.46004C137.633,1.99743 144.155,4.02636 149.998,7.3994C155.841,10.7724 160.859,15.4049 164.688,20.96L167.798,25.43C177.44,39.4234 185.95,54.1634 193.248,69.51",
        id: props.id
    });
}
function PricePath({ id  }) {
    return /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
        d: "M6.74789 118.43C14.0458 133.777 22.5561 148.517 32.1979 162.51L35.3079 167.02C39.1367 172.575 44.155 177.208 49.9981 180.581C55.8413 183.954 62.3625 185.983 69.0879 186.52L74.5479 186.96C91.4873 188.32 108.508 188.32 125.448 186.96L130.908 186.52C137.638 185.976 144.163 183.938 150.006 180.554C155.85 177.17 160.865 172.526 164.688 166.96L167.798 162.45C177.44 148.457 185.95 133.717 193.248 118.37",
        id: id
    });
}
function BorderPath({ id  }) {
    return /*#__PURE__*/ (0,jsx_runtime.jsx)("path", {
        id: id,
        d: "M193.248 69.51C185.95 54.1634 177.44 39.4234 167.798 25.43L164.688 20.96C160.859 15.4049 155.841 10.7724 149.998 7.3994C144.155 4.02636 137.633 1.99743 130.908 1.46004L125.448 1.02004C108.508 -0.340012 91.4873 -0.340012 74.5479 1.02004L69.0879 1.46004C62.3625 1.99743 55.8413 4.02636 49.9981 7.3994C44.155 10.7724 39.1367 15.4049 35.3079 20.96L32.1979 25.47C22.5561 39.4634 14.0458 54.2034 6.74789 69.55L4.39789 74.49C1.50233 80.5829 0 87.2441 0 93.99C0 100.736 1.50233 107.397 4.39789 113.49L6.74789 118.43C14.0458 133.777 22.5561 148.517 32.1979 162.51L35.3079 167.02C39.1367 172.575 44.155 177.208 49.9981 180.581C55.8413 183.954 62.3625 185.983 69.0879 186.52L74.5479 186.96C91.4873 188.32 108.508 188.32 125.448 186.96L130.908 186.52C137.638 185.976 144.163 183.938 150.006 180.554C155.85 177.17 160.865 172.526 164.688 166.96L167.798 162.45C177.44 148.457 185.95 133.717 193.248 118.37L195.598 113.43C198.493 107.337 199.996 100.676 199.996 93.93C199.996 87.1841 198.493 80.5229 195.598 74.43L193.248 69.51Z"
    });
}
function NFTAvatarClip_Text(props) {
    const { xlinkHref , fontSize =12 , text , fill  } = props;
    const classes = (0,entry/* useStylesExtends */.Bc)(NFTAvatarClip_useStyles(), props);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)("text", {
        x: "0%",
        textAnchor: "middle",
        fill: fill,
        fontFamily: "sans-serif",
        className: classes.root,
        children: /*#__PURE__*/ (0,jsx_runtime.jsx)("textPath", {
            xlinkHref: xlinkHref,
            startOffset: "50%",
            rotate: "auto",
            dominantBaseline: "mathematical",
            children: /*#__PURE__*/ (0,jsx_runtime.jsx)("tspan", {
                fontWeight: "bold",
                fontSize: fontSize,
                children: text
            })
        })
    });
}
function NFTAvatarClip(props) {
    const { id =(0,v4/* default */.Z)() , width , height , viewBoxHeight =ViewBoxHeight , viewBoxWidth =ViewBoxWidth , screenName  } = props;
    const classes = (0,entry/* useStylesExtends */.Bc)(NFTAvatarClip_useStyles(), props);
    const { loading , value: avatarMetadata  } = useNFTContainerAtTwitter(screenName ?? '');
    const { value ={
        amount: '0',
        symbol: 'ETH',
        name: '',
        slug: ''
    } , loading: loadingNFT  } = (0,hooks/* useNFT */.e)(avatarMetadata?.address ?? '', avatarMetadata?.token_id ?? '');
    const { amount , name , symbol , slug  } = value;
    if (!avatarMetadata?.address || !avatarMetadata?.token_id) return null;
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)("svg", {
        className: classes.root,
        width: width,
        height: height,
        id: id,
        viewBox: `0 0 ${viewBoxWidth} ${viewBoxHeight}`,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsxs)("defs", {
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(NamePath, {
                        id: `${id}-name-path`,
                        classes: {
                            root: classes.namePath
                        }
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(PricePath, {
                        id: `${id}-price-path`
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)(BorderPath, {
                        id: `${id}-border-path`
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsxs)("linearGradient", {
                        id: `${id}-gradient`,
                        x1: "0%",
                        y1: "0%",
                        x2: "100%",
                        y2: "0",
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime.jsx)("stop", {
                                offset: "0%",
                                stopColor: "#00f8ff"
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)("stop", {
                                offset: "20%",
                                stopColor: "#a4ff00"
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)("stop", {
                                offset: "40%",
                                stopColor: "#f7275e"
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)("stop", {
                                offset: "60%",
                                stopColor: "#ffd300"
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)("stop", {
                                offset: "80%",
                                stopColor: "#ff8a00"
                            }),
                            /*#__PURE__*/ (0,jsx_runtime.jsx)("stop", {
                                offset: "100%",
                                stopColor: "#00f8ff"
                            })
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsxs)("g", {
                children: [
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("pattern", {
                        id: `${id}-pattern`,
                        x: "0",
                        y: "0",
                        width: "300%",
                        height: "100%",
                        patternUnits: "userSpaceOnUse",
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)("circle", {
                            cx: viewBoxWidth / 2,
                            cy: viewBoxHeight / 2,
                            r: Math.max(viewBoxWidth, viewBoxHeight) + 1,
                            fill: `url(#${id}-gradient)`,
                            children: /*#__PURE__*/ (0,jsx_runtime.jsx)("animateTransform", {
                                attributeName: "transform",
                                type: "rotate",
                                dur: "10s",
                                repeatCount: "indefinite",
                                from: `0 ${viewBoxWidth / 2} ${viewBoxHeight / 2}`,
                                to: `360 ${viewBoxWidth / 2} ${viewBoxHeight / 2}`
                            })
                        })
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("use", {
                        xlinkHref: `#${id}-border-path`,
                        className: classes.background
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("use", {
                        xlinkHref: `#${id}-border-path`,
                        className: classnames_default()(classes.rainbowBorder, classes.borderPath)
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("g", {
                        className: classes.text,
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTAvatarClip_Text, {
                            xlinkHref: `#${id}-name-path`,
                            fill: `url(#${id}-pattern)`,
                            text: loading || loadingNFT ? 'loading...' : `${(0,Avatar_utils/* formatText */.RZ)(name, avatarMetadata?.token_id ?? '')} ${slug.toLowerCase() === 'ens' ? 'ENS' : ''}`
                        })
                    }),
                    /*#__PURE__*/ (0,jsx_runtime.jsx)("g", {
                        className: classes.price,
                        children: /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTAvatarClip_Text, {
                            fill: `url(#${id}-pattern)`,
                            xlinkHref: `#${id}-price-path`,
                            text: loading || loadingNFT ? '' : (0,Avatar_utils/* formatPrice */.T4)(amount, symbol)
                        })
                    })
                ]
            })
        ]
    });
}
function NFTAvatarMiniClip(props) {
    const { id =(0,v4/* default */.Z)() , width , height , viewBoxHeight =ViewBoxHeight , viewBoxWidth =ViewBoxWidth , screenName  } = props;
    const classes = (0,entry/* useStylesExtends */.Bc)(NFTAvatarClip_useStyles(), props);
    const identity = (0,useActivatedUI/* useLastRecognizedIdentity */.FB)();
    const { loading , value: avatarMetadata  } = useNFTContainerAtTwitter(screenName ?? identity.identifier.userId);
    if (loading || !avatarMetadata?.address || !avatarMetadata?.token_id) return null;
    return /*#__PURE__*/ (0,jsx_runtime.jsxs)("svg", {
        className: classes.root,
        width: width,
        height: height,
        id: id,
        viewBox: `0 0 ${viewBoxWidth} ${viewBoxHeight}`,
        children: [
            /*#__PURE__*/ (0,jsx_runtime.jsx)("defs", {
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)(BorderPath, {
                    id: `${id}-border-path`
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime.jsx)("g", {
                children: /*#__PURE__*/ (0,jsx_runtime.jsx)("use", {
                    xlinkHref: `#${id}-border-path`,
                    className: classnames_default()(classes.rainbowBorder, classes.miniBorder)
                })
            })
        ]
    });
}

;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/NFT/Avatar.tsx









function getTwitterId(ele) {
    const twitterIdNode = ele.firstChild?.nextSibling.querySelector('[dir="ltr"] > span');
    if (!twitterIdNode) return;
    return twitterIdNode.innerText.trim().replace('@', '');
}
function Avatar_(main, signal) {
    (0,src_utils/* startWatch */.fy)(new umd.MutationObserverWatcher(main()).useForeach((ele, _, meta)=>{
        let remover = ()=>{};
        const remove = ()=>remover()
        ;
        const run = async ()=>{
            const twitterId = getTwitterId(ele);
            if (!twitterId) return;
            const info = getInjectNodeInfo(ele.firstChild);
            if (!info) return;
            const proxy = (0,umd.DOMProxy)({
                afterShadowRootInit: {
                    mode: shared_0/* Flags.using_ShadowDOM_attach_mode */.vU.using_ShadowDOM_attach_mode
                }
            });
            proxy.realCurrent = info.element.firstChild;
            const root = (0,src_utils/* createReactRootShadowed */.ou)(proxy.afterShadow, {
                signal
            });
            root.render(/*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                style: {
                    position: 'absolute',
                    left: 0,
                    top: 0,
                    zIndex: 2
                },
                children: info.isTwitterNFT ? /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTAvatarMiniClip, {
                    width: info.width,
                    height: info.height,
                    screenName: twitterId
                }) : /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTBadgeTimeline/* NFTBadgeTimeline */.J, {
                    userId: twitterId,
                    avatarId: info.avatarId,
                    width: info.width - 4,
                    height: info.height - 4,
                    snsKey: constants/* RSS3_KEY_SNS.TWITTER */.vu.TWITTER
                })
            }));
            remover = root.destroy;
        };
        run();
        return {
            onNodeMutation: run,
            onTargetChanged: run,
            onRemove: remove
        };
    }), signal);
}
async function injectUserNFTAvatarAtTwitter(signal) {
    Avatar_(selector/* postAvatarsContentSelector */.vL, signal);
}

// EXTERNAL MODULE: ./src/plugins/Avatar/SNSAdaptor/NFTAvatarButton.tsx + 1 modules
var NFTAvatarButton = __webpack_require__(80170);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/NFT/NFTAvatarEditProfile.tsx







function injectOpenNFTAvatarEditProfileButton(signal) {
    const watcher = new umd.MutationObserverWatcher((0,selector/* searchEditProfileSelector */.wP)());
    (0,src_utils/* startWatch */.fy)(watcher, signal);
    (0,src_utils/* createReactRootShadowed */.ou)(watcher.firstDOMProxy.beforeShadow, {
        signal
    }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(OpenNFTAvatarEditProfileButtonInTwitter, {}));
}
const NFTAvatarEditProfile_useStyles = (0,entry/* makeStyles */.ZL)()((theme, props)=>({
        root: {
            minHeight: props.minHeight,
            fontSize: props.fontSize,
            marginBottom: props.marginBottom,
            marginTop: 1,
            marginRight: theme.spacing(0.5)
        }
    })
);
function OpenNFTAvatarEditProfileButtonInTwitter() {
    const [style, setStyle] = (0,react.useState)({
        minHeight: 32,
        fontSize: 14,
        marginBottom: 11
    });
    const onClick = ()=>{
        const editDom = (0,selector/* searchEditProfileSelector */.wP)().evaluate();
        editDom?.click();
    };
    const setStyleFromEditProfileSelector = ()=>{
        const editDom = (0,selector/* searchEditProfileSelector */.wP)().evaluate();
        if (!editDom) return;
        const css = window.getComputedStyle(editDom);
        setStyle({
            minHeight: Number(css.minHeight.replace('px', '')),
            fontSize: Number(css.fontSize.replace('px', '')),
            marginBottom: Number(css.marginBottom.replace('px', ''))
        });
    };
    (0,react.useEffect)(()=>setStyleFromEditProfileSelector()
    , []);
    (0,src_utils/* useLocationChange */.SL)(()=>setStyleFromEditProfileSelector()
    );
    const { classes  } = NFTAvatarEditProfile_useStyles(style);
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTAvatarButton/* NFTAvatarButton */.m, {
        classes: {
            root: classes.root
        },
        onClick: onClick
    });
}

;// CONCATENATED MODULE: ./src/plugins/Avatar/SNSAdaptor/NFTBadgeTweet.tsx




const NFTBadgeTweet_useStyles = (0,entry/* makeStyles */.ZL)()((theme)=>({
        root: {}
    })
);
function NFTBadgeTweet(props) {
    const { avatarId , width , height , snsKey  } = props;
    const identity = (0,useActivatedUI/* useLastRecognizedIdentity */.FB)();
    if (!identity?.identifier.userId) return null;
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTBadgeTimeline/* NFTBadgeTimeline */.J, {
        width: width,
        height: height,
        userId: identity?.identifier.userId,
        avatarId: avatarId,
        snsKey: snsKey
    });
}

;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/NFT/TweetNFTAvatar.tsx









function TweetNFTAvatar_(main, signal) {
    (0,src_utils/* startWatch */.fy)(new umd.MutationObserverWatcher(main()).useForeach((ele, _, meta)=>{
        let remover = ()=>{};
        const remove = ()=>remover()
        ;
        const run = async ()=>{
            const info = getInjectNodeInfo(ele.firstChild);
            if (!info) return;
            const proxy = (0,umd.DOMProxy)({
                afterShadowRootInit: {
                    mode: shared_0/* Flags.using_ShadowDOM_attach_mode */.vU.using_ShadowDOM_attach_mode
                }
            });
            proxy.realCurrent = info.element.firstChild;
            const root = (0,src_utils/* createReactRootShadowed */.ou)(proxy.afterShadow, {
                signal
            });
            root.render(/*#__PURE__*/ (0,jsx_runtime.jsx)("div", {
                style: {
                    position: 'absolute',
                    top: 0,
                    left: 0,
                    zIndex: 2
                },
                children: info.isTwitterNFT ? /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTAvatarMiniClip, {
                    width: info.width,
                    height: info.height
                }) : /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTBadgeTweet, {
                    width: info.width - 4,
                    height: info.height - 4,
                    avatarId: info.avatarId,
                    snsKey: constants/* RSS3_KEY_SNS.TWITTER */.vu.TWITTER
                })
            }));
            remover = root.destroy;
        };
        run();
        return {
            onNodeMutation: run,
            onTargetChanged: run,
            onRemove: remove
        };
    }), signal);
}
async function injectUserNFTAvatarAtTweet(signal) {
    TweetNFTAvatar_(selector/* searchTweetAvatarSelector */.Ab, signal);
    TweetNFTAvatar_(selector/* searchRetweetAvatarSelector */.bQ, signal);
}

// EXTERNAL MODULE: ../web3-shared/base/src/index.ts + 7 modules
var base_src = __webpack_require__(89260);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/injection/NFT/NFTAvatarClip.tsx









function injectNFTAvatarClipInTwitter(signal) {
    const watcher = new umd.MutationObserverWatcher((0,selector/* searchTwitterAvatarNFTSelector */.Dc)());
    (0,src_utils/* startWatch */.fy)(watcher, signal);
    (0,src_utils/* createReactRootShadowed */.ou)(watcher.firstDOMProxy.afterShadow, {
        signal
    }).render(/*#__PURE__*/ (0,jsx_runtime.jsx)(NFTAvatarClipInTwitter, {}));
}
const NFT_NFTAvatarClip_useStyles = (0,entry/* makeStyles */.ZL)()(()=>({
        root: {
            position: 'absolute',
            left: 0,
            right: 0,
            top: 0,
            bottom: 0
        },
        text: {},
        icon: {}
    })
);
function NFTAvatarClipInTwitter() {
    const { classes  } = NFT_NFTAvatarClip_useStyles();
    const windowSize = (0,useWindowSize/* default */.Z)();
    const location = (0,useLocation/* default */.Z)();
    const borderElement = (0,react.useRef)();
    const linkDom = (0,react.useRef)();
    const size = (0,react.useMemo)(()=>{
        const ele = (0,selector/* searchTwitterAvatarNFTSelector */.Dc)().evaluate()?.closest('a')?.querySelector('img');
        if (!ele) return 0;
        const style = window.getComputedStyle(ele);
        return Number.parseInt(style.width.replace('px', '') ?? 0, 10);
    }, [
        windowSize,
        location
    ]);
    const twitterId = (0,react.useMemo)(()=>{
        const ele = (0,selector/* searchTwitterAvatarNFTSelector */.Dc)().evaluate()?.closest('a');
        if (!ele) return;
        const path = ele.getAttribute('href');
        if (!path) return;
        const [, userId] = path.match(/^\/(\w+)\/nft$/) ?? [];
        return userId;
    }, [
        location
    ]);
    (0,react.useEffect)(()=>{
        const timer = setTimeout(()=>{
            linkDom.current = (0,selector/* searchTwitterAvatarNFTLinkSelector */.Fv)().evaluate();
            if (linkDom.current?.firstElementChild && linkDom.current?.childNodes.length === 4) {
                borderElement.current = linkDom.current.firstElementChild;
                // remove useless border
                linkDom.current.removeChild(linkDom.current?.firstElementChild);
            }
            const link = linkDom.current;
            link.style.backgroundColor = 'transparent';
            link.style.boxShadow = 'none';
        }, 5000);
        return ()=>{
            clearTimeout(timer);
            if (borderElement.current && borderElement.current !== linkDom.current?.firstElementChild && linkDom.current) linkDom.current.insertBefore(borderElement.current, linkDom.current.firstChild);
        };
    }, [
        location.pathname
    ]);
    if ((0,base_src/* isZero */.Fr)(size) || !twitterId) return null;
    return /*#__PURE__*/ (0,jsx_runtime.jsx)(NFTAvatarClip, {
        screenName: twitterId,
        width: size,
        height: size,
        classes: {
            root: classes.root,
            text: classes.text,
            icon: classes.icon
        }
    });
}

// EXTERNAL MODULE: ../../node_modules/.pnpm/@mui+material@5.6.1_1376d0c029fe63cac75d7e36fe4212f4/node_modules/@mui/material/Link/Link.js + 1 modules
var Link = __webpack_require__(93775);
// EXTERNAL MODULE: ./shared-ui/TypedMessageRender/Components/Text.tsx
var Components_Text = __webpack_require__(83548);
;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/customization/render-fragments.tsx




const TwitterRenderFragments = {
    AtLink: /*#__PURE__*/ (0,react.memo)(function(props) {
        const target = '/' + props.children.slice(1);
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(Link/* default */.Z, {
            href: target,
            children: props.children
        });
    }),
    HashLink: /*#__PURE__*/ (0,react.memo)(function(props) {
        const text = props.children.slice(1);
        const target = `/hashtag/${encodeURIComponent(text)}?src=hashtag_click`;
        const { hasMatch , ...events } = (0,Components_Text/* useTagEnhancer */.fR)('hash', text);
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(Link/* default */.Z, {
            ...events,
            href: target,
            children: props.children
        });
    }),
    CashLink: /*#__PURE__*/ (0,react.memo)(function(props) {
        const target = `/search?q=${encodeURIComponent(props.children)}&src=cashtag_click`;
        const { hasMatch , ...events } = (0,Components_Text/* useTagEnhancer */.fR)('cash', props.children.slice(1));
        return /*#__PURE__*/ (0,jsx_runtime.jsx)(Link/* default */.Z, {
            ...events,
            href: target,
            children: props.children
        });
    }),
    Image: ()=>null
};

;// CONCATENATED MODULE: ./src/social-network-adaptor/twitter.com/ui-provider.ts







































const useInjectedDialogClassesOverwriteTwitter = (0,entry/* makeStyles */.ZL)()((theme)=>{
    const smallQuery = `@media (max-width: ${theme.breakpoints.values.sm}px)`;
    return {
        root: {
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            [smallQuery]: {
                display: 'block !important'
            }
        },
        container: {
            alignItems: 'center'
        },
        paper: {
            width: '600px !important',
            maxWidth: 'none',
            boxShadow: 'none',
            backgroundImage: 'none',
            [smallQuery]: {
                display: 'block !important',
                margin: 12
            }
        },
        dialogTitle: {
            display: 'flex',
            alignItems: 'center',
            padding: '3px 16px',
            borderBottom: `1px solid ${theme.palette.mode === 'dark' ? '#2f3336' : '#eff3f4'}`,
            '& > h2': {
                display: 'inline-block',
                whiteSpace: 'nowrap',
                overflow: 'hidden',
                textOverflow: 'ellipsis'
            },
            [smallQuery]: {
                display: 'flex',
                justifyContent: 'start',
                maxWidth: 600,
                margin: '0 auto',
                padding: '7px 14px 6px 11px !important'
            }
        },
        dialogContent: {
            padding: 16,
            [smallQuery]: {
                display: 'flex',
                flexDirection: 'column',
                maxWidth: 600,
                margin: '0 auto',
                padding: '7px 14px 6px'
            }
        },
        dialogActions: {
            padding: '6px 16px',
            [smallQuery]: {
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'space-between',
                maxWidth: 600,
                margin: '0 auto',
                padding: '7px 14px 6px !important'
            }
        },
        dialogBackdropRoot: {
            backgroundColor: theme.palette.mode === 'dark' ? 'rgba(110, 118, 125, 0.4)' : 'rgba(0, 0, 0, 0.4)'
        }
    };
});
const twitterUI = {
    ...base/* twitterBase */.oQ,
    ...shared/* twitterShared */.p,
    automation: {
        maskCompositionDialog: {
            open: openComposeBoxTwitter
        },
        nativeCommentBox: undefined,
        nativeCompositionDialog: {
            appendText: pasteTextToCompositionTwitter,
            // TODO: make a better way to detect
            attachImage: (0,AttachImageToComposition/* pasteImageToCompositionDefault */.f)(()=>false
            )
        },
        redirect: {
            newsFeed: gotoNewsFeedPageTwitter,
            profilePage: gotoProfilePageTwitter
        }
    },
    collecting: {
        identityProvider: IdentityProviderTwitter,
        currentVisitingIdentityProvider: CurrentVisitingIdentityProviderTwitter,
        postsProvider: PostProviderTwitter,
        getSearchedKeyword: getSearchedKeywordAtTwitter
    },
    customization: {
        paletteMode: PaletteModeProviderTwitter,
        sharedComponentOverwrite: {
            InjectedDialog: {
                classes: useInjectedDialogClassesOverwriteTwitter
            }
        },
        componentOverwrite: {
            RenderFragments: TwitterRenderFragments
        },
        useTheme: useThemeTwitterVariant,
        i18nOverwrite: i18NOverwriteTwitter
    },
    init (signal) {
        const friends = social_network/* stateCreator.friends */.ZZ.friends();
        const profiles = social_network/* stateCreator.profiles */.ZZ.profiles();
        (0,InitFriends/* InitAutonomousStateFriends */.f)(signal, friends, shared/* twitterShared.networkIdentifier */.p.networkIdentifier);
        (0,InitProfiles/* InitAutonomousStateProfiles */.S)(signal, profiles, shared/* twitterShared.networkIdentifier */.p.networkIdentifier);
        return {
            friends,
            profiles
        };
    },
    injection: {
        toolbox: injectToolboxHintAtTwitter,
        searchResult: injectSearchResultBoxAtTwitter,
        profileTab: injectProfileTabAtTwitter,
        profileTabContent: injectProfileTabContentAtTwitter,
        profileSlider: injectProfileSliderAtTwitter,
        enhancedPostRenderer: injectPostReplacerAtTwitter,
        pageInspector: (0,PageInspector/* injectPageInspectorDefault */.R)(),
        postInspector: injectPostInspectorAtTwitter,
        postActions: injectPostActionsAtTwitter,
        setupPrompt: injectSetupPromptAtTwitter,
        newPostComposition: {
            start: injectPostBoxComposed,
            supportedInputTypes: {
                text: true,
                image: true
            },
            supportedOutputTypes: {
                text: true,
                image: true
            }
        },
        setupWizard: (0,StartSetupGuide/* createTaskStartSetupGuideDefault */.Z)(),
        userBadge: injectMaskUserBadgeAtTwitter,
        commentComposition: undefined,
        userAvatar: injectUserNFTAvatarAtTwitter,
        enhancedProfileNFTAvatar: injectProfileNFTAvatarInTwitter,
        profileAvatar: injectNFTAvatarInTwitter,
        profileTip: injectOpenTipButtonOnProfile,
        openNFTAvatar: injectOpenNFTAvatarEditProfileButton,
        postAndReplyNFTAvatar: injectUserNFTAvatarAtTweet,
        avatarClipNFT: injectNFTAvatarClipInTwitter
    },
    configuration: {
        nextIDConfig: {
            enable: true,
            platform: src/* NextIDPlatform.Twitter */.Vd.Twitter,
            collectVerificationPost: collectVerificationPost
        },
        steganography: {
            password () {
                // ! Change this might be a breaking change !
                return new src/* ProfileIdentifier */.WO('twitter.com', src/* ProfileIdentifier.getUserName */.WO.getUserName(IdentityProviderTwitter.recognized.value.identifier) || src/* ProfileIdentifier.getUserName */.WO.getUserName(social_network/* globalUIState.profiles.value.0.identifier */.EJ.profiles.value[0].identifier) || (0,esm/* unreachable */.t1)('Cannot figure out password')).toText();
            }
        }
    }
};
/* harmony default export */ const ui_provider = (twitterUI);


/***/ }),

/***/ 25954:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IF": () => (/* binding */ getBio),
/* harmony export */   "S_": () => (/* binding */ usernameValidator),
/* harmony export */   "WM": () => (/* binding */ getTwitterId),
/* harmony export */   "o1": () => (/* binding */ getPersonalHomepage),
/* harmony export */   "wX": () => (/* binding */ getAvatar),
/* harmony export */   "y": () => (/* binding */ getNickname),
/* harmony export */   "yd": () => (/* binding */ getAvatarId)
/* harmony export */ });
/* harmony import */ var lodash_unified__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(32139);
/* harmony import */ var _selector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43399);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6955);



/**
 * @link https://help.twitter.com/en/managing-your-account/twitter-username-rules
 */ const usernameValidator = (name)=>{
    for (const v of [
        /(twitter|admin)/i,
        /.{16,}/,
        /\W/
    ]){
        if (!(0,lodash_unified__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(v.exec(name))) {
            return false;
        }
    }
    if (name.length < 4) return false;
    return true;
};
const getNickname = ()=>{
    const node = (0,_selector__WEBPACK_IMPORTED_MODULE_0__/* .searchNickNameSelector */ .rf)().evaluate();
    if (!node) return '';
    return (0,_utils__WEBPACK_IMPORTED_MODULE_1__/* .collectNodeText */ .aW)(node);
};
const getTwitterId = ()=>{
    const ele = (0,_selector__WEBPACK_IMPORTED_MODULE_0__/* .searchAvatarSelector */ .Ls)().evaluate()?.closest('a') || (0,_selector__WEBPACK_IMPORTED_MODULE_0__/* .searchNFTAvatarSelector */ .dA)().evaluate()?.closest('a');
    if (ele) {
        const link = ele.getAttribute('href');
        if (link) {
            const [, userId] = link.match(/^\/(\w+)\/(photo|nft)$/) ?? [];
            return userId;
        }
    }
    return '';
};
const getBio = ()=>{
    const node = (0,_selector__WEBPACK_IMPORTED_MODULE_0__/* .profileBioSelector */ .Rj)().evaluate();
    return node ? (0,_utils__WEBPACK_IMPORTED_MODULE_1__/* .collectNodeText */ .aW)(node) : '';
};
const getPersonalHomepage = ()=>{
    const node = (0,_selector__WEBPACK_IMPORTED_MODULE_0__/* .personalHomepageSelector */ .IQ)().evaluate();
    return node?.getAttribute('href') || '';
};
const getAvatar = ()=>{
    const node = (0,_selector__WEBPACK_IMPORTED_MODULE_0__/* .searchAvatarSelector */ .Ls)().evaluate() || (0,_selector__WEBPACK_IMPORTED_MODULE_0__/* .searchNFTAvatarSelector */ .dA)().evaluate();
    if (node) {
        const imageURL = node.getAttribute('src') ?? '';
        return imageURL.trim();
    }
    return '';
};
const TWITTER_AVATAR_ID_MATCH = /^\/profile_images\/(\d+)/;
const getAvatarId = (avatarURL)=>{
    if (!avatarURL) return '';
    const _url = new URL(avatarURL);
    const match = _url.pathname.match(TWITTER_AVATAR_ID_MATCH);
    if (!match) return '';
    return match[1];
};


/***/ }),

/***/ 88674:
/***/ ((module) => {

module.exports = JSON.parse('{"light":{"grey":{"50":"#eff3f4","200":"#cfd9de","300":"#b9cad3","700":"#536471"},"text":{"primary":"#0f1419","secondary":"#536471","strong":"#111418","buttonText":"#FFFFFF"},"background":{"default":"#F6F8F8","input":"#EDF1F2","tipMask":"rgba(0, 0, 0, 0.85)","messageShadow":"rgba(101, 119, 134, 0.2)"},"error":{"main":"#F4212E"},"divider":"#EFF3F4","secondaryDivider":"#CFD9DE","action":{"buttonHover":"#272C30","bgHover":"#EDEFEF","mask":"rgba(0, 0, 0, 0.4)"}},"light_high_contrast":{"grey":{"50":"#cfd9de","200":"#697987","300":"#697987","700":"#3b4c5c"},"text":{"primary":"#0f1419","secondary":"#536471","strong":"#111418","buttonText":"#FFFFFF"},"background":{"default":"#F6F8F8","input":"#EDF1F2","tipMask":"rgba(0, 0, 0, 0.85)","messageShadow":"rgba(101, 119, 134, 0.2)"},"error":{"main":"#FF5555"},"divider":"#EFF3F4","secondaryDivider":"#CFD9DE","action":{"buttonHover":"#272C30","bgHover":"#EDEFEF","mask":"rgba(0, 0, 0, 0.4)"}},"dark":{"grey":{"50":"#253341","200":"#3d5466","300":"#6b7d8c","700":"#8899a6"},"text":{"primary":"#EFF3F4","secondary":"#8899A6","strong":"#FFFFFF","buttonText":"#0F1419"},"background":{"default":"#18232E","input":"#212D39","tipMask":"rgba(255, 255, 255, 0.85)","messageShadow":"rgba(136, 153, 166, 0.2)"},"error":{"main":"#FF5555"},"divider":"#38444D","secondaryDivider":"#38444D","action":{"buttonHover":"#D7DBDC","bgHover":"#1D2933","mask":"rgba(91, 112, 131, 0.4)"}},"dark_high_contrast":{"grey":{"50":"#10171e","200":"#697987","300":"#92a4b3","700":"#b8cbd9"},"text":{"primary":"#EFF3F4","secondary":"#8899A6","strong":"#FFFFFF","buttonText":"#0F1419"},"error":{"main":"#FF5555"},"divider":"#38444D","secondaryDivider":"#38444D","background":{"default":"#18232E","input":"#212D39","tipMask":"rgba(255, 255, 255, 0.85)","messageShadow":"rgba(136, 153, 166, 0.2)"},"action":{"buttonHover":"#D7DBDC","bgHover":"#1D2933","mask":"rgba(91, 112, 131, 0.4)"}},"darker":{"grey":{"50":"#202327","200":"#2f3336","300":"#3d4145","700":"#6e767d"},"text":{"primary":"#D9D9D9","secondary":"#6E767D","strong":"#EFF3F4","buttonText":"#0F1419"},"background":{"default":"#15171A","input":"#1D2023","tipMask":"rgba(255, 255, 255, 0.85)","messageShadow":"rgba(255, 255, 255, 0.2)"},"error":{"main":"#FF5555"},"divider":"#2F3336","secondaryDivider":"#2F3336","action":{"buttonHover":"#D7dBDC","bgHover":"#1A1D20","mask":"rgba(91, 112, 131, 0.4)"}},"darker_high_contrast":{"grey":{"50":"#121517","200":"#3d4145","300":"#6e767d","700":"#929ca6"},"text":{"primary":"#D9D9D9","secondary":"#6E767D","strong":"#EFF3F4","buttonText":"#0F1419"},"error":{"main":"#FF5555"},"divider":"#2F3336","secondaryDivider":"#2F3336","background":{"default":"#15171A","input":"#1D2023","tipMask":"rgba(255, 255, 255, 0.85)","messageShadow":"rgba(255, 255, 255, 0.2)"},"action":{"buttonHover":"#D7dBDC","bgHover":"#1A1D20","mask":"rgba(91, 112, 131, 0.4)"}}}');

/***/ })

}]);